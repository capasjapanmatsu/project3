<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- üöÄ ÈáçË¶Å„É™„ÇΩ„Éº„Çπ„ÅÆpreloadÔºàÊúÄÂÑ™ÂÖàÔºâ-->
  <link rel="preload" href="/favicon.svg" as="image" />
  
  
  <!-- üéØ „Éï„Ç©„É≥„ÉàÊúÄÈÅ©Âåñ -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  
  <!-- üì° Â§ñÈÉ®APIÊúÄÈÅ©Âåñ -->
  <link rel="preconnect" href="https://maps.googleapis.com" />
  <link rel="dns-prefetch" href="https://supabase.co" />
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" />
  
  <!-- üé® ÈáçË¶Å„Éö„Éº„Ç∏„ÅÆprefetch„ÅØÂàùÊúüÊèèÁîªÂæå„Å´ÈÅÖÂª∂ÂÆüË°åÔºàÂàùÊúüË≤†Ëç∑ËªΩÊ∏õÔºâ -->
  <script>
    (function(){
      const schedule = () => {
        const urls = ['/login','/parks','/dashboard'];
        urls.forEach((u) => {
          const l = document.createElement('link');
          l.rel = 'prefetch';
          l.href = u;
          document.head.appendChild(l);
        });
      };
      if ('requestIdleCallback' in window) {
        requestIdleCallback(schedule);
      } else {
        window.addEventListener('load', () => setTimeout(schedule, 1500));
      }
    })();
  </script>
  
  <!-- Critical CSS for above-the-fold content -->
  <style>
    /* Critical styles for initial paint */
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    html{font-family:system-ui,-apple-system,sans-serif;line-height:1.6}
    body{background:#fff;color:#1a1a1a;-webkit-font-smoothing:antialiased;overflow-x:hidden}
    
    /* Loading screen - ÊúÄÂÑ™ÂÖàË°®Á§∫ */
    .loading-screen{position:fixed;inset:0;background:#fff;display:flex;align-items:center;justify-content:center;z-index:9999;transition:opacity 0.3s ease}
    .loading-spinner{width:32px;height:32px;border:3px solid #e5e7eb;border-top:3px solid #3b82f6;border-radius:50%;animation:spin 1s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
    
    /* Header/Navigation - Above-the-fold */
    nav{background:#fff;border-bottom:1px solid #e5e7eb;position:sticky;top:0;z-index:50;min-height:64px}
    
    /* Hero section - Above-the-fold */
    .hero-section{min-height:60vh;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);display:flex;align-items:center;justify-content:center;color:white}
    
    /* Skip navigation */
    #skip-to-content{position:absolute;top:-40px;left:0;background:#3B82F6;color:white;padding:8px;z-index:100;text-decoration:none;border-radius:4px}
    #skip-to-content:focus{top:0}
    
    /* Critical layout containers */
    .container{max-width:1200px;margin:0 auto;padding:0 1rem}
    .main-content{min-height:calc(100vh - 64px)}
    
    /* Placeholder styles for non-critical content */
    .lazy-content{opacity:0;transform:translateY(20px);transition:opacity 0.3s ease,transform 0.3s ease}
    .lazy-content.loaded{opacity:1;transform:translateY(0)}
  </style>
  
  <meta name="description" content="ÊÑõÁä¨„Å®„ÅÆ„ÅäÊï£Ê≠©„Çí„ÇÇ„Å£„Å®Ê•Ω„Åó„Åè„ÄÇÂÖ®ÂõΩ„ÅÆ„Éâ„ÉÉ„Ç∞„É©„É≥„ÇíÁ∞°Âçò„Å´Ê§úÁ¥¢„Éª‰∫àÁ¥Ñ„Åß„Åç„Çã„Çµ„Éº„Éì„Çπ„Åß„Åô„ÄÇ" />
  <meta name="theme-color" content="#3B82F6" />
  
  <!-- Content Security Policy -->
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'self' 'unsafe-inline' 'unsafe-eval' https://js.stripe.com https://maps.googleapis.com;
    style-src 'self' 'unsafe-inline' https://fonts.googleapis.com data: blob:;
    style-src-elem 'self' 'unsafe-inline' https://fonts.googleapis.com data: blob:;
    font-src 'self' https://fonts.gstatic.com data: blob:;
    img-src 'self' data: https: blob:;
    connect-src 'self' https: wss: ws://localhost:* ws://127.0.0.1:* http://localhost:* http://127.0.0.1:* https://api.stripe.com https://*.supabase.co https://maps.googleapis.com;
    frame-src https://js.stripe.com https://hooks.stripe.com;
    object-src 'none';
    base-uri 'self';
    form-action 'self';
  " />
  
  <!-- Critical resource preloads ONLY -->
  <link rel="preload" href="/favicon.svg" as="image" type="image/svg+xml">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <!-- Critical DNS prefetch ONLY -->
  <link rel="dns-prefetch" href="//omsejxvwxfgohohfnyhl.supabase.co">
  
  <!-- Defer non-critical DNS prefetch -->
  <script>
    // Defer non-critical resource loading
    window.addEventListener('load', function() {
      // Defer Stripe and Maps DNS prefetch
      const deferredPrefetch = ['//js.stripe.com', '//images.pexels.com'];
      deferredPrefetch.forEach(function(url) {
        const link = document.createElement('link');
        link.rel = 'dns-prefetch';
        link.href = url;
        document.head.appendChild(link);
      });
      
      // Remove loading screen after initial load
      const loadingScreen = document.querySelector('.loading-screen');
      if (loadingScreen) {
        setTimeout(function() {
          loadingScreen.style.opacity = '0';
          setTimeout(function() {
            loadingScreen.remove();
          }, 300);
        }, 500);
      }
    });
  </script>
  
  <link rel="manifest" href="/manifest.json" />
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png" />
  <!-- Èùû„ÇØ„É™„ÉÜ„Ç£„Ç´„É´ÁîªÂÉè„ÅÆÈÅÖÂª∂Ë™≠„ÅøËæº„Åø„ÇíÊòéÁ§∫ -->
  <link rel="preload" as="image" href="/icons/icon_android_144x144.png" imagesrcset="/icons/icon_android_144x144.png 1x" fetchpriority="low">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://dogparkjp.com/" />
  <meta property="og:title" content="„Éâ„ÉÉ„Ç∞„Éë„Éº„ÇØJP" />
  <meta property="og:description" content="ÊÑõÁä¨„Å®„ÅÆ„ÅäÊï£Ê≠©„Çí„ÇÇ„Å£„Å®Ê•Ω„Åó„Åè„ÄÇÂÖ®ÂõΩ„ÅÆ„Éâ„ÉÉ„Ç∞„É©„É≥„ÇíÁ∞°Âçò„Å´Ê§úÁ¥¢„Éª‰∫àÁ¥Ñ„Åß„Åç„Çã„Çµ„Éº„Éì„Çπ„Åß„Åô„ÄÇ" />
  <meta property="og:image" content="https://dogparkjp.com/og-image.jpg" />
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:url" content="https://dogparkjp.com/" />
  <meta name="twitter:title" content="„Éâ„ÉÉ„Ç∞„Éë„Éº„ÇØJP" />
  <meta name="twitter:description" content="ÊÑõÁä¨„Å®„ÅÆ„ÅäÊï£Ê≠©„Çí„ÇÇ„Å£„Å®Ê•Ω„Åó„Åè„ÄÇÂÖ®ÂõΩ„ÅÆ„Éâ„ÉÉ„Ç∞„É©„É≥„ÇíÁ∞°Âçò„Å´Ê§úÁ¥¢„Éª‰∫àÁ¥Ñ„Åß„Åç„Çã„Çµ„Éº„Éì„Çπ„Åß„Åô„ÄÇ" />
  <meta name="twitter:image" content="https://dogparkjp.com/og-image.jpg" />
  
  <title>DogPark JP - ÊÑõÁä¨„Å®Ê•Ω„Åó„ÇÄ„Éâ„ÉÉ„Ç∞„É©„É≥Ê§úÁ¥¢„Éª‰∫àÁ¥Ñ„Çµ„Ç§„Éà</title>
</head>
<body>
  <a href="#main-content" id="skip-to-content">„Ç≥„É≥„ÉÜ„É≥„ÉÑ„Å´„Çπ„Ç≠„ÉÉ„Éó</a>
  <div id="root">
    <!-- Critical above-the-fold skeleton -->
    <div class="loading-screen">
      <div class="container">
        <div class="loading-spinner"></div>
        <p style="margin-top: 16px; color: #6b7280; font-size: 14px;">Ë™≠„ÅøËæº„Åø‰∏≠...</p>
      </div>
    </div>
  </div>
  <div id="modal-root"></div>
  
  <!-- „Åô„Åπ„Å¶„ÅÆimg„Å∏ lazy/async decoding „Çí„Éá„Éï„Ç©„É´„ÉàÈÅ©Áî®ÔºàÂÆâÂÖ®Ôºâ -->
  <script>
    (function(){
      const applyImgHints = () => {
        document.querySelectorAll('img').forEach((img) => {
          if (!img.hasAttribute('loading')) img.setAttribute('loading','lazy');
          if (!img.hasAttribute('decoding')) img.setAttribute('decoding','async');
          img.fetchPriority = 'low';
        });
      };
      new MutationObserver(applyImgHints).observe(document.documentElement,{subtree:true,childList:true});
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', applyImgHints);
      } else {
        applyImgHints();
      }
    })();
  </script>
  
  <!-- PWA „Ç§„É≥„Çπ„Éà„Éº„É´Áî®„ÅÆÈö†„Åó„Éú„Çø„É≥ -->
  <button 
    id="pwa-install-button" 
    style="display: none;" 
    aria-hidden="true"
  ></button>
  
  <!-- Critical path: Load app immediately -->
  <script type="module" src="/src/main.tsx"></script>
  
  <!-- Non-critical: Service Worker registration (‰∏ÄÊôÇÁöÑ„Å´ÁÑ°ÂäπÂåñ) -->
  <script>
    // if ('serviceWorker' in navigator) {
    //   window.addEventListener('load', function() {
    //     navigator.serviceWorker.register('/sw.js')
    //       .then(function(registration) {
    //         console.log('SW registered: ', registration);
    //       })
    //       .catch(function(registrationError) {
    //         console.log('SW registration failed: ', registrationError);
    //       });
    //   });
    // }
  </script>
</body>
</html>