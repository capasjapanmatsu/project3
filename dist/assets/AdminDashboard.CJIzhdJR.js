var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,r=(s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,n=(e,s)=>{for(var t in s||(s={}))i.call(s,t)&&r(e,t,s[t]);if(a)for(var t of a(s))l.call(s,t)&&r(e,t,s[t]);return e},c=(e,a)=>s(e,t(a)),d=(e,s,t)=>new Promise((a,i)=>{var l=e=>{try{n(t.next(e))}catch(s){i(s)}},r=e=>{try{n(t.throw(e))}catch(s){i(s)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,r);n((t=t.apply(e,s)).next())});import{A as x,s as m,j as o,C as h,B as j,u as p}from"./index.CQlxbczY.js";import{r as u}from"./vendor.CKEClKZl.js";import{u as g,L as v}from"./router.B_7Atevv.js";import{I as N}from"./Input.DMWrIIWM.js";import{aC as f,p as b,E as y,r as w,aD as _,Q as k,H as P,a as S,g as I,e as C,aE as F,aF as z,A as R,U as D,b as V,i as $,ag as M,aG as O,n as q,j as E,aA as U,B as A,x as L,D as T}from"./ui.C72fRZ1L.js";import"./supabase.X3H3st79.js";const J=({onError:e,onSuccess:s})=>{const{clientIP:t}=x(),[a,i]=u.useState([]),[l,r]=u.useState(!0),[p,g]=u.useState(!1),[v,I]=u.useState(null),[C,F]=u.useState({ip_address:"",description:"",is_active:!0});u.useEffect(()=>{z()},[]);const z=()=>d(void 0,null,function*(){try{r(!0);const{data:s,error:t}=yield m.from("ip_whitelist").select("*").order("created_at",{ascending:!1});if(t)return void e(`IPホワイトリストの取得に失敗しました: ${t.message}`);i(s||[])}catch(s){e("IPホワイトリストの取得中にエラーが発生しました")}finally{r(!1)}});return o.jsxs("div",{className:"space-y-6",children:[o.jsx(h,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(f,{className:"w-5 h-5 text-blue-500"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"現在のIPアドレス"}),o.jsx("p",{className:"text-sm text-gray-600",children:t||"取得中..."})]})]}),o.jsxs(j,{variant:"secondary",size:"sm",onClick:()=>{t&&(F({ip_address:`${t}/32`,description:"現在のIPアドレス",is_active:!0}),g(!0))},disabled:!t,children:[o.jsx(b,{className:"w-4 h-4 mr-1"}),"ホワイトリストに追加"]})]})}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"IPホワイトリスト管理"}),o.jsxs(j,{onClick:()=>g(!0),className:"flex items-center space-x-2",children:[o.jsx(b,{className:"w-4 h-4"}),o.jsx("span",{children:"新規作成"})]})]}),p&&o.jsxs(h,{className:"p-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:v?"IPホワイトリスト編集":"IPホワイトリスト作成"}),o.jsxs("form",{onSubmit:t=>d(void 0,null,function*(){if(t.preventDefault(),C.ip_address&&C.description)try{const t={ip_address:C.ip_address,description:C.description,is_active:C.is_active};if(v){const{error:a}=yield m.from("ip_whitelist").update(t).eq("id",v.id);if(a)return void e(`IPホワイトリストの更新に失敗しました: ${a.message}`);s("IPホワイトリストを更新しました")}else{const{error:a}=yield m.from("ip_whitelist").insert([t]);if(a)return void e(`IPホワイトリストの作成に失敗しました: ${a.message}`);s("IPホワイトリストを作成しました")}F({ip_address:"",description:"",is_active:!0}),g(!1),I(null),yield z()}catch(a){e("IPホワイトリストの保存中にエラーが発生しました")}else e("IPアドレスと説明は必須です")}),className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium mb-1",children:["IPアドレス/CIDR ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx(N,{type:"text",value:C.ip_address,onChange:e=>F(c(n({},C),{ip_address:e.target.value})),placeholder:"例: 192.168.1.0/24 または 192.168.1.100/32",label:"IPアドレス/CIDR",required:!0}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"CIDR形式で入力してください。単一IPの場合は /32 を付けてください。"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium mb-1",children:["説明 ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx(N,{type:"text",value:C.description,onChange:e=>F(c(n({},C),{description:e.target.value})),placeholder:"例: 本社オフィス",label:"説明",required:!0})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",id:"is_active",checked:C.is_active,onChange:e=>F(c(n({},C),{is_active:e.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),o.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium",children:"有効"})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx(j,{type:"button",variant:"secondary",onClick:()=>{g(!1),I(null),F({ip_address:"",description:"",is_active:!0})},children:"キャンセル"}),o.jsx(j,{type:"submit",children:v?"更新":"作成"})]})]})]}),o.jsxs(h,{className:"p-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"IPホワイトリスト一覧"}),l?o.jsx("div",{className:"flex justify-center py-8",children:o.jsx("div",{className:"text-gray-600",children:"読み込み中..."})}):0===a.length?o.jsx("div",{className:"text-center py-8 text-gray-500",children:"IPホワイトリストエントリがありません"}):o.jsx("div",{className:"space-y-4",children:a.map(t=>{return o.jsx("div",{className:"border rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[(i=t.ip_address,i.includes("127.0.0.1")||i.includes("::1")?o.jsx(P,{className:"w-4 h-4 text-blue-500"}):i.includes("192.168.")||i.includes("10.")||i.includes("172.")?o.jsx(S,{className:"w-4 h-4 text-green-500"}):o.jsx(f,{className:"w-4 h-4 text-orange-500"})),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("h4",{className:"font-medium",children:t.ip_address}),t.is_active&&o.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:"有効"}),!t.is_active&&o.jsx("span",{className:"bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded",children:"無効"})]}),o.jsx("p",{className:"text-sm text-gray-600",children:t.description}),o.jsxs("p",{className:"text-xs text-gray-500",children:["作成: ",(a=t.created_at,new Date(a).toLocaleString("ja-JP",{year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}))]})]})]})}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(j,{variant:t.is_active?"warning":"success",size:"sm",onClick:()=>(t=>d(void 0,null,function*(){try{const{error:a}=yield m.from("ip_whitelist").update({is_active:!t.is_active}).eq("id",t.id);if(a)return void e(`IPホワイトリストの状態変更に失敗しました: ${a.message}`);s(`IPホワイトリストを${t.is_active?"無効":"有効"}にしました`),yield z()}catch(a){e("IPホワイトリストの状態変更中にエラーが発生しました")}}))(t),children:t.is_active?o.jsxs(o.Fragment,{children:[o.jsx(y,{className:"w-4 h-4 mr-1"}),"無効化"]}):o.jsxs(o.Fragment,{children:[o.jsx(w,{className:"w-4 h-4 mr-1"}),"有効化"]})}),o.jsx(j,{variant:"secondary",size:"sm",onClick:()=>(e=>{I(e),F({ip_address:e.ip_address,description:e.description,is_active:e.is_active}),g(!0)})(t),children:o.jsx(_,{className:"w-4 h-4"})}),o.jsx(j,{variant:"danger",size:"sm",onClick:()=>{return a=t.id,d(void 0,null,function*(){if(confirm("このIPホワイトリストエントリを削除しますか？"))try{const{error:t}=yield m.from("ip_whitelist").delete().eq("id",a);if(t)return void e(`IPホワイトリストの削除に失敗しました: ${t.message}`);s("IPホワイトリストを削除しました"),yield z()}catch(t){e("IPホワイトリストの削除中にエラーが発生しました")}});var a},children:o.jsx(k,{className:"w-4 h-4"})})]})]})},t.id);var a,i})})]})]})},B=e=>{if(!e)return null;return new Date(e).toISOString()},G=e=>{if(!e)return"";const s=new Date(e);return new Date(s.getTime()-6e4*s.getTimezoneOffset()).toISOString().slice(0,16)},H=({onError:e,onSuccess:s})=>{const{refreshMaintenanceStatus:t,isMaintenanceActive:a,maintenanceInfo:i}=x(),[l,r]=u.useState([]),[p,g]=u.useState(!0),[v,f]=u.useState(!1),[y,w]=u.useState(null),[P,R]=u.useState("schedules"),[D,V]=u.useState({title:"",message:"",start_time:"",end_time:"",is_emergency:!1});u.useEffect(()=>{$()},[]);const $=()=>d(void 0,null,function*(){try{g(!0);const{data:s,error:t}=yield m.from("maintenance_schedules").select("*").order("created_at",{ascending:!1});if(t)return void e(`メンテナンス予定の取得に失敗しました: ${t.message}`);r(s||[])}catch(s){e("メンテナンス予定の取得中にエラーが発生しました")}finally{g(!1)}}),M=e=>e?new Date(e).toLocaleString("ja-JP",{year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Asia/Tokyo"}):"未設定";return o.jsxs("div",{className:"space-y-6",children:[o.jsx(h,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-4 h-4 rounded-full "+(a?"bg-red-500":"bg-green-500")}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:a?"メンテナンス中":"サービス稼働中"}),a&&i&&o.jsx("p",{className:"text-sm text-gray-600",children:i.title})]})]}),o.jsx("div",{className:"flex items-center space-x-2",children:a?o.jsx(I,{className:"w-5 h-5 text-red-500"}):o.jsx(I,{className:"w-5 h-5 text-green-500"})})]})}),o.jsxs("div",{className:"flex space-x-4 border-b",children:[o.jsxs("button",{className:"px-4 py-2 font-medium "+("schedules"===P?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>R("schedules"),children:[o.jsx(C,{className:"w-4 h-4 inline mr-2"}),"メンテナンス予定"]}),o.jsxs("button",{className:"px-4 py-2 font-medium "+("whitelist"===P?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>R("whitelist"),children:[o.jsx(S,{className:"w-4 h-4 inline mr-2"}),"IPホワイトリスト"]})]}),"schedules"===P?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"メンテナンス予定管理"}),o.jsxs(j,{onClick:()=>f(!0),className:"flex items-center space-x-2",children:[o.jsx(b,{className:"w-4 h-4"}),o.jsx("span",{children:"新規作成"})]})]}),v&&o.jsxs(h,{className:"p-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:y?"メンテナンス予定編集":"メンテナンス予定作成"}),o.jsxs("form",{onSubmit:t=>d(void 0,null,function*(){if(t.preventDefault(),D.title&&D.message)try{const t={title:D.title,message:D.message,start_time:B(D.start_time),end_time:B(D.end_time),is_emergency:D.is_emergency};if(y){const{error:a}=yield m.from("maintenance_schedules").update(t).eq("id",y.id);if(a)return void e(`メンテナンス予定の更新に失敗しました: ${a.message}`);s("メンテナンス予定を更新しました")}else{const{error:a}=yield m.from("maintenance_schedules").insert([t]);if(a)return void e(`メンテナンス予定の作成に失敗しました: ${a.message}`);s("メンテナンス予定を作成しました")}V({title:"",message:"",start_time:"",end_time:"",is_emergency:!1}),f(!1),w(null),yield $()}catch(a){e("メンテナンス予定の保存中にエラーが発生しました")}else e("タイトルとメッセージは必須です")}),className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium mb-1",children:["タイトル ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx(N,{type:"text",value:D.title,onChange:e=>V(c(n({},D),{title:e.target.value})),placeholder:"例: システムメンテナンス",label:"タイトル",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium mb-1",children:["メッセージ ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("textarea",{value:D.message,onChange:e=>V(c(n({},D),{message:e.target.value})),placeholder:"メンテナンス中に表示されるメッセージ",className:"w-full p-2 border border-gray-300 rounded-lg",rows:3,required:!0})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"開始時刻（日本時間）"}),o.jsx(N,{type:"datetime-local",value:D.start_time,onChange:e=>V(c(n({},D),{start_time:e.target.value})),label:"開始時刻"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"日本時間で入力してください"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"終了時刻（日本時間）"}),o.jsx(N,{type:"datetime-local",value:D.end_time,onChange:e=>V(c(n({},D),{end_time:e.target.value})),label:"終了時刻"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"日本時間で入力してください"})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",id:"is_emergency",checked:D.is_emergency,onChange:e=>V(c(n({},D),{is_emergency:e.target.checked})),className:"w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500"}),o.jsx("label",{htmlFor:"is_emergency",className:"text-sm font-medium",children:"緊急メンテナンス"})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx(j,{type:"button",variant:"secondary",onClick:()=>{f(!1),w(null),V({title:"",message:"",start_time:"",end_time:"",is_emergency:!1})},children:"キャンセル"}),o.jsx(j,{type:"submit",children:y?"更新":"作成"})]})]})]}),o.jsxs(h,{className:"p-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"メンテナンス予定一覧"}),p?o.jsx("div",{className:"flex justify-center py-8",children:o.jsx("div",{className:"text-gray-600",children:"読み込み中..."})}):0===l.length?o.jsx("div",{className:"text-center py-8 text-gray-500",children:"メンテナンス予定がありません"}):o.jsx("div",{className:"space-y-4",children:l.map(a=>o.jsx("div",{className:"border rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("h4",{className:"font-medium",children:a.title}),a.is_active&&o.jsx("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-1 rounded",children:"有効"}),a.is_emergency&&o.jsx("span",{className:"bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded",children:"緊急"})]}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a.message}),o.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:[o.jsxs("div",{children:["開始: ",M(a.start_time)]}),o.jsxs("div",{children:["終了: ",M(a.end_time)]})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(j,{variant:a.is_active?"danger":"success",size:"sm",onClick:()=>(a=>d(void 0,null,function*(){try{const{error:i}=yield m.from("maintenance_schedules").update({is_active:!a.is_active}).eq("id",a.id);if(i)return void e(`メンテナンス状態の変更に失敗しました: ${i.message}`);s(`メンテナンスを${a.is_active?"無効":"有効"}にしました`),yield $(),yield t()}catch(i){e("メンテナンス状態の変更中にエラーが発生しました")}}))(a),children:a.is_active?o.jsxs(o.Fragment,{children:[o.jsx(F,{className:"w-4 h-4 mr-1"}),"無効化"]}):o.jsxs(o.Fragment,{children:[o.jsx(z,{className:"w-4 h-4 mr-1"}),"有効化"]})}),o.jsx(j,{variant:"secondary",size:"sm",onClick:()=>(e=>{w(e),V({title:e.title,message:e.message,start_time:G(e.start_time||""),end_time:G(e.end_time||""),is_emergency:e.is_emergency}),f(!0)})(a),children:o.jsx(_,{className:"w-4 h-4"})}),o.jsx(j,{variant:"danger",size:"sm",onClick:()=>{return i=a.id,d(void 0,null,function*(){if(confirm("このメンテナンス予定を削除しますか？"))try{const{error:a}=yield m.from("maintenance_schedules").delete().eq("id",i);if(a)return void e(`メンテナンス予定の削除に失敗しました: ${a.message}`);s("メンテナンス予定を削除しました"),yield $(),yield t()}catch(a){e("メンテナンス予定の削除中にエラーが発生しました")}});var i},children:o.jsx(k,{className:"w-4 h-4"})})]})]})},a.id))})]})]}):o.jsx(J,{onError:e,onSuccess:s})]})};function Q(){const{user:e,isAdmin:s}=p(),t=g(),[a,i]=u.useState("overview"),[l,r]=u.useState({totalUsers:0,totalParks:0,pendingParks:0,pendingVaccines:0,pendingFacilities:0,totalReservations:0,monthlyRevenue:0,lastMonthRevenue:0,totalSubscriptions:0,activeSubscriptions:0,newUsersThisMonth:0,unreadMessages:0}),[n,c]=u.useState(!0),[x,N]=u.useState(""),[f,b]=u.useState("");u.useEffect(()=>{s?y():t("/")},[s,t]);const y=()=>d(this,null,function*(){try{c(!0),N(""),b("");const{data:e,error:s}=yield m.rpc("get_admin_stats");if(s)throw s;const t=e,{data:a,error:i}=yield m.from("pet_facilities").select("id",{count:"exact"}).eq("status","pending"),l=(null==a?void 0:a.length)||0,{data:n,error:d}=yield m.from("dog_parks").select("id",{count:"exact"}).in("status",["pending","first_stage_passed","second_stage_waiting","second_stage_review","smart_lock_testing"]),x=(null==n?void 0:n.length)||0;r({totalUsers:(null==t?void 0:t.total_users)||0,totalParks:(null==t?void 0:t.total_parks)||0,pendingParks:x,pendingVaccines:(null==t?void 0:t.pending_vaccines)||0,pendingFacilities:l,totalReservations:(null==t?void 0:t.total_reservations)||0,monthlyRevenue:(null==t?void 0:t.monthly_revenue)||0,lastMonthRevenue:(null==t?void 0:t.last_month_revenue)||0,totalSubscriptions:(null==t?void 0:t.total_subscriptions)||0,activeSubscriptions:(null==t?void 0:t.active_subscriptions)||0,newUsersThisMonth:(null==t?void 0:t.new_users_this_month)||0,unreadMessages:(null==t?void 0:t.unread_messages)||0})}catch(e){N("統計データの取得に失敗しました。")}finally{c(!1)}});return n?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold flex items-center",children:[o.jsx(S,{className:"w-8 h-8 text-red-600 mr-3"}),"管理者ダッシュボード"]}),o.jsx("p",{className:"text-gray-600",children:"システム全体の管理と監視"})]}),o.jsxs("div",{className:"text-sm text-gray-500",children:["最終更新: ",(new Date).toLocaleString("ja-JP")]})]}),x&&o.jsxs("div",{className:"bg-red-100 border border-red-300 text-red-800 rounded-lg p-4 flex items-start",children:[o.jsx(R,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),o.jsx("p",{children:x})]}),f&&o.jsxs("div",{className:"bg-green-100 border border-green-300 text-green-800 rounded-lg p-4 flex items-start",children:[o.jsx(I,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0"}),o.jsx("p",{children:f})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx(v,{to:"/admin/users",children:o.jsx(h,{className:"p-6 hover:shadow-lg transition-all duration-200 cursor-pointer hover:scale-105",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"総ユーザー数"}),o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:l.totalUsers}),o.jsxs("p",{className:"text-xs text-green-600",children:["+",l.newUsersThisMonth," 今月"]})]}),o.jsx(D,{className:"w-8 h-8 text-blue-600"})]})})}),o.jsx(v,{to:"/admin/parks",children:o.jsx(h,{className:"p-6 hover:shadow-lg transition-all duration-200 cursor-pointer hover:scale-105",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"総ドッグラン数"}),o.jsx("p",{className:"text-2xl font-bold text-green-600",children:l.totalParks}),l.pendingParks>0&&o.jsxs("p",{className:"text-xs text-orange-600",children:["承認待ち: ",l.pendingParks]})]}),o.jsx(V,{className:"w-8 h-8 text-green-600"})]})})}),o.jsx(v,{to:"/admin/reservations",children:o.jsx(h,{className:"p-6 hover:shadow-lg transition-all duration-200 cursor-pointer hover:scale-105",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"今月の予約数"}),o.jsx("p",{className:"text-2xl font-bold text-purple-600",children:l.totalReservations}),o.jsxs("p",{className:"text-xs text-purple-600",children:["サブスク会員: ",l.activeSubscriptions]})]}),o.jsx($,{className:"w-8 h-8 text-purple-600"})]})})}),o.jsx(v,{to:"/admin/sales",children:o.jsx(h,{className:"p-6 hover:shadow-lg transition-all duration-200 cursor-pointer hover:scale-105",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"今月の売上"}),o.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["¥",l.monthlyRevenue.toLocaleString()]}),l.lastMonthRevenue>0&&o.jsxs("p",{className:"text-xs text-gray-500",children:["前月比: ",Math.round(100*(l.monthlyRevenue/l.lastMonthRevenue-1)),"%"]})]}),o.jsx(M,{className:"w-8 h-8 text-orange-600"})]})})})]}),(l.pendingParks>0||l.pendingVaccines>0||l.pendingFacilities>0)&&o.jsxs(h,{className:"p-6 bg-red-50 border-red-200",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[o.jsx(R,{className:"w-6 h-6 text-red-600"}),o.jsx("h2",{className:"text-lg font-semibold text-red-900",children:"緊急対応が必要"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.pendingParks>0&&o.jsxs("div",{className:"bg-white p-4 rounded-lg border border-red-200",children:[o.jsx("p",{className:"font-medium text-red-900",children:"ドッグラン承認待ち"}),o.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[l.pendingParks,"件"]}),o.jsx(v,{to:"/admin/parks",children:o.jsx(j,{size:"sm",className:"mt-2",children:"確認する"})})]}),l.pendingVaccines>0&&o.jsxs("div",{className:"bg-white p-4 rounded-lg border border-red-200",children:[o.jsx("p",{className:"font-medium text-red-900",children:"ワクチン証明書承認待ち"}),o.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[l.pendingVaccines,"件"]}),o.jsx(v,{to:"/admin/vaccine-approval",children:o.jsx(j,{size:"sm",className:"mt-2",children:"確認する"})})]}),l.pendingFacilities>0&&o.jsxs("div",{className:"bg-white p-4 rounded-lg border border-red-200",children:[o.jsx("p",{className:"font-medium text-red-900",children:"ペット関連施設承認待ち"}),o.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[l.pendingFacilities,"件"]}),o.jsx(v,{to:"/admin/facility-approval",children:o.jsx(j,{size:"sm",className:"mt-2",children:"確認する"})})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.jsx(v,{to:"/admin/vaccine-approval",children:o.jsx(h,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:o.jsx(O,{className:"w-6 h-6 text-blue-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold",children:"ワクチン証明書管理"}),o.jsx("p",{className:"text-sm text-gray-600",children:"ワクチン証明書の承認・管理"}),l.pendingVaccines>0&&o.jsxs("div",{className:"mt-2 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[o.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full mr-1"}),l.pendingVaccines,"件の承認待ち"]})]})]})})}),o.jsx(v,{to:"/admin/parks",children:o.jsx(h,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:o.jsx(V,{className:"w-6 h-6 text-green-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold",children:"ドッグラン管理"}),o.jsx("p",{className:"text-sm text-gray-600",children:"ドッグランの審査・管理"}),l.pendingParks>0&&o.jsxs("div",{className:"mt-2 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[o.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full mr-1"}),l.pendingParks,"件の承認待ち"]})]})]})})}),o.jsx(v,{to:"/admin/facility-approval",children:o.jsx(h,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"bg-indigo-100 p-3 rounded-full",children:o.jsx(q,{className:"w-6 h-6 text-indigo-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold",children:"ペット関連施設承認"}),o.jsx("p",{className:"text-sm text-gray-600",children:"ペット関連施設の掲載申請承認・管理"}),l.pendingFacilities>0&&o.jsxs("div",{className:"mt-2 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[o.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full mr-1"}),l.pendingFacilities,"件の承認待ち"]})]})]})})}),o.jsx(v,{to:"/admin/shop",children:o.jsx(h,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:o.jsx(E,{className:"w-6 h-6 text-green-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"ショップ管理"}),o.jsx("p",{className:"text-sm text-gray-600",children:"商品管理・注文管理・在庫管理"})]})]})})}),o.jsx(v,{to:"/admin/revenue",children:o.jsx(h,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:o.jsx(U,{className:"w-6 h-6 text-purple-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"売上レポート"}),o.jsx("p",{className:"text-sm text-gray-600",children:"ドッグラン別売上・振込管理"})]})]})})}),o.jsx(v,{to:"/admin/news",children:o.jsx(h,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:o.jsx(A,{className:"w-6 h-6 text-yellow-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"新着情報管理"}),o.jsx("p",{className:"text-sm text-gray-600",children:"サイトの新着情報・お知らせを管理"})]})]})})}),o.jsx("div",{onClick:()=>i("maintenance"),children:o.jsx(h,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"bg-orange-100 p-3 rounded-full",children:o.jsx(C,{className:"w-6 h-6 text-orange-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"メンテナンス管理"}),o.jsx("p",{className:"text-sm text-gray-600",children:"システムメンテナンス・IP管理"})]})]})})})]}),o.jsxs("div",{className:"flex space-x-4 border-b",children:[o.jsxs("button",{className:"px-4 py-2 font-medium relative flex items-center space-x-2 "+("overview"===a?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>i("overview"),children:[o.jsx(L,{className:"w-4 h-4"}),o.jsx("span",{children:"概要"})]}),o.jsxs("button",{className:"px-4 py-2 font-medium relative flex items-center space-x-2 "+("parks"===a?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>i("parks"),children:[o.jsx(V,{className:"w-4 h-4"}),o.jsx("span",{children:"ドッグラン管理"}),l.pendingParks>0&&o.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:l.pendingParks})]}),o.jsxs("button",{className:"px-4 py-2 font-medium relative flex items-center space-x-2 "+("vaccines"===a?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>i("vaccines"),children:[o.jsx(O,{className:"w-4 h-4"}),o.jsx("span",{children:"ワクチン承認"}),l.pendingVaccines>0&&o.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:l.pendingVaccines})]}),o.jsxs("button",{className:"px-4 py-2 font-medium relative flex items-center space-x-2 "+("facilities"===a?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>i("facilities"),children:[o.jsx(q,{className:"w-4 h-4"}),o.jsx("span",{children:"施設承認"}),l.pendingFacilities>0&&o.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:l.pendingFacilities})]}),o.jsxs("button",{className:"px-4 py-2 font-medium relative flex items-center space-x-2 "+("users"===a?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>i("users"),children:[o.jsx(D,{className:"w-4 h-4"}),o.jsx("span",{children:"ユーザー管理"})]}),o.jsxs("button",{className:"px-4 py-2 font-medium relative flex items-center space-x-2 "+("maintenance"===a?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>i("maintenance"),children:[o.jsx(C,{className:"w-4 h-4"}),o.jsx("span",{children:"メンテナンス"})]})]}),"overview"===a&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs(h,{className:"p-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"システム概要"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium mb-2",children:"プラットフォーム統計"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"アクティブユーザー:"}),o.jsxs("span",{className:"font-medium",children:[l.totalUsers,"人"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"承認済みドッグラン:"}),o.jsxs("span",{className:"font-medium",children:[l.totalParks-l.pendingParks,"施設"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"今月の予約:"}),o.jsxs("span",{className:"font-medium",children:[l.totalReservations,"件"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"今月の売上:"}),o.jsxs("span",{className:"font-medium",children:["¥",l.monthlyRevenue.toLocaleString()]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"アクティブサブスク:"}),o.jsxs("span",{className:"font-medium",children:[l.activeSubscriptions,"件"]})]})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium mb-2",children:"承認待ち項目"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"ドッグラン:"}),o.jsxs("span",{className:"font-medium "+(l.pendingParks>0?"text-red-600":"text-green-600"),children:[l.pendingParks,"件"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"ワクチン証明書:"}),o.jsxs("span",{className:"font-medium "+(l.pendingVaccines>0?"text-red-600":"text-green-600"),children:[l.pendingVaccines,"件"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"ペット関連施設:"}),o.jsxs("span",{className:"font-medium "+(l.pendingFacilities>0?"text-red-600":"text-green-600"),children:[l.pendingFacilities,"件"]})]})]})]})]})]}),o.jsxs(h,{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"売上推移"}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx(v,{to:"/admin/revenue",children:o.jsxs(j,{size:"sm",variant:"secondary",children:[o.jsx(U,{className:"w-4 h-4 mr-1"}),"詳細レポート"]})}),o.jsxs(j,{size:"sm",variant:"secondary",children:[o.jsx(T,{className:"w-4 h-4 mr-1"}),"CSV"]})]})]}),o.jsx("div",{className:"h-64 bg-gray-100 rounded-lg flex items-center justify-center",children:o.jsx("p",{className:"text-gray-500",children:"売上グラフ（実装予定）"})})]}),o.jsxs(h,{className:"p-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"新着情報管理"}),o.jsxs("p",{className:"text-gray-600",children:["サイトの新着情報・お知らせを管理するには",o.jsx(v,{to:"/admin/news",className:"text-blue-600 hover:text-blue-800 mx-1",children:"こちら"}),"からアクセスしてください。"]})]})]}),"parks"===a&&o.jsxs(h,{className:"p-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ドッグラン管理"}),o.jsxs("p",{className:"text-gray-600",children:["詳細なドッグラン管理は",o.jsx(v,{to:"/admin/parks",className:"text-blue-600 hover:text-blue-800 mx-1",children:"ドッグラン管理ページ"}),"で行えます。"]}),l.pendingParks>0&&o.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[o.jsxs("p",{className:"text-red-700",children:[o.jsxs("strong",{children:[l.pendingParks,"件"]}),"のドッグラン承認待ちがあります。"]}),o.jsx(v,{to:"/admin/parks",children:o.jsx(j,{size:"sm",className:"mt-2",children:"今すぐ確認する"})})]})]}),"vaccines"===a&&o.jsxs(h,{className:"p-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ワクチン証明書管理"}),o.jsxs("p",{className:"text-gray-600",children:["詳細なワクチン証明書管理は",o.jsx(v,{to:"/admin/vaccine-approval",className:"text-blue-600 hover:text-blue-800 mx-1",children:"ワクチン証明書管理ページ"}),"で行えます。"]}),l.pendingVaccines>0&&o.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[o.jsxs("p",{className:"text-red-700",children:[o.jsxs("strong",{children:[l.pendingVaccines,"件"]}),"のワクチン証明書承認待ちがあります。"]}),o.jsx(v,{to:"/admin/vaccine-approval",children:o.jsx(j,{size:"sm",className:"mt-2",children:"今すぐ確認する"})})]})]}),"facilities"===a&&o.jsxs(h,{className:"p-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ペット関連施設承認管理"}),o.jsxs("p",{className:"text-gray-600",children:["詳細なペット関連施設の承認管理は",o.jsx(v,{to:"/admin/facility-approval",className:"text-blue-600 hover:text-blue-800 mx-1",children:"施設承認ページ"}),"で行えます。"]}),l.pendingFacilities>0&&o.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[o.jsxs("p",{className:"text-red-700",children:[o.jsxs("strong",{children:[l.pendingFacilities,"件"]}),"の施設承認待ちがあります。"]}),o.jsx(v,{to:"/admin/facility-approval",children:o.jsx(j,{size:"sm",className:"mt-2",children:"今すぐ確認する"})})]})]}),"users"===a&&o.jsxs(h,{className:"p-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ユーザー管理"}),o.jsxs("p",{className:"text-gray-600",children:["詳細なユーザー管理は",o.jsx(v,{to:"/admin/users",className:"text-blue-600 hover:text-blue-800 mx-1",children:"ユーザー管理ページ"}),"で行えます。"]})]}),"maintenance"===a&&o.jsx(H,{onError:N,onSuccess:b})]})}export{Q as AdminDashboard};
