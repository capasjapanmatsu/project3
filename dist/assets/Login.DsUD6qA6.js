/*! Build: 2025-07-17T07:59:15.523Z
Version: 0.0.0 */
import{r as e,u as s,j as a,az as t,f as r,N as l,E as o,a as c,aE as n}from"./vendor-react.D8SVeCGP.js";import{u as i,C as m,B as x,I as d}from"./components-admin.GT3qRZg5.js";import{n as h,j as u}from"./utils.C9ZsMnW6.js";import"./vendor-misc.qnLj5toF.js";import"./hooks.CTtJlocA.js";import"./vendor-stripe.B5MJ2ewd.js";import"./pages-dog.BrfoFXaJ.js";import"./vendor-supabase.RBPF72ft.js";function b(){const{signInWithMagicLink:b,signInWithPassword:j}=i(),[g,p]=e.useState(!1),[N,y]=e.useState(""),[f,v]=e.useState(""),[w,k]=e.useState(""),[C,S]=e.useState(!0),[A,E]=e.useState(!1),L=s();return e.useEffect((()=>{}),[]),a.jsxs("div",{className:"max-w-md mx-auto",children:[a.jsx("h1",{className:"text-2xl font-bold text-center mb-8",children:"ログイン"}),a.jsxs(m,{children:[a.jsxs("div",{className:"flex mb-6 bg-gray-100 p-1 rounded-lg",children:[a.jsx(x,{type:"button",onClick:()=>S(!0),variant:C?"primary":"secondary",style:C?{backgroundColor:"#2563eb",color:"white",borderColor:"#2563eb"}:{backgroundColor:"white",color:"#2563eb",borderColor:"#2563eb"},children:"パスワード"}),a.jsx(x,{type:"button",onClick:()=>S(!1),variant:C?"secondary":"primary",style:C?{backgroundColor:"white",color:"#2563eb",borderColor:"#2563eb"}:{backgroundColor:"#2563eb",color:"white",borderColor:"#2563eb"},children:"Magic Link"})]}),C?a.jsxs("form",{onSubmit:e=>{(async e=>{e.preventDefault(),p(!0),y("");try{const e=await j(f,w);e.success?(h.success("ログインしました。"),L("/dashboard")):y(e.error||"ログインに失敗しました。もう一度お試しください。")}catch(s){u.error("❌ Password login error:",s),y(s instanceof Error?s.message:"ログインに失敗しました。もう一度お試しください。")}finally{p(!1)}})(e)},className:"p-6",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx(t,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"パスワードでログイン"}),a.jsx("p",{className:"text-gray-600",children:"メールアドレスとパスワードを入力してください。"})]}),N&&a.jsxs("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg flex items-start",children:[a.jsx(r,{className:"w-5 h-5 mr-2 flex-shrink-0 mt-0.5"}),a.jsx("p",{children:N})]}),a.jsx(d,{label:"メールアドレス",type:"email",value:f,onChange:e=>v(e.target.value),required:!0,icon:a.jsx(l,{className:"w-4 h-4 text-gray-500"}),placeholder:"capasjapan@gmail.com"}),a.jsxs("div",{className:"relative",children:[a.jsx(d,{label:"パスワード",type:A?"text":"password",value:w,onChange:e=>k(e.target.value),required:!0,icon:a.jsx(t,{className:"w-4 h-4 text-gray-500"}),placeholder:"パスワードを入力"}),a.jsx("button",{type:"button",onClick:()=>E(!A),className:"absolute right-3 top-9 text-gray-500 hover:text-gray-700",children:A?a.jsx(o,{className:"w-4 h-4"}):a.jsx(c,{className:"w-4 h-4"})})]}),a.jsxs(x,{type:"submit",isLoading:g,className:"w-full mt-6",children:[a.jsx(t,{className:"w-4 h-4 mr-2"}),"ログイン",a.jsx(n,{className:"w-4 h-4 ml-2"})]}),a.jsx("div",{className:"mt-4 text-center",children:a.jsx("button",{type:"button",onClick:()=>L("/forgot-password"),className:"text-sm text-blue-600 hover:text-blue-700",children:"パスワードをお忘れですか？"})})]}):a.jsxs("form",{onSubmit:e=>{(async e=>{e.preventDefault(),p(!0),y("");try{const e=await b(f);e.success?(localStorage.setItem("lastUsedEmail",f),h.success("ログインリンクを送信しました。メールをご確認ください。")):y(e.error||"Magic Linkの送信に失敗しました。もう一度お試しください。")}catch(s){u.error("❌ Magic link error:",s),y(s instanceof Error?s.message:"メールの送信に失敗しました。もう一度お試しください。")}finally{p(!1)}})(e)},className:"p-6",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx(l,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Magic Linkでログイン"}),a.jsx("p",{className:"text-gray-600",children:"メールアドレスを入力するだけで、ドッグパークJPにログインできます。"})]}),N&&a.jsxs("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg flex items-start",children:[a.jsx(r,{className:"w-5 h-5 mr-2 flex-shrink-0 mt-0.5"}),a.jsx("p",{children:N})]}),a.jsx(d,{label:"メールアドレス",type:"email",value:f,onChange:e=>v(e.target.value),required:!0,icon:a.jsx(l,{className:"w-4 h-4 text-gray-500"}),placeholder:"example@example.com"}),a.jsxs(x,{type:"submit",isLoading:g,className:"w-full mt-6",children:[a.jsx(l,{className:"w-4 h-4 mr-2"}),"ログインリンクを送信",a.jsx(n,{className:"w-4 h-4 ml-2"})]})]})]}),a.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg border",children:a.jsxs("div",{className:"text-center",children:[a.jsx(r,{className:"w-6 h-6 text-orange-600 mx-auto mb-2"}),a.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"ログインできない場合"}),a.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"管理者向けに不具合を報告できます"}),a.jsxs("button",{type:"button",onClick:()=>window.open("mailto:info@dogparkjp.com?subject=ドッグパークJP - ログイン不具合報告&body=ログインに関する不具合を報告いたします。%0A%0A【発生状況】%0A%0A【エラー内容】%0A%0A【ブラウザ情報】%0A"+navigator.userAgent,"_blank"),className:"inline-flex items-center px-4 py-2 bg-orange-600 text-white text-sm font-medium rounded-lg hover:bg-orange-700 transition-colors",children:[a.jsx(l,{className:"w-4 h-4 mr-2"}),"管理者に報告する"]})]})}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-sm text-gray-600",children:["アカウントをお持ちでない方は"," ",a.jsx("button",{onClick:()=>L("/register"),className:"text-blue-600 hover:text-blue-700 font-medium",children:"こちらから新規登録"})]})})]})}export{b as Login};
