/*! Build: 2025-07-17T07:59:15.523Z
Version: 0.0.0 */
import{r as e,j as s,i as a,K as t,F as n,m as r,l,f as c,n as i,p as x,a9 as d,M as o}from"./vendor-react.D8SVeCGP.js";import{I as m,C as h}from"./components-admin.GT3qRZg5.js";import{s as p}from"./utils.C9ZsMnW6.js";import"./vendor-misc.qnLj5toF.js";import"./hooks.CTtJlocA.js";import"./vendor-stripe.B5MJ2ewd.js";import"./pages-dog.BrfoFXaJ.js";import"./vendor-supabase.RBPF72ft.js";function j(){const[j,g]=e.useState([]),[u,w]=e.useState([]),[f,N]=e.useState(!0),[b,y]=e.useState(""),[v,C]=e.useState(""),[k,_]=e.useState("all");e.useEffect((()=>{L()}),[]);const L=async()=>{try{N(!0);const{data:e,error:s}=await p.from("news_announcements").select("*").order("created_at",{ascending:!1});if(s)throw s;const{data:a,error:t}=await p.from("new_park_openings").select("*").order("created_at",{ascending:!1});if(t)throw t;g(e||[]),w(a||[])}catch(e){y("新着情報の取得に失敗しました。")}finally{N(!1)}},S=e=>({news:"お知らせ",announcement:"重要なお知らせ",sale:"セール情報"}[e]||e),$=e=>{switch(e){case"news":return s.jsx(n,{className:"w-4 h-4"});case"announcement":return s.jsx(r,{className:"w-4 h-4"});case"sale":return s.jsx(l,{className:"w-4 h-4"});default:return s.jsx(a,{className:"w-4 h-4"})}},D=e=>new Date(e).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}),J=j.filter((e=>{const s=e.title.toLowerCase().includes(v.toLowerCase())||e.content.toLowerCase().includes(v.toLowerCase()),a="all"===k||e.category===k;return s&&a})),P=u.filter((e=>e.name.toLowerCase().includes(v.toLowerCase())||e.address.toLowerCase().includes(v.toLowerCase()))),E=[...J.map((e=>({...e,type:"news",date:e.created_at}))),...P.map((e=>({...e,type:"park",date:e.created_at})))].sort(((e,s)=>new Date(s.date).getTime()-new Date(e.date).getTime()));return f?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):b?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsxs("div",{className:"text-red-500",children:["エラー: ",b]})}):0===j.length&&0===u.length?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsxs("div",{children:["データがありません（APIレスポンス: news=",JSON.stringify(j),", newParks=",JSON.stringify(u),")"]})}):s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("h1",{className:"text-2xl font-bold mb-8 flex items-center",children:[s.jsx(a,{className:"w-8 h-8 text-blue-600 mr-3"}),"新着情報"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsx("div",{className:"md:col-span-2",children:s.jsx(m,{label:"",value:v,onChange:e=>C(e.target.value),placeholder:"タイトル、内容で検索...",icon:s.jsx(t,{className:"w-4 h-4 text-gray-500"})})}),s.jsx("div",{children:s.jsxs("select",{value:k,onChange:e=>_(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"all",children:"すべてのカテゴリー"}),s.jsx("option",{value:"news",children:"お知らせ"}),s.jsx("option",{value:"announcement",children:"重要なお知らせ"}),s.jsx("option",{value:"sale",children:"セール情報"})]})})]}),s.jsxs("div",{className:"flex space-x-2 overflow-x-auto pb-2 mb-6",children:[s.jsxs("button",{onClick:()=>_("all"),className:"flex items-center space-x-2 px-4 py-2 rounded-lg whitespace-nowrap transition-colors "+("all"===k?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[s.jsx(a,{className:"w-4 h-4"}),s.jsx("span",{children:"すべて"})]}),s.jsxs("button",{onClick:()=>_("news"),className:"flex items-center space-x-2 px-4 py-2 rounded-lg whitespace-nowrap transition-colors "+("news"===k?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[s.jsx(n,{className:"w-4 h-4"}),s.jsx("span",{children:"お知らせ"})]}),s.jsxs("button",{onClick:()=>_("announcement"),className:"flex items-center space-x-2 px-4 py-2 rounded-lg whitespace-nowrap transition-colors "+("announcement"===k?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[s.jsx(r,{className:"w-4 h-4"}),s.jsx("span",{children:"重要なお知らせ"})]}),s.jsxs("button",{onClick:()=>_("sale"),className:"flex items-center space-x-2 px-4 py-2 rounded-lg whitespace-nowrap transition-colors "+("sale"===k?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[s.jsx(l,{className:"w-4 h-4"}),s.jsx("span",{children:"セール情報"})]})]}),b&&s.jsxs("div",{className:"mb-6 p-4 bg-red-50 rounded-lg flex items-start",children:[s.jsx(c,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsx("p",{className:"text-red-800",children:b})]}),0===E.length?s.jsxs(h,{className:"text-center py-12",children:[s.jsx(a,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"新着情報はありません"}),s.jsx("p",{className:"text-gray-500",children:"現在、表示できる新着情報はありません。"})]}):s.jsx("div",{className:"space-y-6",children:E.map((e=>{if("news"===e.type){const t=e;return s.jsx(i,{to:`/news/${t.id}`,children:s.jsx(h,{className:"p-6 hover:shadow-lg transition-shadow",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${a=t.category,{news:"bg-blue-100 text-blue-800",announcement:"bg-red-100 text-red-800",sale:"bg-green-100 text-green-800"}[a]||"bg-gray-100 text-gray-800"}`,children:[$(t.category),s.jsx("span",{children:S(t.category)})]}),t.is_important&&s.jsx("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium",children:"重要"})]}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:t.title}),s.jsx("p",{className:"text-gray-600 line-clamp-2",children:t.content})]}),s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsxs("div",{className:"flex items-center text-gray-500 text-sm mb-2",children:[s.jsx(x,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:D(t.created_at)})]}),s.jsx(d,{className:"w-5 h-5 text-gray-400"})]})]})})},`news-${t.id}`)}if("park"===e.type){const a=e;return s.jsx(i,{to:`/news/park/${a.id}`,children:s.jsx(h,{className:"p-6 hover:shadow-lg transition-shadow",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"flex items-center space-x-2 mb-2",children:s.jsxs("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium flex items-center space-x-1",children:[s.jsx(o,{className:"w-3 h-3"}),s.jsx("span",{children:"新規オープン"})]})}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:a.name}),s.jsx("p",{className:"text-gray-600 mb-2",children:a.address}),s.jsxs("div",{className:"flex items-center text-gray-500 text-sm",children:[s.jsx(x,{className:"w-4 h-4 mr-1"}),s.jsxs("span",{children:["オープン予定: ",D(a.opening_date)]})]})]}),s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsxs("div",{className:"flex items-center text-gray-500 text-sm mb-2",children:[s.jsx(x,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:D(a.created_at)})]}),s.jsx(d,{className:"w-5 h-5 text-gray-400"})]})]})})},`park-${a.id}`)}var a}))})]})}export{j as News};
