import{u as e,j as s,C as a,B as t,s as l}from"./index-BFgW40ku.js";import{r,h as c,u as i,L as n}from"./vendor-BHVjIt_u.js";import{K as d,t as x,aJ as m,C as o,R as h,A as u,_ as j,m as p,J as g,j as b,d as N,p as f,D as y,z as v,f as w,F as _,a4 as k,U as S,aK as C,X as I,aL as P,l as E}from"./ui-Qz4g1iz4.js";import{V as D,g as T}from"./VaccineBadge-Dqfw3TOM.js";import"./supabase-CKbzEL5D.js";function q({lockId:c,parkName:i="ドッグパーク",purpose:n="entry",className:g="",onSuccess:b,onError:N,reservationId:f}){const{user:y}=e(),[v,w]=r.useState(null),[_,k]=r.useState(null),[S,C]=r.useState(null),[I,P]=r.useState(!1),[E,D]=r.useState(null),[T,q]=r.useState(!1),[$,z]=r.useState(!1),[L,M]=r.useState(!1),[O,R]=r.useState("");r.useEffect((()=>{if(v&&_){const e=setInterval((()=>{const s=new Date,a=_.getTime()-s.getTime();if(a<=0)C("期限切れ"),w(null),k(null),clearInterval(e);else{const e=Math.floor(a/6e4),s=Math.floor(a%6e4/1e3);C(`${e}:${s.toString().padStart(2,"0")}`)}}),1e3);return()=>clearInterval(e)}}),[v,_]);const A=async()=>{if(y){P(!0),D(null);try{const{data:{session:e}}=await l.auth.getSession();if(!e?.access_token)throw new Error("認証が必要です");let s=5,a=null;if(f){const e=await(async e=>{try{const{data:s,error:a}=await l.from("reservations").select("\n          *,\n          dog_park:dog_parks(*),\n          dog:dogs(*)\n        ").eq("id",e).single();return a?null:s}catch(s){return null}})(f);if(e&&"whole_facility"===e.reservation_type&&(a=(e=>{try{const s=new Date(e.date),a=e.start_time.split(":").map(Number),t=a[0]??0,l=a[1]??0;return s.setHours(t,l,0,0),new Date(s.getTime()+60*e.duration*60*1e3)}catch(s){return null}})(e),a)){const e=new Date,t=a.getTime()-e.getTime();s=Math.max(1,Math.ceil(t/6e4))}}const t=await fetch("https://onmcivwxtzqajcovptgf.supabase.co/functions/v1/generate-pin",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.access_token}`},body:JSON.stringify({lock_id:c,purpose:n,expiry_minutes:s,reservation_id:f||void 0})});if(!t.ok){const e=await t.json();throw new Error(e.error||"PINコードの生成に失敗しました")}const{pin:r,expires_at:i}=await t.json();w(r),k(new Date(i)),z(!0),b&&b(r),setTimeout((()=>{z(!1)}),3e3)}catch(e){const s=e instanceof Error?e.message:"PINコードの生成に失敗しました";if(s.startsWith("PAYMENT_REQUIRED:")){const e=s.replace("PAYMENT_REQUIRED:","").trim();R(e),M(!0),D(null)}else D(s),M(!1);N&&N(s)}finally{P(!1)}}};return s.jsx(a,{className:`p-4 ${g}`,children:s.jsxs("div",{className:"text-center",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center justify-center",children:[s.jsx(d,{className:"w-5 h-5 text-blue-600 mr-2"}),i,"の","entry"===n?"入口":"出口"]}),v?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border-2 border-blue-200 mx-auto",children:[s.jsx("p",{className:"text-sm text-blue-800 mb-1",children:"PINコード:"}),s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("p",{className:"text-3xl font-bold tracking-widest text-blue-700",children:v}),s.jsx("button",{onClick:()=>{v&&navigator.clipboard.writeText(v).then((()=>{q(!0),setTimeout((()=>q(!1)),2e3)})).catch((()=>{}))},className:"p-1 text-blue-600 hover:text-blue-800 transition-colors",title:"コピー",children:T?s.jsx(x,{className:"w-5 h-5"}):s.jsx(m,{className:"w-5 h-5"})})]})]}),s.jsx("div",{className:"bg-yellow-50 p-2 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2 text-yellow-800",children:[s.jsx(o,{className:"w-4 h-4"}),s.jsxs("span",{className:"font-medium",children:["有効期限: ",S]})]})}),s.jsx("div",{className:"flex justify-center space-x-3",children:s.jsxs(t,{onClick:()=>{A()},variant:"secondary",size:"sm",isLoading:I,children:[s.jsx(h,{className:"w-4 h-4 mr-1"}),"再生成"]})}),s.jsxs("p",{className:"text-xs text-gray-500",children:["entry"===n?"入場":"退場","時にスマートロックのキーパッドに上記のPINコードを入力してください"]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-gray-600 mb-4",children:["entry"===n?"入場":"退場","用のPINコードを生成します。",s.jsx("br",{}),"生成されたPINコードは5分間有効です。"]}),E&&s.jsxs("div",{className:"bg-red-50 p-3 rounded-lg flex items-center justify-center text-red-600",children:[s.jsx(u,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:E})]}),L&&s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[s.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[s.jsx(j,{className:"w-6 h-6 text-blue-600 mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"決済が必要です"}),s.jsx("p",{className:"text-sm text-blue-800 mb-4",children:O})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs(t,{onClick:()=>window.location.href="/subscription",className:"w-full bg-purple-600 hover:bg-purple-700",children:[s.jsx(j,{className:"w-4 h-4 mr-2"}),"サブスクリプションに加入（¥3,800/月）"]}),s.jsxs(t,{onClick:()=>window.location.href="/parks",variant:"secondary",className:"w-full",children:[s.jsx(p,{className:"w-4 h-4 mr-2"}),"1日券を購入（¥800）"]})]}),s.jsxs("p",{className:"text-xs text-blue-700 mt-3",children:["• サブスクリプション：全国のドッグランが使い放題",s.jsx("br",{}),"• 1日券：選択したドッグランで24時間利用可能"]})]}),$&&s.jsxs("div",{className:"bg-green-50 p-3 rounded-lg flex items-center justify-center text-green-600",children:[s.jsx(x,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:"PINコードを生成しました"})]}),s.jsxs(t,{onClick:()=>{A()},isLoading:I,className:"w-full",children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"entry"===n?"入場":"退場","用PINを生成"]})]})]})})}const $=e=>{if(!e)return null;return new Date(e).toISOString()};function z(){const{parkId:m}=c(),{user:h}=e(),j=i(),[z,L]=r.useState(null),[M,O]=r.useState(!0),[R,A]=r.useState(""),[J,B]=r.useState(""),[Q,U]=r.useState("overview"),[F,K]=r.useState([]),[V,Y]=r.useState(null),[Z,H]=r.useState("entry"),[W,G]=r.useState([]),[X,ee]=r.useState([]),[se,ae]=r.useState([]),[te,le]=r.useState(!1),[re,ce]=r.useState({title:"",description:"",start_date:"",end_date:"",is_emergency:!1,notify_users:!0}),[ie,ne]=r.useState(!1),[de,xe]=r.useState(!1),[me,oe]=r.useState(!1),[he,ue]=r.useState({max_capacity:0,facilities:{parking:!1,shower:!1,restroom:!1,agility:!1,rest_area:!1,water_station:!1},large_dog_area:!1,small_dog_area:!1,private_booths:!1,private_booth_count:0,facility_details:"",description:""});r.useEffect((()=>{h&&m?je():j("/owner-dashboard")}),[h,m,j]),r.useEffect((()=>{(async()=>{if(h)try{const{data:e,error:s}=await l.from("dogs").select("\n            *,\n            vaccine_certifications (\n              id,\n              status,\n              rabies_expiry_date,\n              combo_expiry_date,\n              approved_at\n            )\n          ").eq("owner_id",h.id);if(s)throw s;const a=(e||[]).filter((e=>"approved"===T(e)));G(a)}catch(e){}})()}),[h]);const je=async()=>{try{O(!0);const{data:e,error:s}=await l.from("dog_parks").select("*").eq("id",m).eq("owner_id",h?.id).single();if(s)throw s;if(!e)return void j("/owner-dashboard");L(e),ue({max_capacity:e.max_capacity||0,facilities:e.facilities||{parking:!1,shower:!1,restroom:!1,agility:!1,rest_area:!1,water_station:!1},large_dog_area:e.large_dog_area||!1,small_dog_area:e.small_dog_area||!1,private_booths:e.private_booths||!1,private_booth_count:e.private_booth_count||0,facility_details:e.facility_details||"",description:e.description||""});const{data:a,error:t}=await l.from("smart_locks").select("*").eq("park_id",m);if(t)throw t;K(a||[]),a&&a.length>0&&Y(a[0]);const{data:r,error:c}=await l.from("dogs").select("\n          *,\n          vaccine_certifications!inner(*)\n        ").eq("owner_id",h?.id).eq("vaccine_certifications.status","approved");if(c)throw c;G(r||[]),await pe()}catch(e){A("データの取得に失敗しました。")}finally{O(!1)}},pe=async()=>{try{const{data:e,error:s}=await l.from("park_maintenance").select("*").eq("park_id",m).order("start_date",{ascending:!1});if(s)throw s;ae(e||[])}catch(e){}},ge=e=>"オス"===e?"くん":"ちゃん",be=e=>e?new Date(e).toLocaleString("ja-JP",{year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Asia/Tokyo"}):"未設定";return M?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):z?s.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[s.jsx("div",{className:"flex items-center space-x-4 mb-6",children:s.jsxs(n,{to:"/owner-dashboard",className:"flex items-center text-blue-600 hover:text-blue-800",children:[s.jsx(g,{className:"w-4 h-4 mr-2"}),"ダッシュボードに戻る"]})}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-2 flex items-center",children:[s.jsx(b,{className:"w-8 h-8 text-blue-600 mr-3"}),z.name,"の管理"]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(N,{className:"w-4 h-4 text-gray-500"}),s.jsx("p",{className:"text-gray-600",children:z.address})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx(n,{to:`/parks/${z.id}`,children:s.jsxs(t,{variant:"secondary",children:[s.jsx(f,{className:"w-4 h-4 mr-2"}),"公開ページを見る"]})}),s.jsxs(t,{onClick:()=>xe(!0),children:[s.jsx(y,{className:"w-4 h-4 mr-2"}),"設定を編集"]})]})]}),R&&s.jsxs("div",{className:"bg-red-100 border border-red-300 text-red-800 rounded-lg p-4 flex items-start",children:[s.jsx(u,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsx("p",{children:R})]}),J&&s.jsxs("div",{className:"bg-green-100 border border-green-300 text-green-800 rounded-lg p-4 flex items-start",children:[s.jsx(x,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsx("p",{children:J})]}),s.jsxs("div",{className:"flex space-x-4 border-b",children:[s.jsxs("button",{className:"px-4 py-2 font-medium "+("overview"===Q?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>U("overview"),children:[s.jsx(b,{className:"w-4 h-4 inline mr-2"}),"概要"]}),s.jsxs("button",{className:"px-4 py-2 font-medium "+("stats"===Q?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>U("stats"),children:[s.jsx(v,{className:"w-4 h-4 inline mr-2"}),"統計・収益"]}),s.jsxs("button",{className:"px-4 py-2 font-medium "+("pins"===Q?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>U("pins"),children:[s.jsx(d,{className:"w-4 h-4 inline mr-2"}),"PINコード管理"]}),s.jsxs("button",{className:"px-4 py-2 font-medium "+("settings"===Q?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>U("settings"),children:[s.jsx(w,{className:"w-4 h-4 inline mr-2"}),"設定"]})]}),"overview"===Q&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs(a,{className:"p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[s.jsx(_,{className:"w-6 h-6 text-blue-600 mr-2"}),"基本情報"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-3",children:"施設情報"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"住所:"})," ",z.address]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"ステータス:"})," ","approved"===z.status?"運営中":"審査中"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"料金:"})," ¥",z.price,"/日"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"最大収容人数:"})," ",z.max_capacity,"人"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"現在の利用者数:"})," ",z.current_occupancy,"人"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"評価:"})," ★",z.average_rating.toFixed(1)," (",z.review_count,"件)"]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-3",children:"設備情報"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries({parking:"駐車場",shower:"シャワー設備",restroom:"トイレ",agility:"アジリティ設備",rest_area:"休憩スペース",water_station:"給水設備"}).map((([e,a])=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 rounded "+(z.facilities[e]?"bg-green-500":"bg-gray-300")}),s.jsx("span",{className:"text-sm",children:a})]},e)))}),s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"大型犬エリア:"})," ",z.large_dog_area?"あり":"なし"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"小型犬エリア:"})," ",z.small_dog_area?"あり":"なし"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"プライベートブース:"})," ",z.private_booths?`${z.private_booth_count}室`:"なし"]})]})]})]})]}),s.jsxs(a,{className:"p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[s.jsx(p,{className:"w-6 h-6 text-blue-600 mr-2"}),"今日の統計"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(p,{className:"w-5 h-5 text-blue-600"}),s.jsx("h4",{className:"font-medium text-blue-900",children:"今日の予約"})]}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"5件"}),s.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"前日比 +2件"})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(k,{className:"w-5 h-5 text-green-600"}),s.jsx("h4",{className:"font-medium text-green-900",children:"今日の収益"})]}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:"¥4,000"}),s.jsx("p",{className:"text-xs text-green-700 mt-1",children:"前日比 +¥1,600"})]}),s.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(S,{className:"w-5 h-5 text-purple-600"}),s.jsx("h4",{className:"font-medium text-purple-900",children:"利用者数"})]}),s.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[z.current_occupancy,"人"]}),s.jsxs("p",{className:"text-xs text-purple-700 mt-1",children:["最大: ",z.max_capacity,"人"]})]})]})]}),s.jsxs(a,{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[s.jsx(C,{className:"w-6 h-6 text-blue-600 mr-2"}),"施設画像"]}),s.jsx(n,{to:`/parks/${z.id}/second-stage`,children:s.jsxs(t,{size:"sm",children:[s.jsx(y,{className:"w-4 h-4 mr-2"}),"画像を管理"]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[z.image_url?s.jsx("div",{className:"h-48 rounded-lg overflow-hidden",children:s.jsx("img",{src:z.image_url,alt:`${z.name} - メイン画像`,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://via.placeholder.com/400x300?text=No+Image"}})}):s.jsx("div",{className:"h-48 bg-gray-100 rounded-lg flex items-center justify-center",children:s.jsx("p",{className:"text-gray-500",children:"メイン画像なし"})}),z.cover_image_url?s.jsx("div",{className:"h-48 rounded-lg overflow-hidden",children:s.jsx("img",{src:z.cover_image_url,alt:`${z.name} - カバー画像`,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://via.placeholder.com/400x300?text=No+Image"}})}):s.jsx("div",{className:"h-48 bg-gray-100 rounded-lg flex items-center justify-center",children:s.jsx("p",{className:"text-gray-500",children:"カバー画像なし"})}),s.jsx("div",{className:"h-48 bg-gray-100 rounded-lg flex items-center justify-center",children:s.jsxs(n,{to:`/parks/${z.id}/second-stage`,className:"text-blue-600 hover:text-blue-800 flex flex-col items-center",children:[s.jsx(C,{className:"w-8 h-8 mb-2"}),s.jsx("p",{children:"その他の画像を管理"})]})})]})]})]}),"stats"===Q&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs(a,{className:"p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[s.jsx(v,{className:"w-6 h-6 text-blue-600 mr-2"}),"利用統計"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(p,{className:"w-5 h-5 text-blue-600"}),s.jsx("h4",{className:"font-medium text-blue-900",children:"今月の予約"})]}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"32件"}),s.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"前月比 +12%"})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(k,{className:"w-5 h-5 text-green-600"}),s.jsx("h4",{className:"font-medium text-green-900",children:"今月の収益"})]}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:"¥25,600"}),s.jsx("p",{className:"text-xs text-green-700 mt-1",children:"前月比 +8%"})]}),s.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(S,{className:"w-5 h-5 text-purple-600"}),s.jsx("h4",{className:"font-medium text-purple-900",children:"利用者数"})]}),s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"128人"}),s.jsx("p",{className:"text-xs text-purple-700 mt-1",children:"前月比 +15%"})]})]}),s.jsx("div",{className:"h-64 bg-gray-100 rounded-lg flex items-center justify-center",children:s.jsx("p",{className:"text-gray-500",children:"利用統計グラフ（実装予定）"})})]}),s.jsxs(a,{className:"p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[s.jsx(k,{className:"w-6 h-6 text-blue-600 mr-2"}),"収益情報"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:"収益配分"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-blue-800 mb-1",children:"オーナー取り分（80%）"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"¥20,480"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-blue-800 mb-1",children:"プラットフォーム手数料（20%）"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"¥5,120"})]})]})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-green-900 mb-3",children:"収益内訳"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-green-800 mb-1",children:"通常利用"}),s.jsx("p",{className:"text-xl font-bold text-green-600",children:"¥12,800"}),s.jsx("p",{className:"text-xs text-green-700",children:"16件"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-green-800 mb-1",children:"施設貸し切り"}),s.jsx("p",{className:"text-xl font-bold text-green-600",children:"¥8,800"}),s.jsx("p",{className:"text-xs text-green-700",children:"2件"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-green-800 mb-1",children:"プライベートブース"}),s.jsx("p",{className:"text-xl font-bold text-green-600",children:"¥4,000"}),s.jsx("p",{className:"text-xs text-green-700",children:"2件"})]})]})]}),s.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-purple-900 mb-3",children:"振込情報"}),s.jsx("p",{className:"text-sm text-purple-800 mb-2",children:"振込は毎月15日に前月分を一括で行います。振込手数料は当社負担です。"}),s.jsx(n,{to:"/owner-payment-system",children:s.jsxs(t,{size:"sm",className:"bg-purple-600 hover:bg-purple-700",children:[s.jsx(k,{className:"w-4 h-4 mr-2"}),"振込情報を確認"]})})]})]})]})]}),"pins"===Q&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs(a,{className:"p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[s.jsx(d,{className:"w-6 h-6 text-blue-600 mr-2"}),"オーナー用PINコード発行"]}),s.jsx("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(x,{className:"w-5 h-5 text-blue-600 mt-1 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"オーナー特権"}),s.jsx("p",{children:"オーナーは決済不要でPINコードを発行できます。施設の管理やメンテナンスに使用してください。"}),s.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[s.jsx("li",{children:"PINコードは5分間有効です"}),s.jsx("li",{children:"入場・退場それぞれでPINコードが必要です"}),s.jsx("li",{children:"スタッフと共有することもできます"}),s.jsx("li",{children:"入場する犬を選択してください"})]})]})]})}),s.jsxs("div",{className:"flex justify-center space-x-4 mb-4",children:[s.jsxs("button",{className:"px-6 py-3 rounded-lg flex items-center space-x-2 "+("entry"===Z?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),onClick:()=>H("entry"),children:[s.jsx(g,{className:"w-5 h-5"}),s.jsx("span",{children:"入場"})]}),s.jsxs("button",{className:"px-6 py-3 rounded-lg flex items-center space-x-2 "+("exit"===Z?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),onClick:()=>H("exit"),children:[s.jsx(g,{className:"w-5 h-5 rotate-180"}),s.jsx("span",{children:"退場"})]})]}),F.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"スマートロックを選択"}),s.jsx("select",{value:V?.id||"",onChange:e=>{const s=F.find((s=>s.id===e.target.value));Y(s||null)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:F.map((e=>s.jsx("option",{value:e.id,children:e.lock_name},e.id)))})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["入場するワンちゃんを選択（最大",3,"頭）"]}),0===W.length?s.jsx("div",{className:"p-4 bg-yellow-50 rounded-lg",children:s.jsxs("p",{className:"text-yellow-800",children:["ワクチン接種証明書が承認されたワンちゃんがいません。",s.jsx(n,{to:"/register-dog",className:"text-blue-600 hover:underline ml-1",children:"ワンちゃんを登録する"})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:W.map((e=>{const a=X.includes(e.id),t=!a&&X.length>=3;return s.jsxs("div",{className:"p-4 border-2 rounded-lg cursor-pointer transition-colors relative "+(a?"border-green-500 bg-green-50":t?"border-gray-200 bg-gray-50 opacity-50 cursor-not-allowed":"border-gray-200 hover:border-gray-300"),onClick:()=>{return!t&&(s=e.id,void ee((e=>e.includes(s)?e.filter((e=>e!==s)):e.length>=3?(A("最大3頭まで選択可能です。"),e):(A(""),[...e,s]))));var s},children:[a&&s.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center",children:s.jsx(x,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden",children:e.image_url?s.jsx("img",{src:e.image_url,alt:e.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-6 h-6 text-gray-500",children:"🐾"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:[e.name,ge(e.gender)]}),s.jsx(D,{status:T(e),size:"sm"})]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[e.breed," • ",e.gender]})]})]})]},e.id)}))}),X.length>0&&s.jsxs("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-green-900 mb-1",children:"選択中のワンちゃん"}),s.jsx("p",{className:"text-sm text-green-800",children:X.map((e=>{const s=W.find((s=>s.id===e));return s?`${s.name}${ge(s.gender)}`:""})).filter((e=>e)).join("、")}),s.jsxs("p",{className:"text-xs text-green-700 mt-1",children:[X.length,"頭が同時入場できます"]})]})]}),V?s.jsx("div",{className:"mt-6",children:X.length>0?s.jsx(q,{lockId:V.lock_id,parkName:z.name,purpose:Z,onSuccess:e=>{B(`PINコードを生成しました: ${e}`),setTimeout((()=>{B("")}),3e3)},onError:e=>{A(e),setTimeout((()=>{A("")}),5e3)}}):s.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg text-center",children:[s.jsx(u,{className:"w-6 h-6 text-yellow-600 mx-auto mb-2"}),s.jsx("p",{className:"text-yellow-800 font-medium",children:"ワンちゃんを1頭以上選択してください"}),s.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"PINコードを発行するには、入場するワンちゃんを選択する必要があります"})]})}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(d,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"スマートロックが設定されていません"}),s.jsx(t,{onClick:()=>U("settings"),children:"スマートロックを設定する"})]})]}),s.jsx(a,{className:"p-6 bg-blue-50 border-blue-200",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(d,{className:"w-6 h-6 text-blue-600 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"PINコードについて"}),s.jsxs("div",{className:"text-sm text-blue-800 space-y-2",children:[s.jsx("p",{children:"• 利用者はPINコードを使用して入退場します"}),s.jsx("p",{children:"• PINコードは5分間有効で、利用者が支払い後に発行されます"}),s.jsx("p",{children:"• オーナーは決済不要でPINコードを発行できます"}),s.jsx("p",{children:"• 施設貸し切りの場合、利用者は友達にPINコードを共有できます"})]})]})]})})]}),"settings"===Q&&s.jsxs("div",{className:"space-y-6",children:[de&&s.jsxs(a,{className:"p-6 bg-blue-50 border-blue-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-900",children:"施設情報の編集"}),s.jsx("button",{onClick:()=>xe(!1),className:"text-blue-600 hover:text-blue-800",children:s.jsx(I,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),z&&h){oe(!0);try{if(he.max_capacity<1)throw new Error("収容人数は1人以上で入力してください。");if(he.private_booths&&he.private_booth_count<1)throw new Error("プライベートブースがある場合は、部屋数を1以上で入力してください。");const{error:e}=await l.from("dog_parks").update({max_capacity:he.max_capacity,facilities:he.facilities,large_dog_area:he.large_dog_area,small_dog_area:he.small_dog_area,private_booths:he.private_booths,private_booth_count:he.private_booths?he.private_booth_count:0,facility_details:he.facility_details,description:he.description,updated_at:(new Date).toISOString()}).eq("id",z.id);if(e)throw e;B("施設情報を更新しました。"),xe(!1),await je(),setTimeout((()=>{B("")}),3e3)}catch(s){A(s instanceof Error?s.message:"施設情報の更新に失敗しました。"),setTimeout((()=>{A("")}),5e3)}finally{oe(!1)}}},className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"変更不可項目"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"住所:"})," ",z.address]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"料金:"})," ¥",z.price,"/日（全国統一料金）"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最大収容人数 *"}),s.jsx("input",{type:"number",min:"1",max:"100",value:he.max_capacity,onChange:e=>ue((s=>({...s,max_capacity:parseInt(e.target.value)||0}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"説明文"}),s.jsx("textarea",{value:he.description,onChange:e=>ue((s=>({...s,description:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"施設の特徴や利用案内など"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"エリア設定"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:he.large_dog_area,onChange:e=>ue((s=>({...s,large_dog_area:e.target.checked}))),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"大型犬エリア"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:he.small_dog_area,onChange:e=>ue((s=>({...s,small_dog_area:e.target.checked}))),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"小型犬エリア"})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"プライベートブース"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:he.private_booths,onChange:e=>ue((s=>({...s,private_booths:e.target.checked}))),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"プライベートブースあり"})]}),he.private_booths&&s.jsxs("div",{className:"ml-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"部屋数"}),s.jsx("input",{type:"number",min:"1",max:"10",value:he.private_booth_count,onChange:e=>ue((s=>({...s,private_booth_count:parseInt(e.target.value)||0}))),className:"w-24 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"設備情報"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries({parking:"駐車場",shower:"シャワー設備",restroom:"トイレ",agility:"アジリティ設備",rest_area:"休憩スペース",water_station:"給水設備"}).map((([e,a])=>s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:he.facilities[e],onChange:s=>ue((a=>({...a,facilities:{...a.facilities,[e]:s.target.checked}}))),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:a})]},e)))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"設備詳細説明"}),s.jsx("textarea",{value:he.facility_details,onChange:e=>ue((s=>({...s,facility_details:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"設備の詳細説明や利用案内など"})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(t,{type:"button",variant:"secondary",onClick:()=>xe(!1),children:"キャンセル"}),s.jsx(t,{type:"submit",isLoading:me,className:"bg-blue-600 hover:bg-blue-700",children:"更新"})]})]})]}),s.jsxs(a,{className:"p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[s.jsx(w,{className:"w-6 h-6 text-blue-600 mr-2"}),"施設設定"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:"基本設定"}),s.jsx("p",{className:"text-sm text-blue-800 mb-3",children:"施設の基本情報や設備情報を編集できます。住所と料金は変更できません。"}),s.jsxs(t,{size:"sm",onClick:()=>xe(!0),children:[s.jsx(y,{className:"w-4 h-4 mr-2"}),"基本情報を編集"]})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-green-900 mb-3",children:"料金設定"}),s.jsx("p",{className:"text-sm text-green-800 mb-3",children:"料金体系は全国統一です。変更はできません。"}),s.jsxs("ul",{className:"text-sm text-green-800 space-y-1",children:[s.jsx("li",{children:"• 通常利用: ¥800/日（固定）"}),s.jsx("li",{children:"• 施設貸し切り: ¥4,400/時間（固定）"}),s.jsx("li",{children:"• プライベートブース: サブスク使い放題・1日券でも利用可能（追加料金なし）"})]})]}),s.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-purple-900 mb-3",children:"スマートロック設定"}),s.jsx("p",{className:"text-sm text-purple-800 mb-3",children:"スマートロックの設定を管理します。"}),s.jsxs(t,{size:"sm",className:"bg-purple-600 hover:bg-purple-700",children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"スマートロックを管理"]})]}),s.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-orange-900 mb-3",children:"営業時間設定"}),s.jsx("p",{className:"text-sm text-orange-800 mb-3",children:"営業時間は24時間です。変更はできません。"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(o,{className:"w-5 h-5 text-orange-600"}),s.jsx("span",{className:"font-medium",children:"24時間営業"})]})]})]})]}),s.jsxs(a,{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[s.jsx(P,{className:"w-6 h-6 text-blue-600 mr-2"}),"メンテナンス管理"]}),s.jsxs(t,{onClick:()=>le(!0),className:"bg-blue-600 hover:bg-blue-700",children:[s.jsx(E,{className:"w-4 h-4 mr-2"}),"メンテナンス予定を追加"]})]}),te&&s.jsxs(a,{className:"p-4 mb-6 bg-blue-50 border-blue-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"新しいメンテナンス予定"}),s.jsx("button",{onClick:()=>le(!1),className:"text-blue-600 hover:text-blue-800",children:s.jsx(I,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),h&&m){ne(!0);try{if(!re.title||!re.start_date||!re.end_date)throw new Error("必須項目を入力してください。");const e=new Date(re.start_date);if(new Date(re.end_date)<=e)throw new Error("終了日時は開始日時より後に設定してください。");if(e<new Date)throw new Error("開始日時は現在時刻より後に設定してください。");const{error:s}=await l.from("park_maintenance").insert({park_id:m,title:re.title,description:re.description,start_date:$(re.start_date),end_date:$(re.end_date),is_emergency:re.is_emergency,notify_users:re.notify_users,created_by:h.id});if(s)throw s;B("メンテナンススケジュールを作成しました。"),le(!1),ce({title:"",description:"",start_date:"",end_date:"",is_emergency:!1,notify_users:!0}),await pe()}catch(s){A(s instanceof Error?s.message:"メンテナンススケジュールの作成に失敗しました。")}finally{ne(!1)}}},className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"メンテナンス内容 *"}),s.jsx("input",{type:"text",value:re.title,onChange:e=>ce((s=>({...s,title:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"例：設備点検・清掃作業",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"開始日時 * (日本時間)"}),s.jsx("input",{type:"datetime-local",value:re.start_date,onChange:e=>ce((s=>({...s,start_date:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"日本時間で入力してください"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"終了日時 * (日本時間)"}),s.jsx("input",{type:"datetime-local",value:re.end_date,onChange:e=>ce((s=>({...s,end_date:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"日本時間で入力してください"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"詳細説明"}),s.jsx("textarea",{value:re.description,onChange:e=>ce((s=>({...s,description:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"メンテナンス内容の詳細説明（任意）"})]}),s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:re.is_emergency,onChange:e=>ce((s=>({...s,is_emergency:e.target.checked}))),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"緊急メンテナンス"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:re.notify_users,onChange:e=>ce((s=>({...s,notify_users:e.target.checked}))),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"ユーザーに通知"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(t,{type:"button",variant:"secondary",onClick:()=>le(!1),children:"キャンセル"}),s.jsx(t,{type:"submit",isLoading:ie,className:"bg-blue-600 hover:bg-blue-700",children:"作成"})]})]})]}),s.jsx("div",{className:"space-y-4",children:0===se.length?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(P,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-lg font-medium mb-2",children:"メンテナンス予定がありません"}),s.jsx("p",{className:"text-sm",children:"施設のメンテナンス予定を追加してください"})]}):se.map((e=>{const r=(e=>{const s=new Date,a=new Date(e.start_date),t=new Date(e.end_date);return"cancelled"===e.status?{status:"cancelled",label:"キャンセル済み",color:"bg-gray-500"}:"completed"===e.status?{status:"completed",label:"完了",color:"bg-gray-500"}:s>=a&&s<t?{status:"active",label:"メンテナンス中",color:"bg-red-500"}:s<a?{status:"scheduled",label:"予定",color:"bg-yellow-500"}:{status:"completed",label:"完了",color:"bg-gray-500"}})(e);return s.jsx(a,{className:"p-4",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx("h3",{className:"font-semibold text-lg",children:e.title}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium text-white ${r.color}`,children:r.label}),e.is_emergency&&s.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"緊急"})]}),e.description&&s.jsx("p",{className:"text-gray-600 mb-3",children:e.description}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"開始:"})," ",be(e.start_date)]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"終了:"})," ",be(e.end_date)]})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:"scheduled"===e.status&&s.jsx(t,{size:"sm",variant:"secondary",onClick:()=>(async e=>{if(window.confirm("このメンテナンススケジュールを削除しますか？"))try{const{error:s}=await l.from("park_maintenance").delete().eq("id",e);if(s)throw s;B("メンテナンススケジュールを削除しました。"),await pe()}catch(s){A("メンテナンススケジュールの削除に失敗しました。")}})(e.id),className:"text-red-600 hover:text-red-800",children:s.jsx(I,{className:"w-4 h-4"})})})]})},e.id)}))}),s.jsx("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(u,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),s.jsxs("div",{className:"text-sm text-yellow-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"メンテナンス機能について"}),s.jsxs("ul",{className:"space-y-1",children:[s.jsx("li",{children:"• メンテナンス中は新規予約を受け付けません"}),s.jsx("li",{children:"• 既存の予約がある場合は事前に利用者に連絡してください"}),s.jsx("li",{children:"• 緊急メンテナンスの場合は即座に施設が利用停止になります"}),s.jsx("li",{children:"• ユーザー通知を有効にすると、利用者にメール通知が送信されます"})]})]})]})})]}),s.jsx(a,{className:"p-6 bg-gray-50",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(_,{className:"w-6 h-6 text-gray-600 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"運営サポート"}),s.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[s.jsx("p",{children:"• 設定に関するご質問は運営事務局までお問い合わせください"}),s.jsx("p",{children:"• QRコードシステムの設置・設定サポートを提供しています"}),s.jsx("p",{children:"• 運営開始後も継続的なサポートを行います"}),s.jsx("p",{children:"• 📧 サポート窓口: info@dogparkjp.com"})]})]})]})})]})]}):s.jsxs("div",{className:"max-w-4xl mx-auto text-center py-12",children:[s.jsx(u,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"ドッグランが見つかりません"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"指定されたドッグランが見つからないか、アクセス権限がありません。"}),s.jsx(n,{to:"/owner-dashboard",children:s.jsx(t,{children:"ダッシュボードに戻る"})})]})}export{z as ParkManagement};
