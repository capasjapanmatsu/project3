import{j as e,C as T,B as w,u as z,s as q}from"./index-fyCrE4_U.js";import{r,L as f,R as O}from"./react-vendor-Co5xHYdE.js";import{l as se,m as te,n as H,b as ae,U as ne,o as re,p as ie,P as Z,W,q as le,R as P,B as U,r as $,T as oe,s as ce,F as J,t as de,u as me}from"./ui-vendor-C9ptRAmi.js";import{l as h}from"./logger-C8dD4C56.js";import"./supabase-vendor-FDBaXLCh.js";const xe={xs:0,sm:640,md:768,lg:1024,xl:1280,"2xl":1536};function X(s){const t=r.useMemo(()=>({...xe,...s}),[s]),[a,u]=r.useState({width:typeof window<"u"?window.innerWidth:1024,height:typeof window<"u"?window.innerHeight:768}),[g,m]=r.useState("md");r.useEffect(()=>{const c=()=>{const x=window.innerWidth;u({width:x,height:window.innerHeight}),x>=t["2xl"]?m("2xl"):x>=t.xl?m("xl"):x>=t.lg?m("lg"):x>=t.md?m("md"):x>=t.sm?m("sm"):m("xs")};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]);const p=c=>a.width>=t[c],b=c=>a.width<t[c],j=(c,x)=>a.width>=t[c]&&a.width<t[x],D=b("md"),N=j("md","lg"),I=p("lg"),o="ontouchstart"in window||navigator.maxTouchPoints>0,C=typeof window<"u"?window.matchMedia("(prefers-reduced-motion: reduce)").matches:!1,M=typeof window<"u"?window.matchMedia("(prefers-color-scheme: dark)").matches:!1;return{windowSize:a,currentBreakpoint:g,breakpoints:t,isAbove:p,isBelow:b,isBetween:j,isMobile:D,isTablet:N,isDesktop:I,isTouchDevice:o,prefersReducedMotion:C,prefersDarkMode:M}}const y=r.forwardRef(({children:s,animation:t="fadeIn",duration:a="normal",easing:u="ease-out",delay:g=0,repeat:m=!1,triggerOnce:p=!0,threshold:b=.1,as:j="div",respectReducedMotion:D=!0,fallbackAnimation:N="fadeIn",className:I="",...o},C)=>{const{prefersReducedMotion:M}=X(),c=D&&M,x=c?N:t,S={fast:"duration-200",normal:"duration-500",slow:"duration-1000"},R={linear:"ease-linear",ease:"ease","ease-in":"ease-in","ease-out":"ease-out","ease-in-out":"ease-in-out"},A={fadeIn:c?"opacity-100 transition-opacity":"opacity-0 animate-fade-in",slideUp:c?"transform-none transition-transform":"transform translate-y-4 animate-slide-up",slideDown:c?"transform-none transition-transform":"transform -translate-y-4 animate-slide-down",slideLeft:c?"transform-none transition-transform":"transform translate-x-4 animate-slide-left",slideRight:c?"transform-none transition-transform":"transform -translate-x-4 animate-slide-right",scale:c?"transform-none transition-transform":"transform scale-95 animate-scale-in",bounce:c?"transform-none":"animate-bounce",pulse:c?"opacity-100":"animate-pulse",spin:c?"transform-none":"animate-spin"},L=m===!0?"animation-iteration-count-infinite":typeof m=="number"?`animation-iteration-count-${m}`:"",E=g>0?{animationDelay:`${g}ms`}:{},v=`${[A[x],S[a],R[u],L,"transition-all"].filter(Boolean).join(" ")} ${I}`.trim(),k=j;return e.jsx(k,{ref:C,className:v,style:{...E,...o.style},"aria-hidden":c?void 0:"false",...o,children:s})});y.displayName="AnimatedElement";const G=r.forwardRef((s,t)=>e.jsx(y,{ref:t,animation:"fadeIn",...s}));G.displayName="FadeIn";const K=r.forwardRef((s,t)=>e.jsx(y,{ref:t,animation:"slideUp",...s}));K.displayName="SlideUp";const he=r.forwardRef((s,t)=>e.jsx(y,{ref:t,animation:"scale",...s}));he.displayName="ScaleIn";const ue=[{id:"health",title:"健康管理",description:"ワクチン接種、定期検診、病気の予防について詳しく解説します。",icon:"🏥",category:"health",link:"/dog-info/vaccine",color:"bg-red-50 border-red-200 hover:bg-red-100"},{id:"training",title:"しつけのコツ",description:"基本的なコマンドから問題行動の改善まで、効果的なしつけ方法を紹介。",icon:"🎓",category:"training",link:"/dog-info/training",color:"bg-blue-50 border-blue-200 hover:bg-blue-100"},{id:"walk",title:"お散歩ガイド",description:"安全で楽しいお散歩の方法、適切な運動量、散歩コースの選び方。",icon:"🐕",category:"walk",link:"/dog-info/walk",color:"bg-green-50 border-green-200 hover:bg-green-100"},{id:"food",title:"食事・栄養",description:"年齢や体調に合わせた食事選び、栄養バランス、おやつの与え方。",icon:"🍖",category:"food",link:"/dog-info/food",color:"bg-yellow-50 border-yellow-200 hover:bg-yellow-100"},{id:"care",title:"お手入れ",description:"ブラッシング、爪切り、歯磨きなど、日常のお手入れ方法を解説。",icon:"🛁",category:"care",link:"/dog-info/care",color:"bg-purple-50 border-purple-200 hover:bg-purple-100"},{id:"breeds",title:"犬種図鑑",description:"人気の犬種から珍しい犬種まで、特徴や性格、飼育のポイントを紹介。",icon:"📚",category:"health",link:"/dog-info/breeds",color:"bg-indigo-50 border-indigo-200 hover:bg-indigo-100"}];function ge(){return e.jsx("section",{className:"py-12 bg-gradient-to-br from-blue-50 to-indigo-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx("span",{className:"text-4xl mr-3",children:"🐕"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"ワンちゃん情報発信コーナー"}),e.jsx("span",{className:"text-4xl ml-3",children:"📚"})]}),e.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"愛犬との暮らしをもっと楽しく、もっと健康に。専門家監修の情報で、 ワンちゃんとの絆を深めましょう。"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:ue.map(s=>e.jsx(T,{className:`${s.color} transition-all duration-300 transform hover:scale-105 hover:shadow-lg border-2`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("span",{className:"text-3xl mr-3",children:s.icon}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:s.title})]}),e.jsx("p",{className:"text-gray-600 mb-4 leading-relaxed",children:s.description}),e.jsx(f,{to:s.link,children:e.jsx(w,{variant:"outline",className:"w-full border-gray-300 hover:bg-gray-50",children:"詳しく見る →"})})]})},s.id))}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 mb-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"🎯 今月の特集"}),e.jsx("p",{className:"text-gray-600",children:"季節に合わせたワンちゃんケアのポイント"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"🌡️"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"夏の暑さ対策"}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"熱中症予防、適切な水分補給、涼しい散歩時間帯の選び方など、 夏を快適に過ごすためのポイントを詳しく解説します。"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"🏃"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"室内運動のアイデア"}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"雨の日や暑い日でもできる室内での運動方法、 知育玩具を使った遊び方、ストレス解消のコツを紹介。"})]})]})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl p-8 text-white",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-2xl font-bold mb-4",children:"🐾 ワンちゃん仲間とつながろう"}),e.jsx("p",{className:"text-lg mb-6 opacity-90",children:"同じ犬種の飼い主さんや近所のワンちゃん仲間と 情報交換やお散歩仲間を見つけませんか？"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(f,{to:"/community",children:e.jsx(w,{className:"bg-pink-600 text-white hover:bg-pink-700 border-pink-600",children:"コミュニティに参加"})}),e.jsx(f,{to:"/dog-park-list",children:e.jsx(w,{variant:"outline",className:"border-white text-white hover:bg-white hover:text-purple-600",children:"近くのドッグパークを探す"})})]})]})}),e.jsx("div",{className:"mt-8 bg-white rounded-2xl shadow-lg p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"📧 最新情報をお届け"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"ワンちゃんの健康やしつけの最新情報をメールでお届けします"}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"email",placeholder:"メールアドレスを入力",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx(w,{className:"bg-blue-600 hover:bg-blue-700",children:"登録"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"プライバシーポリシーに同意の上、登録してください"})]})]})})]})})}const fe=()=>{const{user:s}=z(),t=()=>s?"/facility-registration":"/register",a=()=>s?"施設掲載に進む":"施設登録";return e.jsx("section",{className:"relative overflow-hidden",children:e.jsxs("div",{className:"bg-gradient-to-r from-pink-600 via-purple-600 to-indigo-600 text-white p-8 rounded-xl shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-full",children:e.jsx(se,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold mb-2 flex items-center",children:[e.jsx(te,{className:"w-6 h-6 mr-2"}),"ワンちゃんと行ける施設掲載募集中！"]}),e.jsx("p",{className:"text-lg opacity-90",children:"ペットショップ、動物病院、カフェなど、ワンちゃんと一緒に行ける施設を掲載しませんか？"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(f,{to:t(),children:e.jsxs(w,{className:"bg-blue-600 hover:bg-blue-700 text-white font-bold px-6 py-3 text-lg shadow-md",children:[e.jsx(H,{className:"w-5 h-5 mr-2"}),a()]})}),e.jsx("p",{className:"text-sm opacity-80 mt-2",children:"掲載料無料・サポート充実"})]})]}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full -ml-12 -mb-12"})]})})},be=({isLoggedIn:s})=>{const t=[{icon:e.jsx(ae,{className:"h-12 w-12 text-blue-600 mx-auto mb-4 group-hover:scale-110 transition-transform"}),title:"簡単検索",description:"お近くのドッグランを簡単に見つけることができます",linkTo:"/parks",color:"text-blue-600"},{icon:e.jsx(ne,{className:"h-12 w-12 text-purple-600 mx-auto mb-4 group-hover:scale-110 transition-transform"}),title:"コミュニティ",description:"愛犬家同士で交流を深めることができます",linkTo:s?"/community":"/login",color:"text-purple-600"},{icon:e.jsx(re,{className:"h-12 w-12 text-orange-600 mx-auto mb-4 group-hover:scale-110 transition-transform"}),title:"予約管理",description:"施設の予約をオンラインで簡単に管理",linkTo:s?"/dashboard":"/login",color:"text-orange-600"},{icon:e.jsx(ie,{className:"h-12 w-12 text-green-600 mx-auto mb-4 group-hover:scale-110 transition-transform"}),title:"ペットショップ",description:"ペット用品をワンタッチで簡単注文",linkTo:"/shop",color:"text-green-600"}];return e.jsx("section",{className:"grid md:grid-cols-4 gap-8 mt-12",children:t.map((a,u)=>e.jsxs(f,{to:a.linkTo,className:"text-center p-6 hover:bg-gray-50 rounded-lg transition-colors cursor-pointer group",children:[a.icon,e.jsx("h3",{className:"text-xl font-semibold mb-2",children:a.title}),e.jsx("p",{className:"text-gray-600",children:a.description})]},u))})},pe=({isLoggedIn:s})=>s?e.jsxs("section",{className:"text-center py-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"おかえりなさい！"}),e.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"今日も愛犬と素敵な時間をお過ごしください"}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx(f,{to:"/parks",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"ドッグランを探す"}),e.jsx(f,{to:"/dashboard",className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors font-medium",children:"マイページ"})]})]}):e.jsxs("section",{className:"text-center py-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"愛犬とのお散歩を、もっと楽しく"}),e.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"近くのドッグランを見つけて、新しい出会いを見つけましょう"}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx(f,{to:"/register",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"無料で始める"}),e.jsx(f,{to:"/magic-link",className:"bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors font-medium",children:"Magic Linkで簡単ログイン"})]})]}),Q=O.memo(({recentDogs:s,isOffline:t,isLoading:a=!1})=>{console.log("MarqueeDogsSection - recentDogs:",s),console.log("MarqueeDogsSection - isOffline:",t),console.log("MarqueeDogsSection - isLoading:",a),console.log("MarqueeDogsSection - recentDogs.length:",s.length);const u=r.useMemo(()=>[...s,...s],[s]),g=r.useMemo(()=>Array.isArray(s)&&s.length>0,[s]);return e.jsxs("section",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(Z,{className:"w-6 h-6 text-blue-600 mr-2"}),"最近仲間入りしました！"]}),e.jsx("div",{className:"absolute -top-10 -left-16",children:e.jsx("div",{className:"bg-yellow-100 rounded-full px-4 py-2 text-yellow-800 font-bold transform -rotate-12",children:"New"})})]})}),e.jsx("div",{className:"overflow-hidden w-full relative",style:{height:140},children:a?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"text-gray-600",children:"新しい仲間を探しています..."})]})}):g?e.jsx("div",{className:"flex items-center whitespace-nowrap",style:{width:"max-content",animation:"marquee 45s linear infinite",willChange:"transform",transform:"translateZ(0)"},children:u.map((m,p)=>e.jsx(V,{dog:m},`${m.id}-${p}`))}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 text-center",children:e.jsxs("div",{children:[e.jsx(Z,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium",children:t?"オフライン中です":"新しい仲間を募集中！"}),e.jsx("p",{className:"text-sm mt-1",children:t?"接続を確認してください":"ワンちゃんの登録をお待ちしています"}),!t&&e.jsx("p",{className:"text-xs mt-2 text-gray-400",children:"登録されたワンちゃんがいません"}),e.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["Debug: dogs=",s?.length||0,", offline=",t?"true":"false",", loading=",a?"true":"false"]})]})})}),e.jsx("style",{children:`
          @keyframes marquee {
            0% {
              transform: translateX(0) translateZ(0);
            }
            100% {
              transform: translateX(-50%) translateZ(0);
            }
          }
          
          /* GPUアクセラレーション用の最適化 */
          .marquee-container {
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            -moz-backface-visibility: hidden;
            -ms-backface-visibility: hidden;
            -webkit-transform: translateZ(0);
            -moz-transform: translateZ(0);
            -ms-transform: translateZ(0);
            transform: translateZ(0);
          }
        `})]})}),V=O.memo(({dog:s})=>{const[t,a]=r.useState(!1),[u,g]=r.useState(!1),m=()=>{a(!0)},p=()=>{g(!0),a(!0)},b=r.useMemo(()=>s.image_url?s.image_url.includes("supabase")?`${s.image_url}?width=80&height=80&quality=80`:s.image_url:null,[s.image_url]);return r.useEffect(()=>{if(b){const j=new Image;j.src=b}},[b]),e.jsxs("div",{className:"inline-block mx-4 text-center",style:{width:100,flexShrink:0},children:[e.jsxs("div",{className:"relative w-20 h-20 mx-auto mb-2 bg-gray-200 rounded-full overflow-hidden",children:[!t&&!u&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:e.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})}),b&&!u?e.jsx("img",{src:b,alt:s.name,className:`w-full h-full object-cover transition-opacity duration-200 ${t?"opacity-100":"opacity-0"}`,onLoad:m,onError:p,loading:"eager",decoding:"sync",width:80,height:80}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-2xl",children:"🐕"})]}),e.jsx("div",{className:"text-xs text-gray-600 truncate font-medium",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:s.breed})]})});Q.displayName="MarqueeDogsSection";V.displayName="DogCard";const je=({isOffline:s,networkError:t,onRetryConnection:a})=>t?e.jsx("div",{className:`border rounded-lg p-4 mb-6 ${s?"bg-orange-50 border-orange-200":"bg-red-50 border-red-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[s?e.jsx(W,{className:"w-6 h-6 text-orange-600"}):e.jsx(le,{className:"w-6 h-6 text-red-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-medium ${s?"text-orange-800":"text-red-800"}`,children:s?"オフラインモード":"接続エラー"}),e.jsx("p",{className:`text-sm whitespace-pre-line ${s?"text-orange-700":"text-red-700"}`,children:t})]})]}),e.jsxs(w,{onClick:a,size:"sm",className:`${s?"bg-orange-600 hover:bg-orange-700":"bg-red-600 hover:bg-red-700"} text-white`,children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"再接続"]})]})}):null,Ne=({news:s,isOffline:t,isLoading:a,onRetryConnection:u})=>{const g=o=>{switch(o){case"news":return e.jsx(J,{className:"w-4 h-4"});case"announcement":return e.jsx(ce,{className:"w-4 h-4"});case"sale":return e.jsx(oe,{className:"w-4 h-4"});default:return e.jsx(U,{className:"w-4 h-4"})}},m=o=>({news:"bg-blue-100 text-blue-800",announcement:"bg-red-100 text-red-800",sale:"bg-green-100 text-green-800"})[o]||"bg-gray-100 text-gray-800",p=o=>({news:"お知らせ",announcement:"重要なお知らせ",sale:"セール情報"})[o]||o,b=o=>new Date(o).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}),j=({message:o})=>e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(W,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:o}),e.jsxs(w,{onClick:u,size:"sm",variant:"secondary",className:"mt-2",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"再接続"]})]})}),D=()=>e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),e.jsx("p",{children:"新着情報を読み込み中..."})]})}),N=()=>e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(U,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"現在、表示できる新着情報はありません"}),e.jsxs(w,{onClick:u,size:"sm",variant:"secondary",className:"mt-2",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"再読み込み"]})]})}),I=()=>t?e.jsx(j,{message:"オフライン：新着情報を読み込めません"}):a?e.jsx(D,{}):s.length===0?e.jsx(N,{}):s.slice(0,2).map(o=>e.jsx(f,{to:`/news/${o.id}`,children:e.jsx(T,{className:"p-3 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium flex items-center ${m(o.category)}`,children:[g(o.category),e.jsx("span",{className:"ml-1",children:p(o.category)})]}),o.is_important&&e.jsx("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium",children:"重要"})]}),e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:o.title}),o.content&&e.jsx("p",{className:"text-sm text-gray-600 line-clamp-1 mb-1",children:o.content}),e.jsx("p",{className:"text-xs text-gray-500",children:b(o.created_at)})]}),e.jsx($,{className:"w-4 h-4 text-gray-400 ml-4"})]})})},o.id));return e.jsxs("section",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(U,{className:"w-5 h-5 text-blue-600 mr-2"}),"新着情報"]}),e.jsxs(f,{to:"/news",className:"text-blue-600 hover:text-blue-800 flex items-center text-sm",children:["すべて見る",e.jsx($,{className:"w-4 h-4 ml-1"})]})]}),e.jsx("div",{className:"space-y-3",children:I()}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx(f,{to:"/news",children:e.jsxs(w,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",children:["すべての新着情報を見る",e.jsx($,{className:"w-4 h-4 ml-2"})]})})})]})},we=()=>{const{user:s}=z(),t=()=>s?"/park-registration-agreement":"/register",a=()=>s?"オーナー契約に進む":"オーナー登録";return e.jsx("section",{className:"relative overflow-hidden",children:e.jsxs("div",{className:"bg-gradient-to-r from-green-600 via-blue-600 to-purple-600 text-white p-8 rounded-xl shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-full",children:e.jsx(de,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold mb-2 flex items-center",children:[e.jsx(me,{className:"w-6 h-6 mr-2"}),"ドッグランオーナー募集中！"]}),e.jsx("p",{className:"text-lg opacity-90",children:"あなたの土地をドッグランとして活用しませんか？収益化のチャンスです"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(f,{to:t(),children:e.jsxs(w,{className:"bg-blue-600 hover:bg-blue-700 text-white font-bold px-6 py-3 text-lg shadow-md border-blue-600",children:[e.jsx(H,{className:"w-5 h-5 mr-2"}),a()]})}),e.jsx("p",{className:"text-sm opacity-80 mt-2",children:"初期費用無料・サポート充実"})]})]}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full -ml-12 -mb-12"})]})})},ye=()=>e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"bg-blue-50 p-6 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-4",children:"ご利用前に必ずお読みください"}),e.jsx("p",{className:"text-blue-800 mb-4",children:"安全で楽しいドッグラン利用のため、利用ルールをご確認ください"}),e.jsx(f,{to:"/parks/rules",children:e.jsxs(w,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"ドッグラン利用ルールを確認"]})})]})}),e.jsxs("section",{className:"bg-blue-50 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-center text-blue-900 mb-6",children:"料金体系"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"単発利用"}),e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"¥800"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"1回の利用料金"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"• 最大3時間まで"}),e.jsx("li",{children:"• 愛犬3頭まで"}),e.jsx("li",{children:"• 全国の提携施設で利用可能"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-blue-600 text-white p-6 rounded-lg shadow-lg transform scale-105",children:[e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"サブスクリプション"}),e.jsxs("div",{className:"text-3xl font-bold mb-2",children:["¥3,800",e.jsx("span",{className:"text-lg",children:"/月"})]}),e.jsx("p",{className:"mb-4 opacity-90",children:"使い放題プラン"}),e.jsxs("ul",{className:"text-sm space-y-1 opacity-90",children:[e.jsx("li",{children:"• 全国のドッグラン使い放題"}),e.jsx("li",{children:"• ペットショップ10%OFF"}),e.jsx("li",{children:"• 優先予約権"}),e.jsx("li",{children:"• 専用サポート"})]}),e.jsx("div",{className:"mt-4",children:e.jsx("span",{className:"bg-white text-purple-600 px-3 py-1 rounded-full text-xs font-medium",children:"おすすめ"})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"施設貸し切り"}),e.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:"¥4,400"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"1時間の貸し切り料金"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"• 完全プライベート空間"}),e.jsx("li",{children:"• 愛犬制限なし"}),e.jsx("li",{children:"• イベント・パーティーに最適"})]})]})]}),e.jsx("div",{className:"text-center mt-8",children:e.jsx(f,{to:"/register",children:e.jsx(w,{className:"bg-blue-600 hover:bg-blue-700 text-lg px-8 py-3",children:"今すぐ始める"})})})]})]});function Re(){const{user:s}=z(),[t,a]=r.useState([]),[u,g]=r.useState([]),[m,p]=r.useState(!1),[b,j]=r.useState(null),[D,N]=r.useState(!0),[I,o]=r.useState(!0),{isMobile:C,prefersReducedMotion:M}=X();r.useEffect(()=>{const n="/images/hero-dogs.jpg",i=document.createElement("link");i.rel="preload",i.href=n,i.as="image",i.setAttribute("fetchpriority","high"),document.head.appendChild(i);const l=document.createElement("link");return l.rel="preload",l.href="/fonts/inter-var.woff2",l.as="font",l.type="font/woff2",l.crossOrigin="anonymous",document.head.appendChild(l),()=>{document.head.removeChild(i),document.head.removeChild(l)}},[]),r.useEffect(()=>{const n=()=>{p(!1),j(null)},i=()=>{p(!0),j(`インターネット接続が切断されました。
オフラインモードで表示しています。`)};return window.addEventListener("online",n),window.addEventListener("offline",i),navigator.onLine||i(),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",i)}},[]);const c=10*60*1e3,x=r.useMemo(()=>new Map,[]),S=r.useCallback(n=>{const i=x.get(n);return i&&Date.now()-i.timestamp<c?i.data:(i&&x.delete(n),null)},[x,c]),R=r.useCallback((n,i)=>{x.set(n,{data:i,timestamp:Date.now()});try{localStorage.setItem(`dogpark_cache_${n}`,JSON.stringify({data:i,timestamp:Date.now()}))}catch(l){console.warn("Failed to save cache to localStorage:",l)}},[x]);r.useEffect(()=>{try{const n=localStorage.getItem("dogpark_cache_recentDogs");if(n){const l=JSON.parse(n);if(Date.now()-l.timestamp<c&&Array.isArray(l.data)){const d=l.data,_={data:d,timestamp:l.timestamp};x.set("recentDogs",_),a(d),N(!1)}}const i=localStorage.getItem("dogpark_cache_news");if(i){const l=JSON.parse(i);if(Date.now()-l.timestamp<c&&Array.isArray(l.data)){const d=l.data,_={data:d,timestamp:l.timestamp};x.set("news",_),g(d),o(!1)}}}catch(n){h.warn("Failed to restore cache from localStorage:",n)}},[x,c]);const A=r.useCallback(async()=>{try{h.info("🐕 最近仲間入りしたワンちゃんを取得中...");const n=S("recentDogs");if(n&&Array.isArray(n))return h.info("✅ キャッシュから最近仲間入りしたワンちゃんを取得:",n.length,"匹"),a(n),N(!1),n;N(!0),j(null),h.info("🔍 データベースから直接取得...");const{data:i,error:l}=await q.from("dogs").select("id, owner_id, name, breed, birth_date, gender, image_url, created_at").order("created_at",{ascending:!1}).limit(8);if(l)return h.warn("❌ Database error:",l),a([]),N(!1),[];h.info("✅ 最近仲間入りしたワンちゃん取得成功:",i?.length||0,"匹");const d=i||[];return a(d),R("recentDogs",d),N(!1),d}catch(n){return h.warn("❌ Error fetching recent dogs:",n),a([]),N(!1),[]}},[S,R]),L=r.useCallback(async()=>{try{h.info("📰 新着情報を取得中...");const n=S("news");if(n&&Array.isArray(n))return h.info("✅ キャッシュから新着情報を取得:",n.length,"件"),g(n),n;o(!0);const{data:i,error:l}=await q.from("news_announcements").select("*").order("created_at",{ascending:!1}).limit(5);if(l)return h.error("❌ 新着情報取得エラー:",l),g([]),[];h.info("✅ 新着情報取得成功:",i?.length||0,"件");const d=i||[];return g(d),R("news",d),d}catch(n){return h.error("❌ 新着情報取得例外:",n),g([]),[]}finally{o(!1),h.info("📰 新着情報取得処理完了")}},[S,R]),E=r.useCallback(async()=>{h.info("🚀 高速データ取得を開始...");const n=Date.now();try{const i=new Promise((ve,ee)=>{setTimeout(()=>ee(new Error("Timeout")),8e3)}),l=Promise.all([A(),L()]),[d,_]=await Promise.race([l,i]),Y=Date.now();return h.info(`✅ 高速データ取得完了: ${Y-n}ms`),{dogs:d,news:_}}catch(i){h.error("❌ データ取得エラー:",i);const l={dogs:[],news:[]};try{const d=await A();l.dogs=d}catch(d){h.warn("犬データの取得に失敗:",d)}try{const d=await L();l.news=d}catch(d){h.warn("ニュースデータの取得に失敗:",d)}return l}},[A,L]);r.useEffect(()=>{t.length===0&&u.length===0&&E()},[E,t.length,u.length]);const B=r.useCallback(async()=>{x.clear(),await E()},[E,x]),v=C?"fast":"normal",k=M?0:25,F=r.useMemo(()=>!!s,[s]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-gray-50",role:"main",children:[e.jsx(G,{duration:"fast",children:e.jsx(je,{isOffline:m,networkError:b,onRetryConnection:()=>void B()})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("section",{id:"hero-section","aria-label":"メインヒーロー",className:"focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-lg",tabIndex:-1,children:e.jsx(K,{duration:v,delay:k*0,children:e.jsx(pe,{isLoggedIn:F})})}),e.jsx("section",{"aria-label":"最近登録された愛犬たち",className:"focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-lg",tabIndex:-1,children:e.jsx(y,{animation:"slideUp",duration:v,delay:k*2,respectReducedMotion:!0,fallbackAnimation:"fadeIn",children:e.jsx(Q,{recentDogs:t,isOffline:m,isLoading:D})})}),e.jsxs("main",{id:"main-content",className:"space-y-12 py-8",children:[e.jsx("section",{id:"news-section","aria-labelledby":"news-heading",className:"focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-lg",tabIndex:-1,children:e.jsxs(y,{animation:"slideUp",duration:v,delay:k*1,respectReducedMotion:!0,fallbackAnimation:"fadeIn",children:[e.jsx("h2",{id:"news-heading",className:"sr-only",children:"新着情報"}),e.jsx(Ne,{isOffline:m,onRetryConnection:()=>void B(),news:u,isLoading:I})]})}),e.jsx("section",{id:"features-section","aria-labelledby":"features-heading",className:"focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-lg",tabIndex:-1,children:e.jsxs(y,{animation:"slideUp",duration:v,delay:k*2,respectReducedMotion:!0,fallbackAnimation:"fadeIn",children:[e.jsx("h2",{id:"features-heading",className:"sr-only",children:"アプリの主な機能"}),e.jsx(be,{isLoggedIn:F})]})}),e.jsx(y,{animation:"slideUp",duration:v,delay:k*3,respectReducedMotion:!0,fallbackAnimation:"fadeIn",children:e.jsx(we,{})}),e.jsx(y,{animation:"slideUp",duration:v,delay:k*3.5,respectReducedMotion:!0,fallbackAnimation:"fadeIn",children:e.jsx(fe,{})}),e.jsx("section",{id:"usage-rules","aria-labelledby":"usage-heading",className:"focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-lg",tabIndex:-1,children:e.jsxs(y,{animation:"slideUp",duration:v,delay:k*4,respectReducedMotion:!0,fallbackAnimation:"fadeIn",children:[e.jsx("h2",{id:"usage-heading",className:"sr-only",children:"利用方法と料金について"}),e.jsx(ye,{})]})}),e.jsx("section",{id:"dog-info-section","aria-labelledby":"dog-info-heading",className:"focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-lg",tabIndex:-1,children:e.jsxs(y,{animation:"slideUp",duration:v,delay:k*5,respectReducedMotion:!0,fallbackAnimation:"fadeIn",children:[e.jsx("h2",{id:"dog-info-heading",className:"sr-only",children:"ワンちゃんについての情報発信"}),e.jsx(ge,{})]})})]})]})]}),e.jsxs("div",{"aria-live":"polite","aria-atomic":"true",className:"sr-only",id:"status-region",children:[m&&"オフラインモードです。",b&&"ネットワークエラーが発生しています。",D&&"データを読み込んでいます。"]}),e.jsx("div",{"aria-live":"assertive","aria-atomic":"true",className:"sr-only",id:"announcement-region"})]})}export{Re as Home};
