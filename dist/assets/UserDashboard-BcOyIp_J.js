import{j as e,r as s,B as t,v as a,g as r,p as n,w as i,i as l,x as o,F as d,y as c,A as m,C as x,X as g,t as h,z as u,P as p,G as j,J as f,N as b,O as v,q as N,b as y,U as w,k as _,Q as S}from"./ui-vendor-B03FHkej.js";import{L as k,u as D,d as E,r as I}from"./react-vendor-BBLDtDmh.js";import{C as T,B as L,s as C,u as O,b as A}from"./index-CWMjoAp3.js";import{D as P,a as U}from"./DogCard-BZPzmnLl.js";import{c as R}from"./store-vendor-DUbTq_Tg.js";import{h as M}from"./vaccineUploadFixed-CvobuGmF.js";import"./query-vendor-Cy2yKKks.js";import"./supabase-vendor-BcfcqyaE.js";import"./Input-D52zIDZ_.js";import"./Select-CyS8FvOq.js";import"./dogBreeds-6lxY8Uni.js";import"./VaccineBadge-CXOJLvpp.js";const F=({dogs:t,user:a,selectedDog:r,showDogEditModal:n,isUpdatingDog:i,dogUpdateError:l,dogUpdateSuccess:o,dogFormData:d,dogImageFile:c,dogImagePreview:m,rabiesVaccineFile:x,comboVaccineFile:g,rabiesExpiryDate:h,comboExpiryDate:u,onDogSelect:p,onCloseDogEditModal:j,onUpdateDog:f,onDeleteDog:b,onDogImageSelect:v,onDogImageRemove:N,onRabiesVaccineSelect:y,onComboVaccineSelect:w,onFormDataChange:_,onRabiesExpiryDateChange:S,onComboExpiryDateChange:k})=>e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"ðŸ•"}),"ç™»éŒ²æ¸ˆã¿ã®æ„›çŠ¬"]}),e.jsxs("a",{href:"/register-dog",className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 rounded-md text-sm font-medium inline-flex items-center",children:[e.jsx(s,{className:"w-4 h-4 mr-2"}),"æ„›çŠ¬ã‚’ç™»éŒ²"]})]}),0===t.length?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ•"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"ã¾ã æ„›çŠ¬ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“"}),e.jsx("p",{className:"text-sm mb-4",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã«ã€æ„›çŠ¬ã®æƒ…å ±ã‚’ç™»éŒ²ã—ã¦ãã ã•ã„"}),e.jsxs("a",{href:"/register-dog",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md font-medium inline-flex items-center",children:[e.jsx(s,{className:"w-4 h-4 mr-2"}),"æ„›çŠ¬ã‚’ç™»éŒ²"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(s=>e.jsx(P,{dog:s,onEdit:()=>p(s)},s.id))}),n&&r&&e.jsx(U,{dog:r,isUpdating:i,error:l,success:o,dogFormData:d,dogImagePreview:m,onClose:j,onSubmit:f,onDelete:b,onFormChange:_,onImageSelect:v,onImageRemove:N,rabiesVaccineFile:x,comboVaccineFile:g,rabiesExpiryDate:h,comboExpiryDate:u,onRabiesVaccineSelect:y,onComboVaccineSelect:w,onRabiesExpiryDateChange:S,onComboExpiryDateChange:k})]}),V=({notifications:s,onMarkAsRead:o})=>{const d=s=>{switch(s){case"reservation":return e.jsx(l,{className:"w-4 h-4 text-blue-600"});case"message":return e.jsx(i,{className:"w-4 h-4 text-green-600"});case"park_approval":return e.jsx(n,{className:"w-4 h-4 text-purple-600"});case"vaccine_approval":return e.jsx(r,{className:"w-4 h-4 text-green-600"});default:return e.jsx(t,{className:"w-4 h-4 text-gray-600"})}};return e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(t,{className:"w-5 h-5 mr-2"}),"é€šçŸ¥",s.length>0&&e.jsx("span",{className:"ml-2 bg-red-500 text-white text-xs rounded-full px-2 py-1",children:s.length})]}),s.length>0&&e.jsxs(L,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{s.forEach(e=>{o(e.id)})},children:[e.jsx(a,{className:"w-4 h-4 mr-2"}),"ã™ã¹ã¦æ—¢èª­ã«ã™ã‚‹"]})]}),0===s.length?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ””"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"æ–°ã—ã„é€šçŸ¥ã¯ã‚ã‚Šã¾ã›ã‚“"}),e.jsx("p",{className:"text-sm",children:"æœ€æ–°ã®æƒ…å ±ã‚„ãŠçŸ¥ã‚‰ã›ãŒã‚ã‚‹ã¨ã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™"})]}):e.jsx("div",{className:"space-y-4",children:s.map(s=>e.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:d(s.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 truncate",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(s.created_at).toLocaleString("ja-JP")})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(L,{size:"sm",onClick:()=>o(s.id),className:"bg-blue-600 hover:bg-blue-700 text-white",children:e.jsx(a,{className:"w-4 h-4"})})})]},s.id))})]})};function J({park:s,onSelect:t}){return e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",onClick:e=>{e.target.closest(".detail-button")||t(s)},children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.address}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(o,{className:"w-4 h-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"text-sm",children:s.average_rating.toFixed(1)})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[s.review_count,"ä»¶ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[q(s.status),"second_stage_waiting"===s.status?e.jsx(k,{to:`/parks/${s.id}/second-stage`,className:"detail-button",children:e.jsxs(L,{size:"sm",className:"bg-orange-600 hover:bg-orange-700 text-white",children:[e.jsx(d,{className:"w-4 h-4 mr-1"}),"ç”³ã—è¾¼ã¿"]})}):e.jsx(L,{size:"sm",className:"bg-white hover:bg-gray-50 border border-gray-300 text-gray-700 detail-button",children:e.jsx(c,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:["æ–™é‡‘: Â¥",s.price,"/æ—¥"]}),e.jsxs("div",{children:["åŽå®¹äººæ•°: ",s.max_capacity,"äºº"]}),e.jsxs("div",{children:["ç¾åœ¨ã®åˆ©ç”¨è€…: ",s.current_occupancy,"äºº"]}),e.jsxs("div",{children:["ãƒ¬ãƒ“ãƒ¥ãƒ¼: â˜…",s.average_rating.toFixed(1)]})]}),"pending"===s.status&&e.jsxs("div",{className:"mt-3 p-2 bg-yellow-50 rounded text-sm text-yellow-800",children:[e.jsx(m,{className:"w-4 h-4 inline mr-1"}),"ç®¡ç†è€…ã«ã‚ˆã‚‹æ‰¿èªã‚’ãŠå¾…ã¡ãã ã•ã„"]}),"first_stage_passed"===s.status&&e.jsxs("div",{className:"mt-3 p-2 bg-blue-50 rounded text-sm text-blue-800",children:[e.jsx(r,{className:"w-4 h-4 inline mr-1"}),"ç¬¬ä¸€å¯©æŸ»é€šéŽï¼ç¬¬äºŒå¯©æŸ»ã®è©³ç´°æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"]}),"second_stage_review"===s.status&&e.jsxs("div",{className:"mt-3 p-2 bg-purple-50 rounded text-sm text-purple-800",children:[e.jsx(x,{className:"w-4 h-4 inline mr-1"}),"ç¬¬äºŒå¯©æŸ»ä¸­ã§ã™ã€‚å¯©æŸ»å®Œäº†ã¾ã§ãŠå¾…ã¡ãã ã•ã„"]}),"second_stage_waiting"===s.status&&e.jsxs("div",{className:"mt-3 p-2 bg-orange-50 rounded text-sm text-orange-800",children:[e.jsx(r,{className:"w-4 h-4 inline mr-1"}),"ç¬¬ä¸€å¯©æŸ»é€šéŽï¼ç¬¬äºŒå¯©æŸ»ã®ç”³ã—è¾¼ã¿ãŒå¯èƒ½ã§ã™"]})]})}function q(s){return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${{pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",confirmed:"bg-blue-100 text-blue-800",cancelled:"bg-gray-100 text-gray-800",first_stage_passed:"bg-blue-100 text-blue-800",second_stage_waiting:"bg-orange-100 text-orange-800",second_stage_review:"bg-purple-100 text-purple-800",qr_testing:"bg-orange-100 text-orange-800"}[s]||"bg-gray-100 text-gray-800"}`,children:{pending:"æ‰¿èªå¾…ã¡",approved:"æ‰¿èªæ¸ˆã¿",rejected:"å´ä¸‹",confirmed:"ç¢ºå®š",cancelled:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«",first_stage_passed:"ç¬¬ä¸€å¯©æŸ»é€šéŽ",second_stage_waiting:"äºŒæ¬¡å¯©æŸ»ç”³ã—è¾¼ã¿",second_stage_review:"ç¬¬äºŒå¯©æŸ»ä¸­",qr_testing:"QRæ¤œæŸ»ä¸­"}[s]||s})}function z({park:s,onClose:t}){return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold",children:[s.name,"ã®ç®¡ç†"]}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:e.jsx(g,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"åŸºæœ¬æƒ…å ±"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"ä½æ‰€:"})," ",s.address]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:"})," ",q(s.status)]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"æ–™é‡‘:"})," Â¥",s.price,"/æ—¥"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"æœ€å¤§åŽå®¹äººæ•°:"})," ",s.max_capacity,"äºº"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"ç¾åœ¨ã®åˆ©ç”¨è€…æ•°:"})," ",s.current_occupancy,"äºº"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"è©•ä¾¡:"})," â˜…",s.average_rating.toFixed(1)," (",s.review_count,"ä»¶)"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"è¨­å‚™æƒ…å ±"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries({parking:"é§è»Šå ´",shower:"ã‚·ãƒ£ãƒ¯ãƒ¼è¨­å‚™",restroom:"ãƒˆã‚¤ãƒ¬",agility:"ã‚¢ã‚¸ãƒªãƒ†ã‚£è¨­å‚™",rest_area:"ä¼‘æ†©ã‚¹ãƒšãƒ¼ã‚¹",water_station:"çµ¦æ°´è¨­å‚™"}).map(([t,a])=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 rounded "+(s.facilities[t]?"bg-green-500":"bg-gray-300")}),e.jsx("span",{className:"text-sm",children:a})]},t))})]})]}),"first_stage_passed"===s.status&&e.jsx("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(r,{className:"w-5 h-5 text-blue-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"ç¬¬ä¸€å¯©æŸ»é€šéŽ"}),e.jsx("p",{className:"text-sm text-blue-800 mb-3",children:"ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼ç¬¬ä¸€å¯©æŸ»ã«é€šéŽã—ã¾ã—ãŸã€‚æ¬¡ã¯è©³ç´°ãªæ–½è¨­æƒ…å ±ã¨ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãŒå¿…è¦ã§ã™ã€‚"}),e.jsx(k,{to:`/parks/${s.id}/second-stage`,children:e.jsx(L,{className:"bg-blue-600 hover:bg-blue-700",children:"ç¬¬äºŒå¯©æŸ»ã‚’é€²ã‚ã‚‹"})})]})]})}),"second_stage_review"===s.status&&e.jsx("div",{className:"mb-6 p-4 bg-purple-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(x,{className:"w-5 h-5 text-purple-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-purple-900 mb-2",children:"ç¬¬äºŒå¯©æŸ»ä¸­"}),e.jsx("p",{className:"text-sm text-purple-800",children:"ç¾åœ¨ã€ç®¡ç†è€…ãŒæ–½è¨­ç”»åƒã‚’ç¢ºèªã—ã¦ã„ã¾ã™ã€‚å¯©æŸ»å®Œäº†ã¾ã§ãŠå¾…ã¡ãã ã•ã„ã€‚ å¯©æŸ»ã«ã¯é€šå¸¸3-5å–¶æ¥­æ—¥ã‹ã‹ã‚Šã¾ã™ã€‚çµæžœã¯ãƒ¡ãƒ¼ãƒ«ã¨ã‚¢ãƒ—ãƒªå†…é€šçŸ¥ã§ãŠçŸ¥ã‚‰ã›ã—ã¾ã™ã€‚"})]})]})}),"approved"===s.status&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"çµ±è¨ˆæƒ…å ±"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("div",{className:"flex items-center space-x-2 mb-2",children:e.jsx("h4",{className:"font-medium text-blue-900",children:"ä»Šæœˆã®äºˆç´„"})}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"32ä»¶"}),e.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"å‰æœˆæ¯” +12%"})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(G,{className:"w-5 h-5 text-green-600"}),e.jsx("h4",{className:"font-medium text-green-900",children:"ä»Šæœˆã®åŽç›Š"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"Â¥25,600"}),e.jsx("p",{className:"text-xs text-green-700 mt-1",children:"å‰æœˆæ¯” +8%"})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Y,{className:"w-5 h-5 text-purple-600"}),e.jsx("h4",{className:"font-medium text-purple-900",children:"åˆ©ç”¨è€…æ•°"})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"128äºº"}),e.jsx("p",{className:"text-xs text-purple-700 mt-1",children:"å‰æœˆæ¯” +15%"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["approved"===s.status&&e.jsx(k,{to:`/parks/${s.id}`,children:e.jsxs(L,{className:"w-full bg-white hover:bg-gray-50 border border-gray-300 text-gray-700",children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"å…¬é–‹ãƒšãƒ¼ã‚¸ã‚’è¦‹ã‚‹"]})}),"approved"===s.status&&e.jsx(k,{to:"/owner-payment-system",children:e.jsxs(L,{className:"w-full bg-white hover:bg-gray-50 border border-gray-300 text-gray-700",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"åŽç›Šãƒ¬ãƒãƒ¼ãƒˆ"]})}),"second_stage_review"===s.status?e.jsx("div",{className:"w-full text-center py-3 text-gray-600 text-sm bg-gray-50 rounded border",children:"å¯©æŸ»ä¸­ã®ãŸã‚æ“ä½œã§ãã¾ã›ã‚“"}):e.jsx(k,{to:"first_stage_passed"===s.status||"second_stage_waiting"===s.status?`/parks/${s.id}/second-stage`:`/parks/${s.id}/manage`,children:e.jsx(L,{className:"w-full",children:"first_stage_passed"===s.status||"second_stage_waiting"===s.status?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"second_stage_waiting"===s.status?"ç¬¬äºŒå¯©æŸ»ã‚’ç”³ã—è¾¼ã‚€":"ç¬¬äºŒå¯©æŸ»ã‚’é€²ã‚ã‚‹"]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{className:"w-4 h-4 mr-2"}),"approved"===s.status?"è¨­å®šã‚’ç·¨é›†":"è©³ç´°ã‚’è¦‹ã‚‹"]})})})]})]})})})}function G({className:s}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:[e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),e.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]})}function Y({className:s}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:[e.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}function $({className:s}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}const B=({icon:s,label:t,value:a,color:r,trend:n})=>{const i={up:e.jsx(v,{className:"w-4 h-4 text-green-500"}),down:e.jsx(b,{className:"w-4 h-4 text-red-500"}),neutral:e.jsx(f,{className:"w-4 h-4 text-gray-500"})};return e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${{blue:"bg-blue-50 text-blue-600",green:"bg-green-50 text-green-600",purple:"bg-purple-50 text-purple-600",orange:"bg-orange-50 text-orange-600"}[r]}`,children:s}),e.jsx("div",{className:"flex items-center space-x-1",children:i[n]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a}),e.jsx("p",{className:"text-sm text-gray-600",children:t})]})]})},H=({dogs:s,ownedParks:t,recentReservations:a,profile:r})=>{const i={approved:s.filter(e=>e.vaccine_certifications?.some(e=>"approved"===e.status)).length,pending:s.filter(e=>e.vaccine_certifications?.some(e=>"pending"===e.status)).length,total:s.length},o={approved:t.filter(e=>"approved"===e.status).length,pending:t.filter(e=>"pending"===e.status).length,total:t.length},d=(()=>{const e=new Date;e.setDate(1),e.setHours(0,0,0,0);return{monthly:a.filter(s=>new Date(s.created_at)>=e).length,total:a.length}})();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(B,{icon:e.jsx(p,{className:"w-6 h-6"}),label:"ç™»éŒ²æ¸ˆã¿ã®æ„›çŠ¬",value:s.length,color:"blue",trend:s.length>0?"up":"neutral"}),e.jsx(B,{icon:e.jsx(l,{className:"w-6 h-6"}),label:"ä»Šæœˆã®äºˆç´„",value:d.monthly,color:"green",trend:d.monthly>0?"up":"neutral"}),e.jsx(B,{icon:e.jsx(n,{className:"w-6 h-6"}),label:"æ‰€æœ‰æ–½è¨­",value:t.length,color:"purple",trend:t.length>0?"up":"neutral"}),e.jsx(B,{icon:e.jsx(j,{className:"w-6 h-6"}),label:"ç·äºˆç´„æ•°",value:d.total,color:"orange",trend:d.total>0?"up":"neutral"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(j,{className:"w-5 h-5 mr-2"}),"ãƒ¯ã‚¯ãƒãƒ³è¨¼æ˜Žæ›¸ã®çŠ¶æ³"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[i.total,"é ­ä¸­"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm",children:"æ‰¿èªæ¸ˆã¿"})]}),e.jsxs("span",{className:"text-sm font-medium text-green-600",children:[i.approved,"é ­"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"text-sm",children:"å¯©æŸ»ä¸­"})]}),e.jsxs("span",{className:"text-sm font-medium text-yellow-600",children:[i.pending,"é ­"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-300 rounded-full"}),e.jsx("span",{className:"text-sm",children:"æœªç™»éŒ²"})]}),e.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[i.total-i.approved-i.pending,"é ­"]})]})]}),i.total>0&&e.jsx("div",{className:"mt-4 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:i.approved/i.total*100+"%"}})})]}),"owner"===r?.user_type&&e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(n,{className:"w-5 h-5 mr-2"}),"æ–½è¨­ç®¡ç†çŠ¶æ³"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[o.total,"æ–½è¨­"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm",children:"é‹å–¶ä¸­"})]}),e.jsxs("span",{className:"text-sm font-medium text-green-600",children:[o.approved,"æ–½è¨­"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"text-sm",children:"å¯©æŸ»ä¸­"})]}),e.jsxs("span",{className:"text-sm font-medium text-yellow-600",children:[o.pending,"æ–½è¨­"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-300 rounded-full"}),e.jsx("span",{className:"text-sm",children:"ãã®ä»–"})]}),e.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[o.total-o.approved-o.pending,"æ–½è¨­"]})]})]}),o.total>0&&e.jsx("div",{className:"mt-4 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:o.approved/o.total*100+"%"}})})]})]})]})},K={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_GOOGLE_MAPS_API_KEY:"AIzaSyC9sxGamDZmdKIz3vP1CWLJORl-QkoWgHg",VITE_NETLIFY_API_KEY:"your_netlify_api_key",VITE_PAYPAY_API_KEY:"",VITE_PAYPAY_MERCHANT_ID:"",VITE_PAYPAY_SECRET_KEY:"",VITE_STRIPE_PUBLIC_KEY:"pk_live_51RYUXtAHWLDQ7ynZJ2Rse439JRUesTrISQjlUpQLJs4RKprLygju98sbPHbhXwSixvYxo2pyo1c5uo4j93pQieSt00z0re16rJ",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ubWNpdnd4dHpxYWpjb3ZwdGdmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxODk3OTUsImV4cCI6MjA2NDc2NTc5NX0.AqFCz3GQUVeGaG2988LCzsE4aJpeio3xScoxv5T0-OU",VITE_SUPABASE_URL:"https://onmcivwxtzqajcovptgf.supabase.co"},Q=new Map,W=e=>{const s=Q.get(e);return s?Object.fromEntries(Object.entries(s.stores).map(([e,s])=>[e,s.getState()])):{}},X=e=>{var s,t;if(!e)return;const a=e.split("\n"),r=a.findIndex(e=>e.includes("api.setState"));if(r<0)return;const n=(null==(s=a[r+1])?void 0:s.trim())||"";return null==(t=/.+ (.+) .+/.exec(n))?void 0:t[1]},Z=(e,s={})=>(t,a,r)=>{const{enabled:n,anonymousActionType:i,store:l,...o}=s;let d;try{d=(null!=n?n:"production"!==(K?"production":void 0))&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(u){}if(!d)return e(t,a,r);const{connection:c,...m}=((e,s,t)=>{if(void 0===e)return{type:"untracked",connection:s.connect(t)};const a=Q.get(t.name);if(a)return{type:"tracked",store:e,...a};const r={connection:s.connect(t),stores:{}};return Q.set(t.name,r),{type:"tracked",store:e,...r}})(l,d,o);let x=!0;r.setState=(e,s,n)=>{const d=t(e,s);if(!x)return d;const m=void 0===n?{type:i||X((new Error).stack)||"anonymous"}:"string"==typeof n?{type:n}:n;return void 0===l?(null==c||c.send(m,a()),d):(null==c||c.send({...m,type:`${l}/${m.type}`},{...W(o.name),[l]:r.getState()}),d)},r.devtools={cleanup:()=>{c&&"function"==typeof c.unsubscribe&&c.unsubscribe(),((e,s)=>{if(void 0===s)return;const t=Q.get(e);t&&(delete t.stores[s],0===Object.keys(t.stores).length&&Q.delete(e))})(o.name,l)}};const g=(...e)=>{const s=x;x=!1,t(...e),x=s},h=e(r.setState,a,r);if("untracked"===m.type?null==c||c.init(h):(m.stores[m.store]=r,null==c||c.init(Object.fromEntries(Object.entries(m.stores).map(([e,s])=>[e,e===m.store?h:s.getState()])))),r.dispatchFromDevtools&&"function"==typeof r.dispatch){let e=!1;const s=r.dispatch;r.dispatch=(...t)=>{"production"===(K?"production":void 0)||"__setState"!==t[0].type||e||(e=!0),s(...t)}}return c.subscribe(e=>{var s;switch(e.type){case"ACTION":if("string"!=typeof e.payload)return;return ee(e.payload,e=>{if("__setState"===e.type){if(void 0===l)return void g(e.state);Object.keys(e.state).length;const s=e.state[l];if(null==s)return;return void(JSON.stringify(r.getState())!==JSON.stringify(s)&&g(s))}r.dispatchFromDevtools&&"function"==typeof r.dispatch&&r.dispatch(e)});case"DISPATCH":switch(e.payload.type){case"RESET":return g(h),void 0===l?null==c?void 0:c.init(r.getState()):null==c?void 0:c.init(W(o.name));case"COMMIT":return void 0===l?void(null==c||c.init(r.getState())):null==c?void 0:c.init(W(o.name));case"ROLLBACK":return ee(e.state,e=>{if(void 0===l)return g(e),void(null==c||c.init(r.getState()));g(e[l]),null==c||c.init(W(o.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return ee(e.state,e=>{void 0!==l?JSON.stringify(r.getState())!==JSON.stringify(e[l])&&g(e[l]):g(e)});case"IMPORT_STATE":{const{nextLiftedState:t}=e.payload,a=null==(s=t.computedStates.slice(-1)[0])?void 0:s.state;if(!a)return;return g(void 0===l?a:a[l]),void(null==c||c.send(null,t))}case"PAUSE_RECORDING":return x=!x}return}}),h},ee=(e,s)=>{let t;try{t=JSON.parse(e)}catch(a){}void 0!==t&&s(t)};function se(e,s){let t;try{t=e()}catch(a){return}return{getItem:e=>{var s;const a=e=>null===e?null:JSON.parse(e,void 0),r=null!=(s=t.getItem(e))?s:null;return r instanceof Promise?r.then(a):a(r)},setItem:(e,s)=>t.setItem(e,JSON.stringify(s,void 0)),removeItem:e=>t.removeItem(e)}}const te=e=>s=>{try{const t=e(s);return t instanceof Promise?t:{then:e=>te(e)(t),catch(e){return this}}}catch(t){return{then(e){return this},catch:e=>te(e)(t)}}},ae=(e,s)=>(t,a,r)=>{let n={storage:se(()=>localStorage),partialize:e=>e,version:0,merge:(e,s)=>({...s,...e}),...s},i=!1;const l=new Set,o=new Set;let d=n.storage;if(!d)return e((...e)=>{t(...e)},a,r);const c=()=>{const e=n.partialize({...a()});return d.setItem(n.name,{state:e,version:n.version})},m=r.setState;r.setState=(e,s)=>{m(e,s),c()};const x=e((...e)=>{t(...e),c()},a,r);let g;r.getInitialState=()=>x;const h=()=>{var e,s;if(!d)return;i=!1,l.forEach(e=>{var s;return e(null!=(s=a())?s:x)});const r=(null==(s=n.onRehydrateStorage)?void 0:s.call(n,null!=(e=a())?e:x))||void 0;return te(d.getItem.bind(d))(n.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===n.version)return[!1,e.state];if(n.migrate){const s=n.migrate(e.state,e.version);return s instanceof Promise?s.then(e=>[!0,e]):[!0,s]}}return[!1,void 0]}).then(e=>{var s;const[r,i]=e;if(g=n.merge(i,null!=(s=a())?s:x),t(g,!0),r)return c()}).then(()=>{null==r||r(g,void 0),g=a(),i=!0,o.forEach(e=>e(g))}).catch(e=>{null==r||r(void 0,e)})};return r.persist={setOptions:e=>{n={...n,...e},e.storage&&(d=e.storage)},clearStorage:()=>{null==d||d.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>h(),hasHydrated:()=>i,onHydrate:e=>(l.add(e),()=>{l.delete(e)}),onFinishHydration:e=>(o.add(e),()=>{o.delete(e)})},n.skipHydration||h(),g||x},re=R()(Z(ae((e,s)=>({user:null,isAuthenticated:!1,isLoading:!0,setUser:s=>e({user:s,isAuthenticated:!!s},!1,"setUser"),setLoading:s=>e({isLoading:s},!1,"setLoading"),login:async(t,a)=>{e({isLoading:!0},!1,"login/start");try{const{data:r,error:n}=await C.auth.signInWithPassword({email:t,password:a});if(n)throw n;if(r.user){const{data:t}=await C.from("profiles").select("name, role").eq("id",r.user.id).single(),a={id:r.user.id,email:r.user.email||"",name:t?.name,role:t?.role||"user"};return s().setUser(a),e({isLoading:!1},!1,"login/success"),!0}return e({isLoading:!1},!1,"login/failed"),!1}catch(r){return e({isLoading:!1},!1,"login/error"),!1}},logout:async()=>{e({isLoading:!0},!1,"logout/start");try{await C.auth.signOut(),e({user:null,isAuthenticated:!1,isLoading:!1},!1,"logout/success")}catch(s){e({isLoading:!1},!1,"logout/error")}},checkAuth:async()=>{e({isLoading:!0},!1,"checkAuth/start");try{const{data:{session:e}}=await C.auth.getSession();if(e?.user){const{data:t}=await C.from("profiles").select("name, role").eq("id",e.user.id).single(),a={id:e.user.id,email:e.user.email||"",name:t?.name,role:t?.role||"user"};s().setUser(a)}else s().setUser(null)}catch(t){s().setUser(null)}finally{e({isLoading:!1},!1,"checkAuth/complete")}},updateProfile:async t=>{const{user:a}=s();if(!a)return!1;try{const{error:s}=await C.from("profiles").update(t).eq("id",a.id);if(s)throw s;return e({user:{...a,...t}},!1,"updateProfile"),!0}catch(r){return!1}}}),{name:"auth-store",partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated})}),{name:"auth-store"})),ne=R()(Z((e,s)=>({isGlobalLoading:!1,loadingTasks:new Set,notifications:[],activeModal:null,isMenuOpen:!1,activeTab:"",theme:"light",isMobile:!1,isTablet:!1,setGlobalLoading:s=>e({isGlobalLoading:s},!1,"setGlobalLoading"),addLoadingTask:s=>e(e=>({loadingTasks:new Set([...e.loadingTasks,s]),isGlobalLoading:!0}),!1,"addLoadingTask"),removeLoadingTask:s=>e(e=>{const t=new Set(e.loadingTasks);return t.delete(s),{loadingTasks:t,isGlobalLoading:t.size>0}},!1,"removeLoadingTask"),addNotification:t=>{const a=Date.now().toString(),r={...t,id:a};e(e=>({notifications:[...e.notifications,r]}),!1,"addNotification");const n=t.duration||5e3;setTimeout(()=>{s().removeNotification(a)},n)},removeNotification:s=>e(e=>({notifications:e.notifications.filter(e=>e.id!==s)}),!1,"removeNotification"),clearNotifications:()=>e({notifications:[]},!1,"clearNotifications"),showModal:s=>{const t=Date.now().toString();e({activeModal:{...s,id:t}},!1,"showModal")},hideModal:()=>e({activeModal:null},!1,"hideModal"),setMenuOpen:s=>e({isMenuOpen:s},!1,"setMenuOpen"),setActiveTab:s=>e({activeTab:s},!1,"setActiveTab"),setTheme:s=>{e({theme:s},!1,"setTheme"),document.documentElement.className=s},toggleTheme:()=>{const e="light"===s().theme?"dark":"light";s().setTheme(e)},setDeviceType:(s,t)=>e({isMobile:s,isTablet:t},!1,"setDeviceType")}),{name:"ui-store"}));function ie(){const{user:s,logout:a,isAdmin:i}=O(),l=D(),o=E(),{user:d,setUser:c,updateProfile:m}=re(),{setGlobalLoading:x,addNotification:g,removeNotification:h,isGlobalLoading:u}=ne(),[p,j]=I.useState(null),[f,b]=I.useState([]),[v,P]=I.useState([]),[U,R]=I.useState([]),[q,G]=I.useState([]),[Y,$]=I.useState([]),[B,K]=I.useState([]),[Q,W]=I.useState(!0),[X,Z]=I.useState(!1),[ee,se]=I.useState(""),[te,ae]=I.useState(""),[ie,le]=I.useState(null),[oe,de]=I.useState(!1),[ce,me]=I.useState(null),[xe,ge]=I.useState(!1),[he,ue]=I.useState(!1),[pe,je]=I.useState({name:"",breed:"",gender:"",birthDate:""}),[fe,be]=I.useState(null),[ve,Ne]=I.useState(null),[ye,we]=I.useState(null),[_e,Se]=I.useState(null),[ke,De]=I.useState(""),[Ee,Ie]=I.useState("");A();const Te=async()=>{try{x(!0),W(!0);const[t,a,r,n,i,l]=await Promise.all([C.from("profiles").select("*").eq("id",s?.id).single(),C.from("dogs").select("*, vaccine_certifications(*)").eq("owner_id",s?.id).order("created_at",{ascending:!1}),C.from("dog_parks").select("*").eq("owner_id",s?.id).order("created_at",{ascending:!1}),C.from("reservations").select("*, dog_park:dog_parks(*), dog:dogs(*)").eq("user_id",s?.id).order("created_at",{ascending:!1}).limit(5),C.from("notifications").select("*").eq("user_id",s?.id).eq("read",!1).order("created_at",{ascending:!1}).limit(5),C.from("news_announcements").select("*").order("created_at",{ascending:!1}).limit(3)]);let o=[];try{const e=await C.from("dog_likes").select("\n            *,\n            dog:dogs(\n              *,\n              vaccine_certifications(*)\n            )\n          ").eq("user_id",s?.id).order("created_at",{ascending:!1}).limit(10);e.data&&(o=e.data)}catch(e){}[t,a,r,n,i,l].forEach((e,s)=>{e.error&&g({type:"error",title:"ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼",message:"ä¸€éƒ¨ã®ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ",duration:5e3})}),j(t.data),b(a.data||[]),P(r.data||[]),R(n.data||[]),G(i.data||[]),$(l.data||[]),K(o.map(e=>e.dog).filter(Boolean)),t.data&&!d&&c({id:s?.id||"",email:s?.email||"",name:t.data.name,role:t.data.user_type||"user"})}catch(t){se("ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„ã€‚"),g({type:"error",title:"ã‚¨ãƒ©ãƒ¼",message:"ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ",duration:5e3})}finally{W(!1),x(!1)}};I.useEffect(()=>{s?(Te(),o.search.includes("success=true")&&(Z(!0),ae("æ“ä½œãŒæ­£å¸¸ã«å®Œäº†ã—ã¾ã—ãŸï¼"),g({type:"success",title:"æˆåŠŸ",message:"æ“ä½œãŒæ­£å¸¸ã«å®Œäº†ã—ã¾ã—ãŸï¼",duration:3e3}),window.history.replaceState({},document.title,o.pathname),setTimeout(()=>{Z(!1),ae("")},5e3))):l("/login")},[s,l,o]);const Le=()=>{be(null),we(null),Se(null),De(""),Ie(""),Ne(null)},Ce=e=>{le(e),de(!0)};return Q||u?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),e.jsx("div",{className:"absolute inset-0 animate-ping rounded-full h-12 w-12 border border-blue-400 opacity-20"})]})})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"ãƒžã‚¤ãƒšãƒ¼ã‚¸"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["ã‚ˆã†ã“ãã€",p?.name||d?.name||"ãƒ¦ãƒ¼ã‚¶ãƒ¼","ã•ã‚“ï¼"]})]}),e.jsx("div",{className:"flex items-center space-x-4",children:i&&e.jsxs("a",{href:"/admin",className:"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-4 py-2 rounded-lg font-medium inline-flex items-center transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"ç®¡ç†è€…ç”»é¢"]})})]}),X&&e.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 text-green-800 rounded-lg flex items-center animate-fade-in",children:[e.jsx(r,{className:"w-5 h-5 mr-2 text-green-600"}),"æ“ä½œãŒæ­£å¸¸ã«å®Œäº†ã—ã¾ã—ãŸï¼"]}),ee&&e.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 text-red-800 rounded-lg flex items-center",children:[e.jsx("div",{className:"w-5 h-5 mr-2 text-red-600",children:"âš ï¸"}),ee]}),te&&e.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 text-green-800 rounded-lg flex items-center",children:[e.jsx(r,{className:"w-5 h-5 mr-2 text-green-600"}),te]}),e.jsx(H,{dogs:f,ownedParks:v,recentReservations:U,profile:p}),e.jsx(F,{dogs:f,user:s,selectedDog:ce,showDogEditModal:xe,isUpdatingDog:he,dogUpdateError:ee,dogUpdateSuccess:te,dogFormData:pe,dogImageFile:fe,dogImagePreview:ve,rabiesVaccineFile:ye,comboVaccineFile:_e,rabiesExpiryDate:ke,comboExpiryDate:Ee,onDogSelect:e=>{me(e);const s=new Date(e.birth_date).toISOString().split("T")[0];je({name:e.name,breed:e.breed,gender:e.gender,birthDate:s||""}),Ne(e.image_url||null);const t=e.vaccine_certifications?.[0];De(t?.rabies_expiry_date||""),Ie(t?.combo_expiry_date||""),ge(!0)},onCloseDogEditModal:()=>ge(!1),onUpdateDog:async e=>{if(e.preventDefault(),ce&&s)try{if(ue(!0),se(""),!(pe.name&&pe.breed&&pe.gender&&pe.birthDate))return void se("ã™ã¹ã¦ã®å¿…é ˆé …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");if(!["ã‚ªã‚¹","ãƒ¡ã‚¹"].includes(pe.gender))return void se("æ€§åˆ¥ã¯ã€Œã‚ªã‚¹ã€ã¾ãŸã¯ã€Œãƒ¡ã‚¹ã€ã‚’é¸æŠžã—ã¦ãã ã•ã„");if(ye||_e){const e=await M(ce.id,ye||void 0,_e||void 0,ke,Ee);if(!e.success)return void se(e.error||"ãƒ¯ã‚¯ãƒãƒ³è¨¼æ˜Žæ›¸ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ")}const e={name:pe.name,breed:pe.breed,gender:pe.gender,birth_date:pe.birthDate};if(fe){const s=`profile_${Date.now()}_${fe.name}`,t=`${ce.id}/${s}`,{error:a}=await C.storage.from("dog-images").upload(t,fe,{upsert:!0});if(a)throw a;e.image_url=C.storage.from("dog-images").getPublicUrl(t).data.publicUrl}const{error:s}=await C.from("dogs").update(e).eq("id",ce.id);if(s)throw s;ae("ãƒ¯ãƒ³ã¡ã‚ƒã‚“ã®æƒ…å ±ã‚’æ›´æ–°ã—ã¾ã—ãŸï¼"),g({type:"success",title:"æˆåŠŸ",message:"ãƒ¯ãƒ³ã¡ã‚ƒã‚“ã®æƒ…å ±ã‚’æ›´æ–°ã—ã¾ã—ãŸï¼",duration:3e3}),ge(!1),await Te(),Le()}catch(t){const e=t instanceof Error?t.message:"ãƒ¯ãƒ³ã¡ã‚ƒã‚“ã®æƒ…å ±ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ";se(e),g({type:"error",title:"ã‚¨ãƒ©ãƒ¼",message:e,duration:5e3})}finally{ue(!1)}},onDeleteDog:async e=>{if(window.confirm(`${e.name}ã®æƒ…å ±ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ\n\nã“ã®æ“ä½œã¯å…ƒã«æˆ»ã›ã¾ã›ã‚“ã€‚`))try{ue(!0);const{error:s}=await C.from("dogs").delete().eq("id",e.id);if(s)throw s;ae(`${e.name}ã®æƒ…å ±ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚`),g({type:"success",title:"å‰Šé™¤å®Œäº†",message:`${e.name}ã®æƒ…å ±ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚`,duration:3e3}),ge(!1),await Te()}catch(s){se("ãƒ¯ãƒ³ã¡ã‚ƒã‚“ã®æƒ…å ±ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}finally{ue(!1)}},onDogImageSelect:async e=>{const s=e.target.files?.[0];if(s)try{if(s.size>10485760)return void se("ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã¯10MBä»¥ä¸‹ã«ã—ã¦ãã ã•ã„ã€‚");if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(s.type))return void se(`ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ç”»åƒå½¢å¼ã§ã™: ${s.type}`);be(s);const e=new FileReader;e.onload=e=>{Ne(e.target?.result)},e.readAsDataURL(s),se("")}catch(t){se("ç”»åƒã®å‡¦ç†ã«å¤±æ•—ã—ã¾ã—ãŸã€‚åˆ¥ã®ç”»åƒã‚’ãŠè©¦ã—ãã ã•ã„ã€‚")}},onDogImageRemove:()=>{},onRabiesVaccineSelect:e=>we(e.target.files?.[0]||null),onComboVaccineSelect:e=>Se(e.target.files?.[0]||null),onFormDataChange:je,onRabiesExpiryDateChange:De,onComboExpiryDateChange:Ie}),v.length>0&&e.jsxs(T,{className:"p-6 bg-gradient-to-br from-green-50 to-emerald-50 border-green-200",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[e.jsx(n,{className:"w-6 h-6 text-green-600 mr-2"}),"ç®¡ç†ä¸­ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ (",v.length,"æ–½è¨­)"]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(s=>e.jsx(J,{park:s,onSelect:Ce},s.id))})]}),e.jsxs(T,{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[e.jsx("span",{className:"text-2xl mr-2",children:"ðŸš€"}),"ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(k,{to:"/parks",className:"group",children:e.jsxs("div",{className:"p-6 bg-gradient-to-br from-blue-50 to-sky-50 rounded-xl hover:from-blue-100 hover:to-sky-100 transition-all duration-300 transform hover:scale-105 shadow-sm hover:shadow-md border border-blue-200",children:[e.jsx(y,{className:"w-8 h-8 text-blue-600 mb-3"}),e.jsx("h3",{className:"font-semibold text-blue-900 mb-1",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³æ¤œç´¢"}),e.jsx("p",{className:"text-sm text-blue-700",children:"è¿‘ãã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’æŽ¢ã™"})]})}),e.jsx(k,{to:"/community",className:"group",children:e.jsxs("div",{className:"p-6 bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl hover:from-green-100 hover:to-emerald-100 transition-all duration-300 transform hover:scale-105 shadow-sm hover:shadow-md border border-green-200",children:[e.jsx(w,{className:"w-8 h-8 text-green-600 mb-3"}),e.jsx("h3",{className:"font-semibold text-green-900 mb-1",children:"ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£"}),e.jsx("p",{className:"text-sm text-green-700",children:"ä»–ã®é£¼ã„ä¸»ã¨äº¤æµ"})]})}),e.jsx(k,{to:"/petshop",className:"group",children:e.jsxs("div",{className:"p-6 bg-gradient-to-br from-purple-50 to-violet-50 rounded-xl hover:from-purple-100 hover:to-violet-100 transition-all duration-300 transform hover:scale-105 shadow-sm hover:shadow-md border border-purple-200",children:[e.jsx(_,{className:"w-8 h-8 text-purple-600 mb-3"}),e.jsx("h3",{className:"font-semibold text-purple-900 mb-1",children:"ãƒšãƒƒãƒˆã‚·ãƒ§ãƒƒãƒ—"}),e.jsx("p",{className:"text-sm text-purple-700",children:"ãƒšãƒƒãƒˆç”¨å“ã‚’è³¼å…¥"})]})}),e.jsx(k,{to:"/news",className:"group",children:e.jsxs("div",{className:"p-6 bg-gradient-to-br from-orange-50 to-amber-50 rounded-xl hover:from-orange-100 hover:to-amber-100 transition-all duration-300 transform hover:scale-105 shadow-sm hover:shadow-md border border-orange-200",children:[e.jsx(t,{className:"w-8 h-8 text-orange-600 mb-3"}),e.jsx("h3",{className:"font-semibold text-orange-900 mb-1",children:"æ–°ç€æƒ…å ±"}),e.jsx("p",{className:"text-sm text-orange-700",children:"æœ€æ–°ã®ãŠçŸ¥ã‚‰ã›"})]})}),e.jsx(k,{to:"/liked-dogs",className:"group",children:e.jsxs("div",{className:"p-6 bg-gradient-to-br from-pink-50 to-rose-50 rounded-xl hover:from-pink-100 hover:to-rose-100 transition-all duration-300 transform hover:scale-105 shadow-sm hover:shadow-md border border-pink-200",children:[e.jsx(S,{className:"w-8 h-8 text-pink-600 mb-3"}),e.jsx("h3",{className:"font-semibold text-pink-900 mb-1",children:"ã„ã„ã­ã—ãŸãƒ¯ãƒ³ã¡ã‚ƒã‚“"}),e.jsx("p",{className:"text-sm text-pink-700",children:"ãŠæ°—ã«å…¥ã‚Šã®ãƒ¯ãƒ³ã¡ã‚ƒã‚“"})]})}),e.jsx(k,{to:"/park-registration-agreement",className:"group",children:e.jsxs("div",{className:"p-6 bg-gradient-to-br from-yellow-50 to-orange-50 rounded-xl hover:from-yellow-100 hover:to-orange-100 transition-all duration-300 transform hover:scale-105 shadow-sm hover:shadow-md border-2 border-orange-200",children:[e.jsx(n,{className:"w-8 h-8 text-orange-600 mb-3"}),e.jsx("h3",{className:"font-semibold text-orange-900 mb-1",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚ªãƒ¼ãƒŠãƒ¼å‹Ÿé›†"}),e.jsx("p",{className:"text-sm text-orange-700 mb-2",children:"ã‚ãªãŸã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’ç™»éŒ²"}),e.jsx("div",{className:"text-xs text-orange-600 font-semibold bg-orange-100 px-2 py-1 rounded-full inline-block",children:"ðŸ’° åŽç›ŠåŒ–ã®ãƒãƒ£ãƒ³ã‚¹ï¼"})]})}),e.jsx(k,{to:"/facility-registration",className:"group",children:e.jsxs("div",{className:"p-6 bg-gradient-to-br from-teal-50 to-cyan-50 rounded-xl hover:from-teal-100 hover:to-cyan-100 transition-all duration-300 transform hover:scale-105 shadow-sm hover:shadow-md border-2 border-teal-200",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(S,{className:"w-6 h-6 text-teal-600 mr-2"}),e.jsx(_,{className:"w-6 h-6 text-teal-600"})]}),e.jsx("h3",{className:"font-semibold text-teal-900 mb-1",children:"ãƒšãƒƒãƒˆé–¢é€£æ–½è¨­ç™»éŒ²"}),e.jsx("p",{className:"text-sm text-teal-700 mb-2",children:"åº—èˆ—ãƒ»å®¿æ³Šæ–½è¨­ãƒ»ã‚µãƒ­ãƒ³ãªã©"}),e.jsx("div",{className:"text-xs text-teal-600 font-semibold bg-teal-100 px-2 py-1 rounded-full inline-block",children:"ðŸŽ‰ ä»Šãªã‚‰ç„¡æ–™æŽ²è¼‰ï¼"})]})})]})]}),q.length>0&&e.jsx(V,{notifications:q,onMarkAsRead:async e=>{try{await C.from("notifications").update({read:!0}).eq("id",e),G(s=>s.filter(s=>s.id!==e)),g({type:"info",title:"é€šçŸ¥",message:"é€šçŸ¥ã‚’æ—¢èª­ã«ã—ã¾ã—ãŸ",duration:2e3})}catch(s){se("é€šçŸ¥ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}}}),e.jsxs(T,{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[e.jsx(S,{className:"w-6 h-6 text-pink-600 mr-2"}),"ã„ã„ã­ã—ãŸãƒ¯ãƒ³ã¡ã‚ƒã‚“ (",B.length,"åŒ¹)"]}),0===B.length?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-br from-pink-100 to-rose-100 rounded-full flex items-center justify-center",children:e.jsx(S,{className:"w-12 h-12 text-pink-400"})}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"ã¾ã ã„ã„ã­ã—ãŸãƒ¯ãƒ³ã¡ã‚ƒã‚“ã¯ã„ã¾ã›ã‚“"}),e.jsx("p",{className:"text-sm mb-4",children:"æ°—ã«ãªã‚‹ãƒ¯ãƒ³ã¡ã‚ƒã‚“ãŒã„ãŸã‚‰ã€ã„ã„ã­ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼"}),e.jsx(k,{to:"/community",children:e.jsx(L,{size:"sm",className:"bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600",children:"ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚’è¦‹ã‚‹"})})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:B.map(s=>e.jsxs(k,{to:`/dog/${s.id}`,className:"group block bg-white border border-gray-200 rounded-xl hover:shadow-lg transition-all duration-300 overflow-hidden transform hover:scale-105",children:[e.jsx("div",{className:"aspect-square bg-gradient-to-br from-gray-100 to-gray-200 overflow-hidden",children:s.image_url?e.jsx("img",{src:s.image_url,alt:s.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-6xl",children:"ðŸ•"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 truncate",children:[s.name,"ã‚ªã‚¹"===s.gender?"ãã‚“":"ã¡ã‚ƒã‚“"]}),e.jsx(S,{className:"w-4 h-4 text-pink-500 fill-current"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:s.breed}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"mr-1",children:"ã‚ªã‚¹"===s.gender?"â™‚":"â™€"}),s.gender]}),s.like_count>0&&e.jsxs("span",{className:"bg-pink-100 text-pink-600 px-2 py-1 rounded-full",children:[s.like_count,"ã„ã„ã­"]})]})]})]},s.id))}),B.length>=10&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"æœ€æ–°ã®10åŒ¹ã‚’è¡¨ç¤ºä¸­"})})]}),oe&&ie&&e.jsx(z,{park:ie,onClose:()=>de(!1)})]})}export{ie as UserDashboard};
