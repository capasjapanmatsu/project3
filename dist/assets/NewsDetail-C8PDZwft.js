import{s as w,j as e,C as o,B as v}from"./index-BB1ywuBb.js";import{h as y,u as _,r,L as n}from"./react-vendor-Co5xHYdE.js";import{_ as i,A as k,p as C,a9 as L,v as E,b as D,F as x,t as S,u as T}from"./ui-vendor-B2-VOB5s.js";import"./supabase-vendor-FDBaXLCh.js";function F(){const{newsId:l}=y(),d=_(),[t,u]=r.useState(null),[h,c]=r.useState(!0),[m,j]=r.useState("");r.useEffect(()=>{l&&b()},[l]);const b=async()=>{try{c(!0);const{data:s,error:a}=await w.from("news_announcements").select("*").eq("id",l).single();if(a)throw a;u(s)}catch(s){console.error("Error fetching news detail:",s),j("新着情報の取得に失敗しました。")}finally{c(!1)}},N=s=>({news:"お知らせ",announcement:"重要なお知らせ",sale:"セール情報"})[s]||s,g=s=>({news:"bg-blue-100 text-blue-800",announcement:"bg-red-100 text-red-800",sale:"bg-green-100 text-green-800"})[s]||"bg-gray-100 text-gray-800",p=s=>{switch(s){case"news":return e.jsx(x,{className:"w-4 h-4"});case"announcement":return e.jsx(T,{className:"w-4 h-4"});case"sale":return e.jsx(S,{className:"w-4 h-4"});default:return e.jsx(x,{className:"w-4 h-4"})}},f=s=>new Date(s).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"});return h?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):m||!t?e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(n,{to:"/news",className:"flex items-center text-blue-600 hover:text-blue-800",children:[e.jsx(i,{className:"w-4 h-4 mr-2"}),"新着情報一覧に戻る"]})}),e.jsxs(o,{className:"p-6 text-center",children:[e.jsx(k,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-4",children:m||"お知らせが見つかりませんでした"}),e.jsx(v,{onClick:()=>d("/news"),children:"新着情報一覧に戻る"})]})]}):e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(n,{to:"/news",className:"flex items-center text-blue-600 hover:text-blue-800",children:[e.jsx(i,{className:"w-4 h-4 mr-2"}),"新着情報一覧に戻る"]})}),e.jsxs(o,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-1 ${g(t.category)}`,children:[p(t.category),e.jsx("span",{className:"ml-1",children:N(t.category)})]}),t.is_important&&e.jsx("span",{className:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium",children:"重要"}),e.jsxs("div",{className:"flex items-center text-gray-500 text-sm ml-auto",children:[e.jsx(C,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:f(t.created_at)})]})]}),e.jsx("h1",{className:"text-2xl font-bold mb-6",children:t.title}),t.image_url&&e.jsx("div",{className:"mb-6",children:e.jsx("img",{src:t.image_url,alt:t.title,className:"w-full h-auto rounded-lg object-cover",onError:s=>{s.currentTarget.src="https://images.pexels.com/photos/1108099/pexels-photo-1108099.jpeg"}})}),e.jsx("div",{className:"prose max-w-none mb-6",children:t.content.split(`
`).map((s,a)=>e.jsx("p",{className:"mb-4",children:s},a))}),t.link_url&&e.jsx("div",{className:"mt-6",children:e.jsxs("a",{href:t.link_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-blue-600 hover:text-blue-800",children:["詳細を見る",e.jsx(L,{className:"w-4 h-4 ml-1"})]})}),t.park_id&&e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsxs("h3",{className:"font-semibold text-blue-900 mb-2 flex items-center",children:[e.jsx(E,{className:"w-5 h-5 text-blue-600 mr-2"}),"関連施設"]}),e.jsxs(n,{to:`/parks/${t.park_id}`,className:"inline-flex items-center text-blue-600 hover:text-blue-800 mt-2",children:[e.jsx(D,{className:"w-4 h-4 mr-1"}),"施設詳細を見る"]})]})]})]})}export{F as NewsDetail};
