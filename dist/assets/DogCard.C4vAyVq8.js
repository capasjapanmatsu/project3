var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(s,a,r)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[a]=r,n=(e,s)=>{for(var a in s||(s={}))t.call(s,a)&&c(e,a,s[a]);if(r)for(var a of r(s))l.call(s,a)&&c(e,a,s[a]);return e},i=(e,r)=>s(e,a(r));import{j as d,B as o}from"./index.CQlxbczY.js";import{d as m}from"./dogBreeds.6lxY8Uni.js";import{I as x}from"./Input.DMWrIIWM.js";import{S as g}from"./Select.DfMWSl4f.js";import{g as h,V as b}from"./VaccineBadge.RvE4iloV.js";import{P as j,w as u,Q as p,X as N,a as v,V as y,F as f,Y as w}from"./ui.C72fRZ1L.js";function C({dog:e,onEdit:s}){const a=h(e),r=P(e.gender);return d.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden",children:e.image_url?d.jsx("img",{src:e.image_url,alt:e.name,className:"w-full h-full object-cover"}):d.jsx(j,{className:"w-8 h-8 text-gray-500"})}),d.jsxs("div",{children:[d.jsxs("h3",{className:"font-semibold",children:[e.name,r]}),d.jsxs("p",{className:"text-sm text-gray-600",children:[e.breed," • ",e.gender]}),e.microchip_number&&d.jsxs("p",{className:"text-xs text-gray-500",children:["マイクロチップ: ",e.microchip_number]}),d.jsx("div",{className:"flex items-center space-x-2 mt-1",children:d.jsx(b,{status:a,size:"sm"})})]})]}),d.jsx("div",{className:"flex space-x-2",children:d.jsx(o,{size:"sm",className:"bg-blue-50 hover:bg-blue-100 text-blue-600 border-0",onClick:()=>s(e),children:d.jsx(u,{className:"w-4 h-4"})})})]})}function P(e){return"オス"===e?"くん":"ちゃん"}function k({dog:e,isUpdating:s,error:a,success:r,dogFormData:t,dogImagePreview:l,onClose:c,onSubmit:j,onDelete:u,onFormChange:C,onImageSelect:k,onImageRemove:F,rabiesVaccineFile:I,comboVaccineFile:D,rabiesExpiryDate:O,comboExpiryDate:G,onRabiesVaccineSelect:B,onComboVaccineSelect:E,onRabiesExpiryDateChange:S,onComboExpiryDateChange:V}){if(!e)return null;const q=P(e.gender),z=h(e);return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("h2",{className:"text-xl font-bold",children:[e.name,q,"の情報編集"]}),d.jsxs("div",{className:"flex space-x-2",children:[u&&d.jsx("button",{type:"button",onClick:()=>{window.confirm(`${e.name}${q}を削除しますか？\n\nこの操作は元に戻せません。`)&&u(e)},className:"text-red-500 hover:text-red-700 p-1 rounded-lg hover:bg-red-50 transition-colors",title:"このワンちゃんを削除",children:d.jsx(p,{className:"w-5 h-5"})}),d.jsx("button",{onClick:c,className:"text-gray-500 hover:text-gray-700 p-1 rounded-lg hover:bg-gray-100 transition-colors",title:"編集を閉じる",children:d.jsx(N,{className:"w-5 h-5"})})]})]}),a&&d.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:a}),r&&d.jsxs("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-lg flex items-center",children:[d.jsx(v,{className:"w-5 h-5 mr-2"}),r]}),d.jsx("form",{onSubmit:j,children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"基本情報"}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ワンちゃんの写真"}),l?d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:l,alt:"ワンちゃんのプレビュー",className:"w-full h-48 object-cover rounded-lg border-2 border-gray-300"}),d.jsx("button",{type:"button",onClick:F,className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:d.jsx(p,{className:"w-4 h-4"})})]}):d.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors",children:[d.jsx("input",{type:"file",accept:"image/*",onChange:k,className:"hidden",id:"dog-image-edit"}),d.jsxs("label",{htmlFor:"dog-image-edit",className:"cursor-pointer flex flex-col items-center",children:[d.jsx(y,{className:"w-12 h-12 text-gray-400 mb-2"}),d.jsx("span",{className:"text-sm text-gray-600",children:"クリックして画像を選択"}),d.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG, GIF (最大10MB)"})]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsx(x,{label:"名前",value:t.name,onChange:e=>C(i(n({},t),{name:e.target.value})),required:!0}),d.jsx(g,{label:"犬種",options:m.map(e=>({value:e,label:e})),value:t.breed,onChange:e=>C(i(n({},t),{breed:e.target.value})),required:!0}),d.jsx(g,{label:"性別",options:[{value:"",label:"性別を選択してください"},{value:"オス",label:"オス"},{value:"メス",label:"メス"}],value:t.gender,onChange:e=>C(i(n({},t),{gender:e.target.value})),required:!0}),d.jsx(x,{label:"生年月日",type:"date",value:t.birthDate,onChange:e=>C(i(n({},t),{birthDate:e.target.value})),required:!0}),d.jsx(x,{label:"マイクロチップNO",type:"text",value:t.microchipNumber,onChange:e=>C(i(n({},t),{microchipNumber:e.target.value})),placeholder:"15桁の数字（任意）",maxLength:15})]})]}),d.jsxs("div",{children:[d.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[d.jsx(v,{className:"w-5 h-5 mr-2"}),"ワクチン証明書"]}),d.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("span",{className:"text-sm font-medium",children:"現在のステータス:"}),d.jsx(b,{status:z,size:"md"})]}),"pending"===z&&d.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"新しい証明書をアップロードすると、再度承認待ち状態になります。"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"狂犬病ワクチン証明書"}),I?d.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(f,{className:"w-4 h-4 text-green-600"}),d.jsx("span",{className:"text-sm text-green-800",children:I.name}),d.jsx("button",{type:"button",onClick:()=>{const e=document.getElementById("rabies-vaccine-edit");e&&(e.value="");B({target:{files:[]}})},className:"text-red-600 hover:text-red-800",children:d.jsx(p,{className:"w-4 h-4"})})]})}):d.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-gray-400 transition-colors",children:[d.jsx("input",{type:"file",accept:"image/*",onChange:B,className:"hidden",id:"rabies-vaccine-edit"}),d.jsxs("label",{htmlFor:"rabies-vaccine-edit",className:"cursor-pointer flex flex-col items-center",children:[d.jsx(w,{className:"w-8 h-8 text-gray-400 mb-2"}),d.jsx("span",{className:"text-sm text-gray-600",children:"証明書をアップロード"}),d.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG, GIF (最大10MB)"})]})]}),d.jsx(x,{label:"有効期限",type:"date",value:O,onChange:e=>S(e.target.value),className:"mt-2"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"混合ワクチン証明書"}),D?d.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(f,{className:"w-4 h-4 text-green-600"}),d.jsx("span",{className:"text-sm text-green-800",children:D.name}),d.jsx("button",{type:"button",onClick:()=>{const e=document.getElementById("combo-vaccine-edit");e&&(e.value="");E({target:{files:[]}})},className:"text-red-600 hover:text-red-800",children:d.jsx(p,{className:"w-4 h-4"})})]})}):d.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-gray-400 transition-colors",children:[d.jsx("input",{type:"file",accept:"image/*",onChange:E,className:"hidden",id:"combo-vaccine-edit"}),d.jsxs("label",{htmlFor:"combo-vaccine-edit",className:"cursor-pointer flex flex-col items-center",children:[d.jsx(w,{className:"w-8 h-8 text-gray-400 mb-2"}),d.jsx("span",{className:"text-sm text-gray-600",children:"証明書をアップロード"}),d.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG, GIF (最大10MB)"})]})]}),d.jsx(x,{label:"有効期限",type:"date",value:G,onChange:e=>V(e.target.value),className:"mt-2"})]})]}),d.jsx("div",{className:"mt-4 p-3 bg-yellow-50 rounded-lg",children:d.jsxs("p",{className:"text-sm text-yellow-800",children:[d.jsx("strong",{children:"注意:"})," 新しいワクチン証明書をアップロードすると、管理者による再承認が必要になります。 承認されるまでドッグランのご利用はできません。"]})})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[d.jsx(o,{type:"button",className:"bg-white hover:bg-gray-50 border border-gray-300 text-gray-700",onClick:c,children:"キャンセル"}),d.jsxs(o,{type:"submit",isLoading:s,children:[d.jsx(v,{className:"w-4 h-4 mr-2"}),"保存"]})]})]})})]})})})}export{C as D,k as a};
