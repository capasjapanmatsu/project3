import{j as e}from"./motion-BHsL7Azw.js";import{r as s}from"./react-vendor-CMvmJHsS.js";import{a as t,L as a}from"./router-DXQOdrLL.js";import{j as l,B as r,s as i,u as c}from"./index-Bf2s4vfe.js";import{C as n}from"./Card-DqVnP9TA.js";import{I as d}from"./Input-R783aYSb.js";import{aO as x,q as m,t as h,as as o,x as j,j as g,d as p,aK as N,n as u,aC as b,r as v,aN as y,U as f,aE as w,aP as _}from"./ui-basic-CJygcczc.js";import{g as k,a as S}from"./adminFraudDetection-DT42m5oq.js";import"./heavy-features-Dlg1c9Yc.js";import"./supabase-D2tiogv8.js";const P=({onError:t,onSuccess:a})=>{const{isMaintenanceActive:c,maintenanceInfo:N,loading:u,refreshMaintenanceStatus:b,clientIP:v,isIPWhitelisted:y}=l(),[f,w]=s.useState([]),[_,k]=s.useState([]),[S,P]=s.useState(!0),[C,I]=s.useState(!1),[R,M]=s.useState(!1),[U,D]=s.useState({title:"",message:"",start_time:"",end_time:"",is_emergency:!1}),[F,L]=s.useState({ip_address:"",description:""}),q=async()=>{try{P(!0);const{data:e,error:s}=await i.from("maintenance_schedules").select("*").order("created_at",{ascending:!1});s&&"PGRST116"!==s.code||w(e||[]);const{data:t,error:a}=await i.from("ip_whitelist").select("*").order("created_at",{ascending:!1});a&&"PGRST116"!==a.code||k(t||[])}catch(e){t("メンテナンスデータの取得でエラーが発生しました")}finally{P(!1)}};s.useEffect(()=>{q()},[]);const T=async e=>{try{const{error:s}=await i.from("maintenance_schedules").update({is_active:!1,end_time:(new Date).toISOString()}).eq("id",e);if(s)throw s;a("メンテナンスを終了しました"),await q(),await b()}catch(s){t("メンテナンス終了でエラーが発生しました")}};return u||S?e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"メンテナンス設定を読み込み中..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(n,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(x,{className:"w-5 h-5 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold",children:"現在の状態"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex items-center px-3 py-2 rounded-lg "+(c?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:c?e.jsxs(e.Fragment,{children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"メンテナンス中"})]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"正常稼働中"})]})}),v&&e.jsxs("div",{className:"flex items-center px-3 py-2 rounded-lg "+(y?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{children:["IP: ",v]}),y&&e.jsx("span",{className:"ml-1",children:"(ホワイトリスト)"})]})]}),N&&e.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-yellow-800",children:N.title}),e.jsx("p",{className:"text-yellow-700 mt-1",children:N.message}),e.jsx("div",{className:"flex justify-end mt-3",children:e.jsx(r,{size:"sm",onClick:()=>{T(N.id)},className:"bg-red-600 hover:bg-red-700 text-white",children:"メンテナンス終了"})})]})]}),e.jsxs(n,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(j,{className:"w-5 h-5 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold",children:"メンテナンススケジュール"})]}),e.jsxs(r,{onClick:()=>I(!C),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),"新規作成"]})]}),C&&e.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"新しいメンテナンススケジュール"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(d,{label:"タイトル",value:U.title,onChange:e=>D({...U,title:e.target.value}),placeholder:"メンテナンスのタイトル"}),e.jsx(d,{label:"開始時刻",type:"datetime-local",value:U.start_time,onChange:e=>D({...U,start_time:e.target.value})})]}),e.jsx("div",{className:"mt-4",children:e.jsx(d,{label:"メッセージ",value:U.message,onChange:e=>D({...U,message:e.target.value}),placeholder:"メンテナンス内容の説明"})}),e.jsx("div",{className:"mt-4",children:e.jsx(d,{label:"終了時刻（オプション）",type:"datetime-local",value:U.end_time,onChange:e=>D({...U,end_time:e.target.value})})}),e.jsx("div",{className:"mt-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:U.is_emergency,onChange:e=>D({...U,is_emergency:e.target.checked}),className:"mr-2"}),"緊急メンテナンス"]})}),e.jsxs("div",{className:"flex space-x-2 mt-4",children:[e.jsx(r,{onClick:()=>{(async()=>{try{if(!U.title||!U.message)return void t("タイトルとメッセージは必須です");const{error:e}=await i.from("maintenance_schedules").insert([{...U,start_time:U.start_time||(new Date).toISOString(),end_time:U.end_time||null,is_active:!0}]);if(e)throw e;a("メンテナンススケジュールを作成しました"),I(!1),D({title:"",message:"",start_time:"",end_time:"",is_emergency:!1}),await q(),await b()}catch(e){t("スケジュール作成でエラーが発生しました")}})()},className:"bg-green-600 hover:bg-green-700",children:"作成"}),e.jsx(r,{variant:"secondary",onClick:()=>I(!1),children:"キャンセル"})]})]}),e.jsx("div",{className:"space-y-3",children:0===f.length?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"スケジュールがありません"}):f.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600",children:s.message}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-xs text-gray-500",children:[e.jsxs("span",{children:["開始: ",s.start_time?new Date(s.start_time).toLocaleString():"未設定"]}),s.end_time&&e.jsxs("span",{children:["終了: ",new Date(s.end_time).toLocaleString()]}),s.is_emergency&&e.jsx("span",{className:"text-red-600 font-semibold",children:"緊急"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+(s.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:s.is_active?"アクティブ":"終了"}),s.is_active&&e.jsx(r,{size:"sm",onClick:()=>{T(s.id)},className:"bg-red-600 hover:bg-red-700 text-white",children:"終了"})]})]},s.id))})]}),e.jsxs(n,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(p,{className:"w-5 h-5 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold",children:"IPホワイトリスト管理"})]}),e.jsxs(r,{onClick:()=>M(!R),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),"IP追加"]})]}),R&&e.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"新しいIP追加"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(d,{label:"IPアドレス",value:F.ip_address,onChange:e=>L({...F,ip_address:e.target.value}),placeholder:"例: 192.168.1.1"}),e.jsx(d,{label:"説明",value:F.description,onChange:e=>L({...F,description:e.target.value}),placeholder:"このIPの説明"})]}),e.jsxs("div",{className:"flex space-x-2 mt-4",children:[e.jsx(r,{onClick:()=>{(async()=>{try{if(!F.ip_address)return void t("IPアドレスは必須です");const{error:e}=await i.from("ip_whitelist").insert([F]);if(e)throw e;a("IPをホワイトリストに追加しました"),M(!1),L({ip_address:"",description:""}),await q()}catch(e){t("IP追加でエラーが発生しました")}})()},className:"bg-green-600 hover:bg-green-700",children:"追加"}),e.jsx(r,{variant:"secondary",onClick:()=>M(!1),children:"キャンセル"})]})]}),e.jsx("div",{className:"space-y-3",children:0===_.length?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"ホワイトリストにIPがありません"}):_.map(s=>e.jsx("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:s.ip_address}),e.jsx("p",{className:"text-sm text-gray-600",children:s.description}),e.jsxs("p",{className:"text-xs text-gray-500",children:["追加日: ",new Date(s.created_at).toLocaleString()]})]})},s.id))})]})]})};function C(){const{user:l,isAdmin:d}=c(),x=t(),[o,j]=s.useState("overview"),[g,C]=s.useState({totalUsers:0,totalParks:0,pendingParks:0,pendingVaccines:0,pendingFacilities:0,totalReservations:0,monthlyRevenue:0,lastMonthRevenue:0,totalSubscriptions:0,activeSubscriptions:0,newUsersThisMonth:0,unreadMessages:0}),[I,R]=s.useState(!0),[M,U]=s.useState(""),[D,F]=s.useState(""),[L,q]=s.useState(null),[T,E]=s.useState([]);s.useEffect(()=>{d?(V(),z(),A()):x("/")},[d,x]);const V=async()=>{try{R(!0),U(""),F("");const{data:e,error:s}=await i.rpc("get_admin_stats");if(s)throw s;const t=e;t&&C({totalUsers:t.total_users||0,totalParks:t.total_parks||0,pendingParks:t.pending_parks||0,pendingVaccines:t.pending_vaccines||0,pendingFacilities:t.pending_facilities||0,totalReservations:t.total_reservations||0,monthlyRevenue:t.monthly_revenue||0,lastMonthRevenue:t.last_month_revenue||0,totalSubscriptions:t.total_subscriptions||0,activeSubscriptions:t.active_subscriptions||0,newUsersThisMonth:t.new_users_this_month||0,unreadMessages:t.unread_messages||0})}catch(e){U("管理者データの取得に失敗しました。")}finally{R(!1)}},z=async()=>{try{const{data:e,error:s}=await i.from("information_schema.tables").select("table_name").eq("table_schema","public").eq("table_name","fraud_detection_logs");if(s||!e||0===e.length)return void E([]);const[t]=await Promise.all([k()]);E(t)}catch(e){E([])}},A=async()=>{try{const{data:e,error:s}=await i.from("information_schema.tables").select("table_name").eq("table_schema","public").eq("table_name","fraud_detection_logs");if(s||!e||0===e.length)return void q(null);const t=await S();q(t)}catch(e){q(null)}},H=()=>0===g.lastMonthRevenue?0:(g.monthlyRevenue-g.lastMonthRevenue)/g.lastMonthRevenue*100;return d?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(N,{className:"w-8 h-8 text-blue-600 mr-3"}),"管理者ダッシュボード"]}),e.jsx("p",{className:"text-gray-600",children:"システム全体の監視と管理"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("span",{className:"text-sm text-gray-600",children:["管理者: ",l?.email]})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[M&&e.jsxs("div",{className:"bg-red-100 border border-red-300 text-red-800 rounded-lg p-4 mb-6",children:[e.jsx(m,{className:"w-5 h-5 inline mr-2"}),M]}),D&&e.jsxs("div",{className:"bg-green-100 border border-green-300 text-green-800 rounded-lg p-4 mb-6",children:[e.jsx(h,{className:"w-5 h-5 inline mr-2"}),D]}),(g.pendingParks>0||g.pendingVaccines>0||g.pendingFacilities>0||(L?.totalHighRiskUsers||0)>0)&&e.jsxs(n,{className:"p-6 mb-6 border-red-200 bg-red-50",children:[e.jsxs("h2",{className:"text-lg font-semibold text-red-900 mb-4 flex items-center",children:[e.jsx(m,{className:"w-6 h-6 text-red-600 mr-2"}),"緊急対応が必要な項目"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[g.pendingParks>0&&e.jsx(a,{to:"/admin/parks",className:"block",children:e.jsx("div",{className:"bg-white rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"承認待ちドッグラン"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:g.pendingParks})]}),e.jsx(u,{className:"w-8 h-8 text-red-500"})]})})}),g.pendingVaccines>0&&e.jsx(a,{to:"/admin/vaccine-approval",className:"block",children:e.jsx("div",{className:"bg-white rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"ワクチン証明書承認待ち"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:g.pendingVaccines})]}),e.jsx(p,{className:"w-8 h-8 text-red-500"})]})})}),g.pendingFacilities>0&&e.jsx(a,{to:"/admin/facility-approval",className:"block",children:e.jsx("div",{className:"bg-white rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"施設承認待ち"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:g.pendingFacilities})]}),e.jsx(u,{className:"w-8 h-8 text-red-500"})]})})}),(L?.totalHighRiskUsers||0)>0&&e.jsx(a,{to:"/admin/users?filter=high_risk",className:"block",children:e.jsx("div",{className:"bg-white rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"高リスクユーザー"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:L?.totalHighRiskUsers||0})]}),e.jsx(b,{className:"w-8 h-8 text-red-500"})]})})})]}),T.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-md font-semibold text-red-900 mb-3",children:"最新の高リスクユーザー"}),e.jsx("div",{className:"bg-white rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"ユーザー"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"リスクスコア"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"検知タイプ"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"最終検知"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"アクション"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:T.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.userName}),e.jsx("div",{className:"text-sm text-gray-500",children:s.email})]})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full "+("high"===s.riskLevel?"bg-red-100 text-red-800":"medium"===s.riskLevel?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:s.riskScore})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("div",{className:"text-sm text-gray-900",children:s.detectionTypes.join(", ")})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("div",{className:"text-sm text-gray-900",children:new Date(s.lastDetection).toLocaleDateString("ja-JP")})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(a,{to:"/admin/users?filter=high_risk",children:e.jsxs(r,{variant:"secondary",size:"sm",children:[e.jsx(v,{className:"w-4 h-4 mr-1"}),"詳細"]})})})]},s.userId))})]})})]})]}),e.jsx("div",{className:"flex space-x-1 mb-6",children:[{id:"overview",label:"概要",icon:y},{id:"parks",label:"ドッグラン",icon:u},{id:"users",label:"ユーザー",icon:f},{id:"fraud",label:"不正検知",icon:b},{id:"maintenance",label:"メンテナンス",icon:N}].map(s=>{const t=s.icon;return e.jsxs("button",{onClick:()=>j(s.id),className:"flex items-center px-4 py-2 text-sm font-medium rounded-lg transition-colors "+(o===s.id?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"),children:[e.jsx(t,{className:"w-4 h-4 mr-2"}),s.label]},s.id)})}),"overview"===o&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"総ユーザー数"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g.totalUsers}),e.jsxs("p",{className:"text-sm text-green-600",children:["今月 +",g.newUsersThisMonth,"人"]})]}),e.jsx(f,{className:"w-8 h-8 text-blue-500"})]})}),e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"総ドッグラン数"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g.totalParks}),g.pendingParks>0&&e.jsxs("p",{className:"text-sm text-orange-600",children:["承認待ち ",g.pendingParks,"件"]})]}),e.jsx(u,{className:"w-8 h-8 text-green-500"})]})}),e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"月間売上"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(J=g.monthlyRevenue,new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY"}).format(J))}),e.jsxs("p",{className:"text-sm "+(H()>=0?"text-green-600":"text-red-600"),children:["前月比 ",H()>=0?"+":"",H().toFixed(1),"%"]})]}),e.jsx(w,{className:"w-8 h-8 text-yellow-500"})]})}),e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"アクティブサブスクリプション"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g.activeSubscriptions}),e.jsxs("p",{className:"text-sm text-gray-600",children:["総数 ",g.totalSubscriptions,"件"]})]}),e.jsx(_,{className:"w-8 h-8 text-purple-500"})]})})]}),e.jsxs(n,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"クイックアクション"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(a,{to:"/admin/users",children:e.jsxs(r,{className:"w-full justify-start",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"ユーザー管理"]})}),e.jsx(a,{to:"/admin/parks",children:e.jsxs(r,{className:"w-full justify-start",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"ドッグラン管理"]})}),e.jsx(a,{to:"/admin/sales",children:e.jsxs(r,{className:"w-full justify-start",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"売上レポート"]})})]})]})]}),"fraud"===o&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"高リスクユーザー"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:L?.totalHighRiskUsers||0})]}),e.jsx(b,{className:"w-8 h-8 text-red-500"})]})}),e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"中リスクユーザー"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:L?.totalMediumRiskUsers||0})]}),e.jsx(m,{className:"w-8 h-8 text-yellow-500"})]})}),e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"最近の検知"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:L?.recentDetections||0}),e.jsx("p",{className:"text-xs text-gray-500",children:"過去30日"})]}),e.jsx(v,{className:"w-8 h-8 text-blue-500"})]})}),e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"ブロック済み"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:L?.blockedAttempts||0})]}),e.jsx(p,{className:"w-8 h-8 text-green-500"})]})}),e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"トライアル悪用"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:L?.trialAbuseCount||0})]}),e.jsx(m,{className:"w-8 h-8 text-purple-500"})]})})]}),e.jsxs(n,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"不正検知管理"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 bg-red-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-red-900",children:"高リスクユーザーの監視"}),e.jsx("p",{className:"text-sm text-red-700",children:"リスクスコア70以上のユーザーを定期的に確認し、必要に応じて制限措置を実施してください。"})]}),e.jsx(a,{to:"/admin/users?filter=high_risk",children:e.jsxs(r,{className:"bg-red-600 hover:bg-red-700",children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"確認する"]})})]}),e.jsxs("div",{className:"flex justify-between items-center p-4 bg-yellow-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-yellow-900",children:"中リスクユーザーの監視"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"リスクスコア50-69のユーザーの動向を監視し、パターンを分析してください。"})]}),e.jsx(a,{to:"/admin/users?filter=medium_risk",children:e.jsxs(r,{variant:"secondary",children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),"確認する"]})})]}),e.jsxs("div",{className:"flex justify-between items-center p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900",children:"全ユーザー管理"}),e.jsx("p",{className:"text-sm text-blue-700",children:"すべてのユーザーの不正検知状況を確認し、総合的な監視を行います。"})]}),e.jsx(a,{to:"/admin/users",children:e.jsxs(r,{variant:"secondary",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"ユーザー一覧"]})})]})]})]})]}),"parks"===o&&e.jsxs(n,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ドッグラン承認管理"}),e.jsxs("p",{className:"text-gray-600",children:["詳細なドッグラン管理は",e.jsx(a,{to:"/admin/parks",className:"text-blue-600 hover:text-blue-800 mx-1",children:"ドッグラン管理ページ"}),"で行えます。"]}),g.pendingParks>0&&e.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("p",{className:"text-red-700",children:[e.jsxs("strong",{children:[g.pendingParks,"件"]}),"のドッグラン承認待ちがあります。"]}),e.jsx(a,{to:"/admin/parks",children:e.jsx(r,{size:"sm",className:"mt-2",children:"今すぐ確認する"})})]})]}),"users"===o&&e.jsxs(n,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ユーザー管理"}),e.jsxs("p",{className:"text-gray-600",children:["詳細なユーザー管理は",e.jsx(a,{to:"/admin/users",className:"text-blue-600 hover:text-blue-800 mx-1",children:"ユーザー管理ページ"}),"で行えます。"]})]}),"maintenance"===o&&e.jsx(P,{onError:U,onSuccess:F})]})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs(n,{className:"p-8 text-center",children:[e.jsx(p,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"アクセス拒否"}),e.jsx("p",{className:"text-gray-600",children:"管理者権限が必要です。"})]})});var J}export{C as AdminDashboard};
