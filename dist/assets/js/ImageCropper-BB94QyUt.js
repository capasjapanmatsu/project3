import{j as e}from"./motion-BHsL7Azw.js";import{r as t,u as i}from"./react-vendor-CMvmJHsS.js";import{B as n}from"./index-CGsnfrXi.js";import{X as r,as as a,at as o,aq as h}from"./ui-basic-C77EGLVg.js";var s=Object.defineProperty,d=(e,t,i)=>((e,t,i)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i)(e,"symbol"!=typeof t?t+"":t,i);const c={x:0,y:0,width:0,height:0,unit:"px"},l=(e,t,i)=>Math.min(Math.max(e,t),i),g=(e,t)=>e===t||e.width===t.width&&e.height===t.height&&e.x===t.x&&e.y===t.y&&e.unit===t.unit;function w(e,t,i){return"%"===e.unit?{...c,...e,unit:"%"}:{unit:"%",x:e.x?e.x/t*100:0,y:e.y?e.y/i*100:0,width:e.width?e.width/t*100:0,height:e.height?e.height/i*100:0}}function p(e,t,i){return e.unit?"px"===e.unit?{...c,...e,unit:"px"}:{unit:"px",x:e.x?e.x*t/100:0,y:e.y?e.y*i/100:0,width:e.width?e.width*t/100:0,height:e.height?e.height*i/100:0}:{...c,...e,unit:"px"}}function m(e,t,i,n,r,a=0,o=0,h=n,s=r){const d={...e};let c=Math.min(a,n),l=Math.min(o,r),g=Math.min(h,n),w=Math.min(s,r);t&&(t>1?(c=o?o*t:c,l=c/t,g=h*t):(l=a?a/t:l,c=l*t,w=s/t)),d.y<0&&(d.height=Math.max(d.height+d.y,l),d.y=0),d.x<0&&(d.width=Math.max(d.width+d.x,c),d.x=0);const p=n-(d.x+d.width);p<0&&(d.x=Math.min(d.x,n-c),d.width+=p);const m=r-(d.y+d.height);if(m<0&&(d.y=Math.min(d.y,r-l),d.height+=m),d.width<c&&(("sw"===i||"nw"==i)&&(d.x-=c-d.width),d.width=c),d.height<l&&(("nw"===i||"ne"==i)&&(d.y-=l-d.height),d.height=l),d.width>g&&(("sw"===i||"nw"==i)&&(d.x-=g-d.width),d.width=g),d.height>w&&(("nw"===i||"ne"==i)&&(d.y-=w-d.height),d.height=w),t){const e=d.width/d.height;if(e<t){const e=Math.max(d.width/t,l);("nw"===i||"ne"==i)&&(d.y-=e-d.height),d.height=e}else if(e>t){const e=Math.max(d.height*t,c);("sw"===i||"nw"==i)&&(d.x-=e-d.width),d.width=e}}return d}const u={capture:!0,passive:!1};let x=0;const y=class e extends t.PureComponent{constructor(){super(...arguments),d(this,"docMoveBound",!1),d(this,"mouseDownOnCrop",!1),d(this,"dragStarted",!1),d(this,"evData",{startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0}),d(this,"componentRef",t.createRef()),d(this,"mediaRef",t.createRef()),d(this,"resizeObserver"),d(this,"initChangeCalled",!1),d(this,"instanceId","rc-"+x++),d(this,"state",{cropIsActive:!1,newCropIsBeingDrawn:!1}),d(this,"onCropPointerDown",e=>{const{crop:t,disabled:i}=this.props,n=this.getBox();if(!t)return;const r=p(t,n.width,n.height);if(i)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const a=e.target.dataset.ord,o=!!a;let h=e.clientX,s=e.clientY,d=r.x,c=r.y;if(a){const t=e.clientX-n.x,i=e.clientY-n.y;let o=0,l=0;"ne"===a||"e"==a?(o=t-(r.x+r.width),l=i-r.y,d=r.x,c=r.y+r.height):"se"===a||"s"===a?(o=t-(r.x+r.width),l=i-(r.y+r.height),d=r.x,c=r.y):"sw"===a||"w"==a?(o=t-r.x,l=i-(r.y+r.height),d=r.x+r.width,c=r.y):("nw"===a||"n"==a)&&(o=t-r.x,l=i-r.y,d=r.x+r.width,c=r.y+r.height),h=d+n.x+o,s=c+n.y+l}this.evData={startClientX:h,startClientY:s,startCropX:d,startCropY:c,clientX:e.clientX,clientY:e.clientY,isResize:o,ord:a},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})}),d(this,"onComponentPointerDown",e=>{const{crop:t,disabled:i,locked:n,keepSelection:r,onChange:a}=this.props,o=this.getBox();if(i||n||r&&t)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const h=e.clientX-o.x,s=e.clientY-o.y,d={unit:"px",x:h,y:s,width:0,height:0};this.evData={startClientX:e.clientX,startClientY:e.clientY,startCropX:h,startCropY:s,clientX:e.clientX,clientY:e.clientY,isResize:!0},this.mouseDownOnCrop=!0,a(p(d,o.width,o.height),w(d,o.width,o.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})}),d(this,"onDocPointerMove",e=>{const{crop:t,disabled:i,onChange:n,onDragStart:r}=this.props,a=this.getBox();if(i||!t||!this.mouseDownOnCrop)return;e.cancelable&&e.preventDefault(),this.dragStarted||(this.dragStarted=!0,r&&r(e));const{evData:o}=this;let h;o.clientX=e.clientX,o.clientY=e.clientY,h=o.isResize?this.resizeCrop():this.dragCrop(),g(t,h)||n(p(h,a.width,a.height),w(h,a.width,a.height))}),d(this,"onComponentKeyDown",t=>{const{crop:i,disabled:n,onChange:r,onComplete:a}=this.props;if(n)return;const o=t.key;let h=!1;if(!i)return;const s=this.getBox(),d=this.makePixelCrop(s),c=(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)?e.nudgeStepLarge:t.shiftKey?e.nudgeStepMedium:e.nudgeStep;if("ArrowLeft"===o?(d.x-=c,h=!0):"ArrowRight"===o?(d.x+=c,h=!0):"ArrowUp"===o?(d.y-=c,h=!0):"ArrowDown"===o&&(d.y+=c,h=!0),h){t.cancelable&&t.preventDefault(),d.x=l(d.x,0,s.width-d.width),d.y=l(d.y,0,s.height-d.height);const e=p(d,s.width,s.height),i=w(d,s.width,s.height);r(e,i),a&&a(e,i)}}),d(this,"onHandlerKeyDown",(t,i)=>{const{aspect:n=0,crop:r,disabled:a,minWidth:o=0,minHeight:h=0,maxWidth:s,maxHeight:d,onChange:c,onComplete:l}=this.props,u=this.getBox();if(a||!r)return;if("ArrowUp"!==t.key&&"ArrowDown"!==t.key&&"ArrowLeft"!==t.key&&"ArrowRight"!==t.key)return;t.stopPropagation(),t.preventDefault();const x=(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)?e.nudgeStepLarge:t.shiftKey?e.nudgeStepMedium:e.nudgeStep,y=function(e,t,i,n){const r={...e};return"ArrowLeft"===t?"nw"===n?(r.x-=i,r.y-=i,r.width+=i,r.height+=i):"w"===n?(r.x-=i,r.width+=i):"sw"===n?(r.x-=i,r.width+=i,r.height+=i):"ne"===n?(r.y+=i,r.width-=i,r.height-=i):"e"===n?r.width-=i:"se"===n&&(r.width-=i,r.height-=i):"ArrowRight"===t&&("nw"===n?(r.x+=i,r.y+=i,r.width-=i,r.height-=i):"w"===n?(r.x+=i,r.width-=i):"sw"===n?(r.x+=i,r.width-=i,r.height-=i):"ne"===n?(r.y-=i,r.width+=i,r.height+=i):"e"===n?r.width+=i:"se"===n&&(r.width+=i,r.height+=i)),"ArrowUp"===t?"nw"===n?(r.x-=i,r.y-=i,r.width+=i,r.height+=i):"n"===n?(r.y-=i,r.height+=i):"ne"===n?(r.y-=i,r.width+=i,r.height+=i):"sw"===n?(r.x+=i,r.width-=i,r.height-=i):"s"===n?r.height-=i:"se"===n&&(r.width-=i,r.height-=i):"ArrowDown"===t&&("nw"===n?(r.x+=i,r.y+=i,r.width-=i,r.height-=i):"n"===n?(r.y+=i,r.height-=i):"ne"===n?(r.y+=i,r.width-=i,r.height-=i):"sw"===n?(r.x-=i,r.width+=i,r.height+=i):"s"===n?r.height+=i:"se"===n&&(r.width+=i,r.height+=i)),r}(p(r,u.width,u.height),t.key,x,i),f=m(y,n,i,u.width,u.height,o,h,s,d);if(!g(r,f)){const e=w(f,u.width,u.height);c(f,e),l&&l(f,e)}}),d(this,"onDocPointerDone",e=>{const{crop:t,disabled:i,onComplete:n,onDragEnd:r}=this.props,a=this.getBox();this.unbindDocMove(),!i&&t&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,r&&r(e),n&&n(p(t,a.width,a.height),w(t,a.width,a.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))}),d(this,"onDragFocus",()=>{var e;null==(e=this.componentRef.current)||e.scrollTo(0,0)})}get document(){return document}getBox(){const e=this.mediaRef.current;if(!e)return{x:0,y:0,width:0,height:0};const{x:t,y:i,width:n,height:r}=e.getBoundingClientRect();return{x:t,y:i,width:n,height:r}}componentDidUpdate(e){const{crop:t,onComplete:i}=this.props;if(i&&!e.crop&&t){const{width:e,height:n}=this.getBox();e&&n&&i(p(t,e,n),w(t,e,n))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect(),this.unbindDocMove()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,u),this.document.addEventListener("pointerup",this.onDocPointerDone,u),this.document.addEventListener("pointercancel",this.onDocPointerDone,u),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,u),this.document.removeEventListener("pointerup",this.onDocPointerDone,u),this.document.removeEventListener("pointercancel",this.onDocPointerDone,u),this.docMoveBound=!1)}getCropStyle(){const{crop:e}=this.props;if(e)return{top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`}}dragCrop(){const{evData:e}=this,t=this.getBox(),i=this.makePixelCrop(t),n=e.clientX-e.startClientX,r=e.clientY-e.startClientY;return i.x=l(e.startCropX+n,0,t.width-i.width),i.y=l(e.startCropY+r,0,t.height-i.height),i}getPointRegion(e,t,i,n){const{evData:r}=this,a=r.clientX-e.x,o=r.clientY-e.y;let h,s;return h=n&&t?"nw"===t||"n"===t||"ne"===t:o<r.startCropY,s=i&&t?"nw"===t||"w"===t||"sw"===t:a<r.startCropX,s?h?"nw":"sw":h?"ne":"se"}resolveMinDimensions(e,t,i=0,n=0){const r=Math.min(i,e.width),a=Math.min(n,e.height);return t&&(r||a)?t>1?r?[r,r/t]:[a*t,a]:a?[a*t,a]:[r,r/t]:[r,a]}resizeCrop(){const{evData:t}=this,{aspect:i=0,maxWidth:n,maxHeight:r}=this.props,a=this.getBox(),[o,h]=this.resolveMinDimensions(a,i,this.props.minWidth,this.props.minHeight);let s=this.makePixelCrop(a);const d=this.getPointRegion(a,t.ord,o,h),c=t.ord||d;let g=t.clientX-t.startClientX,w=t.clientY-t.startClientY;(o&&"nw"===c||"w"===c||"sw"===c)&&(g=Math.min(g,-o)),(h&&"nw"===c||"n"===c||"ne"===c)&&(w=Math.min(w,-h));const p={unit:"px",x:0,y:0,width:0,height:0};"ne"===d?(p.x=t.startCropX,p.width=g,i?(p.height=p.width/i,p.y=t.startCropY-p.height):(p.height=Math.abs(w),p.y=t.startCropY-p.height)):"se"===d?(p.x=t.startCropX,p.y=t.startCropY,p.width=g,p.height=i?p.width/i:w):"sw"===d?(p.x=t.startCropX+g,p.y=t.startCropY,p.width=Math.abs(g),p.height=i?p.width/i:w):"nw"===d&&(p.x=t.startCropX+g,p.width=Math.abs(g),i?(p.height=p.width/i,p.y=t.startCropY-p.height):(p.height=Math.abs(w),p.y=t.startCropY+w));const u=m(p,i,d,a.width,a.height,o,h,n,r);return i||e.xyOrds.indexOf(c)>-1?s=u:e.xOrds.indexOf(c)>-1?(s.x=u.x,s.width=u.width):e.yOrds.indexOf(c)>-1&&(s.y=u.y,s.height=u.height),s.x=l(s.x,0,a.width-s.width),s.y=l(s.y,0,a.height-s.height),s}renderCropSelection(){const{ariaLabels:t=e.defaultProps.ariaLabels,disabled:n,locked:r,renderSelectionAddon:a,ruleOfThirds:o,crop:h}=this.props,s=this.getCropStyle();if(h)return i.createElement("div",{style:s,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":t.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!n&&!r&&i.createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},i.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),i.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),i.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),i.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),i.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":t.nwDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"nw"),role:"button"}),i.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":t.nDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"n"),role:"button"}),i.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":t.neDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"ne"),role:"button"}),i.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":t.eDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"e"),role:"button"}),i.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":t.seDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"se"),role:"button"}),i.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":t.sDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"s"),role:"button"}),i.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":t.swDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"sw"),role:"button"}),i.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":t.wDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"w"),role:"button"})),a&&i.createElement("div",{className:"ReactCrop__selection-addon",onPointerDown:e=>e.stopPropagation()},a(this.state)),o&&i.createElement(i.Fragment,null,i.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),i.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(e){return p({...c,...this.props.crop||{}},e.width,e.height)}render(){const{aspect:e,children:t,circularCrop:n,className:r,crop:a,disabled:o,locked:h,style:s,ruleOfThirds:d}=this.props,{cropIsActive:c,newCropIsBeingDrawn:l}=this.state,g=a?this.renderCropSelection():null,w=((...e)=>e.filter(e=>e&&"string"==typeof e).join(" "))("ReactCrop",r,c&&"ReactCrop--active",o&&"ReactCrop--disabled",h&&"ReactCrop--locked",l&&"ReactCrop--new-crop",a&&e&&"ReactCrop--fixed-aspect",a&&n&&"ReactCrop--circular-crop",a&&d&&"ReactCrop--rule-of-thirds",!this.dragStarted&&a&&!a.width&&!a.height&&"ReactCrop--invisible-crop",n&&"ReactCrop--no-animate");return i.createElement("div",{ref:this.componentRef,className:w,style:s},i.createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},t),a?i.createElement("svg",{className:"ReactCrop__crop-mask",width:"100%",height:"100%"},i.createElement("defs",null,i.createElement("mask",{id:`hole-${this.instanceId}`},i.createElement("rect",{width:"100%",height:"100%",fill:"white"}),n?i.createElement("ellipse",{cx:`${a.x+a.width/2}${a.unit}`,cy:`${a.y+a.height/2}${a.unit}`,rx:`${a.width/2}${a.unit}`,ry:`${a.height/2}${a.unit}`,fill:"black"}):i.createElement("rect",{x:`${a.x}${a.unit}`,y:`${a.y}${a.unit}`,width:`${a.width}${a.unit}`,height:`${a.height}${a.unit}`,fill:"black"}))),i.createElement("rect",{fill:"black",fillOpacity:.5,width:"100%",height:"100%",mask:`url(#hole-${this.instanceId})`})):void 0,g)}};d(y,"xOrds",["e","w"]),d(y,"yOrds",["n","s"]),d(y,"xyOrds",["nw","ne","se","sw"]),d(y,"nudgeStep",1),d(y,"nudgeStepMedium",10),d(y,"nudgeStepLarge",100),d(y,"defaultProps",{ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}});let f=y;const v={maxWidth:800,maxHeight:600,quality:.8,maxSizeMB:.5,outputFormat:"jpeg"};async function C(e,t={}){const i={...v,...t};return new Promise((t,n)=>{if(!e.type.startsWith("image/"))return void n(new Error("画像ファイルを選択してください"));const r=document.createElement("canvas"),a=r.getContext("2d"),o=new Image;o.onload=()=>{try{if(!a)return void n(new Error("Canvas context を取得できませんでした"));const{width:h,height:s}=function(e,t,i,n){let{width:r,height:a}={width:e,height:t};r>i&&(a=a*i/r,r=i);a>n&&(r=r*n/a,a=n);return{width:Math.round(r),height:Math.round(a)}}(o.width,o.height,i.maxWidth,i.maxHeight);r.width=h,r.height=s,a.drawImage(o,0,0,h,s);const d="jpeg"===i.outputFormat?"image/jpeg":"png"===i.outputFormat?"image/png":"image/webp";r.toBlob(r=>{if(!r)return void n(new Error("画像の処理に失敗しました"));const a="jpeg"===i.outputFormat?"jpg":i.outputFormat,o=e.name.split(".")[0],h=new File([r],`${o}_compressed.${a}`,{type:d,lastModified:Date.now()});h.size/1048576>i.maxSizeMB&&i.quality>.3?C(e,{...i,quality:i.quality-.1}).then(t).catch(n):t(h)},d,i.quality)}catch(h){n(h)}},o.onerror=()=>{n(new Error("画像の読み込みに失敗しました"))},o.src=URL.createObjectURL(e)})}const D=({imageFile:i,onCropComplete:s,onCancel:d,aspectRatio:c=1,maxWidth:l=400,maxHeight:g=400})=>{const[m,u]=t.useState(""),[x,y]=t.useState(),[v,D]=t.useState(),[b,R]=t.useState(!1),M=t.useRef(null),j=t.useRef(null);t.useEffect(()=>{if(i){if(!i.type.startsWith("image/"))return alert("画像ファイルを選択してください。"),void d();if(i.size>10485760)return alert("ファイルサイズは10MB未満にしてください。"),void d();y(void 0);const e=new FileReader;e.addEventListener("load",()=>{const t=e.result;t&&"string"==typeof t&&u(t)}),e.readAsDataURL(i)}},[i,d]);const E=t.useCallback(e=>{if(e.target.files&&e.target.files.length>0){const t=e.target.files[0];if(!t.type.startsWith("image/"))return void alert("画像ファイルを選択してください。");if(t.size>10485760)return void alert("ファイルサイズは10MB未満にしてください。");y(void 0);const i=new FileReader;i.addEventListener("load",()=>u(i.result?.toString()||"")),i.readAsDataURL(t)}},[]),N=t.useCallback(e=>{const{width:t,height:i}=e.currentTarget,n=function(e,t,i){const n=p(e,t,i);return n.x=(t-n.width)/2,n.y=(i-n.height)/2,"%"===e.unit?w(n,t,i):n}(function(e,t,i,n){const r=p(e,i,n);return e.width&&(r.height=r.width/t),e.height&&(r.width=r.height*t),r.y+r.height>n&&(r.height=n-r.y,r.width=r.height*t),r.x+r.width>i&&(r.width=i-r.x,r.height=r.width/t),"%"===e.unit?w(r,i,n):r}({unit:"%",width:90},c,t,i),t,i);y(n)},[c]),_=t.useCallback(async()=>{if(v&&M.current&&j.current){R(!0);try{const e=M.current,t=j.current,i=t.getContext("2d");if(!i)throw new Error("Canvas context を取得できませんでした。");const n=e.naturalWidth/e.width,r=e.naturalHeight/e.height,a=Math.min(l,g);t.width=a,t.height=a,i.imageSmoothingEnabled=!0,i.imageSmoothingQuality="high",i.drawImage(e,v.x*n,v.y*r,v.width*n,v.height*r,0,0,a,a),t.toBlob(async e=>{if(!e)throw new Error("画像の処理に失敗しました。");const t=new File([e],"cropped-image.jpg",{type:"image/jpeg",lastModified:Date.now()}),i=await C(t,{maxWidth:a,maxHeight:a,quality:.85,maxSizeMB:.3,outputFormat:"jpeg"});s(i)},"image/jpeg",.9)}catch(e){alert("画像の処理中にエラーが発生しました。")}finally{R(!1)}}else alert("クロップエリアを選択してください。")},[v,l,g,s]);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"画像をトリミング"}),e.jsx("button",{onClick:d,className:"text-gray-400 hover:text-gray-600",children:e.jsx(r,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-4",children:m?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"ドラッグして切り取り範囲を選択してください（1:1比率で切り取られます）"})}),e.jsx("div",{className:"flex justify-center max-h-96 overflow-hidden",children:e.jsx(f,{crop:x,onChange:(e,t)=>y(t),onComplete:e=>D(e),aspect:c,minWidth:100,minHeight:100,children:e.jsx("img",{ref:M,alt:"Crop me",src:m,style:{maxHeight:"400px",maxWidth:"100%"},onLoad:N})})}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsxs(n,{variant:"outline",onClick:()=>u(""),disabled:b,children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),"画像を変更"]}),e.jsxs(n,{onClick:_,disabled:!v||b,children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),b?"処理中...":"トリミング完了"]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(a,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("span",{className:"text-blue-600 hover:text-blue-500 font-medium",children:"画像を選択してください"}),e.jsx("input",{type:"file",accept:"image/*",onChange:E,className:"hidden"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"JPG、PNG、WEBP形式対応（10MB未満）"})]})}),e.jsx("canvas",{ref:j,style:{display:"none"}})]})})};export{D as I};
