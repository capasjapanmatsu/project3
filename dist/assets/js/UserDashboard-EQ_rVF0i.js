import{j as e}from"./motion-CuO0nkIV.js";import{r as s,b as t}from"./react-vendor-cniURDpR.js";import{L as a,a as r,u as i}from"./router-Cg6wfOY4.js";import{B as n}from"./Button-CJFAG6V0.js";import{C as l,s as o,u as c,a as d}from"./index-DN5wQuSm.js";import{D as m,a as x}from"./DogCard-D-OyuVRZ.js";import{f as g,e as h,o as u,B as p,aC as b,a4 as j,N as f,n as N,y as v,X as y,ac as w,i as _,O as S,a6 as k,G as I,aK as D,ad as C,M as E,U as L,aL as T,z as O,aM as A,t as U,b as P}from"./ui-basic-CaMd9YQ-.js";import{u as M}from"./webpConverter-DgsxrDdj.js";import"./supabase-B0bqaRGb.js";import"./heavy-features-BIdEME4r.js";import"./dogBreeds-6lxY8Uni.js";import"./ImageCropper-BqfqFQ-L.js";import"./Input-D3zjVn42.js";import"./LazyImage-D-JxrRiD.js";import"./Select-Dd_IZFKg.js";import"./VaccineBadge-BFc_cRH8.js";const R=({dogs:s,user:t,selectedDog:r,showDogEditModal:i,isUpdatingDog:n,dogUpdateError:o,dogUpdateSuccess:c,dogFormData:d,dogImageFile:p,dogImagePreview:b,rabiesVaccineFile:j,comboVaccineFile:f,rabiesExpiryDate:N,comboExpiryDate:v,onDogSelect:y,onCloseDogEditModal:w,onUpdateDog:_,onDeleteDog:S,onDogImageSelect:k,onDogImageRemove:I,onRabiesVaccineSelect:D,onComboVaccineSelect:C,onFormDataChange:E,onRabiesExpiryDateChange:L,onComboExpiryDateChange:T,crop:O,zoom:A,onCropChange:U,onZoomChange:P,onCropComplete:M,onImageCropped:R})=>e.jsxs(l,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(g,{className:"w-5 h-5 mr-2 text-gray-700"}),"登録済みの愛犬"]}),e.jsxs("div",{className:"flex space-x-3",children:[s.length>0&&e.jsxs(a,{to:"/jp-passport",className:"bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-1.5 rounded-md text-sm font-medium inline-flex items-center",children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"JPパスポート"]}),e.jsxs("a",{href:"/dog-registration",className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 rounded-md text-sm font-medium inline-flex items-center",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"愛犬を登録"]})]})]}),0===s.length?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(g,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"まだ愛犬が登録されていません"}),e.jsx("p",{className:"text-sm mb-4",children:"ドッグランを利用するために、愛犬の情報を登録してください"}),e.jsxs("a",{href:"/dog-registration",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md font-medium inline-flex items-center",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"愛犬を登録"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(s=>e.jsx(m,{dog:s,onEdit:()=>y(s)},s.id))}),i&&r&&e.jsx(x,{dog:r,isUpdating:n,error:o,success:c,dogFormData:d,dogImagePreview:b,onClose:w,onSubmit:_,onDelete:S,onFormChange:E,onImageSelect:k,onImageRemove:I,crop:O||{x:0,y:0},zoom:A||1,onCropChange:U||(()=>{}),onZoomChange:P||(()=>{}),onCropComplete:M||(()=>{}),onImageCropped:R,rabiesVaccineFile:j,comboVaccineFile:f,rabiesExpiryDate:N,comboExpiryDate:v,onRabiesVaccineSelect:D,onComboVaccineSelect:C,onRabiesExpiryDateChange:L,onComboExpiryDateChange:T})]}),z=({notifications:s,onMarkAsRead:t})=>{const a=s=>{switch(s){case"reservation":return e.jsx(v,{className:"w-4 h-4 text-blue-600"});case"message":return e.jsx(N,{className:"w-4 h-4 text-green-600"});case"park_approval":return e.jsx(f,{className:"w-4 h-4 text-purple-600"});case"vaccine_approval":return e.jsx(j,{className:"w-4 h-4 text-green-600"});default:return e.jsx(p,{className:"w-4 h-4 text-gray-600"})}};return e.jsxs(l,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(p,{className:"w-5 h-5 mr-2"}),"通知",s.length>0&&e.jsx("span",{className:"ml-2 bg-red-500 text-white text-xs rounded-full px-2 py-1",children:s.length})]}),s.length>0&&e.jsxs(n,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{s.forEach(e=>{t(e.id)})},children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"すべて既読にする"]})]}),0===s.length?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("div",{className:"text-4xl mb-4",children:"🔔"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"新しい通知はありません"}),e.jsx("p",{className:"text-sm",children:"最新の情報やお知らせがあるとここに表示されます"})]}):e.jsx("div",{className:"space-y-4",children:s.map(s=>e.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:a(s.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 truncate",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(s.created_at).toLocaleString("ja-JP")})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(n,{size:"sm",onClick:()=>t(s.id),className:"bg-blue-600 hover:bg-blue-700 text-white",children:e.jsx(b,{className:"w-4 h-4"})})})]},s.id))})]})};function F({park:s,onClose:t}){return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold",children:[s.name,"の管理"]}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:e.jsx(y,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"基本情報"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"住所:"})," ",s.address]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"ステータス:"})," ",(s=>{const t={approved:{bg:"bg-green-100",text:"text-green-800",label:"公開中",icon:j},pending:{bg:"bg-yellow-100",text:"text-yellow-800",label:"審査中",icon:w},rejected:{bg:"bg-red-100",text:"text-red-800",label:"却下",icon:_},second_stage_waiting:{bg:"bg-orange-100",text:"text-orange-800",label:"詳細情報待ち",icon:w}},a=t[s]||t.pending,r=a.icon;return e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${a.bg} ${a.text}`,children:[e.jsx(r,{className:"w-3 h-3"}),e.jsx("span",{children:a.label})]})})(s.status)]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"料金:"})," ¥",s.price,"/日"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"最大収容人数:"})," ",s.max_capacity,"人"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"現在の利用者数:"})," ",s.current_occupancy,"人"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"評価:"})," ★",s.average_rating.toFixed(1)," (",s.review_count,"件)"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"設備情報"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries({parking:"駐車場",shower:"シャワー設備",restroom:"トイレ",agility:"アジリティ設備",rest_area:"休憩スペース",water_station:"給水設備"}).map(([t,a])=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 rounded "+(s.facilities[t]?"bg-green-500":"bg-gray-300")}),e.jsx("span",{className:"text-sm",children:a})]},t))})]})]}),"first_stage_passed"===s.status&&e.jsx("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(j,{className:"w-5 h-5 text-blue-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"第一審査通過"}),e.jsx("p",{className:"text-sm text-blue-800 mb-3",children:"おめでとうございます！第一審査に通過しました。次は詳細な施設情報と画像のアップロードが必要です。"}),e.jsx(a,{to:`/parks/${s.id}/second-stage`,children:e.jsx(n,{className:"bg-blue-600 hover:bg-blue-700",children:"第二審査を進める"})})]})]})}),"second_stage_review"===s.status&&e.jsx("div",{className:"mb-6 p-4 bg-purple-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(w,{className:"w-5 h-5 text-purple-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-purple-900 mb-2",children:"第二審査中"}),e.jsx("p",{className:"text-sm text-purple-800",children:"現在、管理者が施設画像を確認しています。審査完了までお待ちください。 審査には通常3-5営業日かかります。結果はメールとアプリ内通知でお知らせします。"})]})]})}),"approved"===s.status&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"統計情報"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("div",{className:"flex items-center space-x-2 mb-2",children:e.jsx("h4",{className:"font-medium text-blue-900",children:"今月の予約"})}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"32件"}),e.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"前月比 +12%"})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(V,{className:"w-5 h-5 text-green-600"}),e.jsx("h4",{className:"font-medium text-green-900",children:"今月の収益"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"¥25,600"}),e.jsx("p",{className:"text-xs text-green-700 mt-1",children:"前月比 +8%"})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(B,{className:"w-5 h-5 text-purple-600"}),e.jsx("h4",{className:"font-medium text-purple-900",children:"利用者数"})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"128人"}),e.jsx("p",{className:"text-xs text-purple-700 mt-1",children:"前月比 +15%"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["approved"===s.status&&e.jsx(a,{to:`/parks/${s.id}`,children:e.jsxs(n,{className:"w-full bg-white hover:bg-gray-50 border border-gray-300 text-gray-700",children:[e.jsx(Eye,{className:"w-4 h-4 mr-2"}),"公開ページを見る"]})}),"approved"===s.status&&e.jsx(a,{to:"/owner-payment-system",children:e.jsxs(n,{className:"w-full bg-white hover:bg-gray-50 border border-gray-300 text-gray-700",children:[e.jsx(BarChart4,{className:"w-4 h-4 mr-2"}),"収益レポート"]})}),"second_stage_review"===s.status?e.jsx("div",{className:"w-full text-center py-3 text-gray-600 text-sm bg-gray-50 rounded border",children:"審査中のため操作できません"}):e.jsx(a,{to:"first_stage_passed"===s.status||"second_stage_waiting"===s.status?`/parks/${s.id}/second-stage`:`/parks/${s.id}/manage`,children:e.jsx(n,{className:"w-full",children:"first_stage_passed"===s.status||"second_stage_waiting"===s.status?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"second_stage_waiting"===s.status?"第二審査を申し込む":"第二審査を進める"]}):e.jsxs(e.Fragment,{children:[e.jsx(Edit,{className:"w-4 h-4 mr-2"}),"approved"===s.status?"設定を編集":"詳細を見る"]})})})]})]})})})}function V({className:s}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:[e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),e.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]})}function B({className:s}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:[e.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}function J({className:s}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}const q=e=>{let s;const t=new Set,a=(e,a)=>{const r="function"==typeof e?e(s):e;if(!Object.is(r,s)){const e=s;s=(null!=a?a:"object"!=typeof r||null===r)?r:Object.assign({},s,r),t.forEach(t=>t(s,e))}},r=()=>s,i={setState:a,getState:r,getInitialState:()=>n,subscribe:e=>(t.add(e),()=>t.delete(e))},n=s=e(a,r,i);return i},G=e=>e;const H=e=>{const s=(e=>e?q(e):q)(e),a=e=>function(e,s=G){const a=t.useSyncExternalStore(e.subscribe,t.useCallback(()=>s(e.getState()),[e,s]),t.useCallback(()=>s(e.getInitialState()),[e,s]));return t.useDebugValue(a),a}(s,e);return Object.assign(a,s),a},Y=e=>e?H(e):H,$={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_GOOGLE_MAPS_API_KEY:"AIzaSyC9sxGamDZmdKIz3vP1CWLJORl-QkoWgHg",VITE_GOOGLE_MAPS_GEOCODING_API_KEY:"AIzaSyBwWZ6eJaco_nfDQIIDyTt-CDaEL7TRnCo",VITE_PAYPAY_API_KEY:"a_FCpsFOALxH_HZnB",VITE_PAYPAY_CLIENT_ID:"a_FCpsFOALxH",VITE_PAYPAY_MERCHANT_ID:"927395976683495424",VITE_PUBLIC_BASE_URL:"https://dogparkjp.com",VITE_STRIPE_ACCOUNT_ID:"acct_1RYUXtAHWLDQ7ynZ",VITE_STRIPE_PUBLIC_KEY:"pk_live_51RYUXtAHWLDQ7ynZJ2Rse439JRUesTrISQjlUpQLJs4RKprLygju98sbPHbhXwSixvYxo2pyo1c5uo4j93pQieSt00z0re16rJ",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ubWNpdnd4dHpxYWpjb3ZwdGdmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxODk3OTUsImV4cCI6MjA2NDc2NTc5NX0.AqFCz3GQUVeGaG2988LCzsE4aJpeio3xScoxv5T0-OU",VITE_SUPABASE_DATABASE_URL:"https://onmcivwxtzqajcovptgf.supabase.co",VITE_SUPABASE_URL:"https://onmcivwxtzqajcovptgf.supabase.co"},Z=new Map,W=e=>{const s=Z.get(e);return s?Object.fromEntries(Object.entries(s.stores).map(([e,s])=>[e,s.getState()])):{}},K=e=>{var s,t;if(!e)return;const a=e.split("\n"),r=a.findIndex(e=>e.includes("api.setState"));if(r<0)return;const i=(null==(s=a[r+1])?void 0:s.trim())||"";return null==(t=/.+ (.+) .+/.exec(i))?void 0:t[1]},Q=(e,s={})=>(t,a,r)=>{const{enabled:i,anonymousActionType:n,store:l,...o}=s;let c;try{c=(null!=i?i:"production"!==($?"production":void 0))&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(u){}if(!c)return e(t,a,r);const{connection:d,...m}=((e,s,t)=>{if(void 0===e)return{type:"untracked",connection:s.connect(t)};const a=Z.get(t.name);if(a)return{type:"tracked",store:e,...a};const r={connection:s.connect(t),stores:{}};return Z.set(t.name,r),{type:"tracked",store:e,...r}})(l,c,o);let x=!0;r.setState=(e,s,i)=>{const c=t(e,s);if(!x)return c;const m=void 0===i?{type:n||K((new Error).stack)||"anonymous"}:"string"==typeof i?{type:i}:i;return void 0===l?(null==d||d.send(m,a()),c):(null==d||d.send({...m,type:`${l}/${m.type}`},{...W(o.name),[l]:r.getState()}),c)},r.devtools={cleanup:()=>{d&&"function"==typeof d.unsubscribe&&d.unsubscribe(),((e,s)=>{if(void 0===s)return;const t=Z.get(e);t&&(delete t.stores[s],0===Object.keys(t.stores).length&&Z.delete(e))})(o.name,l)}};const g=(...e)=>{const s=x;x=!1,t(...e),x=s},h=e(r.setState,a,r);if("untracked"===m.type?null==d||d.init(h):(m.stores[m.store]=r,null==d||d.init(Object.fromEntries(Object.entries(m.stores).map(([e,s])=>[e,e===m.store?h:s.getState()])))),r.dispatchFromDevtools&&"function"==typeof r.dispatch){let e=!1;const s=r.dispatch;r.dispatch=(...t)=>{"production"===($?"production":void 0)||"__setState"!==t[0].type||e||(e=!0),s(...t)}}return d.subscribe(e=>{var s;switch(e.type){case"ACTION":if("string"!=typeof e.payload)return;return X(e.payload,e=>{if("__setState"===e.type){if(void 0===l)return void g(e.state);Object.keys(e.state).length;const s=e.state[l];if(null==s)return;return void(JSON.stringify(r.getState())!==JSON.stringify(s)&&g(s))}r.dispatchFromDevtools&&"function"==typeof r.dispatch&&r.dispatch(e)});case"DISPATCH":switch(e.payload.type){case"RESET":return g(h),void 0===l?null==d?void 0:d.init(r.getState()):null==d?void 0:d.init(W(o.name));case"COMMIT":return void 0===l?void(null==d||d.init(r.getState())):null==d?void 0:d.init(W(o.name));case"ROLLBACK":return X(e.state,e=>{if(void 0===l)return g(e),void(null==d||d.init(r.getState()));g(e[l]),null==d||d.init(W(o.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return X(e.state,e=>{void 0!==l?JSON.stringify(r.getState())!==JSON.stringify(e[l])&&g(e[l]):g(e)});case"IMPORT_STATE":{const{nextLiftedState:t}=e.payload,a=null==(s=t.computedStates.slice(-1)[0])?void 0:s.state;if(!a)return;return g(void 0===l?a:a[l]),void(null==d||d.send(null,t))}case"PAUSE_RECORDING":return x=!x}return}}),h},X=(e,s)=>{let t;try{t=JSON.parse(e)}catch(a){}void 0!==t&&s(t)};function ee(e,s){let t;try{t=e()}catch(a){return}return{getItem:e=>{var s;const a=e=>null===e?null:JSON.parse(e,void 0),r=null!=(s=t.getItem(e))?s:null;return r instanceof Promise?r.then(a):a(r)},setItem:(e,s)=>t.setItem(e,JSON.stringify(s,void 0)),removeItem:e=>t.removeItem(e)}}const se=e=>s=>{try{const t=e(s);return t instanceof Promise?t:{then:e=>se(e)(t),catch(e){return this}}}catch(t){return{then(e){return this},catch:e=>se(e)(t)}}},te=(e,s)=>(t,a,r)=>{let i={storage:ee(()=>localStorage),partialize:e=>e,version:0,merge:(e,s)=>({...s,...e}),...s},n=!1;const l=new Set,o=new Set;let c=i.storage;if(!c)return e((...e)=>{t(...e)},a,r);const d=()=>{const e=i.partialize({...a()});return c.setItem(i.name,{state:e,version:i.version})},m=r.setState;r.setState=(e,s)=>{m(e,s),d()};const x=e((...e)=>{t(...e),d()},a,r);let g;r.getInitialState=()=>x;const h=()=>{var e,s;if(!c)return;n=!1,l.forEach(e=>{var s;return e(null!=(s=a())?s:x)});const r=(null==(s=i.onRehydrateStorage)?void 0:s.call(i,null!=(e=a())?e:x))||void 0;return se(c.getItem.bind(c))(i.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===i.version)return[!1,e.state];if(i.migrate){const s=i.migrate(e.state,e.version);return s instanceof Promise?s.then(e=>[!0,e]):[!0,s]}}return[!1,void 0]}).then(e=>{var s;const[r,n]=e;if(g=i.merge(n,null!=(s=a())?s:x),t(g,!0),r)return d()}).then(()=>{null==r||r(g,void 0),g=a(),n=!0,o.forEach(e=>e(g))}).catch(e=>{null==r||r(void 0,e)})};return r.persist={setOptions:e=>{i={...i,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>h(),hasHydrated:()=>n,onHydrate:e=>(l.add(e),()=>{l.delete(e)}),onFinishHydration:e=>(o.add(e),()=>{o.delete(e)})},i.skipHydration||h(),g||x},ae=Y()(Q(te((e,s)=>({user:null,isAuthenticated:!1,isLoading:!0,setUser:s=>e({user:s,isAuthenticated:!!s},!1,"setUser"),setLoading:s=>e({isLoading:s},!1,"setLoading"),login:async(t,a)=>{e({isLoading:!0},!1,"login/start");try{const{data:r,error:i}=await o.auth.signInWithPassword({email:t,password:a});if(i)throw i;if(r.user){const{data:t}=await o.from("profiles").select("name, role").eq("id",r.user.id).single(),a={id:r.user.id,email:r.user.email||"",name:t?.name,role:t?.role||"user"};return s().setUser(a),e({isLoading:!1},!1,"login/success"),!0}return e({isLoading:!1},!1,"login/failed"),!1}catch(r){return e({isLoading:!1},!1,"login/error"),!1}},logout:async()=>{e({isLoading:!0},!1,"logout/start");try{await o.auth.signOut(),e({user:null,isAuthenticated:!1,isLoading:!1},!1,"logout/success")}catch(s){e({isLoading:!1},!1,"logout/error")}},checkAuth:async()=>{e({isLoading:!0},!1,"checkAuth/start");try{const{data:{session:e}}=await o.auth.getSession();if(e?.user){const{data:t}=await o.from("profiles").select("name, role").eq("id",e.user.id).single(),a={id:e.user.id,email:e.user.email||"",name:t?.name,role:t?.role||"user"};s().setUser(a)}else s().setUser(null)}catch(t){s().setUser(null)}finally{e({isLoading:!1},!1,"checkAuth/complete")}},updateProfile:async t=>{const{user:a}=s();if(!a)return!1;try{const{error:s}=await o.from("profiles").update(t).eq("id",a.id);if(s)throw s;return e({user:{...a,...t}},!1,"updateProfile"),!0}catch(r){return!1}}}),{name:"auth-store",partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated})}),{name:"auth-store"})),re=Y()(Q((e,s)=>({isGlobalLoading:!1,loadingTasks:new Set,notifications:[],activeModal:null,isMenuOpen:!1,activeTab:"",theme:"light",isMobile:!1,isTablet:!1,setGlobalLoading:s=>e({isGlobalLoading:s},!1,"setGlobalLoading"),addLoadingTask:s=>e(e=>({loadingTasks:new Set([...e.loadingTasks,s]),isGlobalLoading:!0}),!1,"addLoadingTask"),removeLoadingTask:s=>e(e=>{const t=new Set(e.loadingTasks);return t.delete(s),{loadingTasks:t,isGlobalLoading:t.size>0}},!1,"removeLoadingTask"),addNotification:t=>{const a=Date.now().toString(),r={...t,id:a};e(e=>({notifications:[...e.notifications,r]}),!1,"addNotification");const i=t.duration||5e3;setTimeout(()=>{s().removeNotification(a)},i)},removeNotification:s=>e(e=>({notifications:e.notifications.filter(e=>e.id!==s)}),!1,"removeNotification"),clearNotifications:()=>e({notifications:[]},!1,"clearNotifications"),showModal:s=>{const t=Date.now().toString();e({activeModal:{...s,id:t}},!1,"showModal")},hideModal:()=>e({activeModal:null},!1,"hideModal"),setMenuOpen:s=>e({isMenuOpen:s},!1,"setMenuOpen"),setActiveTab:s=>e({activeTab:s},!1,"setActiveTab"),setTheme:s=>{e({theme:s},!1,"setTheme"),document.documentElement.className=s},toggleTheme:()=>{const e="light"===s().theme?"dark":"light";s().setTheme(e)},setDeviceType:(s,t)=>e({isMobile:s,isTablet:t},!1,"setDeviceType")}),{name:"ui-store"}));function ie(){const{user:t,logout:m,isAdmin:x,lineUser:g,isLineAuthenticated:h}=c(),{me:u}=function(){const[e,t]=s.useState(null),[a,r]=s.useState(!0),[i,n]=s.useState(null);return s.useEffect(()=>{let e=!0;return(async()=>{try{const s=await fetch("/auth/me",{credentials:"include"});if(!s.ok)throw new Error("not_authenticated");const a=await s.json();if(!e)return;t(a)}catch(s){e&&n(s)}finally{e&&r(!1)}})(),()=>{e=!1}},[]),{me:e,loading:a,error:i}}();r();const b=i(),{user:N,setUser:v,updateProfile:y}=ae(),{setGlobalLoading:V,addNotification:B,removeNotification:J,isGlobalLoading:q}=re(),[G,H]=s.useState(null),[Y,$]=s.useState([]),[Z,W]=s.useState([]),[K,Q]=s.useState([]),[X,ee]=s.useState([]),[se,te]=s.useState([]),[ie,ne]=s.useState([]),[le,oe]=s.useState([]),[ce,de]=s.useState(!0),[me,xe]=s.useState(!1),[ge,he]=s.useState(""),[ue,pe]=s.useState(""),[be,je]=s.useState(null),[fe,Ne]=s.useState(!1),[ve,ye]=s.useState(null),[we,_e]=s.useState(!1),[Se,ke]=s.useState(!1),[Ie,De]=s.useState({name:"",breed:"",gender:"",birthDate:""}),[Ce,Ee]=s.useState(null),[Le,Te]=s.useState(null),[Oe,Ae]=s.useState({x:0,y:0}),[Ue,Pe]=s.useState(1),[Me,Re]=s.useState(null),[ze,Fe]=s.useState(null),[Ve,Be]=s.useState(null),[Je,qe]=s.useState(""),[Ge,He]=s.useState(""),[Ye,$e]=s.useState([]),[Ze,We]=s.useState(null),[Ke,Qe]=s.useState(!1),[Xe,es]=s.useState([]),[ss,ts]=s.useState(0),[as,rs]=s.useState(0);d();const is=s.useCallback(async()=>{try{V(!0),de(!0);const e=t?.id||g?.id||u?.id;if(!e)return de(!1),void V(!1);const[s,a]=await Promise.all([o.from("profiles").select("*").eq("id",e).single().then(e=>e.error&&h?{data:null,error:null}:e),o.from("dogs").select("*, vaccine_certifications(*)").eq("owner_id",e).order("created_at",{ascending:!1})]);H(s.data),$(a.data||[]),s.data&&!N&&v({id:e||"",email:t?.email||"",name:s.data.name,role:s.data.user_type||"user"}),de(!1);const[r,i,n,l]=await Promise.all([o.from("dog_parks").select("*").eq("owner_id",e).order("created_at",{ascending:!1}),o.from("reservations").select("*, dog_park:dog_parks(*), dog:dogs(*)").eq("user_id",e).order("created_at",{ascending:!1}).limit(5),o.from("notifications").select("*").eq("user_id",e).eq("read",!1).order("created_at",{ascending:!1}).limit(5),o.from("facility_reservations").select("*, facility:pet_facilities(name)").eq("user_id",e).neq("status","cancelled").gte("reserved_date",new Date(Date.now()-864e5).toISOString().split("T")[0]).order("reserved_date",{ascending:!1}).limit(5)]);W(r.data||[]),Q(i.data||[]),ee(n.data||[]),oe(l.data||[]),Promise.allSettled([o.from("news_announcements").select("*").order("created_at",{ascending:!1}).limit(3).then(e=>{te(e.data||[])}),o.from("pet_facilities").select("*").eq("owner_id",e).order("created_at",{ascending:!1}).then(e=>{e.data&&$e(e.data)}).catch(()=>{}),o.from("dog_likes").select("\n            *,\n            dog:dogs(\n              *,\n              vaccine_certifications(*)\n            )\n          ").eq("user_id",e).order("created_at",{ascending:!1}).limit(10).then(e=>{e.data&&ne(e.data.map(e=>e.dog).filter(Boolean))}).catch(()=>{}),o.from("user_coupons").select("\n            *,\n            facility_coupons (\n              id, facility_id, title, service_content, discount_value, discount_type, description, start_date, end_date, usage_limit_type, coupon_image_url,\n              pet_facilities (name)\n            )\n          ").eq("user_id",e).is("used_at",null).gte("facility_coupons.end_date",(new Date).toISOString()).then(e=>{e.data&&(es(e.data),ts(e.data.length))}).catch(e=>{}),o.from("points_balances").select("balance").eq("user_id",e).maybeSingle().then(e=>{rs(e.data?.balance||0)}).catch(()=>{})])}catch(e){he("データの取得に失敗しました。ページを再読み込みしてください。"),B({type:"error",title:"エラー",message:"データの取得に失敗しました",duration:5e3})}finally{V(!1)}},[t?.id,g?.id,h,N,v,V,B]);s.useEffect(()=>{is(),b.search.includes("success=true")&&(xe(!0),pe("操作が正常に完了しました！"),B({type:"success",title:"成功",message:"操作が正常に完了しました！",duration:3e3}),window.history.replaceState({},document.title,b.pathname),setTimeout(()=>{xe(!1),pe("")},5e3))},[b,is,B]);const ns=()=>{Ee(null),Fe(null),Be(null),qe(""),He(""),Te(null)};return ce||q?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),e.jsx("div",{className:"absolute inset-0 animate-ping rounded-full h-12 w-12 border border-blue-400 opacity-20"})]})})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-2 pb-8 space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"マイページ"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["ようこそ、",G?.name||g?.display_name||N?.name||sessionStorage.getItem("liff_display_name")||"ユーザー","さん！"]})]}),e.jsx("div",{className:"flex items-center space-x-4",children:x&&e.jsxs("a",{href:"/admin",className:"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-4 py-2 rounded-lg font-medium inline-flex items-center transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"管理者画面"]})})]}),me&&e.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 text-green-800 rounded-lg flex items-center animate-fade-in",children:[e.jsx(j,{className:"w-5 h-5 mr-2 text-green-600"}),"操作が正常に完了しました！"]}),ge&&e.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 text-red-800 rounded-lg flex items-center",children:[e.jsx("div",{className:"w-5 h-5 mr-2 text-red-600",children:"⚠️"}),ge]}),ue&&e.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 text-green-800 rounded-lg flex items-center",children:[e.jsx(j,{className:"w-5 h-5 mr-2 text-green-600"}),ue]}),e.jsx(R,{dogs:Y,user:t,selectedDog:ve,showDogEditModal:we,isUpdatingDog:Se,dogUpdateError:ge,dogUpdateSuccess:ue,dogFormData:Ie,dogImageFile:Ce,dogImagePreview:Le,rabiesVaccineFile:ze,comboVaccineFile:Ve,rabiesExpiryDate:Je,comboExpiryDate:Ge,onDogSelect:e=>{ye(e);const s=new Date(e.birth_date).toISOString().split("T")[0];De({name:e.name,breed:e.breed,gender:e.gender,birthDate:s||""}),Te(e.image_url||null);const t=e.vaccine_certifications?.[0];qe(t?.rabies_expiry_date||""),He(t?.combo_expiry_date||""),_e(!0)},onCloseDogEditModal:()=>_e(!1),onUpdateDog:async e=>{if(e.preventDefault(),ve&&t)try{if(ke(!0),he(""),!(Ie.name&&Ie.breed&&Ie.gender&&Ie.birthDate))return void he("すべての必須項目を入力してください。");if(!["オス","メス"].includes(Ie.gender))return void he("性別は「オス」または「メス」を選択してください");const e={name:Ie.name,breed:Ie.breed,gender:Ie.gender,birth_date:Ie.birthDate};if(Ce){const s=await createImageBitmap(Ce),t=Math.min(s.width,s.height),a=Math.min(1200,t),r=document.createElement("canvas");r.width=a,r.height=a;const i=r.getContext("2d"),n=!!Me,l=n?Me.x:(s.width-t)/2,o=n?Me.y:(s.height-t)/2,c=n?Me.width:t,d=n?Me.height:t;i.drawImage(s,l,o,c,d,0,0,a,a);const m=await new Promise(e=>r.toBlob(s=>e(s),"image/jpeg",.9)),x=new File([m],"dog-square.jpg",{type:"image/jpeg"}),g=`${ve.id}/${crypto.randomUUID()}.webp`,h=await M("dog-images",x,g,{quality:85,generateThumbnail:!1}),u=h.webpUrl||h.originalUrl;if(!u)throw new Error("画像の保存に失敗しました");e.image_url=u}Ce||Le||(e.image_url="");const{data:s,error:a}=await o.from("dogs").update(e).eq("id",ve.id).eq("owner_id",t.id).select("id,image_url");if(a)throw a;if(!s||0===s.length)throw new Error("更新対象が見つからない、または権限により更新できませんでした。");pe("ワンちゃんの情報を更新しました！"),B({type:"success",title:"成功",message:"ワンちゃんの情報を更新しました！",duration:3e3}),_e(!1),await is(),ns()}catch(s){const e=s instanceof Error?s.message:"ワンちゃんの情報の更新に失敗しました";he(e),B({type:"error",title:"エラー",message:e,duration:5e3})}finally{ke(!1)}},onDeleteDog:async e=>{if(window.confirm(`${e.name}の情報を削除しますか？\n\nこの操作は元に戻せません。`))try{ke(!0);const{error:s}=await o.from("dogs").delete().eq("id",e.id);if(s)throw s;pe(`${e.name}の情報を削除しました。`),B({type:"success",title:"削除完了",message:`${e.name}の情報を削除しました。`,duration:3e3}),_e(!1),await is()}catch(s){he("ワンちゃんの情報の削除に失敗しました。")}finally{ke(!1)}},onDogImageSelect:async e=>{const s=e.target.files?.[0];if(s)try{if(s.size>10485760)return void he("ファイルサイズは10MB以下にしてください。");if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(s.type))return void he(`サポートされていない画像形式です: ${s.type}`);Ee(s);const e=new FileReader;e.onload=e=>{Te(e.target?.result),Ae({x:0,y:0}),Pe(1),Re(null)},e.readAsDataURL(s),he("")}catch(t){he("画像の処理に失敗しました。別の画像をお試しください。")}},onDogImageRemove:()=>{},onRabiesVaccineSelect:e=>Fe(e.target.files?.[0]||null),onComboVaccineSelect:e=>Be(e.target.files?.[0]||null),onFormDataChange:De,onRabiesExpiryDateChange:qe,onComboExpiryDateChange:He,crop:Oe,zoom:Ue,onCropChange:Ae,onZoomChange:Pe,onCropComplete:(e,s)=>Re(s),onImageCropped:e=>{Ee(e);const s=URL.createObjectURL(e);Te(s)}}),e.jsxs(l,{className:"p-6 bg-gradient-to-br from-sky-50 to-blue-50 border-sky-200",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[e.jsx(w,{className:"w-6 h-6 text-blue-600 mr-2"}),"店舗予約管理"]}),e.jsx(a,{to:"/my-reservations",children:e.jsx(n,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",children:"一覧表示"})})]}),0===le.length?e.jsx("div",{className:"text-center py-8 text-blue-700",children:"店舗の予約はまだありません"}):e.jsx("div",{className:"space-y-3",children:le.map(s=>e.jsxs("div",{className:"p-4 bg-white rounded-lg border border-blue-100 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("div",{className:"font-semibold",children:s.facility?.name||"施設"}),e.jsxs("div",{className:"text-gray-600",children:[s.reserved_date," ",s.start_time,"-",s.end_time," / ",s.guest_count,"名 / ",s.seat_code||"座席:指定なし"]})]}),e.jsx(a,{to:`/facilities/${s.facility_id}`,children:e.jsx(n,{size:"sm",variant:"secondary",children:"詳細"})})]},s.id))})]}),e.jsxs(l,{className:"p-6 bg-gradient-to-br from-amber-50 to-yellow-50 border-amber-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[e.jsx(k,{className:"w-6 h-6 text-amber-600 mr-2"}),"保有ポイント"]}),e.jsx(a,{to:"/points",children:e.jsx(n,{size:"sm",className:"bg-amber-600 hover:bg-amber-700 text-white",children:"履歴を見る"})})]}),e.jsxs("div",{className:"text-3xl font-bold text-amber-700",children:[as.toLocaleString()," P"]}),e.jsx("p",{className:"text-sm text-amber-700 mt-2",children:"ペットショップで利用可能"})]}),e.jsxs(l,{className:"p-6 bg-gradient-to-br from-pink-50 to-purple-50 border-pink-200",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[e.jsx(I,{className:"w-6 h-6 text-pink-600 mr-2"}),"保有クーポン (",ss,"枚)"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{is()},className:"px-3 py-1 text-sm bg-pink-100 hover:bg-pink-200 text-pink-700 rounded-md transition-colors",title:"クーポンデータを更新",children:"🔄"}),e.jsx(a,{to:"/my-coupons",children:e.jsxs(n,{size:"sm",className:"bg-pink-600 hover:bg-pink-700 text-white",children:[e.jsx(D,{className:"w-4 h-4 mr-1"}),"一覧表示"]})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:0===Xe.length?e.jsxs("div",{className:"col-span-full text-center py-8",children:[e.jsx(I,{className:"w-12 h-12 text-pink-300 mx-auto mb-3"}),e.jsx("p",{className:"text-pink-600 font-medium mb-2",children:"利用可能なクーポンがありません"}),e.jsx("p",{className:"text-pink-500 text-sm",children:"施設でクーポンを取得してみましょう"})]}):e.jsxs(e.Fragment,{children:[Xe.slice(0,6).map(s=>e.jsxs("div",{className:"p-4 bg-white rounded-lg border border-pink-100 shadow-sm",children:[e.jsx("div",{className:"flex justify-between items-start mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1 text-gray-900",children:s.facility_coupons?.title||"クーポン"}),e.jsx("p",{className:"text-sm text-pink-600 font-medium mb-2",children:s.facility_coupons?.pet_facilities?.name||"店舗名"}),e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-pink-100 text-pink-800",children:[s.facility_coupons?.discount_value,"amount"===s.facility_coupons?.discount_type?"円":"%"," OFF"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[new Date(s.facility_coupons?.end_date).toLocaleDateString(),"まで"]})]})]})}),s.facility_coupons?.description&&e.jsx("p",{className:"text-gray-600 mb-3 text-sm line-clamp-2",children:s.facility_coupons.description})]},s.id)),Xe.length>6&&e.jsx("div",{className:"col-span-full text-center mt-4",children:e.jsx(a,{to:"/my-coupons",children:e.jsxs(n,{variant:"secondary",size:"sm",children:["すべて表示 (",Xe.length,"枚)"]})})})]})})]}),e.jsxs(l,{className:"p-6 bg-gradient-to-br from-green-50 to-blue-50 border-green-200",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[e.jsx(f,{className:"w-6 h-6 text-green-600 mr-2"}),"管理中のドッグラン (",Z.length,"施設)"]}),e.jsx(a,{to:"/my-parks-management",children:e.jsxs(n,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(C,{className:"w-4 h-4 mr-1"}),"一覧・管理"]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Z.slice(0,6).map(s=>{const t=(e=>{switch(e){case"approved":return{label:"公開中",color:"bg-green-100 text-green-800",description:""};case"pending":return{label:"第一審査中",color:"bg-yellow-100 text-yellow-800",description:"管理者による審査をお待ちください"};case"first_stage_passed":return{label:"第二審査申請可能",color:"bg-blue-100 text-blue-800",description:"第二審査の申請をしてください"};case"second_stage_waiting":return{label:"第二審査申請準備中",color:"bg-orange-100 text-orange-800",description:"画像アップロード等の準備を進めてください"};case"second_stage_review":return{label:"第二審査中",color:"bg-purple-100 text-purple-800",description:"管理者による審査をお待ちください"};case"smart_lock_testing":return{label:"スマートロック実証検査中",color:"bg-indigo-100 text-indigo-800",description:"実証検査の完了をお待ちください"};case"rejected":return{label:"却下",color:"bg-red-100 text-red-800",description:"詳細は管理ページでご確認ください"};default:return{label:"審査中",color:"bg-gray-100 text-gray-800",description:""}}})(s.status);return e.jsxs("div",{className:"p-4 bg-white rounded-lg border border-gray-200",children:[e.jsx("h3",{className:"font-semibold mb-1",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.address}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.color}`,children:t.label}),e.jsxs("div",{className:"text-xs text-gray-500",children:["料金: ¥",s.price_per_hour,"/時間"]})]}),t.description&&e.jsx("div",{className:"text-xs text-gray-600 bg-gray-50 px-2 py-1 rounded",children:t.description}),"first_stage_passed"===s.status&&e.jsx(a,{to:`/parks/${s.id}/second-stage`,className:"block",children:e.jsx("button",{className:"w-full text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700 transition-colors",children:"第二審査を申請する"})})]})]},s.id)})}),Z.length>6&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx(a,{to:"/my-parks-management",children:e.jsxs(n,{variant:"secondary",size:"sm",children:["すべて表示 (",Z.length,"施設)"]})})})]}),e.jsxs(l,{className:"p-6 bg-gradient-to-br from-teal-50 to-cyan-50 border-teal-200",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[e.jsx(f,{className:"w-6 h-6 text-teal-600 mr-2"}),"管理中のペット関連施設 (",Ye.length,"施設)"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"ペットショップ、動物病院、トリミングサロンなどの施設管理"})]}),e.jsx(a,{to:"/my-facilities-management",children:e.jsxs(n,{size:"sm",className:"bg-teal-600 hover:bg-teal-700 text-white",children:[e.jsx(C,{className:"w-4 h-4 mr-1"}),"一覧・管理"]})})]}),0===Ye.length?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"管理中のペット関連施設がありません。"}),e.jsx(a,{to:"/facility-registration",children:e.jsx(n,{className:"bg-teal-600 hover:bg-teal-700",children:"新規施設登録"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Ye.slice(0,4).map(s=>e.jsxs("div",{className:"p-4 bg-white rounded-lg border border-teal-100",children:[e.jsx("div",{className:"flex justify-between items-start mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:s.name}),e.jsx("div",{className:"flex items-center space-x-2 mb-2",children:e.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-medium flex items-center space-x-1 "+("approved"===s.status?"bg-green-100 text-green-800":"pending"===s.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:["approved"===s.status&&e.jsx(j,{className:"w-3 h-3"}),"pending"===s.status&&e.jsx(w,{className:"w-3 h-3"}),"rejected"===s.status&&e.jsx(_,{className:"w-3 h-3"}),e.jsxs("span",{children:["approved"===s.status&&"公開中","pending"===s.status&&"審査中","rejected"===s.status&&"却下","suspended"===s.status&&"停止中"]})]})})]})}),s.description&&e.jsx("p",{className:"text-gray-600 mb-3 text-sm line-clamp-2",children:s.description}),e.jsxs("div",{className:"space-y-1 mb-3",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(E,{className:"w-3 h-3 mr-2"}),e.jsx("span",{className:"text-xs",children:s.address})]}),s.phone&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(L,{className:"w-3 h-3 mr-2"}),e.jsx("span",{className:"text-xs",children:s.phone})]}),s.website&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(T,{className:"w-3 h-3 mr-2"}),e.jsx("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-teal-600 hover:text-teal-800",children:"公式サイト"})]})]}),e.jsx("div",{className:"flex justify-between items-center pt-3 border-t border-gray-100",children:e.jsx("div",{className:"text-xs text-gray-500",children:s.category_name||"その他施設"})})]},s.id))}),Ye.length>4&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx(a,{to:"/my-facilities-management",children:e.jsxs(n,{variant:"secondary",size:"sm",children:["すべて表示 (",Ye.length,"施設)"]})})})]})]}),e.jsxs(l,{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[e.jsx("span",{className:"text-2xl mr-2",children:"🚀"}),"クイックアクション"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(a,{to:"/parks",className:"group",children:e.jsxs("div",{className:"p-6 bg-gradient-to-br from-blue-50 to-sky-50 rounded-xl hover:from-blue-100 hover:to-sky-100 transition-all duration-300 transform hover:scale-105 shadow-sm hover:shadow-md border border-blue-200",children:[e.jsx(E,{className:"w-8 h-8 text-blue-600 mb-3"}),e.jsx("h3",{className:"font-semibold text-blue-900 mb-1",children:"ドッグラン検索"}),e.jsx("p",{className:"text-sm text-blue-700",children:"近くのドッグランを探す"})]})}),e.jsx(a,{to:"/community",className:"group",children:e.jsxs("div",{className:"p-6 bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl hover:from-green-100 hover:to-emerald-100 transition-all duration-300 transform hover:scale-105 shadow-sm hover:shadow-md border border-green-200",children:[e.jsx(L,{className:"w-8 h-8 text-green-600 mb-3"}),e.jsx("h3",{className:"font-semibold text-green-900 mb-1",children:"コミュニティ"}),e.jsx("p",{className:"text-sm text-green-700",children:"他の飼い主と交流"})]})}),e.jsx(a,{to:"/petshop",className:"group",children:e.jsxs("div",{className:"p-6 bg-gradient-to-br from-purple-50 to-violet-50 rounded-xl hover:from-purple-100 hover:to-violet-100 transition-all duration-300 transform hover:scale-105 shadow-sm hover:shadow-md border border-purple-200",children:[e.jsx(O,{className:"w-8 h-8 text-purple-600 mb-3"}),e.jsx("h3",{className:"font-semibold text-purple-900 mb-1",children:"ペットショップ"}),e.jsx("p",{className:"text-sm text-purple-700",children:"ペット用品を購入"})]})}),e.jsx(a,{to:"/order-history",className:"group",children:e.jsxs("div",{className:"p-6 bg-gradient-to-br from-amber-50 to-yellow-50 rounded-xl hover:from-amber-100 hover:to-yellow-100 transition-all duration-300 transform hover:scale-105 shadow-sm hover:shadow-md border border-amber-200",children:[e.jsx(A,{className:"w-8 h-8 text-amber-600 mb-3"}),e.jsx("h3",{className:"font-semibold text-amber-900 mb-1",children:"注文履歴"}),e.jsx("p",{className:"text-sm text-amber-700",children:"購入履歴を確認"})]})}),e.jsx(a,{to:"/news",className:"group",children:e.jsxs("div",{className:"p-6 bg-gradient-to-br from-orange-50 to-amber-50 rounded-xl hover:from-orange-100 hover:to-amber-100 transition-all duration-300 transform hover:scale-105 shadow-sm hover:shadow-md border border-orange-200",children:[e.jsx(p,{className:"w-8 h-8 text-orange-600 mb-3"}),e.jsx("h3",{className:"font-semibold text-orange-900 mb-1",children:"新着情報"}),e.jsx("p",{className:"text-sm text-orange-700",children:"最新のお知らせ"})]})}),e.jsx(a,{to:"/park-registration-agreement",className:"group",children:e.jsxs("div",{className:"p-6 bg-gradient-to-br from-yellow-50 to-orange-50 rounded-xl hover:from-yellow-100 hover:to-orange-100 transition-all duration-300 transform hover:scale-105 shadow-sm hover:shadow-md border-2 border-orange-200",children:[e.jsx(f,{className:"w-8 h-8 text-orange-600 mb-3"}),e.jsx("h3",{className:"font-semibold text-orange-900 mb-1",children:"ドッグランオーナー募集"}),e.jsx("p",{className:"text-sm text-orange-700 mb-2",children:"あなたのドッグランを登録"}),e.jsx("div",{className:"text-xs text-orange-600 font-semibold bg-orange-100 px-2 py-1 rounded-full inline-block",children:"💰 収益化のチャンス！"})]})}),e.jsx(a,{to:"/facility-registration",className:"group",children:e.jsxs("div",{className:"p-6 bg-gradient-to-br from-teal-50 to-cyan-50 rounded-xl hover:from-teal-100 hover:to-cyan-100 transition-all duration-300 transform hover:scale-105 shadow-sm hover:shadow-md border-2 border-teal-200",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(U,{className:"w-6 h-6 text-teal-600 mr-2"}),e.jsx(O,{className:"w-6 h-6 text-teal-600"})]}),e.jsx("h3",{className:"font-semibold text-teal-900 mb-1",children:"ペット関連施設登録"}),e.jsx("p",{className:"text-sm text-teal-700 mb-2",children:"店舗・宿泊施設・サロンなど"}),e.jsx("div",{className:"text-xs text-teal-600 font-semibold bg-teal-100 px-2 py-1 rounded-full inline-block",children:"🎉 今なら無料掲載！"})]})}),e.jsx(a,{to:"/profile-settings",className:"group",children:e.jsxs("div",{className:"p-6 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl hover:from-indigo-100 hover:to-purple-100 transition-all duration-300 transform hover:scale-105 shadow-sm hover:shadow-md border border-indigo-200",children:[e.jsx(P,{className:"w-8 h-8 text-indigo-600 mb-3"}),e.jsx("h3",{className:"font-semibold text-indigo-900 mb-1",children:"登録情報"}),e.jsx("p",{className:"text-sm text-indigo-700",children:"住所・氏名・連絡先を編集"})]})})]})]}),X.length>0&&e.jsx(z,{notifications:X,onMarkAsRead:async e=>{try{await o.from("notifications").update({read:!0}).eq("id",e),ee(s=>s.filter(s=>s.id!==e)),B({type:"info",title:"通知",message:"通知を既読にしました",duration:2e3})}catch(s){he("通知の更新に失敗しました。")}}}),fe&&be&&e.jsx(F,{park:be,onClose:()=>Ne(!1)})]})}export{ie as UserDashboard,ie as default};
