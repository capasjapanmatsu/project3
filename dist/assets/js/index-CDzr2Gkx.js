const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/index-CvB4LVz_.js","assets/js/data-vendor-BmFUkYzE.js","assets/js/core-vendor-DBEP70vW.js","assets/js/index-DY73PVTX.js","assets/js/PWADebugPanel-Dw-QyTc8.js","assets/js/ui-vendor-B3gor5_P.js","assets/js/heavy-vendor-Bb5jGJvT.js","assets/js/Home-B4Vmm53Y.js","assets/js/Login-B_d4_mhA.js","assets/js/Input-CcyqxK15.js","assets/js/logger-hQPzKOcf.js","assets/js/Register-ClGev3hW.js","assets/js/postalCodeLookup-BVBMVLy5.js","assets/js/UserDashboard-Dc3Wkwfj.js","assets/js/DogCard-B6tCkZdn.js","assets/js/dogBreeds-6lxY8Uni.js","assets/js/Select-BRIzR28X.js","assets/js/VaccineBadge-DAd5IbSP.js","assets/js/ProfileSettings-D01h5MER.js","assets/js/DogManagement-CulMwvuD.js","assets/js/DogRegistration-BsywN6Ag.js","assets/js/DogProfile-DorxTPP4.js","assets/js/LikedDogs-Chz6lEMe.js","assets/js/DogParkList-Bf43NJDw.js","assets/js/DogParkDetail-oMwnp8wu.js","assets/js/DogParkRules-DozEBU0f.js","assets/js/DogParkHistory-D4VeNRry.js","assets/js/NewParkDetail-ClcgopCb.js","assets/js/ParkReservation-CLaD8xUd.js","assets/js/useStripe-Bh_ihIy7.js","assets/js/external-vendor-CcgPsVUa.js","assets/js/stripe-config-03sBkt-B.js","assets/js/ParkRegistration-C8WcPz4v.js","assets/js/ParkRegistrationAgreement-DVBNW7hz.js","assets/js/ParkRegistrationSecondStage-DacLvEg2.js","assets/js/ParkManagement-DX_BSWAr.js","assets/js/PetShop-ga7tGvV1.js","assets/js/ProductDetail-sIWNxP-g.js","assets/js/Cart-dBVeDkL-.js","assets/js/Checkout-DFskf-b1.js","assets/js/OrderHistory-D7HoqTl-.js","assets/js/Community-C477vfHu.js","assets/js/News-DLFoYHx_.js","assets/js/NewsDetail-CYvToKT0.js","assets/js/DogInfo-iXaXhByl.js","assets/js/DogInfoBreeds-ENkhmRtP.js","assets/js/DogInfoVaccine-SAVUiUTc.js","assets/js/DogInfoFoods-DEq5ErKy.js","assets/js/DogInfoSnack-D4EXdDhj.js","assets/js/DogInfoParasite-CdBMTGJI.js","assets/js/DogInfoShow-DNvDs-47.js","assets/js/HealthManagement-BEDKQaQ9.js","assets/js/Training-CLnoDrsE.js","assets/js/Walk-BoNlf4Ql.js","assets/js/Food-CcRHU76N.js","assets/js/Care-Bm9OZgZz.js","assets/js/Breeds-naubfvsV.js","assets/js/PaymentSetup-BmPRdGnp.js","assets/js/PaymentMethodSettings-u6LyQgU0.js","assets/js/PaymentConfirmation-BNKGbTAy.js","assets/js/Subscription-CSd8U38z.js","assets/js/OwnerDashboard-C9NWGpmn.js","assets/js/OwnerPaymentSystem-C-iII6YW.js","assets/js/AdminDashboard-DUUWmgNC.js","assets/js/AdminManagement-Dnc6CQjT.js","assets/js/useAdminData-CXGyfvNB.js","assets/js/AdminTasks-CTprH_l2.js","assets/js/AdminUserManagement-CrSwnClK.js","assets/js/AdminUserDetail-CmETlJSq.js","assets/js/AdminParkManagement-88RSYr4u.js","assets/js/AdminReservationManagement-BkalX6Yi.js","assets/js/AdminShopManagement-DWsHD4EF.js","assets/js/csvExport-CWWwNDcn.js","assets/js/AdminSalesManagement-D6DyK7Cs.js","assets/js/AdminVaccineApproval-CCGmjDk5.js","assets/js/AdminFacilityApproval-CmhiIm5E.js","assets/js/AdminRevenueReport-CrZawcf1.js","assets/js/AdminNewsManagement-D1SVpgG_.js","assets/js/TwoFactorSetup-yS3hZE89.js","assets/js/TwoFactorVerify-Bvdu16J1.js","assets/js/MagicLink-C2rd70iW.js","assets/js/AccessControl-DbKr_xHK.js","assets/js/FacilityRegistration-CxVoiuCM.js","assets/js/TermsOfService-BWBY5C-t.js","assets/js/PrivacyPolicy-DXWy0NZZ.js","assets/js/Contact-DvL_ZVUv.js","assets/js/BusinessInformation-LLrKx7FP.js","assets/js/Deploy-DOTs3w-c.js","assets/js/deploymentStatus-D0x4Lo4B.js","assets/js/DeploymentHistory-TNvTmlNN.js","assets/js/NetlifySetupGuide-hUyoEKMf.js","assets/js/PWASetupGuide-BEZfjNlw.js","assets/js/PWAImplementationGuide-Dbiye-e0.js","assets/js/PWADocumentation-B90g-8lE.js","assets/js/PWATestingSuite-opFxyirx.js","assets/js/PWALighthouseAudit-DybO_Qkg.js","assets/js/PWADeploymentGuide-Bkm3Bu4Z.js","assets/js/react-error-boundary.esm-Bd6obM-G.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,s,a)=>((t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a)(t,"symbol"!=typeof s?s+"":s,a);import{c as s,j as a,_ as n}from"./data-vendor-BmFUkYzE.js";import{b as i,r,u as o,L as l,d as c,e as d,f as m,R as h}from"./core-vendor-DBEP70vW.js";import{H as u,M as x,K as p,U as j,a as g,P as y,b as f,L as _,A as w,S as b,C as v,R as N,B as E,c as I,D as P,d as A,e as k,f as D,g as L,X as S,I as T,h as O,i as R,j as z}from"./ui-vendor-B3gor5_P.js";import{m as C}from"./heavy-vendor-Bb5jGJvT.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var V={},M=i;V.createRoot=M.createRoot,V.hydrateRoot=M.hydrateRoot;const H=s("https://onmcivwxtzqajcovptgf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ubWNpdnd4dHpxYWpjb3ZwdGdmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxODk3OTUsImV4cCI6MjA2NDc2NTc5NX0.AqFCz3GQUVeGaG2988LCzsE4aJpeio3xScoxv5T0-OU"),W=(e,t="vaccine-certs")=>{if(!e)return"";try{const{data:s}=H.storage.from(t).getPublicUrl(e);return s.publicUrl}catch(s){return""}},U=e=>{if(!e)return"不明なエラーが発生しました";switch(e.code){case"23505":return"このデータは既に存在しています";case"23503":return"関連するデータが存在しません";case"23502":return"必須項目が入力されていません";case"42501":return"操作する権限がありません";case"42703":return"データベースの構造に問題があります";case"PGRST116":return"データが見つかりません";case"PGRST301":return"送信されたデータが無効です";default:if(e.message){const t=e.message.toLowerCase();return t.includes("duplicate key")?"このデータは既に存在しています":t.includes("foreign key")?"関連するデータが存在しません":t.includes("not null")?"必須項目が入力されていません":t.includes("permission")?"操作する権限がありません":t.includes("authentication")?"認証に失敗しました":t.includes("network")?"ネットワークエラーが発生しました":e.message}return"データベース処理中にエラーが発生しました"}},J=r.createContext({user:null,session:null,loading:!0,logout:async()=>{await Promise.resolve()},isAuthenticated:!1,signInWithMagicLink:async()=>(await Promise.resolve(),{success:!1}),signInWithPassword:async()=>(await Promise.resolve(),{success:!1}),verify2FA:async()=>(await Promise.resolve(),{success:!1}),setIsTrustedDevice:()=>{},isAdmin:!1,userProfile:null}),F=()=>{const e=r.useContext(J);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},B=Object.freeze(Object.defineProperty({__proto__:null,AuthProvider:({children:e})=>{const[t,s]=r.useState(null),[n,i]=r.useState(null),[o,l]=r.useState(!0),[c,d]=r.useState(!1),[m,h]=r.useState(!1),[u,x]=r.useState(null);r.useCallback(async(e,t)=>{try{const{data:t,error:s}=await H.from("profiles").select("*").eq("id",e).single();return s?null:t}catch(s){return null}},[]),r.useEffect(()=>{let e=!0;(async()=>{try{const{data:{user:t},error:a}=await H.auth.getUser();if(a)return void(e&&(i(null),s(null),d(!1),x(null),h(!1)));t&&e?(s(t),d(!0),x(null),h("capasjapan@gmail.com"===t.email)):e&&(i(null),s(null),d(!1),x(null),h(!1))}catch(t){e&&(i(null),s(null),d(!1),x(null),h(!1))}finally{e&&l(!1)}})();const{data:{subscription:t}}=H.auth.onAuthStateChange(async(t,a)=>{e&&("SIGNED_OUT"!==t&&a?"SIGNED_IN"===t&&a&&(i(a),s(a.user),d(!0),x(null),h("capasjapan@gmail.com"===a.user.email)):(i(null),s(null),d(!1),x(null),h(!1)),l(!1))});return()=>{e=!1,t.unsubscribe()}},[]);const p=r.useCallback(async e=>{try{const{error:t}=await H.auth.signInWithOtp({email:e,options:{emailRedirectTo:`${window.location.origin}/dashboard`}});return t?{success:!1,error:t.message}:{success:!0}}catch(t){return{success:!1,error:String(t)}}},[]),j=r.useCallback(async(e,t)=>{try{const{data:s,error:a}=await H.auth.signInWithPassword({email:e,password:t});return a?{success:!1,error:a.message}:{success:!0}}catch(s){return{success:!1,error:String(s)}}},[]),g=r.useCallback(async e=>{try{if(!t)return{success:!1,error:"ユーザーが認証されていません"};const{data:{session:s}}=await H.auth.getSession();if(!s?.access_token)return{success:!1,error:"認証が必要です"};const a=await fetch("https://onmcivwxtzqajcovptgf.supabase.co/functions/v1/verify-2fa",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.access_token}`},body:JSON.stringify({userId:t.id,code:e})});if(!a.ok){return{success:!1,error:(await a.json()).error||"認証に失敗しました"}}const n=await a.json();return{success:n.success,...n.error&&{error:n.error}}}catch(s){return{success:!1,error:String(s)}}},[t]),y=r.useCallback(e=>{try{localStorage.setItem("isTrustedDevice",JSON.stringify(e))}catch(t){}},[]),f=r.useCallback(async()=>{try{await H.auth.signOut({scope:"global"}),i(null),s(null),d(!1),x(null),h(!1);try{localStorage.removeItem("isTrustedDevice"),localStorage.removeItem("pre_payment_auth_state"),localStorage.removeItem("supabase.auth.token"),sessionStorage.clear();const e=[];for(let t=0;t<localStorage.length;t++){const s=localStorage.key(t);s&&s.startsWith("sb-")&&e.push(s)}e.forEach(e=>localStorage.removeItem(e))}catch(e){}setTimeout(()=>{window.location.reload()},100)}catch(e){i(null),s(null),d(!1),x(null),h(!1),setTimeout(()=>{window.location.reload()},100)}},[]),_={user:t,session:n,loading:o,logout:f,isAuthenticated:c,signInWithMagicLink:p,signInWithPassword:j,verify2FA:g,setIsTrustedDevice:y,isAdmin:m,userProfile:u};return a.jsx(J.Provider,{value:_,children:e})},default:F,useAuth:F},Symbol.toStringTag,{value:"Module"})),G=r.createContext({isMaintenanceActive:!1,maintenanceInfo:null,loading:!0,error:null,clientIP:null,isIPWhitelisted:!1,refreshMaintenanceStatus:async()=>{}}),$=()=>{const e=r.useContext(G);if(!e)throw new Error("useMaintenance must be used within a MaintenanceProvider");return e};function q(){const e=o(),[t,s]=r.useState("/");r.useEffect(()=>{const t=e.pathname.split("/")[1];s(t?`/${t}`:"/")},[e]);const n=[{path:"/",label:"ホーム",icon:u},{path:"/parks",label:"ドッグラン",icon:x},{path:"/access-control",label:"入退場",icon:p},{path:"/community",label:"コミュニティ",icon:j},{path:"/dashboard",label:"マイページ",icon:g}];return a.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50 md:hidden",children:[a.jsx("div",{className:"flex justify-around items-center h-16",children:n.map(e=>{const s=e.icon,n="/"===(i=e.path)?"/"===t:t.startsWith(i);var i;return a.jsxs(l,{to:e.path,className:"flex flex-col items-center justify-center w-full h-full "+(n?"text-blue-600":"text-gray-500"),children:[a.jsx(s,{className:"w-6 h-6 "+(n?"text-blue-600":"text-gray-500")}),a.jsx("span",{className:"text-xs mt-1",children:e.label})]},e.path)})}),a.jsx("div",{className:"h-safe-bottom bg-white"})]})}function Q(){const e=(new Date).getFullYear();return a.jsx("footer",{className:"bg-white text-gray-700 py-12 border-t border-gray-200",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[a.jsxs("div",{className:"col-span-1 md:col-span-1",children:[a.jsxs(l,{to:"/",className:"flex items-center space-x-2 mb-4",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-green-400 rounded-full flex items-center justify-center",children:a.jsx(y,{className:"h-6 w-6 text-white"})}),a.jsx("span",{className:"text-xl font-bold",children:"ドッグパークJP"})]}),a.jsx("p",{className:"text-gray-400 mb-4",children:"愛犬とのお散歩をもっと楽しく。全国のドッグランを簡単に検索・予約できるサービスです。"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter",children:a.jsx("svg",{className:"w-6 h-6 text-gray-400 hover:text-white transition-colors",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})})}),a.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer","aria-label":"Instagram",children:a.jsx("svg",{className:"w-6 h-6 text-gray-400 hover:text-white transition-colors",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{fillRule:"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z",clipRule:"evenodd"})})}),a.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer","aria-label":"Facebook",children:a.jsx("svg",{className:"w-6 h-6 text-gray-400 hover:text-white transition-colors",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z",clipRule:"evenodd"})})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"クイックリンク"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsx("li",{children:a.jsx(l,{to:"/",className:"text-gray-400 hover:text-white transition-colors",children:"ホーム"})}),a.jsx("li",{children:a.jsx(l,{to:"/parks",className:"text-gray-400 hover:text-white transition-colors",children:"ドッグラン一覧"})}),a.jsx("li",{children:a.jsx(l,{to:"/parks/rules",className:"text-gray-400 hover:text-white transition-colors",children:"利用ルール"})}),a.jsx("li",{children:a.jsx(l,{to:"/shop",className:"text-gray-400 hover:text-white transition-colors",children:"ペットショップ"})}),a.jsx("li",{children:a.jsx(l,{to:"/subscription",className:"text-gray-400 hover:text-white transition-colors",children:"サブスクリプション"})}),a.jsx("li",{children:a.jsx(l,{to:"/news",className:"text-gray-400 hover:text-white transition-colors",children:"新着情報"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ご利用者様向け"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsx("li",{children:a.jsx(l,{to:"/register",className:"text-gray-400 hover:text-white transition-colors",children:"新規登録"})}),a.jsx("li",{children:a.jsx(l,{to:"/login",className:"text-gray-400 hover:text-white transition-colors",children:"ログイン"})}),a.jsx("li",{children:a.jsx(l,{to:"/register-dog",className:"text-gray-400 hover:text-white transition-colors",children:"ワンちゃん登録"})}),a.jsx("li",{children:a.jsx(l,{to:"/access-control",className:"text-gray-400 hover:text-white transition-colors",children:"入場管理"})}),a.jsx("li",{children:a.jsx(l,{to:"/community",className:"text-gray-400 hover:text-white transition-colors",children:"コミュニティ"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"お問い合わせ"}),a.jsxs("ul",{className:"space-y-3",children:[a.jsxs("li",{className:"flex items-start",children:[a.jsx(f,{className:"w-5 h-5 text-gray-400 mr-2 mt-0.5"}),a.jsx("span",{className:"text-gray-400",children:"info@dogparkjp.com"})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx(x,{className:"w-5 h-5 text-gray-400 mr-2 mt-0.5"}),a.jsxs("span",{className:"text-gray-400",children:["〒861-0563",a.jsx("br",{}),"熊本県山鹿市鹿央町千田１７１８－１３",a.jsx("br",{}),"株式会社ＣＡＰＡＳ"]})]})]})]})]}),a.jsx("hr",{className:"border-gray-700 my-8"}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[a.jsxs("p",{className:"text-gray-400 text-sm mb-4 md:mb-0",children:["© ",e," ドッグパークJP. All rights reserved."]}),a.jsxs("div",{className:"flex space-x-6",children:[a.jsx(l,{to:"/privacy",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"プライバシーポリシー"}),a.jsx(l,{to:"/terms",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"利用規約"}),a.jsx(l,{to:"/business-information",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"特定商取引法に基づく表記"}),a.jsx(l,{to:"/contact",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"お問い合わせ"})]})]})]})})}const X={initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1],staggerChildren:.1}},exit:{opacity:0,y:-20,scale:.95,transition:{duration:.3,ease:[.4,0,.2,1]}}},Y={initial:{scale:1},hover:{scale:1.05,transition:{type:"spring",stiffness:400,damping:10}},tap:{scale:.95,transition:{type:"spring",stiffness:400,damping:10}}},Z={initial:{scale:0,opacity:0,rotate:-180},animate:{scale:[0,1.2,1],opacity:[0,1,1],rotate:[180,0,0],transition:{duration:.8,ease:"easeOut",times:[0,.6,1]}}},K={initial:{scale:.8,opacity:0,y:50},animate:{scale:[.8,1.1,1],opacity:[0,1,1],y:[50,-10,0],transition:{duration:.7,ease:"easeOut",times:[0,.5,1]}}},ee={initial:{opacity:0,x:100,scale:.9},animate:{opacity:1,x:0,scale:1,transition:{type:"spring",stiffness:200,damping:20}},exit:{opacity:0,x:100,scale:.9,transition:{duration:.3}}},te={initial:{x:0},shake:{x:[-10,10,-10,10,0],transition:{duration:.6,ease:"easeInOut"}}},se={initial:{scale:0,opacity:0},animate:{scale:1,opacity:1,transition:{type:"spring",stiffness:260,damping:20}}},ae={initial:{scale:0,opacity:0},animate:{scale:[0,1,0],opacity:[0,1,0],y:[0,-100,-200],x:[0,40*Math.random()-20,80*Math.random()-40],transition:{duration:2,ease:"easeOut"}}},ne={initial:{opacity:0,y:60},animate:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}},ie={initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0,transition:{duration:.3,ease:"easeOut"}},exit:{opacity:0,scale:.9,y:-20,transition:{duration:.2}}},re={success:[100,50,100],warning:[200],error:[50,50,50,50,50],light:[25],medium:[50],heavy:[100],selection:[10],notification:[100,100,100],payment:[200,100,200,100,200],"pin-success":[100,50,100,50,200]};let oe={};const le=async()=>{if(oe.Capacitor)return oe;try{const[e,t]=await Promise.all([n(()=>import("./index-CvB4LVz_.js"),__vite__mapDeps([0,1,2,3])),n(()=>import("./index-DY73PVTX.js"),[])]);oe={Haptics:e.Haptics,ImpactStyle:e.ImpactStyle,Capacitor:t.Capacitor}}catch(e){oe={}}return oe},ce=async()=>{try{const e=await le();return e.Capacitor&&"function"==typeof e.Capacitor.isNativePlatform&&e.Capacitor.isNativePlatform()}catch{return!1}},de=async()=>{try{const e=await le();await ce()&&e.Haptics&&e.ImpactStyle?(await e.Haptics.impact({style:e.ImpactStyle.Light}),await new Promise(e=>setTimeout(e,100)),await e.Haptics.impact({style:e.ImpactStyle.Medium}),await new Promise(e=>setTimeout(e,100)),await e.Haptics.impact({style:e.ImpactStyle.Heavy})):"vibrate"in navigator&&navigator.vibrate([100,50,150,50,200])}catch(e){}},me=async()=>{try{const e=await le();await ce()&&e.Haptics&&e.ImpactStyle?(await e.Haptics.impact({style:e.ImpactStyle.Medium}),await new Promise(e=>setTimeout(e,80)),await e.Haptics.impact({style:e.ImpactStyle.Light}),await new Promise(e=>setTimeout(e,80)),await e.Haptics.impact({style:e.ImpactStyle.Medium})):"vibrate"in navigator&&navigator.vibrate([80,40,80,40,120])}catch(e){}},he=async()=>{try{const e=await le();await ce()&&e.Haptics&&e.ImpactStyle?await e.Haptics.impact({style:e.ImpactStyle.Light}):"vibrate"in navigator&&navigator.vibrate([50])}catch(e){}},ue=({children:e,variant:t="primary",size:s="md",isLoading:n=!1,loadingText:i,isFullWidth:r=!1,leftIcon:o,rightIcon:l,className:c="",enableHaptics:d=!0,hapticType:m="light",onClick:h,disabled:u,...x})=>{const p=["inline-flex","items-center","justify-center","font-medium","rounded-lg","transition-all","duration-200","focus:outline-none","focus:ring-2","focus:ring-offset-2","disabled:opacity-50","disabled:cursor-not-allowed","select-none","transform","active:scale-95",...{primary:["bg-blue-600","text-white","hover:bg-blue-700","focus:ring-blue-500","shadow-sm","hover:shadow-md"],secondary:["bg-gray-600","text-white","hover:bg-gray-700","focus:ring-gray-500","shadow-sm","hover:shadow-md"],danger:["bg-red-600","text-white","hover:bg-red-700","focus:ring-red-500","shadow-sm","hover:shadow-md"],outline:["bg-transparent","text-gray-700","border-2","border-gray-300","hover:bg-gray-50","hover:border-gray-400","focus:ring-gray-500"],ghost:["bg-transparent","text-gray-600","hover:bg-gray-100","hover:text-gray-900","focus:ring-gray-500"]}[t],...{sm:["px-3","py-1.5","text-sm","gap-1.5"],md:["px-4","py-2","text-sm","gap-2"],lg:["px-6","py-3","text-base","gap-2"],xl:["px-8","py-4","text-lg","gap-3"]}[s],...r?["w-full"]:[],c].join(" "),j=a.jsxs(a.Fragment,{children:[a.jsx(_,{className:"animate-spin",size:"sm"===s?14:"lg"===s?20:"xl"===s?24:16}),i||"Loading..."]}),g=a.jsxs(a.Fragment,{children:[o,e,l]});return a.jsx(C.button,{className:p,onClick:async e=>{if(d&&!u&&!n)try{await(async e=>{try{const t=await le();if(await ce()&&t.Haptics&&t.ImpactStyle){switch(e){case"success":case"payment":case"pin-success":await t.Haptics.impact({style:t.ImpactStyle.Medium}),await new Promise(e=>setTimeout(e,100)),await t.Haptics.impact({style:t.ImpactStyle.Light});break;case"error":case"heavy":await t.Haptics.impact({style:t.ImpactStyle.Heavy});break;case"warning":case"medium":case"notification":await t.Haptics.impact({style:t.ImpactStyle.Medium});break;default:await t.Haptics.impact({style:t.ImpactStyle.Light})}return}if("vibrate"in navigator){const t=re[e];navigator.vibrate(t)}}catch(t){}})(m)}catch(t){}!h||u||n||h(e)},disabled:u||n,variants:Y,initial:"initial",whileHover:u||n?"initial":"hover",whileTap:u||n?"initial":"tap",...x,children:n?j:g})},xe=r.forwardRef(({children:e,className:t="",onClick:s,elevation:n="md",rounded:i="lg",border:r=!1,hoverEffect:o=!1,as:l="div",...c},d)=>{const m=r?"border border-gray-200":"",h=o?"hover:shadow-lg transition-shadow duration-300":"",u=s?"cursor-pointer":"";return a.jsx(l,{ref:d,className:`bg-white ${{none:"",sm:"shadow-sm",md:"shadow-md",lg:"shadow-lg"}[n]} ${{none:"rounded-none",sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg",full:"rounded-full"}[i]} ${m} ${h} ${u} ${t}`,onClick:s,...c,children:e})});xe.displayName="Card";const pe=()=>{const{maintenanceInfo:e,refreshMaintenanceStatus:t}=$(),s=e=>e?new Date(e).toLocaleString("ja-JP",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):null;return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:a.jsxs(xe,{className:"max-w-md w-full p-8 text-center",children:[a.jsx("div",{className:"flex justify-center mb-6",children:e?.is_emergency?a.jsx(w,{className:"w-16 h-16 text-red-500"}):a.jsx(b,{className:"w-16 h-16 text-blue-500"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:e?.title||"システムメンテナンス"}),a.jsx("p",{className:"text-gray-600 mb-6",children:e?.message||"より良いサービス提供のため、システムメンテナンスを実施しています。ご不便をおかけして申し訳ございません。"}),e?.start_time&&a.jsxs("div",{className:"flex items-center justify-center text-sm text-gray-500 mb-2",children:[a.jsx(v,{className:"w-4 h-4 mr-2"}),a.jsxs("span",{children:["開始: ",s(e.start_time)]})]}),e?.end_time&&a.jsxs("div",{className:"flex items-center justify-center text-sm text-gray-500 mb-6",children:[a.jsx(v,{className:"w-4 h-4 mr-2"}),a.jsxs("span",{children:["終了予定: ",s(e.end_time)]})]}),a.jsxs(ue,{onClick:()=>{t()},className:"w-full flex items-center justify-center",variant:"secondary",children:[a.jsx(N,{className:"w-4 h-4 mr-2"}),"状態を更新"]}),a.jsx("div",{className:"mt-6 text-xs text-gray-400",children:a.jsx("p",{children:"メンテナンス完了後、このページは自動的に更新されます。"})})]})})};function je(){const{user:e}=F(),[t,s]=r.useState(null),[a,n]=r.useState(!0),[i,o]=r.useState(null),[l,c]=r.useState(!1);r.useEffect(()=>{e?d():(s(null),n(!1),c(!1))},[e]);const d=async()=>{try{n(!0),o(null);const{data:e,error:t}=await H.from("stripe_user_subscriptions").select("*").maybeSingle();if(t)throw t;e?(s(e),c("paused"===e.status)):(s(null),c(!1))}catch(e){o(e.message||"サブスクリプションの取得に失敗しました")}finally{n(!1)}},m=e=>e?new Date(1e3*e).toLocaleDateString("ja-JP"):null;return{subscription:t,isActive:"active"===t?.status||"trialing"===t?.status,isPaused:l,loading:a,error:i,refresh:d,currentPeriodEnd:m(t?.current_period_end??null),currentPeriodStart:m(t?.current_period_start??null),paymentMethod:t?.payment_method_last4?`${t.payment_method_brand} **** ${t.payment_method_last4}`:null,willCancel:t?.cancel_at_period_end}}const ge=e=>{if(!e)return"不明なエラーが発生しました";if("string"==typeof e)return e;if(e&&"object"==typeof e&&"message"in e){const t=e;if("PGRST116"===t.code)return"データが見つかりません。Netlify の環境変数設定を確認してください。";if("PGRST301"===t.code)return"データベース接続エラー。Netlify Supabase Extension の設定を確認してください。";switch(t.message){case"Invalid API key":return"API キーが無効です。Netlify の環境変数 VITE_SUPABASE_ANON_KEY を確認してください。";case"Invalid URL":return"データベース URL が無効です。Netlify の環境変数 VITE_SUPABASE_URL を確認してください。";case"Network error":return"ネットワークエラーが発生しました。インターネット接続を確認してください。";case"Authentication required":return"認証が必要です。ログインしてください。";default:return t.message||"不明なエラーが発生しました"}}return"不明なエラーが発生しました"},ye=async(e,t={})=>{const{retries:s=0,timeout:a=5e3}=t;for(let i=0;i<=s;i++)try{const t=new AbortController,s=setTimeout(()=>t.abort(),a),n=await e();return clearTimeout(s),{...n,isOffline:!1}}catch(n){if(i===s){const e=n instanceof Error&&(n.message.includes("Network")||n.message.includes("fetch")||n.message.includes("AbortError"));return{data:null,error:n,isOffline:e}}await new Promise(e=>setTimeout(e,1e3*Math.pow(2,i)))}return{data:null,error:new Error("Max retries exceeded"),isOffline:!1}},fe=(e,t,s)=>{(new Date).toISOString()},_e=r.lazy(()=>n(()=>import("./PWADebugPanel-Dw-QyTc8.js"),__vite__mapDeps([4,1,2,5,6]))),we=r.memo(function(){const{user:e,logout:t,isAdmin:s}=F(),n=c(),[i,o]=r.useState(""),[d,m]=r.useState(0),[h,u]=r.useState(0),{isActive:x}=je(),[p,j]=r.useState(!1),[g,f]=r.useState(!1),[_,w]=r.useState(!1),b=r.useCallback(()=>{const e=document.getElementById("pwa-install-button");e&&e.click()},[]);r.useEffect(()=>{f(window.matchMedia("(display-mode: standalone)").matches);const e=()=>{j(!0)},t=()=>{j(!1),f(!0)};return window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",t),()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",t)}},[]);const v=r.useCallback(async()=>{if(e)try{const t=await ye(()=>H.from("profiles").select("name").eq("id",e.id).maybeSingle());if(t.error&&"PGRST116"!==t.error.code&&fe("error",0,(t.error,e.id)),t.data?.name)o(t.data.name);else{const t=e.user_metadata?.name||e.email?.split("@")[0];t&&o(t)}}catch(t){fe("error",0,e.id)}},[e]),N=r.useCallback(async()=>{if(e)try{const t=await ye(()=>H.from("notifications").select("*",{count:"exact",head:!0}).eq("user_id",e.id).eq("read",!1));m(t.data||0)}catch(t){fe("error",0,e.id)}},[e]),D=r.useCallback(async()=>{if(e)try{const t=await ye(()=>H.from("cart_items").select("*",{count:"exact",head:!0}).eq("user_id",e.id));u(t.data||0)}catch(t){fe("error",0,e.id)}},[e]);r.useEffect(()=>{e?(v(),N(),D()):(o(""),m(0),u(0))},[e,s,v,N,D]);const L=r.useCallback(async()=>{try{await t(),n("/")}catch(e){fe("error")}},[t,n]);return a.jsxs(a.Fragment,{children:[a.jsx("nav",{className:"bg-white shadow-lg sticky top-0 z-50",children:a.jsx("div",{className:"container mx-auto px-4",children:a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsxs(l,{to:"/",className:"flex items-center space-x-3 hover:opacity-80 transition-opacity cursor-pointer group","aria-label":"ドッグパークJP ホーム",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-green-400 rounded-full flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow",children:a.jsx(y,{className:"h-7 w-7 text-white","aria-hidden":"true"})}),a.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-blue-400 rounded-full opacity-80",children:a.jsx(y,{className:"h-2 w-2 text-white","aria-hidden":"true"})})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("span",{className:"text-xl font-bold text-gray-800 leading-tight",children:["ドッグパーク",a.jsx("span",{className:"text-blue-600",children:"JP"})]}),a.jsx("span",{className:"text-xs text-gray-500 leading-none",children:"愛犬との素敵な時間を"})]})]}),a.jsx("div",{className:"flex items-center space-x-4",children:e?a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"text-gray-700 hidden md:inline-block",children:["こんにちは、",i||"ユーザー","さん",x&&a.jsxs("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1",children:[a.jsx("path",{d:"m3 11 18-5v12L3 14v-3z"}),a.jsx("path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6"})]}),"サブスク会員"]})]}),a.jsx(l,{to:"/dashboard",className:"text-gray-600 hover:text-blue-600 transition-colors hidden md:inline-block",children:"マイページ"}),a.jsx(l,{to:"/parks",className:"text-gray-600 hover:text-blue-600 transition-colors hidden md:inline-block",children:"ドッグラン一覧"}),a.jsx(l,{to:"/shop",className:"text-gray-600 hover:text-green-600 transition-colors hidden md:inline-block",children:"ペットショップ"}),a.jsxs(l,{to:"/community",className:"relative text-gray-600 hover:text-blue-600 transition-colors","aria-label":"通知 "+(d>0?`${d}件の未読通知があります`:""),children:[a.jsx(E,{className:"h-5 w-5","aria-hidden":"true"}),d>0&&a.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center","aria-hidden":"true",children:d>9?"9+":d})]}),a.jsxs(l,{to:"/cart",className:"relative text-gray-600 hover:text-green-600 transition-colors","aria-label":"カート "+(h>0?`${h}点の商品があります`:""),children:[a.jsx(I,{className:"h-5 w-5","aria-hidden":"true"}),h>0&&a.jsx("span",{className:"absolute -top-2 -right-2 bg-green-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center","aria-hidden":"true",children:h>9?"9+":h})]}),p&&!g&&a.jsxs("button",{onClick:b,className:"flex items-center space-x-1 text-blue-600 hover:text-blue-700 transition-colors bg-blue-50 hover:bg-blue-100 px-2 py-1 rounded-md","aria-label":"アプリをインストール",children:[a.jsx(P,{className:"h-4 w-4","aria-hidden":"true"}),a.jsx("span",{className:"hidden lg:inline text-sm",children:"アプリ化"})]}),g&&a.jsxs("div",{className:"flex items-center space-x-1 text-green-600 bg-green-50 px-2 py-1 rounded-md",children:[a.jsx(P,{className:"h-4 w-4","aria-hidden":"true"}),a.jsx("span",{className:"hidden lg:inline text-sm",children:"PWA"})]}),!1,s&&a.jsxs(l,{to:"/admin",className:"flex items-center space-x-1 text-red-600 hover:text-red-700 transition-colors","aria-label":"管理者ページ",children:[a.jsx(A,{className:"h-4 w-4","aria-hidden":"true"}),a.jsx("span",{className:"hidden md:inline",children:"管理者"})]}),a.jsxs("button",{onClick:()=>{L()},className:"flex items-center space-x-1 text-gray-600 hover:text-red-600 transition-colors","aria-label":"ログアウト",children:[a.jsx(k,{className:"h-4 w-4","aria-hidden":"true"}),a.jsx("span",{className:"hidden md:inline",children:"ログアウト"})]})]}):a.jsxs(a.Fragment,{children:[a.jsx(l,{to:"/login",className:"text-gray-600 hover:text-blue-600 transition-colors",children:"ログイン"}),a.jsx(l,{to:"/register",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"新規登録"})]})})]})})}),a.jsx(r.Suspense,{fallback:a.jsx("div",{children:"Loading debug panel..."}),children:a.jsx(_e,{isOpen:_,onClose:()=>w(!1)})})]})});function be({title:e="ドッグパークJP",description:t="愛犬とのお散歩をもっと楽しく。全国のドッグランを簡単に検索・予約できるサービスです。",canonicalUrl:s,ogType:n="website",ogImage:i="https://dogparkjp.com/og-image.jpg"}){const r="ドッグパークJP"===e?e:`${e} | ドッグパークJP`;return a.jsxs(D,{children:[a.jsx("title",{children:r}),a.jsx("meta",{name:"description",content:t}),s&&a.jsx("link",{rel:"canonical",href:s}),a.jsx("meta",{property:"og:type",content:n}),a.jsx("meta",{property:"og:title",content:r}),a.jsx("meta",{property:"og:description",content:t}),a.jsx("meta",{property:"og:image",content:i}),s&&a.jsx("meta",{property:"og:url",content:s}),a.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),a.jsx("meta",{name:"twitter:title",content:r}),a.jsx("meta",{name:"twitter:description",content:t}),a.jsx("meta",{name:"twitter:image",content:i}),a.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),a.jsx("meta",{httpEquiv:"Content-Language",content:"ja"}),a.jsx("meta",{name:"theme-color",content:"#3B82F6"})]})}const ve=({children:e})=>{const t=o(),{isMaintenanceActive:s,loading:n,isIPWhitelisted:i,clientIP:l}=$(),{isAdmin:c,user:d}=F();if(r.useEffect(()=>{"/"!==t.pathname&&window.scrollTo(0,0)},[t.pathname]),n)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});return(()=>{if(!s)return!1;return!(c||"capasjapan@gmail.com"===d?.email)&&!i})()?a.jsx(pe,{}):a.jsx(L,{children:a.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[a.jsx(be,{}),a.jsx(we,{}),a.jsx("main",{className:"flex-1 container mx-auto px-4 py-8",children:e}),a.jsx(Q,{}),a.jsx(q,{})]})})};const Ne=new class{constructor(){t(this,"notifications",[]),t(this,"listeners",new Set),t(this,"idCounter",0)}show(e){const t="notification-"+ ++this.idCounter,s={id:t,options:{type:"info",duration:4e3,position:"top-right",closable:!0,...e},createdAt:new Date};return this.notifications.push(s),this.notifyListeners(),s.options.duration&&s.options.duration>0&&setTimeout(()=>{this.remove(t)},s.options.duration),t}success(e,t){return this.show({message:e,type:"success",...t})}error(e,t){return this.show({message:e,type:"error",duration:6e3,...t})}warning(e,t){return this.show({message:e,type:"warning",duration:5e3,...t})}info(e,t){return this.show({message:e,type:"info",...t})}remove(e){this.notifications=this.notifications.filter(t=>t.id!==e),this.notifyListeners()}clear(){this.notifications=[],this.notifyListeners()}getNotifications(){return[...this.notifications]}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}notifyListeners(){this.listeners.forEach(e=>{e([...this.notifications])})}},Ee={success:(e,t)=>Ne.success(e,t),error:(e,t)=>Ne.error(e,t),warning:(e,t)=>Ne.warning(e,t),info:(e,t)=>Ne.info(e,t),show:e=>Ne.show(e)},Ie=({notification:e,onClose:t})=>{const{options:s}=e,[n,i]=r.useState(!1),[o,l]=r.useState(!1);r.useEffect(()=>{setTimeout(()=>i(!0),10)},[]);return a.jsx("div",{className:`\n        fixed z-50 max-w-sm w-full transition-all duration-300 ease-in-out\n        ${(()=>{switch(s.position){case"top-left":return"top-4 left-4";case"top-center":return"top-4 left-1/2 transform -translate-x-1/2";case"bottom-right":return"bottom-4 right-4";case"bottom-left":return"bottom-4 left-4";case"bottom-center":return"bottom-4 left-1/2 transform -translate-x-1/2";default:return"top-4 right-4"}})()}\n        ${n&&!o?"opacity-100 translate-y-0":"opacity-0 -translate-y-2"}\n        ${o?"scale-95":"scale-100"}\n      `,children:a.jsx("div",{className:`\n        p-4 rounded-lg border shadow-lg backdrop-blur-sm\n        ${(()=>{switch(s.type){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";default:return"bg-blue-50 border-blue-200 text-blue-800"}})()}\n      `,children:a.jsxs("div",{className:"flex items-start space-x-3",children:[(()=>{switch(s.type){case"success":return a.jsx(R,{className:"w-5 h-5 text-green-500"});case"error":return a.jsx(O,{className:"w-5 h-5 text-red-500"});case"warning":return a.jsx(w,{className:"w-5 h-5 text-yellow-500"});default:return a.jsx(T,{className:"w-5 h-5 text-blue-500"})}})(),a.jsxs("div",{className:"flex-1 min-w-0",children:[s.title&&a.jsx("p",{className:"text-sm font-semibold mb-1",children:s.title}),a.jsx("p",{className:"text-sm leading-relaxed",children:s.message}),s.action&&a.jsx("button",{onClick:s.action.onClick,className:"mt-2 text-sm font-medium underline hover:no-underline focus:outline-none",children:s.action.label})]}),s.closable&&a.jsx("button",{onClick:()=>{l(!0),setTimeout(()=>{t(e.id)},300)},className:"flex-shrink-0 p-1 rounded-full hover:bg-black/10 focus:outline-none focus:ring-2 focus:ring-black/20 transition-colors",children:a.jsx(S,{className:"w-4 h-4"})})]})})})},Pe=()=>{const[e,t]=r.useState([]);r.useEffect(()=>Ne.subscribe(t),[]);const s=e=>{Ne.remove(e)};return a.jsx("div",{className:"pointer-events-none",children:e.map(e=>a.jsx(Ie,{notification:e,onClose:s},e.id))})},Ae=()=>{const[e,t]=r.useState({isInstalled:!1,isOnline:navigator.onLine,hasUpdate:!1,canInstall:!1,canNotify:!1}),[s,n]=r.useState(!1),[i,o]=r.useState(!1),[l,c]=r.useState(null),[d,m]=r.useState(null);r.useEffect(()=>(h(),u(),y(),()=>{x()}),[]);const h=()=>{t(e=>({...e,isInstalled:window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone,isOnline:navigator.onLine,canNotify:"Notification"in window}))},u=()=>{window.addEventListener("online",p),window.addEventListener("offline",p),window.addEventListener("beforeinstallprompt",j),window.addEventListener("appinstalled",g)},x=()=>{window.removeEventListener("online",p),window.removeEventListener("offline",p),window.removeEventListener("beforeinstallprompt",j),window.removeEventListener("appinstalled",g)},p=()=>{t(e=>({...e,isOnline:navigator.onLine}))},j=e=>{e.preventDefault(),c(e),t(e=>({...e,canInstall:!0})),n(!0)},g=()=>{t(e=>({...e,isInstalled:!0,canInstall:!1})),n(!1),c(null)},y=async()=>{if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.ready;e.addEventListener("updatefound",()=>{const s=e.installing;s&&s.addEventListener("statechange",()=>{"installed"===s.state&&navigator.serviceWorker.controller&&(t(e=>({...e,hasUpdate:!0})),m(e),o(!0))})}),setInterval(()=>{e.update()},6e4)}catch(e){}},f=()=>{n(!1),t(e=>({...e,canInstall:!1}))},_=()=>{o(!1),t(e=>({...e,hasUpdate:!1}))};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:e.isInstalled&&a.jsxs(C.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"flex items-center space-x-2 px-3 py-2 bg-blue-500 text-white rounded-full shadow-lg",children:[a.jsx(z,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"PWAインストール済み"})]})}),s&&a.jsx(C.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs(C.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-xl p-6 max-w-md w-full shadow-xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"アプリをインストール"}),a.jsx("button",{onClick:f,className:"text-gray-400 hover:text-gray-600",children:a.jsx(S,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("p",{className:"text-gray-600 mb-4",children:"ドッグパークJPをホーム画面に追加して、 ネイティブアプリのように利用しませんか？"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(R,{className:"w-4 h-4 text-green-500"}),a.jsx("span",{children:"高速な起動"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(R,{className:"w-4 h-4 text-green-500"}),a.jsx("span",{children:"オフライン機能"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(R,{className:"w-4 h-4 text-green-500"}),a.jsx("span",{children:"プッシュ通知"})]})]})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("button",{onClick:async()=>{if(l)try{await l.prompt();const{outcome:e}=await l.userChoice;c(null),n(!1),t(e=>({...e,canInstall:!1}))}catch(e){}},className:"flex-1 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors flex items-center justify-center space-x-2",children:[a.jsx(P,{className:"w-4 h-4"}),a.jsx("span",{children:"インストール"})]}),a.jsx("button",{onClick:f,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"後で"})]})]})}),i&&a.jsx(C.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs(C.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-xl p-6 max-w-md w-full shadow-xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"新しいバージョンが利用可能"}),a.jsx("button",{onClick:_,className:"text-gray-400 hover:text-gray-600",children:a.jsx(S,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"mb-6",children:a.jsx("p",{className:"text-gray-600",children:"ドッグパークJPの新しいバージョンが利用可能です。 更新しますか？"})}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("button",{onClick:async()=>{if(d)try{d.waiting&&d.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload()}catch(e){}},className:"flex-1 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors flex items-center justify-center space-x-2",children:[a.jsx(N,{className:"w-4 h-4"}),a.jsx("span",{children:"今すぐ更新"})]}),a.jsx("button",{onClick:_,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"後で"})]})]})}),!e.canNotify&&e.isInstalled&&a.jsx(C.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},className:"fixed bottom-20 left-4 right-4 bg-white rounded-lg shadow-lg border border-gray-200 p-4 z-40",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(E,{className:"w-5 h-5 text-blue-500 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"通知を許可しますか？"}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"重要な情報をお知らせできます"})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:async()=>{if(!("Notification"in window))return void alert("このブラウザは通知をサポートしていません");"granted"===await Notification.requestPermission()&&(t(e=>({...e,canNotify:!0})),new Notification("ドッグパークJP",{body:"通知が有効になりました！",icon:"/icons/icon-192x192.png",badge:"/icons/icon-192x192.png"}))},className:"text-xs bg-blue-500 text-white px-3 py-1 rounded-md hover:bg-blue-600 transition-colors",children:"許可"}),a.jsx("button",{onClick:()=>t(e=>({...e,canNotify:!0})),className:"text-xs text-gray-600 hover:text-gray-800 transition-colors",children:"後で"})]})]})})]})},ke=r.lazy(()=>n(()=>import("./Home-B4Vmm53Y.js"),__vite__mapDeps([7,1,2,5,6])).then(e=>({default:e.Home}))),De=r.lazy(()=>n(()=>import("./Login-B_d4_mhA.js"),__vite__mapDeps([8,1,2,9,5,10,6])).then(e=>({default:e.Login}))),Le=r.lazy(()=>n(()=>import("./Register-ClGev3hW.js"),__vite__mapDeps([11,1,2,9,5,12,6])).then(e=>({default:e.Register}))),Se=r.lazy(()=>n(()=>import("./UserDashboard-Dc3Wkwfj.js"),__vite__mapDeps([13,1,2,14,15,9,5,16,17,6])).then(e=>({default:e.UserDashboard}))),Te=r.lazy(()=>n(()=>import("./ProfileSettings-D01h5MER.js"),__vite__mapDeps([18,1,2,9,5,12,6])).then(e=>({default:e.ProfileSettings}))),Oe=r.lazy(()=>n(()=>import("./DogManagement-CulMwvuD.js"),__vite__mapDeps([19,1,2,14,15,9,5,16,17,6])).then(e=>({default:e.DogManagement}))),Re=r.lazy(()=>n(()=>import("./DogRegistration-BsywN6Ag.js"),__vite__mapDeps([20,1,2,9,5,16,15,10,6])).then(e=>({default:e.DogRegistration}))),ze=r.lazy(()=>n(()=>import("./DogProfile-DorxTPP4.js"),__vite__mapDeps([21,1,2,5,6])).then(e=>({default:e.DogProfile}))),Ce=r.lazy(()=>n(()=>import("./LikedDogs-Chz6lEMe.js"),__vite__mapDeps([22,1,2,5,6])).then(e=>({default:e.LikedDogs}))),Ve=r.lazy(()=>n(()=>import("./DogParkList-Bf43NJDw.js"),__vite__mapDeps([23,1,2,5,6])).then(e=>({default:e.DogParkList}))),Me=r.lazy(()=>n(()=>import("./DogParkDetail-oMwnp8wu.js"),__vite__mapDeps([24,1,2,5,9,16,6])).then(e=>({default:e.DogParkDetail}))),He=r.lazy(()=>n(()=>import("./DogParkRules-DozEBU0f.js"),__vite__mapDeps([25,1,2,5,6])).then(e=>({default:e.DogParkRules})));r.lazy(()=>n(()=>import("./DogParkHistory-D4VeNRry.js"),__vite__mapDeps([26,1,2,9,5,6])).then(e=>({default:e.DogParkHistory})));const We=r.lazy(()=>n(()=>import("./NewParkDetail-ClcgopCb.js"),__vite__mapDeps([27,1,2,5,6])).then(e=>({default:e.NewParkDetail}))),Ue=r.lazy(()=>n(()=>import("./ParkReservation-CLaD8xUd.js"),__vite__mapDeps([28,1,2,9,5,17,29,30,31,6])).then(e=>({default:e.ParkReservation}))),Je=r.lazy(()=>n(()=>import("./ParkRegistration-C8WcPz4v.js"),__vite__mapDeps([32,1,2,5,9,6])).then(e=>({default:e.ParkRegistration})));r.lazy(()=>n(()=>import("./ParkRegistrationAgreement-DVBNW7hz.js"),__vite__mapDeps([33,1,2,5,6])).then(e=>({default:e.ParkRegistrationAgreement}))),r.lazy(()=>n(()=>import("./ParkRegistrationSecondStage-DacLvEg2.js"),__vite__mapDeps([34,1,2,9,5,6])).then(e=>({default:e.ParkRegistrationSecondStage})));const Fe=r.lazy(()=>n(()=>import("./ParkManagement-DX_BSWAr.js"),__vite__mapDeps([35,1,2,6,5])).then(e=>({default:e.ParkManagement}))),Be=r.lazy(()=>n(()=>import("./PetShop-ga7tGvV1.js"),__vite__mapDeps([36,1,2,9,5,29,30,31,6])).then(e=>({default:e.PetShop}))),Ge=r.lazy(()=>n(()=>import("./ProductDetail-sIWNxP-g.js"),__vite__mapDeps([37,1,2,10,5,6])).then(e=>({default:e.ProductDetail}))),$e=r.lazy(()=>n(()=>import("./Cart-dBVeDkL-.js"),__vite__mapDeps([38,1,2,5,6])).then(e=>({default:e.Cart}))),qe=r.lazy(()=>n(()=>import("./Checkout-DFskf-b1.js"),__vite__mapDeps([39,1,2,9,5,29,30,6])).then(e=>({default:e.Checkout}))),Qe=r.lazy(()=>n(()=>import("./OrderHistory-D7HoqTl-.js"),__vite__mapDeps([40,1,2,5,6])).then(e=>({default:e.OrderHistory}))),Xe=r.lazy(()=>n(()=>import("./Community-C477vfHu.js"),__vite__mapDeps([41,1,2,5,6])).then(e=>({default:e.Community}))),Ye=r.lazy(()=>n(()=>import("./News-DLFoYHx_.js"),__vite__mapDeps([42,1,2,9,5,6])).then(e=>({default:e.News}))),Ze=r.lazy(()=>n(()=>import("./NewsDetail-CYvToKT0.js"),__vite__mapDeps([43,1,2,5,6])).then(e=>({default:e.NewsDetail}))),Ke=r.lazy(()=>n(()=>import("./DogInfo-iXaXhByl.js"),__vite__mapDeps([44,1,2]))),et=r.lazy(()=>n(()=>import("./DogInfoBreeds-ENkhmRtP.js"),__vite__mapDeps([45,1,2]))),tt=r.lazy(()=>n(()=>import("./DogInfoVaccine-SAVUiUTc.js"),__vite__mapDeps([46,1,2]))),st=r.lazy(()=>n(()=>import("./DogInfoFoods-DEq5ErKy.js"),__vite__mapDeps([47,1,2]))),at=r.lazy(()=>n(()=>import("./DogInfoSnack-D4EXdDhj.js"),__vite__mapDeps([48,1,2]))),nt=r.lazy(()=>n(()=>import("./DogInfoParasite-CdBMTGJI.js"),__vite__mapDeps([49,1,2]))),it=r.lazy(()=>n(()=>import("./DogInfoShow-DNvDs-47.js"),__vite__mapDeps([50,1,2]))),rt=r.lazy(()=>n(()=>import("./HealthManagement-BEDKQaQ9.js"),__vite__mapDeps([51,1,2,5,6])).then(e=>({default:e.HealthManagement}))),ot=r.lazy(()=>n(()=>import("./Training-CLnoDrsE.js"),__vite__mapDeps([52,1,2,5,6])).then(e=>({default:e.Training}))),lt=r.lazy(()=>n(()=>import("./Walk-BoNlf4Ql.js"),__vite__mapDeps([53,1,2,5,6])).then(e=>({default:e.Walk}))),ct=r.lazy(()=>n(()=>import("./Food-CcRHU76N.js"),__vite__mapDeps([54,1,2,5,6])).then(e=>({default:e.Food}))),dt=r.lazy(()=>n(()=>import("./Care-Bm9OZgZz.js"),__vite__mapDeps([55,1,2,5,6])).then(e=>({default:e.Care}))),mt=r.lazy(()=>n(()=>import("./Breeds-naubfvsV.js"),__vite__mapDeps([56,1,2,5,6])).then(e=>({default:e.Breeds})));r.lazy(()=>n(()=>import("./PaymentSetup-BmPRdGnp.js"),__vite__mapDeps([57,1,2,9,5,6])).then(e=>({default:e.PaymentSetup}))),r.lazy(()=>n(()=>import("./PaymentMethodSettings-u6LyQgU0.js"),__vite__mapDeps([58,1,2,9,5,6])).then(e=>({default:e.PaymentMethodSettings})));const ht=r.lazy(()=>n(()=>import("./PaymentConfirmation-BNKGbTAy.js"),__vite__mapDeps([59,1,2,6,5])).then(e=>({default:e.PaymentConfirmation}))),ut=r.lazy(()=>n(()=>import("./Subscription-CSd8U38z.js"),__vite__mapDeps([60,1,2,29,30,31,10,5,6])).then(e=>({default:e.Subscription}))),xt=r.lazy(()=>n(()=>import("./OwnerDashboard-C9NWGpmn.js"),__vite__mapDeps([61,1,2,9,5,6])).then(e=>({default:e.OwnerDashboard}))),pt=r.lazy(()=>n(()=>import("./OwnerPaymentSystem-C-iII6YW.js"),__vite__mapDeps([62,1,2,5,6])).then(e=>({default:e.OwnerPaymentSystem}))),jt=r.lazy(()=>n(()=>import("./AdminDashboard-DUUWmgNC.js"),__vite__mapDeps([63,1,2,9,5,6])).then(e=>({default:e.AdminDashboard}))),gt=r.lazy(()=>n(()=>import("./AdminManagement-Dnc6CQjT.js"),__vite__mapDeps([64,1,2,65,5,6])).then(e=>({default:e.AdminManagement}))),yt=r.lazy(()=>n(()=>import("./AdminTasks-CTprH_l2.js"),__vite__mapDeps([66,1,2,5,6])).then(e=>({default:e.AdminTasks}))),ft=r.lazy(()=>n(()=>import("./AdminUserManagement-CrSwnClK.js"),__vite__mapDeps([67,1,2,9,5,6])).then(e=>({default:e.AdminUserManagement}))),_t=r.lazy(()=>n(()=>import("./AdminUserDetail-CmETlJSq.js"),__vite__mapDeps([68,1,2,5,6])).then(e=>({default:e.AdminUserDetail}))),wt=r.lazy(()=>n(()=>import("./AdminParkManagement-88RSYr4u.js"),__vite__mapDeps([69,1,2,9,5,16,65,6])).then(e=>({default:e.AdminParkManagement}))),bt=r.lazy(()=>n(()=>import("./AdminReservationManagement-BkalX6Yi.js"),__vite__mapDeps([70,1,2,9,5,6])).then(e=>({default:e.AdminReservationManagement}))),vt=r.lazy(()=>n(()=>import("./AdminShopManagement-DWsHD4EF.js"),__vite__mapDeps([71,1,2,9,5,16,72,6])).then(e=>({default:e.AdminShopManagement}))),Nt=r.lazy(()=>n(()=>import("./AdminSalesManagement-D6DyK7Cs.js"),__vite__mapDeps([73,1,2,9,5,6])).then(e=>({default:e.AdminSalesManagement}))),Et=r.lazy(()=>n(()=>import("./AdminVaccineApproval-CCGmjDk5.js"),__vite__mapDeps([74,1,2,5,6]))),It=r.lazy(()=>n(()=>import("./AdminFacilityApproval-CmhiIm5E.js"),__vite__mapDeps([75,1,2,9,5,16,6]))),Pt=r.lazy(()=>n(()=>import("./AdminRevenueReport-CrZawcf1.js"),__vite__mapDeps([76,1,2,9,5,72,6])).then(e=>({default:e.AdminRevenueReport}))),At=r.lazy(()=>n(()=>import("./AdminNewsManagement-D1SVpgG_.js"),__vite__mapDeps([77,1,2,9,5,16,6])).then(e=>({default:e.AdminNewsManagement})));r.lazy(()=>n(()=>import("./TwoFactorSetup-yS3hZE89.js"),__vite__mapDeps([78,1,2,5,6])));const kt=r.lazy(()=>n(()=>import("./TwoFactorVerify-Bvdu16J1.js"),__vite__mapDeps([79,1,2,5,6]))),Dt=r.lazy(()=>n(()=>import("./MagicLink-C2rd70iW.js"),__vite__mapDeps([80,1,2,5,6])).then(e=>({default:e.MagicLink}))),Lt=r.lazy(()=>n(()=>import("./AccessControl-DbKr_xHK.js"),__vite__mapDeps([81,1,2,5,17,6])).then(e=>({default:e.AccessControl}))),St=r.lazy(()=>n(()=>import("./FacilityRegistration-CxVoiuCM.js"),__vite__mapDeps([82,1,2,9,5,6]))),Tt=r.lazy(()=>n(()=>import("./TermsOfService-BWBY5C-t.js"),__vite__mapDeps([83,1,2,5,6])).then(e=>({default:e.TermsOfService}))),Ot=r.lazy(()=>n(()=>import("./PrivacyPolicy-DXWy0NZZ.js"),__vite__mapDeps([84,1,2,5,6])).then(e=>({default:e.PrivacyPolicy}))),Rt=r.lazy(()=>n(()=>import("./Contact-DvL_ZVUv.js"),__vite__mapDeps([85,1,2,9,5,6])).then(e=>({default:e.Contact}))),zt=r.lazy(()=>n(()=>import("./BusinessInformation-LLrKx7FP.js"),__vite__mapDeps([86,1,2,5,6])).then(e=>({default:e.BusinessInformation}))),Ct=r.lazy(()=>n(()=>import("./Deploy-DOTs3w-c.js"),__vite__mapDeps([87,1,2,88,5,6])).then(e=>({default:e.Deploy}))),Vt=r.lazy(()=>n(()=>import("./DeploymentHistory-TNvTmlNN.js"),__vite__mapDeps([89,1,2,88,5,6])).then(e=>({default:e.DeploymentHistory}))),Mt=r.lazy(()=>n(()=>import("./NetlifySetupGuide-hUyoEKMf.js"),__vite__mapDeps([90,1,2,5,6]))),Ht=r.lazy(()=>n(()=>import("./PWASetupGuide-BEZfjNlw.js"),__vite__mapDeps([91,1,2,5,6]))),Wt=r.lazy(()=>n(()=>import("./PWAImplementationGuide-Dbiye-e0.js"),__vite__mapDeps([92,1,2,5,6]))),Ut=r.lazy(()=>n(()=>import("./PWADocumentation-B90g-8lE.js"),__vite__mapDeps([93,1,2,5,6]))),Jt=r.lazy(()=>n(()=>import("./PWATestingSuite-opFxyirx.js"),__vite__mapDeps([94,1,2,5,6]))),Ft=r.lazy(()=>n(()=>import("./PWALighthouseAudit-DybO_Qkg.js"),__vite__mapDeps([95,1,2,5,6]))),Bt=r.lazy(()=>n(()=>import("./PWADeploymentGuide-Bkm3Bu4Z.js"),__vite__mapDeps([96,1,2,5,6])));function Gt(e){try{const t=window[e],s="__storage_test__";return t.setItem(s,s),t.removeItem(s),!0}catch{return!1}}const $t={};function qt(e,t="localStorage"){try{return Gt(t)?window[t].getItem(e):$t[e]||null}catch(s){return $t[e]||null}}function Qt(e,t,s="localStorage"){try{return Gt(s)?(window[s].setItem(e,t),!0):($t[e]=t,!0)}catch(a){return $t[e]=t,!1}}function Xt(){const[e,t]=r.useState(""),[s,n]=r.useState(""),[i,o]=r.useState(!1);r.useEffect(()=>{const e=qt("lastUsedEmail");e&&t(e)},[]);return a.jsxs("div",{className:"max-w-md mx-auto mt-10 p-6 bg-white rounded shadow",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"パスワードリセットメール送信"}),s&&a.jsx("div",{className:"mb-4 text-blue-500",children:s}),a.jsxs("form",{onSubmit:async t=>{t.preventDefault(),o(!0),n("");const{error:s}=await H.auth.resetPasswordForEmail(e,{redirectTo:window.location.origin+"/reset-password"});n(s?"エラー: "+s.message:"パスワードリセット用のメールを送信しました。メールをご確認ください。"),o(!1)},children:[a.jsxs("label",{className:"block mb-2",children:["メールアドレス",a.jsx("input",{type:"email",className:"w-full border p-2 rounded mt-1",value:e,onChange:e=>t(e.target.value),required:!0})]}),a.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 rounded mt-4",disabled:i,children:i?"送信中...":"メールを送信"})]})]})}const Yt=s("https://onmcivwxtzqajcovptgf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ubWNpdnd4dHpxYWpjb3ZwdGdmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxODk3OTUsImV4cCI6MjA2NDc2NTc5NX0.AqFCz3GQUVeGaG2988LCzsE4aJpeio3xScoxv5T0-OU",{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}}),Zt=()=>{const e=c(),[t,s]=r.useState(""),[n,i]=r.useState(""),[o,l]=r.useState(""),[d,m]=r.useState(!1),[h,u]=r.useState(!1),[x,p]=r.useState(!0),[j,g]=r.useState(null);r.useEffect(()=>{(()=>{try{p(!0);const e=new URLSearchParams(window.location.hash.substring(1)),t=e.get("access_token"),s=e.get("refresh_token");if("recovery"===e.get("type")&&t&&s)g(t),u(!0),l("✅ 認証が完了しました。新しいパスワードを設定してください。"),window.history.replaceState({},document.title,window.location.pathname);else{const e=new URLSearchParams(window.location.search),t=e.get("token");"recovery"===e.get("type")&&t?(g(t),u(!0),l("✅ 新しいパスワードを設定してください。")):(l("❌ 無効なパスワードリセットリンクです。再度パスワードリセットを行ってください。"),u(!1))}}catch(e){l("❌ 認証処理中にエラーが発生しました。再度お試しください。"),u(!1)}finally{p(!1)}})()},[]);return x?a.jsx("div",{className:"max-w-md mx-auto mt-10 p-6 bg-white rounded shadow",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"認証情報を確認中..."})]})}):a.jsxs("div",{className:"max-w-md mx-auto mt-10 p-6 bg-white rounded shadow",children:[a.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"パスワード再設定"}),o&&a.jsx("div",{className:"mb-4 p-4 rounded-lg border "+(o.includes("✅")||o.includes("設定してください")?"text-green-700 bg-green-100 border-green-300":o.includes("❌")?"text-red-700 bg-red-100 border-red-300":o.includes("🔄")?"text-blue-700 bg-blue-100 border-blue-300":"text-gray-700 bg-gray-100 border-gray-300"),children:a.jsx("p",{className:"text-sm",children:o})}),h?a.jsxs("form",{onSubmit:s=>{(async s=>{if(s.preventDefault(),t===n)if(t.length<6)l("❌ パスワードは6文字以上で入力してください。");else if(j){m(!0),l("🔄 パスワードを更新中...");try{const{error:s}=await Yt.auth.setSession({access_token:j,refresh_token:j});if(s)throw s;const{error:a}=await Yt.auth.updateUser({password:t});if(a)throw a;await Yt.auth.signOut(),l("✅ パスワードが正常に変更されました！ログイン画面に移動します..."),"Notification"in window&&"granted"===Notification.permission&&new Notification("パスワード変更完了",{body:"パスワードが正常に変更されました。新しいパスワードでログインしてください。",icon:"/favicon.svg"}),setTimeout(()=>{e("/login")},3e3)}catch(a){const e=a instanceof Error?a.message:"不明なエラー";e.includes("session_not_found")?l("❌ セッションが見つかりません。パスワードリセットを最初からやり直してください。"):e.includes("invalid_token")?l("❌ 無効なトークンです。パスワードリセットを最初からやり直してください。"):e.includes("Token has expired")?l("❌ リセットリンクの有効期限が切れています。新しいパスワードリセットを行ってください。"):l(`❌ パスワードの更新に失敗しました: ${e}`)}finally{m(!1)}}else l("❌ リセットトークンが見つかりません。再度パスワードリセットを行ってください。");else l("❌ パスワードが一致しません。")})(s)},children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"新しいパスワード *"}),a.jsx("input",{type:"password",className:"w-full border border-gray-300 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:t,onChange:e=>s(e.target.value),required:!0,minLength:6,placeholder:"6文字以上で入力してください"})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"パスワード確認 *"}),a.jsx("input",{type:"password",className:"w-full border border-gray-300 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:n,onChange:e=>i(e.target.value),required:!0,minLength:6,placeholder:"パスワードを再入力してください"})]}),a.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",disabled:d,children:d?a.jsxs("span",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"更新中..."]}):"パスワードを変更"})]}):a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"パスワードリセットリンクが無効または期限切れです。"})]}),a.jsx("button",{onClick:()=>e("/forgot-password"),className:"w-full bg-gray-600 text-white py-3 px-4 rounded-lg hover:bg-gray-700 transition-colors",children:"パスワードリセットを再実行"})]})]})},Kt=({message:e="ロード中..."})=>{const t=window.location.pathname.includes("/payment")||window.location.pathname.includes("/checkout")||window.location.pathname.includes("/subscription")||window.location.search.includes("success=true")||window.location.search.includes("canceled=true");return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 mb-2",children:e}),t&&a.jsx("p",{className:"text-sm text-gray-500",children:"決済後の処理を行っています..."})]})})},es=({children:e})=>{const{user:t,isAuthenticated:s,loading:n}=F(),i=c();return r.useEffect(()=>{n||t&&s||i("/login",{state:{from:window.location.pathname},replace:!0})},[n,t,s]),n?a.jsx(Kt,{message:"認証確認中..."}):t&&s?a.jsx(a.Fragment,{children:e}):a.jsx(Kt,{message:"リダイレクト中..."})},ts=()=>(r.useEffect(()=>{window.location.href=`/magic-link${window.location.hash}`},[]),a.jsx(Kt,{}));function ss(){return r.useEffect(()=>{},[]),a.jsxs(a.Fragment,{children:[a.jsx(ve,{children:a.jsx(r.Suspense,{fallback:a.jsx(Kt,{message:"ページを読み込み中..."}),children:a.jsxs(d,{children:[a.jsx(m,{path:"/",element:a.jsx(ke,{})}),a.jsx(m,{path:"/login",element:a.jsx(De,{})}),a.jsx(m,{path:"/register",element:a.jsx(Le,{})}),a.jsx(m,{path:"/reset-password",element:a.jsx(Zt,{})}),a.jsx(m,{path:"/forgot-password",element:a.jsx(Xt,{})}),a.jsx(m,{path:"/parks",element:a.jsx(Ve,{})}),a.jsx(m,{path:"/parks/:parkId",element:a.jsx(Me,{})}),a.jsx(m,{path:"/parks/rules",element:a.jsx(He,{})}),a.jsx(m,{path:"/shop",element:a.jsx(Be,{})}),a.jsx(m,{path:"/shop/product/:productId",element:a.jsx(Ge,{})}),a.jsx(m,{path:"/privacy",element:a.jsx(Ot,{})}),a.jsx(m,{path:"/terms",element:a.jsx(Tt,{})}),a.jsx(m,{path:"/contact",element:a.jsx(Rt,{})}),a.jsx(m,{path:"/magic-link",element:a.jsx(Dt,{})}),a.jsx(m,{path:"/payment-confirmation",element:a.jsx(ht,{})}),a.jsx(m,{path:"/business-information",element:a.jsx(zt,{})}),a.jsx(m,{path:"/news",element:a.jsx(Ye,{})}),a.jsx(m,{path:"/news/:newsId",element:a.jsx(Ze,{})}),a.jsx(m,{path:"/news/park/:parkId",element:a.jsx(We,{})}),a.jsx(m,{path:"/dog/:id",element:a.jsx(ze,{})}),a.jsx(m,{path:"/dog-profile/:dogId",element:a.jsx(ze,{})}),a.jsx(m,{path:"/dog-info",element:a.jsx(Ke,{})}),a.jsx(m,{path:"/dog-info/foods",element:a.jsx(st,{})}),a.jsx(m,{path:"/dog-info/vaccine",element:a.jsx(tt,{})}),a.jsx(m,{path:"/dog-info/breeds",element:a.jsx(et,{})}),a.jsx(m,{path:"/dog-info/parasite",element:a.jsx(nt,{})}),a.jsx(m,{path:"/dog-info/snack",element:a.jsx(at,{})}),a.jsx(m,{path:"/dog-info/show",element:a.jsx(it,{})}),a.jsx(m,{path:"/dog-info/health",element:a.jsx(rt,{})}),a.jsx(m,{path:"/dog-info/training",element:a.jsx(ot,{})}),a.jsx(m,{path:"/dog-info/walk",element:a.jsx(lt,{})}),a.jsx(m,{path:"/dog-info/food",element:a.jsx(ct,{})}),a.jsx(m,{path:"/dog-info/care",element:a.jsx(dt,{})}),a.jsx(m,{path:"/dog-info/breeds",element:a.jsx(mt,{})}),a.jsx(m,{path:"/netlify-setup-guide",element:a.jsx(Mt,{})}),a.jsx(m,{path:"/pwa-setup-guide",element:a.jsx(Ht,{})}),a.jsx(m,{path:"/pwa-implementation-guide",element:a.jsx(Wt,{})}),a.jsx(m,{path:"/pwa-documentation",element:a.jsx(Ut,{})}),a.jsx(m,{path:"/pwa-testing-suite",element:a.jsx(Jt,{})}),a.jsx(m,{path:"/pwa-lighthouse-audit",element:a.jsx(Ft,{})}),a.jsx(m,{path:"/pwa-deployment-guide",element:a.jsx(Bt,{})}),a.jsx(m,{path:"/auth/callback",element:a.jsx(ts,{})}),a.jsx(m,{path:"/dashboard",element:a.jsx(es,{children:a.jsx(Se,{})})}),a.jsx(m,{path:"/profile-settings",element:a.jsx(es,{children:a.jsx(Te,{})})}),a.jsx(m,{path:"/liked-dogs",element:a.jsx(es,{children:a.jsx(Ce,{})})}),a.jsx(m,{path:"/register-dog",element:a.jsx(es,{children:a.jsx(Re,{})})}),a.jsx(m,{path:"/dog-management",element:a.jsx(es,{children:a.jsx(Oe,{})})}),a.jsx(m,{path:"/park-management",element:a.jsx(es,{children:a.jsx(Fe,{})})}),a.jsx(m,{path:"/register-park",element:a.jsx(es,{children:a.jsx(Je,{})})}),a.jsx(m,{path:"/facility-registration",element:a.jsx(es,{children:a.jsx(St,{})})}),a.jsx(m,{path:"/park-publishing-setup",element:a.jsx(es,{children:a.jsx(Fe,{})})}),a.jsx(m,{path:"/community",element:a.jsx(es,{children:a.jsx(Xe,{})})}),a.jsx(m,{path:"/access-control",element:a.jsx(es,{children:a.jsx(Lt,{})})}),a.jsx(m,{path:"/reservation/:parkId",element:a.jsx(es,{children:a.jsx(Ue,{})})}),a.jsx(m,{path:"/reservation-history",element:a.jsx(es,{children:a.jsx(Qe,{})})}),a.jsx(m,{path:"/cart",element:a.jsx(es,{children:a.jsx($e,{})})}),a.jsx(m,{path:"/checkout",element:a.jsx(es,{children:a.jsx(qe,{})})}),a.jsx(m,{path:"/order-history",element:a.jsx(es,{children:a.jsx(Qe,{})})}),a.jsx(m,{path:"/subscription",element:a.jsx(es,{children:a.jsx(ut,{})})}),a.jsx(m,{path:"/owner-dashboard",element:a.jsx(es,{children:a.jsx(xt,{})})}),a.jsx(m,{path:"/owner-payment-system",element:a.jsx(es,{children:a.jsx(pt,{})})}),a.jsx(m,{path:"/admin",element:a.jsx(es,{children:a.jsx(jt,{})})}),a.jsx(m,{path:"/admin/parks",element:a.jsx(es,{children:a.jsx(wt,{})})}),a.jsx(m,{path:"/admin/users",element:a.jsx(es,{children:a.jsx(ft,{})})}),a.jsx(m,{path:"/admin/facilities",element:a.jsx(es,{children:a.jsx(It,{})})}),a.jsx(m,{path:"/admin/vaccines",element:a.jsx(es,{children:a.jsx(Et,{})})}),a.jsx(m,{path:"/admin/management",element:a.jsx(es,{children:a.jsx(gt,{})})}),a.jsx(m,{path:"/admin/news",element:a.jsx(es,{children:a.jsx(At,{})})}),a.jsx(m,{path:"/admin/reservations",element:a.jsx(es,{children:a.jsx(bt,{})})}),a.jsx(m,{path:"/admin/revenue-report",element:a.jsx(es,{children:a.jsx(Pt,{})})}),a.jsx(m,{path:"/admin/sales",element:a.jsx(es,{children:a.jsx(Nt,{})})}),a.jsx(m,{path:"/admin/shop",element:a.jsx(es,{children:a.jsx(vt,{})})}),a.jsx(m,{path:"/admin/tasks",element:a.jsx(es,{children:a.jsx(yt,{})})}),a.jsx(m,{path:"/admin/user/:userId",element:a.jsx(es,{children:a.jsx(_t,{})})}),a.jsx(m,{path:"/verify-2fa",element:a.jsx(kt,{})}),a.jsx(m,{path:"/deploy",element:a.jsx(es,{children:a.jsx(Ct,{})})}),a.jsx(m,{path:"/deployment-history",element:a.jsx(es,{children:a.jsx(Vt,{})})}),a.jsx(m,{path:"*",element:a.jsx(ke,{})})]})})}),a.jsx(Pe,{}),a.jsx(Ae,{})]})}(async()=>{try{const{QueryClient:e,QueryClientProvider:t}=await n(async()=>{const{QueryClient:e,QueryClientProvider:t}=await import("./data-vendor-BmFUkYzE.js").then(e=>e.i);return{QueryClient:e,QueryClientProvider:t}},__vite__mapDeps([1,2])),{AuthProvider:s}=await n(async()=>{const{AuthProvider:e}=await Promise.resolve().then(()=>B);return{AuthProvider:e}},void 0),{BrowserRouter:i}=await n(async()=>{const{BrowserRouter:e}=await import("./core-vendor-DBEP70vW.js").then(e=>e.j);return{BrowserRouter:e}},[]),{ErrorBoundary:r}=await n(async()=>{const{ErrorBoundary:e}=await import("./react-error-boundary.esm-Bd6obM-G.js");return{ErrorBoundary:e}},__vite__mapDeps([97,2])),o=new e({defaultOptions:{queries:{staleTime:3e5,gcTime:6e5,retry:(e,t)=>{const s=t;return 401!==s?.status&&403!==s?.status&&e<2},refetchOnWindowFocus:!1,refetchIntervalInBackground:!1},mutations:{retry:1}}}),l=({error:e,resetErrorBoundary:t})=>a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[a.jsx("div",{className:"text-red-500 text-4xl mb-4",children:"⚠️"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"エラーが発生しました"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"アプリケーションで問題が発生しました。ページを再読み込みしてください。"}),a.jsx("button",{onClick:t,className:"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition-colors",children:"再試行"})]})}),c=()=>a.jsx(h.StrictMode,{children:a.jsx(r,{FallbackComponent:l,children:a.jsx(t,{client:o,children:a.jsx(i,{children:a.jsx(s,{children:a.jsx(ss,{})})})})})}),d=document.getElementById("root");if(d){V.createRoot(d).render(a.jsx(c,{}))}0,"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{}).catch(e=>{})}),setTimeout(()=>{if(performance&&performance.mark){performance.mark("app-initialized");const e=()=>{performance.getEntriesByType("navigation")[0]};window.addEventListener("load",e)}},2e3),window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches&&document.body.classList.add("pwa-mode")}catch(e){const t=document.getElementById("root");t&&(t.innerHTML='\n        <div style="min-height: 100vh; display: flex; align-items: center; justify-content: center; background: #f9fafb;">\n          <div style="text-align: center; padding: 2rem;">\n            <div style="font-size: 3rem; margin-bottom: 1rem;">🐕</div>\n            <h1 style="font-size: 1.5rem; color: #374151; margin-bottom: 0.5rem;">ドッグパークJP</h1>\n            <p style="color: #6b7280;">アプリを初期化しています...</p>\n            <button onclick="window.location.reload()" style="margin-top: 1rem; padding: 0.5rem 1rem; background: #3b82f6; color: white; border: none; border-radius: 0.375rem; cursor: pointer;">\n              再読み込み\n            </button>\n          </div>\n        </div>\n      ')}})();export{ue as B,xe as C,be as S,Qt as a,je as b,Y as c,se as d,te as e,ne as f,me as g,U as h,ye as i,X as j,ae as k,fe as l,ie as m,Ee as n,Z as o,K as p,ee as q,de as r,H as s,he as t,F as u,$ as v,W as w,ge as x,qt as y};
