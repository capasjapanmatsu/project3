import{j as s}from"./motion-CuO0nkIV.js";import{r as e}from"./react-vendor-cniURDpR.js";import{a,L as r}from"./router-9ZtQ8-Nn.js";import{B as t}from"./Button-D1CO6kO-.js";import{C as l}from"./Card-roTxPFVC.js";import{u as i,S as n,s as c}from"./index-DRDL9Ed3.js";import{Y as d,l as m,M as x,G as o,F as h,J as j,p as g,o as p,w as N,s as b}from"./ui-basic-BXsWFU4S.js";import"./supabase-hyP6cfTu.js";import"./heavy-features-BIdEME4r.js";function f(){const{user:f}=i(),u=a(),[v,w]=e.useState([]),[y,_]=e.useState({}),[k,S]=e.useState(!0);e.useEffect(()=>{if(!f)return;(async()=>{try{S(!0);const{data:s,error:e}=await c.from("dog_parks").select("\n            *,\n            profiles!dog_parks_owner_id_fkey(display_name, name)\n          ").eq("owner_id",f.id).order("created_at",{ascending:!1});if(e)return;w(s||[])}catch(s){}finally{S(!1)}})()},[f]);const $=e=>{const a={approved:{bg:"bg-green-100",text:"text-green-800",label:"公開中",icon:b},pending:{bg:"bg-yellow-100",text:"text-yellow-800",label:"審査中",icon:N},rejected:{bg:"bg-red-100",text:"text-red-800",label:"却下",icon:p},second_stage_waiting:{bg:"bg-orange-100",text:"text-orange-800",label:"詳細情報待ち",icon:h}},r=a[e]||a.pending,t=r.icon;return s.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-1 ${r.bg} ${r.text}`,children:[s.jsx(t,{className:"w-4 h-4"}),s.jsx("span",{children:r.label})]})};return k?s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):s.jsxs(s.Fragment,{children:[s.jsx(n,{title:"管理中ドッグラン一覧",description:"あなたが管理するドッグランの一覧と詳細管理ページです。"}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("div",{className:"flex items-center mb-4",children:s.jsxs(t,{variant:"secondary",size:"sm",onClick:()=>u("/dashboard"),className:"mr-4",children:[s.jsx(d,{className:"w-4 h-4 mr-1"}),"ダッシュボードに戻る"]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[s.jsx(m,{className:"w-8 h-8 text-green-600 mr-3"}),"管理中ドッグラン一覧"]}),s.jsxs("p",{className:"text-gray-600 mt-2",children:["あなたが管理するドッグラン (",v.length,"施設) の詳細管理"]})]}),s.jsx(r,{to:"/park-registration",children:s.jsxs(t,{className:"bg-green-600 hover:bg-green-700",children:[s.jsx(m,{className:"w-4 h-4 mr-2"}),"新規ドッグラン登録"]})})]})]}),0===v.length?s.jsxs(l,{className:"p-12 text-center",children:[s.jsx(m,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"管理中のドッグランがありません"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"まずはドッグランを登録して、運営を開始しましょう。"}),s.jsx(r,{to:"/park-registration",children:s.jsxs(t,{className:"bg-green-600 hover:bg-green-700",children:[s.jsx(m,{className:"w-4 h-4 mr-2"}),"ドッグラン登録を始める"]})})]}):s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:v.map(e=>s.jsx(l,{className:"hover:shadow-lg transition-all duration-200",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:e.name}),s.jsxs("div",{className:"flex items-center text-gray-600 mb-3",children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),s.jsx("span",{className:"text-sm",children:e.address})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(o,{className:"w-4 h-4 text-yellow-400 fill-current"}),s.jsx("span",{className:"text-sm font-medium",children:e.average_rating?.toFixed(1)||"0.0"})]}),s.jsxs("span",{className:"text-sm text-gray-500",children:[e.review_count||0,"件のレビュー"]})]})]}),s.jsx("div",{className:"ml-4",children:$(e.status)})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-600",children:"料金"}),s.jsxs("div",{className:"font-semibold",children:["¥",e.price_per_hour?.toLocaleString()||"未設定","/時間"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-600",children:"収容人数"}),s.jsxs("div",{className:"font-semibold",children:[e.capacity||"未設定","人"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-600",children:"ステータス"}),s.jsx("div",{children:$(e.status||"pending")})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-600",children:"作成日"}),s.jsx("div",{className:"font-semibold",children:new Date(e.created_at).toLocaleDateString("ja-JP")})]})]}),s.jsxs("div",{className:"flex gap-3",children:["second_stage_waiting"===e.status?s.jsx(r,{to:`/parks/${e.id}/second-stage`,className:"flex-1",children:s.jsxs(t,{className:"w-full bg-orange-600 hover:bg-orange-700",children:[s.jsx(h,{className:"w-4 h-4 mr-2"}),"詳細情報を入力"]})}):"pending"===e.status?s.jsxs(t,{disabled:!0,className:"flex-1 bg-gray-400 cursor-not-allowed",children:[s.jsx(j,{className:"w-4 h-4 mr-2"}),"審査中（編集不可）"]}):s.jsx(r,{to:`/parks/${e.id}/manage`,className:"flex-1",children:s.jsxs(t,{className:"w-full bg-blue-600 hover:bg-blue-700",children:[s.jsx(j,{className:"w-4 h-4 mr-2"}),"管理・修正"]})}),"approved"===e.status&&s.jsx(r,{to:`/parks/${e.id}`,children:s.jsxs(t,{variant:"secondary",className:"px-4",children:[s.jsx(g,{className:"w-4 h-4 mr-2"}),"公開ページ"]})})]})]})},e.id))})]})]})}export{f as MyParksManagement};
