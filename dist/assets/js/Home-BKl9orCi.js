import{j as e}from"./motion-BHsL7Azw.js";import{r as s,u as t}from"./react-vendor-CMvmJHsS.js";import{L as a,a as i}from"./router-DXQOdrLL.js";import{u as n,B as r,s as l}from"./index-CSTJwaVF.js";import{C as o}from"./Card-DqVnP9TA.js";import{m as c,n as d,P as m,M as x,U as h,C as u,o as g,c as p,W as f,p as j,R as b,B as N,A as w,T as y,q as v,F as k,r as _,s as S}from"./ui-basic-B0S5JnE3.js";import"./heavy-features-Dlg1c9Yc.js";import"./supabase--qivnNSU.js";const I={xs:0,sm:640,md:768,lg:1024,xl:1280,"2xl":1536};function M(e){const t=s.useMemo(()=>({...I,...e}),[e]),[a,i]=s.useState({width:"undefined"!=typeof window?window.innerWidth:1024,height:"undefined"!=typeof window?window.innerHeight:768}),[n,r]=s.useState("md");s.useEffect(()=>{const e=()=>{const e=window.innerWidth;i({width:e,height:window.innerHeight}),e>=t["2xl"]?r("2xl"):e>=t.xl?r("xl"):e>=t.lg?r("lg"):e>=t.md?r("md"):e>=t.sm?r("sm"):r("xs")};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const l=e=>a.width>=t[e],o=e=>a.width<t[e],c=(e,s)=>a.width>=t[e]&&a.width<t[s],d=o("md"),m=c("md","lg"),x=l("lg"),h="ontouchstart"in window||navigator.maxTouchPoints>0,u="undefined"!=typeof window&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,g="undefined"!=typeof window&&window.matchMedia("(prefers-color-scheme: dark)").matches;return{windowSize:a,currentBreakpoint:n,breakpoints:t,isAbove:l,isBelow:o,isBetween:c,isMobile:d,isTablet:m,isDesktop:x,isTouchDevice:h,prefersReducedMotion:u,prefersDarkMode:g}}const C=s.forwardRef(({children:s,animation:t="fadeIn",duration:a="normal",easing:i="ease-out",delay:n=0,repeat:r=!1,triggerOnce:l=!0,threshold:o=.1,as:c="div",respectReducedMotion:d=!0,fallbackAnimation:m="fadeIn",className:x="",...h},u)=>{const{prefersReducedMotion:g}=M(),p=d&&g,f=n>0?{animationDelay:`${n}ms`}:{},j=`${[{fadeIn:p?"opacity-100 transition-opacity":"opacity-0 animate-fade-in",slideUp:p?"transform-none transition-transform":"transform translate-y-4 animate-slide-up",slideDown:p?"transform-none transition-transform":"transform -translate-y-4 animate-slide-down",slideLeft:p?"transform-none transition-transform":"transform translate-x-4 animate-slide-left",slideRight:p?"transform-none transition-transform":"transform -translate-x-4 animate-slide-right",scale:p?"transform-none transition-transform":"transform scale-95 animate-scale-in",bounce:p?"transform-none":"animate-bounce",pulse:p?"opacity-100":"animate-pulse",spin:p?"transform-none":"animate-spin"}[p?m:t],{fast:"duration-200",normal:"duration-500",slow:"duration-1000"}[a],{linear:"ease-linear",ease:"ease","ease-in":"ease-in","ease-out":"ease-out","ease-in-out":"ease-in-out"}[i],!0===r?"animation-iteration-count-infinite":"number"==typeof r?`animation-iteration-count-${r}`:"","transition-all"].filter(Boolean).join(" ")} ${x}`.trim(),b=c;return e.jsx(b,{ref:u,className:j,style:{...f,...h.style},"aria-hidden":p?void 0:"false",...h,children:s})});C.displayName="AnimatedElement";const L=s.forwardRef((s,t)=>e.jsx(C,{ref:t,animation:"fadeIn",...s}));L.displayName="FadeIn";const R=s.forwardRef((s,t)=>e.jsx(C,{ref:t,animation:"slideUp",...s}));R.displayName="SlideUp";s.forwardRef((s,t)=>e.jsx(C,{ref:t,animation:"scale",...s})).displayName="ScaleIn";const D=[{id:"health",title:"健康管理",description:"ワクチン接種、定期検診、病気の予防について詳しく解説します。",icon:"🏥",category:"health",link:"/dog-info/health",color:"bg-red-50 border-red-200 hover:bg-red-100"},{id:"training",title:"しつけのコツ",description:"基本的なコマンドから問題行動の改善まで、効果的なしつけ方法を紹介。",icon:"🎓",category:"training",link:"/dog-info/training",color:"bg-blue-50 border-blue-200 hover:bg-blue-100"},{id:"walk",title:"お散歩ガイド",description:"安全で楽しいお散歩の方法、適切な運動量、散歩コースの選び方。",icon:"🐕",category:"walk",link:"/dog-info/walk",color:"bg-green-50 border-green-200 hover:bg-green-100"},{id:"food",title:"食事・栄養",description:"年齢や体調に合わせた食事選び、栄養バランス、おやつの与え方。",icon:"🍖",category:"food",link:"/dog-info/food",color:"bg-yellow-50 border-yellow-200 hover:bg-yellow-100"},{id:"care",title:"お手入れ",description:"ブラッシング、爪切り、歯磨きなど、日常のお手入れ方法を解説。",icon:"🛁",category:"care",link:"/dog-info/care",color:"bg-purple-50 border-purple-200 hover:bg-purple-100"},{id:"breeds",title:"犬種図鑑",description:"人気の犬種から珍しい犬種まで、特徴や性格、飼育のポイントを紹介。",icon:"📚",category:"health",link:"/dog-info/breeds",color:"bg-indigo-50 border-indigo-200 hover:bg-indigo-100"}];function $(){const{isAuthenticated:s}=n();return e.jsx("section",{className:"py-12 bg-gradient-to-br from-blue-50 to-indigo-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx("span",{className:"text-4xl mr-3",children:"🐕"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"ワンちゃん情報発信コーナー"}),e.jsx("span",{className:"text-4xl ml-3",children:"📚"})]}),e.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"愛犬との暮らしをもっと楽しく、もっと健康に。専門家監修の情報で、 ワンちゃんとの絆を深めましょう。"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:D.map(s=>e.jsx(o,{className:`${s.color} transition-all duration-300 transform hover:scale-105 hover:shadow-lg border-2`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("span",{className:"text-3xl mr-3",children:s.icon}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:s.title})]}),e.jsx("p",{className:"text-gray-600 mb-4 leading-relaxed",children:s.description}),e.jsx(a,{to:s.link,children:e.jsx(r,{variant:"outline",className:"w-full border-gray-300 hover:bg-gray-50",children:"詳しく見る →"})})]})},s.id))}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 mb-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"🎯 今月の特集"}),e.jsx("p",{className:"text-gray-600",children:"季節に合わせたワンちゃんケアのポイント"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"🌡️"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"夏の暑さ対策"}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"熱中症予防、適切な水分補給、涼しい散歩時間帯の選び方など、 夏を快適に過ごすためのポイントを詳しく解説します。"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"🏃"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"室内運動のアイデア"}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"雨の日や暑い日でもできる室内での運動方法、 知育玩具を使った遊び方、ストレス解消のコツを紹介。"})]})]})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl p-8 text-white",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-2xl font-bold mb-4",children:"🐾 ワンちゃん仲間とつながろう"}),e.jsx("p",{className:"text-lg mb-6 opacity-90",children:"同じ犬種の飼い主さんや近所のワンちゃん仲間と 情報交換やお散歩仲間を見つけませんか？"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(a,{to:s?"/community":"/login",children:e.jsx(r,{className:"bg-pink-600 text-white hover:bg-pink-700 border-pink-600",children:"コミュニティに参加"})}),e.jsx(a,{to:"/parks",children:e.jsx(r,{variant:"outline",className:"border-white text-white hover:bg-white hover:text-purple-600",children:"近くのドッグパークを探す"})})]})]})})]})})}const O=()=>{const{user:s}=n();return e.jsx("section",{className:"relative overflow-hidden",children:e.jsxs("div",{className:"bg-gradient-to-r from-pink-600 via-purple-600 to-indigo-600 text-white p-8 rounded-xl shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-full",children:e.jsx(c,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold mb-2 flex items-center",children:[e.jsx(d,{className:"w-6 h-6 mr-2"}),"ワンちゃんと行ける施設掲載募集中！"]}),e.jsx("p",{className:"text-lg opacity-90",children:"ペットショップ、動物病院、カフェなど、ワンちゃんと一緒に行ける施設を掲載しませんか？"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(a,{to:s?"/facility-registration":"/register",children:e.jsxs(r,{className:"bg-blue-600 hover:bg-blue-700 text-white font-bold px-6 py-3 text-lg shadow-md",children:[e.jsx(m,{className:"w-5 h-5 mr-2"}),s?"施設掲載に進む":"施設登録"]})}),e.jsx("p",{className:"text-sm opacity-80 mt-2",children:"掲載料無料・サポート充実"})]})]}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full -ml-12 -mb-12"})]})})},A=({isLoggedIn:s})=>{const t=[{icon:e.jsx(x,{className:"h-12 w-12 text-blue-600 mx-auto mb-4 group-hover:scale-110 transition-transform"}),title:"簡単検索",description:"お近くのドッグランを簡単に見つけることができます",linkTo:"/parks",color:"text-blue-600"},{icon:e.jsx(h,{className:"h-12 w-12 text-purple-600 mx-auto mb-4 group-hover:scale-110 transition-transform"}),title:"コミュニティ",description:"愛犬家同士で交流を深めることができます",linkTo:s?"/community":"/login",color:"text-purple-600"},{icon:e.jsx(u,{className:"h-12 w-12 text-orange-600 mx-auto mb-4 group-hover:scale-110 transition-transform"}),title:"予約管理",description:"施設の予約をオンラインで簡単に管理",linkTo:s?"/dashboard":"/login",color:"text-orange-600"},{icon:e.jsx(g,{className:"h-12 w-12 text-green-600 mx-auto mb-4 group-hover:scale-110 transition-transform"}),title:"ペットショップ",description:"ペット用品をワンタッチで簡単注文",linkTo:"/petshop",color:"text-green-600"}];return e.jsx("section",{className:"grid md:grid-cols-4 gap-8 mt-12",children:t.map((s,t)=>e.jsxs(a,{to:s.linkTo,className:"text-center p-6 hover:bg-gray-50 rounded-lg transition-colors cursor-pointer group",children:[s.icon,e.jsx("h3",{className:"text-xl font-semibold mb-2",children:s.title}),e.jsx("p",{className:"text-gray-600",children:s.description})]},t))})},E=[{id:"recruit-1",title:"スポンサー募集中",description:"あなたの広告をここに掲載しませんか？多くのドッグオーナーにリーチできます！",image_url:"",website_url:"/sponsor-application",is_active:!0,display_order:1,created_at:(new Date).toISOString()},{id:"recruit-2",title:"ペット関連サービス募集",description:"ペット関連サービスの宣伝に最適！効果的な広告枠をご提供します。",image_url:"",website_url:"/sponsor-application",is_active:!0,display_order:2,created_at:(new Date).toISOString()},{id:"recruit-3",title:"愛犬家向け広告募集",description:"愛犬家コミュニティに向けて、あなたのサービスを紹介してください！",image_url:"",website_url:"/sponsor-application",is_active:!0,display_order:3,created_at:(new Date).toISOString()},{id:"recruit-4",title:"ドッグフード・用品広告",description:"ドッグフードやペット用品の広告掲載で売上アップを実現しましょう！",image_url:"",website_url:"/sponsor-application",is_active:!0,display_order:4,created_at:(new Date).toISOString()},{id:"recruit-5",title:"動物病院・サービス",description:"動物病院やペットケアサービスの宣伝で地域の愛犬家にアピール！",image_url:"",website_url:"/sponsor-application",is_active:!0,display_order:5,created_at:(new Date).toISOString()}],z=({banners:t})=>{const a=i(),[n]=s.useState(E),[r,l]=s.useState(0),[o,c]=s.useState(!0),[d,m]=s.useState(!1);s.useEffect(()=>{if(!o||d||n.length<=1)return;const e=setInterval(()=>{l(e=>(e+1)%n.length)},3e3);return()=>clearInterval(e)},[o,d,n.length]);const x=s.useCallback(()=>{a("/sponsor-application")},[a]),h=s.useCallback(e=>(e%n.length+n.length)%n.length,[n.length]),u=s.useCallback(()=>{const e=[];for(let s=-2;s<=2;s++){const t=h(r+s);e.push({banner:n[t],position:s,index:t})}return e},[r,n,h]);if(0===n.length)return null;const g=u();return e.jsxs("section",{className:"w-full mb-8 px-4 relative",onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),"aria-label":"スポンサー募集カルーセル",children:[e.jsxs("div",{className:"relative w-full h-36 overflow-hidden",children:[e.jsx("div",{className:"flex items-center justify-center h-full",children:g.map(({banner:s,position:t,index:a})=>{if(!s)return null;const i=0===t,n=1===Math.abs(t),r=2===Math.abs(t);let l="",o=1,c=1,d=10;return i?(l="translateX(0)",o=1,c=1,d=20):n?(l=`translateX(${260*t}px)`,o=.7,c=.85,d=15):r&&(l=`translateX(${300*t}px)`,o=.4,c=1,d=10),e.jsx("div",{className:"absolute transition-all duration-700 ease-in-out cursor-pointer "+(i?"w-[28rem] h-28":n?"w-96 h-24":"w-[28rem] h-28"),style:{transform:`${l} scale(${c})`,opacity:o,zIndex:d},onClick:x,children:e.jsxs("div",{className:"w-full h-full rounded-lg relative overflow-hidden shadow-lg",children:[e.jsx("div",{className:"absolute inset-0 "+(0===t?"bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500":-1===t||1===t?"bg-gradient-to-r from-green-500 via-blue-500 to-purple-500":"bg-gradient-to-r from-gray-400 to-gray-600")}),e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"radial-gradient(circle, white 1px, transparent 1px)",backgroundSize:"20px 20px"}}),e.jsx("div",{className:"relative z-10 h-full flex items-center justify-center text-center px-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white drop-shadow-lg mb-2 "+(i?"text-xl":n?"text-base":"text-lg"),children:s.title}),i&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-white opacity-90 drop-shadow-md max-w-sm mb-3",children:s.description}),e.jsx("div",{children:e.jsx("span",{className:"bg-white bg-opacity-20 text-white px-4 py-2 rounded-full text-sm font-medium backdrop-blur-sm hover:bg-opacity-30 transition-all",children:"詳細を見る →"})})]})]})}),i&&e.jsx("div",{className:"absolute top-3 left-3 bg-yellow-400 text-yellow-900 px-3 py-1 rounded-full text-xs font-bold",children:"募集中"}),i&&e.jsx("div",{className:"absolute bottom-3 right-3",children:e.jsx("svg",{className:"w-5 h-5 text-white opacity-70",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})})]})},`${s.id}-${a}`)})}),e.jsx("div",{className:"absolute top-1/2 right-4 transform -translate-y-1/2 pointer-events-none",children:e.jsxs("div",{className:"flex items-center space-x-1 text-white opacity-50",children:[e.jsx("svg",{className:"w-4 h-4 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),e.jsx("svg",{className:"w-4 h-4 animate-pulse",style:{animationDelay:"0.2s"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]}),e.jsx("div",{className:"flex justify-center mt-3",children:e.jsx("div",{className:"flex space-x-1",children:n.map((s,t)=>e.jsx("div",{className:"w-1.5 h-1.5 rounded-full transition-colors duration-200 "+(t===r?"bg-blue-600":"bg-gray-300")},t))})})]})},U=({isLoggedIn:s})=>s?e.jsxs("section",{className:"py-4",children:[e.jsx(z,{}),e.jsxs("div",{className:"flex justify-center space-x-4 mt-6",children:[e.jsx(a,{to:"/parks",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"ドッグランを探す"}),e.jsx(a,{to:"/dashboard",className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors font-medium",children:"マイページ"})]})]}):e.jsxs("section",{className:"text-center py-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"愛犬とのお散歩を、もっと楽しく"}),e.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"近くのドッグランを見つけて、新しい出会いを見つけましょう"}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx(a,{to:"/register",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"無料で始める"}),e.jsx(a,{to:"/login?method=magic",className:"bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors font-medium",children:"Magic Linkで簡単ログイン"})]})]}),B=t.memo(({recentDogs:t,isOffline:a,isLoading:i=!1})=>{const n=s.useMemo(()=>[...t,...t],[t]),r=s.useMemo(()=>Array.isArray(t)&&t.length>0,[t]);return e.jsxs("section",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsx("div",{className:"flex justify-center items-center mb-6 relative",children:e.jsxs("div",{className:"text-center relative",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center justify-center",children:[e.jsx(p,{className:"w-6 h-6 text-blue-600 mr-2"}),"最近仲間入りしました！"]}),e.jsx("div",{className:"absolute -top-8 -right-4",children:e.jsx("div",{className:"bg-yellow-100 rounded-full px-4 py-2 text-yellow-800 font-bold transform -rotate-12 text-sm",children:"New"})})]})}),e.jsx("div",{className:"overflow-hidden w-full relative",style:{height:140},children:i?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"text-gray-600",children:"新しい仲間を探しています..."})]})}):r?e.jsx("div",{className:"flex items-center whitespace-nowrap",style:{width:"max-content",animation:"marquee 45s linear infinite",willChange:"transform",transform:"translateZ(0)"},children:n.map((s,t)=>e.jsx(T,{dog:s},`${s.id}-${t}`))}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 text-center",children:e.jsxs("div",{children:[e.jsx(p,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium",children:a?"オフライン中です":"新しい仲間を募集中！"}),e.jsx("p",{className:"text-sm mt-1",children:a?"接続を確認してください":"ワンちゃんの登録をお待ちしています"}),!a&&e.jsx("p",{className:"text-xs mt-2 text-gray-400",children:"登録されたワンちゃんがいません"})]})})}),e.jsx("style",{children:"\n          @keyframes marquee {\n            0% {\n              transform: translateX(0) translateZ(0);\n            }\n            100% {\n              transform: translateX(-50%) translateZ(0);\n            }\n          }\n          \n          /* GPUアクセラレーション用の最適化 */\n          .marquee-container {\n            backface-visibility: hidden;\n            -webkit-backface-visibility: hidden;\n            -moz-backface-visibility: hidden;\n            -ms-backface-visibility: hidden;\n            -webkit-transform: translateZ(0);\n            -moz-transform: translateZ(0);\n            -ms-transform: translateZ(0);\n            transform: translateZ(0);\n          }\n        "})]})}),T=t.memo(({dog:t})=>{const[a,i]=s.useState(!1),[n,r]=s.useState(!1),l=s.useMemo(()=>t.image_url?t.image_url.includes("supabase")?`${t.image_url}?width=80&height=80&quality=80`:t.image_url:null,[t.image_url]);return s.useEffect(()=>{if(l&&!a&&!n){(new Image).src=l}},[l]),e.jsxs("div",{className:"inline-block mx-4 text-center",style:{width:100,flexShrink:0},children:[e.jsxs("div",{className:"relative w-20 h-20 mx-auto mb-2 bg-gray-200 rounded-full overflow-hidden",children:[!a&&!n&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:e.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})}),l&&!n?e.jsx("img",{src:l,alt:t.name,className:"w-full h-full object-cover transition-opacity duration-200 "+(a?"opacity-100":"opacity-0"),onLoad:()=>{i(!0)},onError:()=>{r(!0),i(!0)},loading:"eager",decoding:"sync",width:80,height:80}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-2xl",children:"🐕"})]}),e.jsx("div",{className:"text-xs text-gray-600 truncate font-medium",children:t.name}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:t.breed})]})});B.displayName="MarqueeDogsSection",T.displayName="DogCard";const F=({isOffline:s,networkError:t,onRetryConnection:a})=>t?e.jsx("div",{className:"border rounded-lg p-4 mb-6 "+(s?"bg-orange-50 border-orange-200":"bg-red-50 border-red-200"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[s?e.jsx(f,{className:"w-6 h-6 text-orange-600"}):e.jsx(j,{className:"w-6 h-6 text-red-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium "+(s?"text-orange-800":"text-red-800"),children:s?"オフラインモード":"接続エラー"}),e.jsx("p",{className:"text-sm whitespace-pre-line "+(s?"text-orange-700":"text-red-700"),children:t})]})]}),e.jsxs(r,{onClick:a,size:"sm",className:(s?"bg-orange-600 hover:bg-orange-700":"bg-red-600 hover:bg-red-700")+" text-white",children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"再接続"]})]})}):null,Z=({news:s,isOffline:t,isLoading:i,onRetryConnection:n})=>{const l=s=>{switch(s){case"news":return e.jsx(k,{className:"w-4 h-4"});case"announcement":return e.jsx(v,{className:"w-4 h-4"});case"sale":return e.jsx(y,{className:"w-4 h-4"});default:return e.jsx(N,{className:"w-4 h-4"})}},c=e=>({news:"お知らせ",announcement:"重要なお知らせ",sale:"セール情報"}[e]||e),d=({message:s})=>e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(f,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:s}),e.jsxs(r,{onClick:n,size:"sm",variant:"secondary",className:"mt-2",children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"再接続"]})]})}),m=()=>e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),e.jsx("p",{children:"新着情報を読み込み中..."})]})}),x=()=>e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(N,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"現在、表示できる新着情報はありません"}),e.jsxs(r,{onClick:n,size:"sm",variant:"secondary",className:"mt-2",children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"再読み込み"]})]})});return e.jsxs("section",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(N,{className:"w-5 h-5 text-blue-600 mr-2"}),"新着情報"]}),e.jsxs(a,{to:"/news",className:"text-blue-600 hover:text-blue-800 flex items-center text-sm",children:["すべて見る",e.jsx(w,{className:"w-4 h-4 ml-1"})]})]}),e.jsx("div",{className:"space-y-3",children:t?e.jsx(d,{message:"オフライン：新着情報を読み込めません"}):i?e.jsx(m,{}):0===s.length?e.jsx(x,{}):s.slice(0,2).map(s=>{return e.jsx(a,{to:`/news/${s.id}`,children:e.jsx(o,{className:"p-3 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium flex items-center ${i=s.category,{news:"bg-blue-100 text-blue-800",announcement:"bg-red-100 text-red-800",sale:"bg-green-100 text-green-800"}[i]||"bg-gray-100 text-gray-800"}`,children:[l(s.category),e.jsx("span",{className:"ml-1",children:c(s.category)})]}),s.is_important&&e.jsx("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium",children:"重要"})]}),e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:s.title}),s.content&&e.jsx("p",{className:"text-sm text-gray-600 line-clamp-1 mb-1",children:s.content}),e.jsx("p",{className:"text-xs text-gray-500",children:(t=s.created_at,new Date(t).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}))})]}),e.jsx(w,{className:"w-4 h-4 text-gray-400 ml-4"})]})})},s.id);var t,i})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx(a,{to:"/news",children:e.jsxs(r,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",children:["すべての新着情報を見る",e.jsx(w,{className:"w-4 h-4 ml-2"})]})})})]})},q=()=>{const{user:s}=n();return e.jsx("section",{className:"relative overflow-hidden",children:e.jsxs("div",{className:"bg-gradient-to-r from-green-600 via-blue-600 to-purple-600 text-white p-8 rounded-xl shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-full",children:e.jsx(_,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold mb-2 flex items-center",children:[e.jsx(S,{className:"w-6 h-6 mr-2"}),"ドッグランオーナー募集中！"]}),e.jsx("p",{className:"text-lg opacity-90",children:"あなたの土地をドッグランとして活用しませんか？収益化のチャンスです"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(a,{to:s?"/park-registration-agreement":"/register",children:e.jsxs(r,{className:"bg-blue-600 hover:bg-blue-700 text-white font-bold px-6 py-3 text-lg shadow-md border-blue-600",children:[e.jsx(m,{className:"w-5 h-5 mr-2"}),s?"オーナー契約に進む":"オーナー登録"]})}),e.jsx("p",{className:"text-sm opacity-80 mt-2",children:"初期費用無料・サポート充実"})]})]}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full -ml-12 -mb-12"})]})})},W=()=>e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"bg-blue-50 p-6 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-4",children:"ご利用前に必ずお読みください"}),e.jsx("p",{className:"text-blue-800 mb-4",children:"安全で楽しいドッグラン利用のため、利用ルールをご確認ください"}),e.jsx(a,{to:"/rules",children:e.jsxs(r,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"ドッグラン利用ルールを確認"]})})]})}),e.jsxs("section",{className:"bg-blue-50 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-center text-blue-900 mb-6",children:"料金体系"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"単発利用"}),e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"¥800"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"1回の利用料金"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"• 最大3時間まで"}),e.jsx("li",{children:"• 愛犬3頭まで"}),e.jsx("li",{children:"• 全国の提携施設で利用可能"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-blue-600 text-white p-6 rounded-lg shadow-lg transform scale-105",children:[e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"サブスクリプション"}),e.jsxs("div",{className:"text-3xl font-bold mb-2",children:["¥3,800",e.jsx("span",{className:"text-lg",children:"/月"})]}),e.jsx("p",{className:"mb-4 opacity-90",children:"使い放題プラン"}),e.jsxs("ul",{className:"text-sm space-y-1 opacity-90",children:[e.jsx("li",{children:"• 全国のドッグラン使い放題"}),e.jsx("li",{children:"• ペットショップ10%OFF"}),e.jsx("li",{children:"• 優先予約権"}),e.jsx("li",{children:"• 専用サポート"})]}),e.jsx("div",{className:"mt-4",children:e.jsx("span",{className:"bg-white text-purple-600 px-3 py-1 rounded-full text-xs font-medium",children:"おすすめ"})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"施設貸し切り"}),e.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:"¥4,400"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"1時間の貸し切り料金"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"• 完全プライベート空間"}),e.jsx("li",{children:"• 愛犬制限なし"}),e.jsx("li",{children:"• イベント・パーティーに最適"})]})]})]}),e.jsx("div",{className:"text-center mt-8",children:e.jsx(a,{to:"/register",children:e.jsx(r,{className:"bg-blue-600 hover:bg-blue-700 text-lg px-8 py-3",children:"今すぐ始める"})})})]})]});function P(){const{user:t}=n(),{isMobile:a,prefersReducedMotion:i}=M(),[r,o]=s.useState([]),[c,d]=s.useState([]),[m,x]=s.useState(!0),[h,u]=s.useState(!0),[g,p]=s.useState(null),[f,j]=s.useState(null),b=s.useCallback(async()=>{try{p(null);const{data:e,error:s}=await l.from("dogs").select("id, owner_id, name, breed, birth_date, gender, image_url, created_at").order("created_at",{ascending:!1}).limit(8);if(s)throw s;o(e||[])}catch(e){p(e instanceof Error?e.message:"データ取得に失敗しました")}finally{x(!1)}},[]),N=s.useCallback(async()=>{try{j(null);const{data:e,error:s}=await l.from("news_announcements").select("*").order("created_at",{ascending:!1}).limit(5);if(s)throw s;d(e||[])}catch(e){j(e instanceof Error?e.message:"データ取得に失敗しました")}finally{u(!1)}},[]);s.useEffect(()=>{(async()=>{Promise.allSettled([b(),N()])})()},[b,N]);const w=s.useMemo(()=>h&&0===c.length?[{id:"loading",title:"新着情報を読み込み中...",content:"データベースから最新の情報を取得しています。",category:"news",is_important:!1,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}]:c,[c,h]),y=s.useMemo(()=>r||[],[r]),v=!(!g&&!f),k=g||f,_=s.useCallback(()=>{b(),N()},[b,N]),S=a?"fast":"normal",I=i?0:25,D=s.useMemo(()=>!!t,[t]),E=m||h,z=y.length>0||w.length>0;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-gray-50",role:"main",children:[v&&e.jsx(L,{duration:"fast",children:e.jsx(F,{isOffline:v,networkError:k,onRetryConnection:_})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("section",{id:"hero-section","aria-label":"メインヒーロー",className:"focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-lg",tabIndex:-1,children:e.jsx(R,{duration:S,delay:0*I,children:e.jsx(U,{isLoggedIn:D})})}),e.jsx("section",{"aria-label":"最近登録された愛犬たち",className:"focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-lg",tabIndex:-1,children:e.jsx(C,{animation:"slideUp",duration:S,delay:1*I,respectReducedMotion:!0,fallbackAnimation:"fadeIn",children:e.jsx(B,{recentDogs:y,isOffline:v,isLoading:m&&0===y.length})})}),e.jsxs("main",{id:"main-content",className:"space-y-12 py-8",children:[e.jsx("section",{id:"news-section","aria-labelledby":"news-heading",className:"focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-lg",tabIndex:-1,children:e.jsxs(C,{animation:"slideUp",duration:S,delay:2*I,respectReducedMotion:!0,fallbackAnimation:"fadeIn",children:[e.jsx("h2",{id:"news-heading",className:"sr-only",children:"新着情報"}),e.jsx(Z,{isOffline:v,onRetryConnection:_,news:w,isLoading:h&&0===w.length})]})}),e.jsx("section",{id:"features-section","aria-labelledby":"features-heading",className:"focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-lg",tabIndex:-1,children:e.jsxs(C,{animation:"slideUp",duration:S,delay:3*I,respectReducedMotion:!0,fallbackAnimation:"fadeIn",children:[e.jsx("h2",{id:"features-heading",className:"sr-only",children:"アプリの主な機能"}),e.jsx(A,{isLoggedIn:D})]})}),e.jsx(C,{animation:"slideUp",duration:S,delay:4*I,respectReducedMotion:!0,fallbackAnimation:"fadeIn",children:e.jsx(q,{})}),e.jsx(C,{animation:"slideUp",duration:S,delay:5*I,respectReducedMotion:!0,fallbackAnimation:"fadeIn",children:e.jsx(O,{})}),e.jsx("section",{id:"usage-rules","aria-labelledby":"usage-heading",className:"focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-lg",tabIndex:-1,children:e.jsxs(C,{animation:"slideUp",duration:S,delay:6*I,respectReducedMotion:!0,fallbackAnimation:"fadeIn",children:[e.jsx("h2",{id:"usage-heading",className:"sr-only",children:"利用方法と料金について"}),e.jsx(W,{})]})}),e.jsx("section",{id:"dog-info-section","aria-labelledby":"dog-info-heading",className:"focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-lg",tabIndex:-1,children:e.jsxs(C,{animation:"slideUp",duration:S,delay:7*I,respectReducedMotion:!0,fallbackAnimation:"fadeIn",children:[e.jsx("h2",{id:"dog-info-heading",className:"sr-only",children:"ワンちゃんについての情報発信"}),e.jsx($,{})]})})]})]})]}),e.jsxs("div",{"aria-live":"polite","aria-atomic":"true",className:"sr-only",id:"status-region",children:[v&&"オフラインモードです。",k&&"ネットワークエラーが発生しています。",E&&!z&&"データを読み込んでいます。"]}),e.jsx("div",{"aria-live":"assertive","aria-atomic":"true",className:"sr-only",id:"announcement-region"})]})}export{P as Home};
