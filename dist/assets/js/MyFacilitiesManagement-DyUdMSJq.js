import{j as e}from"./motion-BHsL7Azw.js";import{r as s}from"./react-vendor-CMvmJHsS.js";import{a,L as t}from"./router-DXQOdrLL.js";import{u as r,S as l,B as i,s as c}from"./index-DrlBAW2y.js";import{C as n}from"./Card-DqVnP9TA.js";import{_ as d,n as m,j as x,M as o,s as h,as as j,Q as g,r as p,q as N,x as b,t as f}from"./ui-basic-CJygcczc.js";import"./heavy-features-Dlg1c9Yc.js";import"./supabase-D2tiogv8.js";const y="dog_park",v="pet_friendly_restaurant",u="pet_friendly_hotel",w="pet_shop",_="pet_salon",k="pet_hotel",C="veterinary_clinic",S={[y]:"ドッグラン",[v]:"ペット同伴可能店舗",[u]:"ペット同伴可能宿泊施設",[w]:"ペットショップ",[_]:"ペットサロン",[k]:"ペットホテル",[C]:"動物病院"};function $(){const{user:y}=r(),v=a(),[u,w]=s.useState([]),[_,k]=s.useState(!0);s.useEffect(()=>{(async()=>{if(y)try{const{data:e,error:s}=await c.from("pet_facilities").select("\n            id,\n            name,\n            description,\n            address,\n            latitude,\n            longitude,\n            phone,\n            website,\n            status,\n            category_id,\n            created_at,\n            updated_at\n          ").eq("owner_id",y.id).order("created_at",{ascending:!1});if(s)return;const a=e?.map(e=>({...e,category:e.category_id,category_name:S[e.category_id]||"その他施設"}))||[];w(a)}catch(e){}finally{k(!1)}})()},[y]);const C=s=>{const a={approved:{bg:"bg-green-100",text:"text-green-800",label:"公開中",icon:f},pending:{bg:"bg-yellow-100",text:"text-yellow-800",label:"審査中",icon:b},rejected:{bg:"bg-red-100",text:"text-red-800",label:"却下",icon:N},suspended:{bg:"bg-gray-100",text:"text-gray-800",label:"停止中",icon:N}},t=a[s]||a.pending,r=t.icon;return e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-1 ${t.bg} ${t.text}`,children:[e.jsx(r,{className:"w-4 h-4"}),e.jsx("span",{children:t.label})]})};return _?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600"})}):e.jsxs(e.Fragment,{children:[e.jsx(l,{title:"管理中ペット関連施設一覧",description:"あなたが管理するペット関連施設の一覧と詳細管理ページです。"}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center mb-4",children:e.jsxs(i,{variant:"secondary",size:"sm",onClick:()=>v("/dashboard"),className:"mr-4",children:[e.jsx(d,{className:"w-4 h-4 mr-1"}),"マイページに戻る"]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[e.jsx(m,{className:"w-8 h-8 text-teal-600 mr-3"}),"管理中ペット関連施設一覧"]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["あなたが管理するペット関連施設 (",u.length,"施設) の詳細管理"]})]}),e.jsx(t,{to:"/facility-registration",children:e.jsxs(i,{className:"bg-teal-600 hover:bg-teal-700",children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"新規施設登録"]})})]})]}),0===u.length?e.jsxs(n,{className:"p-12 text-center",children:[e.jsx(m,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"管理中のペット関連施設がありません"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"ペットショップ、動物病院、トリミングサロンなどの施設を登録しましょう。"}),e.jsx(t,{to:"/facility-registration",children:e.jsxs(i,{className:"bg-teal-600 hover:bg-teal-700",children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"施設登録を始める"]})})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:u.map(s=>e.jsx(n,{className:"hover:shadow-lg transition-all duration-200",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:s.name}),e.jsxs("div",{className:"flex items-center text-gray-600 mb-2",children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm",children:s.address})]}),e.jsx("div",{className:"text-sm text-teal-600 font-medium mb-3",children:s.category_name})]}),e.jsx("div",{className:"ml-4",children:C(s.status)})]}),s.description&&e.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-700 line-clamp-3",children:s.description})}),e.jsxs("div",{className:"space-y-2 mb-6",children:[s.phone&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm",children:s.phone})]}),s.website&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),e.jsx("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-teal-600 hover:text-teal-800 underline",children:"公式サイト"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"登録日"}),e.jsx("div",{className:"font-semibold",children:s.created_at?new Date(s.created_at).toLocaleDateString():"不明"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"ステータス"}),e.jsx("div",{className:"mt-1",children:C(s.status)})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(i,{className:"flex-1 bg-teal-600 hover:bg-teal-700",onClick:()=>v(`/facilities/${s.id}/edit`),children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),"管理・修正"]}),"approved"===s.status&&e.jsxs(i,{variant:"secondary",className:"px-4",onClick:()=>v(`/parks?view=facilities&facility=${s.id}`),children:[e.jsx(p,{className:"w-4 h-4 mr-2"}),"公開ページ"]})]})]})},s.id))})]})]})}export{$ as MyFacilitiesManagement};
