import{s as e}from"./index-DWDIgw5z.js";import{notifyAppAndLine as r}from"./notify-BxGWendd.js";import"./motion-CuO0nkIV.js";import"./react-vendor-cniURDpR.js";import"./heavy-features-BIdEME4r.js";import"./router-Cg6wfOY4.js";import"./supabase-B0bqaRGb.js";import"./ui-basic-icnN6BOT.js";const i=["system_alert","dog_registered","order","order_shipped","order_delivered","order_cancelled","reservation_reminder","vaccine_requested","vaccine_approved","vaccine_rejected","vaccine_approval_required","owner_verify_requested","owner_verify_approved","owner_verify_rejected","park_apply_requested","park_apply_approved","park_apply_rejected","park_application_received","park_application_status","park_approval_required","facility_registered","facility_apply_requested","facility_apply_approved","facility_apply_rejected","facility_approval_required","facility_public_on","facility_public_off"];async function t(r){const t=function(e){const r=e.toLowerCase().trim();return i.includes(r)?r:null}(r.type);if(!t)throw new Error(`Unsupported notifications.type: ${r.type}`);const a={user_id:r.user_id,type:t,title:r.title,message:r.message,link_url:r.link_url??null,data:r.data??null,read:!1},{error:p}=await e.from("notifications").insert(a);if(p)throw p}async function a(e){const{userId:i,title:a,message:p,linkUrl:s,type:o,data:n,sendLine:l=!0}=e;await t({user_id:i,type:o,title:a,message:p,link_url:s??null,data:n??null}),l&&await r({userId:i,title:a,message:p,linkUrl:s,kind:"alert",sendApp:!1,sendLine:!0})}export{a as notifyAppAndLineBoth};
