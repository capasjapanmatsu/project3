import{j as e,m as s,A as a}from"./motion-BHsL7Azw.js";import{r as t}from"./react-vendor-CMvmJHsS.js";import{c as l,a as i,L as r}from"./router-DXQOdrLL.js";import{u as n,f as c,p as d,d as m,e as x,B as o,g as h,m as p,t as u,s as j,i as b}from"./index-uLyXcG_I.js";import{C as g}from"./Card-DqVnP9TA.js";import{I as N}from"./ImageCropper-DQYM_AZK.js";import{L as f}from"./LocationEditMap-BowxdSuK.js";import{K as v,t as y,aK as w,J as _,R as k,q as S,a7 as I,C,n as q,F as P,aH as T,aI as E,b as O,M as $,Y as D,I as L,r as M,Q as F,aL as H,aF as R,U as z,aM as A,P as U,aJ as J,V as Q,a0 as Y,at as B,X as K}from"./ui-basic-kZxfFvQj.js";import"./heavy-features-Dlg1c9Yc.js";import"./supabase-D2tiogv8.js";import"./external-api-DuTtfpce.js";import"./Input-C1Rqwc7N.js";function W({lockId:l,parkName:i="ãƒ‰ãƒƒã‚°ãƒ‘ãƒ¼ã‚¯",purpose:r="entry",className:N="",onSuccess:f,onError:q,reservationId:P}){const{user:T}=n(),[E,O]=t.useState(null),[$,D]=t.useState(null),[L,M]=t.useState(null),[F,H]=t.useState(!1),[R,z]=t.useState(null),[A,U]=t.useState(!1),[J,Q]=t.useState(!1),[Y,B]=t.useState(!1),[K,W]=t.useState(""),[G,V]=t.useState(!1);t.useEffect(()=>{if(E&&$){const e=setInterval(()=>{const s=new Date,a=$.getTime()-s.getTime();if(a<=0)M("æœŸé™åˆ‡ã‚Œ"),O(null),D(null),clearInterval(e);else{const e=Math.floor(a/6e4),s=Math.floor(a%6e4/1e3);M(`${e}:${s.toString().padStart(2,"0")}`)}},1e3);return()=>clearInterval(e)}},[E,$]);const X=async()=>{if(T){H(!0),z(null);try{const{data:{session:e}}=await j.auth.getSession();if(!e?.access_token)throw new Error("èªè¨¼ãŒå¿…è¦ã§ã™");let s=5,a=null;if(P){const e=await(async e=>{try{const{data:s,error:a}=await j.from("reservations").select("\n          *,\n          dog_park:dog_parks(*),\n          dog:dogs(*)\n        ").eq("id",e).single();return a?null:s}catch(s){return null}})(P);if(e&&"whole_facility"===e.reservation_type&&(a=(e=>{try{const s=new Date(e.date),a=e.start_time.split(":").map(Number),t=a[0]??0,l=a[1]??0;return s.setHours(t,l,0,0),new Date(s.getTime()+60*e.duration*60*1e3)}catch(s){return null}})(e),a)){const e=new Date,t=a.getTime()-e.getTime();s=Math.max(1,Math.ceil(t/6e4))}}const t=await fetch("https://onmcivwxtzqajcovptgf.supabase.co/functions/v1/generate-pin",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.access_token}`},body:JSON.stringify({lock_id:l,purpose:r,expiry_minutes:s,reservation_id:P||void 0})});if(!t.ok){const e=await t.json();throw new Error(e.error||"PINã‚³ãƒ¼ãƒ‰ã®ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ")}const{pin:i,expires_at:n}=await t.json();O(i),D(new Date(n)),V(!0),Q(!0),await b(),f&&f(i),setTimeout(()=>{Q(!1),V(!1)},3e3)}catch(e){const s=e instanceof Error?e.message:"PINã‚³ãƒ¼ãƒ‰ã®ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ";if(s.startsWith("PAYMENT_REQUIRED:")){const e=s.replace("PAYMENT_REQUIRED:","").trim();W(e),B(!0),z(null)}else z(s),B(!1);q&&q(s)}finally{H(!1)}}};return e.jsx(s.div,{className:N,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsxs(s.h3,{className:"text-lg font-semibold mb-4 flex items-center justify-center",variants:c,initial:"initial",animate:"animate",children:[e.jsx(s.div,{animate:G?{rotate:[0,15,-15,0]}:{},transition:{duration:.6,repeat:2},children:e.jsx(v,{className:"w-5 h-5 text-blue-600 mr-2"})}),i,"ã®","entry"===r?"å…¥å£":"å‡ºå£"]}),e.jsx(a,{mode:"wait",children:E?e.jsxs(s.div,{className:"space-y-4",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},children:[e.jsxs(s.div,{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-lg border-2 border-blue-200 mx-auto",variants:d,initial:"initial",animate:G?"animate":"initial",children:[e.jsx("p",{className:"text-sm text-blue-800 mb-1",children:"PINã‚³ãƒ¼ãƒ‰:"}),e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(s.p,{className:"text-3xl font-bold tracking-widest text-blue-700",initial:{scale:1},animate:G?{scale:[1,1.1,1]}:{},transition:{duration:.6},children:E}),e.jsx(s.button,{onClick:async()=>{if(E)try{await navigator.clipboard.writeText(E),U(!0),await u(),setTimeout(()=>U(!1),2e3)}catch{}},className:"p-1 text-blue-600 hover:text-blue-800 transition-colors",title:"ã‚³ãƒ”ãƒ¼",variants:m,whileHover:"hover",whileTap:"tap",children:e.jsx(a,{mode:"wait",children:A?e.jsx(s.div,{variants:x,initial:"initial",animate:"animate",exit:{scale:0,opacity:0},children:e.jsx(y,{className:"w-5 h-5 text-green-600"})},"copied"):e.jsx(s.div,{variants:x,initial:"initial",animate:"animate",exit:{scale:0,opacity:0},children:e.jsx(w,{className:"w-5 h-5"})},"copy")})})]})]}),e.jsx(s.div,{className:"bg-yellow-50 p-2 rounded-lg",variants:c,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-yellow-800",children:[e.jsx(s.div,{animate:{rotate:[0,360]},transition:{duration:2,repeat:1/0,ease:"linear"},children:e.jsx(_,{className:"w-4 h-4"})}),e.jsxs("span",{className:"font-medium",children:["æœ‰åŠ¹æœŸé™: ",L]})]})}),e.jsx("div",{className:"flex justify-center space-x-3",children:e.jsx(s.div,{variants:m,whileHover:"hover",whileTap:"tap",children:e.jsxs(o,{onClick:()=>{X()},variant:"secondary",size:"sm",isLoading:F,children:[e.jsx(k,{className:"w-4 h-4 mr-1"}),"å†ç”Ÿæˆ"]})})}),e.jsxs(s.p,{className:"text-xs text-gray-500",variants:c,children:["entry"===r?"å…¥å ´":"é€€å ´","æ™‚ã«ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã®ã‚­ãƒ¼ãƒ‘ãƒƒãƒ‰ã«ä¸Šè¨˜ã®PINã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"]})]},"pin-display"):e.jsxs(s.div,{className:"space-y-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[e.jsxs(s.p,{className:"text-gray-600 mb-4",variants:c,children:["entry"===r?"å…¥å ´":"é€€å ´","ç”¨ã®PINã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¾ã™ã€‚",e.jsx("br",{}),"ç”Ÿæˆã•ã‚ŒãŸPINã‚³ãƒ¼ãƒ‰ã¯5åˆ†é–“æœ‰åŠ¹ã§ã™ã€‚"]}),e.jsxs(a,{children:[R&&e.jsxs(s.div,{className:"bg-red-50 p-3 rounded-lg flex items-center justify-center text-red-600",variants:h,initial:"initial",animate:"shake",exit:{opacity:0,y:-10},children:[e.jsx(S,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:R})]}),Y&&e.jsxs(s.div,{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",variants:p,initial:"initial",animate:"animate",exit:"exit",children:[e.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[e.jsx(I,{className:"w-6 h-6 text-blue-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"æ±ºæ¸ˆãŒå¿…è¦ã§ã™"}),e.jsx("p",{className:"text-sm text-blue-800 mb-4",children:K})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(s.div,{variants:m,whileHover:"hover",whileTap:"tap",children:e.jsxs(o,{onClick:()=>window.location.href="/subscription-intro",className:"w-full bg-purple-600 hover:bg-purple-700",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã«åŠ å…¥ï¼ˆÂ¥3,800/æœˆï¼‰"]})}),e.jsx(s.div,{variants:m,whileHover:"hover",whileTap:"tap",children:e.jsxs(o,{onClick:()=>window.location.href="/parks",variant:"secondary",className:"w-full",children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"1æ—¥åˆ¸ã‚’è³¼å…¥ï¼ˆÂ¥800ï¼‰"]})})]}),e.jsxs("p",{className:"text-xs text-blue-700 mt-3",children:["â€¢ ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ï¼šå…¨å›½ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒä½¿ã„æ”¾é¡Œ",e.jsx("br",{}),"â€¢ 1æ—¥åˆ¸ï¼šé¸æŠã—ãŸãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã§24æ™‚é–“åˆ©ç”¨å¯èƒ½"]})]}),J&&e.jsxs(s.div,{className:"bg-green-50 p-3 rounded-lg flex items-center justify-center text-green-600",variants:x,initial:"initial",animate:"animate",exit:{opacity:0,scale:.8},children:[e.jsx(y,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"ğŸ‰ PINã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¾ã—ãŸ"})]})]}),e.jsx(s.div,{variants:m,whileHover:"hover",whileTap:"tap",children:e.jsxs(o,{onClick:()=>{X()},isLoading:F,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"ğŸš€ ","entry"===r?"å…¥å ´":"é€€å ´","ç”¨PINã‚’ç”Ÿæˆ"]})})]},"pin-generate")})]})})})}const G={overview:{label:"æ–½è¨­å…¨æ™¯",description:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®å…¨ä½“ãŒè¦‹æ¸¡ã›ã‚‹å†™çœŸ",icon:q,required:!0},entrance:{label:"å…¥å£",description:"å…¥å£ã®æ§˜å­ãŒã‚ã‹ã‚‹å†™çœŸ",icon:$,required:!0},gate:{label:"ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯",description:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ï¼ˆå…¥é€€å ´ç®¡ç†ï¼‰ã®å†™çœŸ",icon:O,required:!0},large_dog_area:{label:"å¤§å‹çŠ¬ã‚¨ãƒªã‚¢",description:"å¤§å‹çŠ¬ç”¨ã®ã‚¨ãƒªã‚¢ã®å†™çœŸ",icon:q,required:!1,conditionalOn:"large_dog_area"},small_dog_area:{label:"å°å‹çŠ¬ã‚¨ãƒªã‚¢",description:"å°å‹çŠ¬ç”¨ã®ã‚¨ãƒªã‚¢ã®å†™çœŸ",icon:q,required:!1,conditionalOn:"small_dog_area"},private_booth:{label:"ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ¼ã‚¹",description:"ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ¼ã‚¹ã®å†…éƒ¨ã¨å¤–è¦³",icon:q,required:!1,conditionalOn:"private_booths"},parking:{label:"é§è»Šå ´",description:"é§è»Šå ´ã®æ§˜å­ãŒã‚ã‹ã‚‹å†™çœŸ",icon:E,required:!1,conditionalOn:"facilities.parking"},shower:{label:"ã‚·ãƒ£ãƒ¯ãƒ¼è¨­å‚™",description:"ã‚·ãƒ£ãƒ¯ãƒ¼è¨­å‚™ã®å†™çœŸ",icon:T,required:!1,conditionalOn:"facilities.shower"},restroom:{label:"ãƒˆã‚¤ãƒ¬",description:"ãƒˆã‚¤ãƒ¬è¨­å‚™ã®å†™çœŸ",icon:P,required:!1,conditionalOn:"facilities.restroom"},agility:{label:"ã‚¢ã‚¸ãƒªãƒ†ã‚£è¨­å‚™",description:"ã‚¢ã‚¸ãƒªãƒ†ã‚£è¨­å‚™ã®å†™çœŸ",icon:q,required:!1,conditionalOn:"facilities.agility"},rest_area:{label:"ä¼‘æ†©ã‚¹ãƒšãƒ¼ã‚¹",description:"ä¼‘æ†©ã‚¹ãƒšãƒ¼ã‚¹ã®å†™çœŸ",icon:q,required:!1,conditionalOn:"facilities.rest_area"},water_station:{label:"çµ¦æ°´è¨­å‚™",description:"çµ¦æ°´è¨­å‚™ã®å†™çœŸ",icon:q,required:!1,conditionalOn:"facilities.water_station"}};function V(){const{id:s}=l(),{user:a}=n();i();const[c,d]=t.useState(null),[m,x]=t.useState(!0),[h,p]=t.useState(""),[u,b]=t.useState(""),[w,_]=t.useState("overview"),[k,I]=t.useState([]),[T,E]=t.useState(null),[O,V]=t.useState("entry"),[X,Z]=t.useState([]),[ee,se]=t.useState(!1),[ae,te]=t.useState({title:"",description:"",start_date:"",end_date:"",is_emergency:!1,notify_users:!0}),[le,ie]=t.useState(!1),[re,ne]=t.useState(!1),[ce,de]=t.useState(!1),[me,xe]=t.useState(!1),[oe,he]=t.useState(!1),[pe,ue]=t.useState(""),[je,be]=t.useState(!1),[ge,Ne]=t.useState({max_capacity:0,facilities:{parking:!1,shower:!1,restroom:!1,agility:!1,rest_area:!1,water_station:!1},large_dog_area:!1,small_dog_area:!1,private_booths:!1,private_booth_count:0,facility_details:"",description:"",address:"",latitude:null,longitude:null,is_public:!1}),[fe,ve]=t.useState([]),[ye,we]=t.useState(!1),[_e,ke]=t.useState(""),[Se,Ie]=t.useState(null),[Ce,qe]=t.useState(!1),[Pe,Te]=t.useState(null);t.useEffect(()=>{s&&a&&Ee()},[s,a]),t.useEffect(()=>{c&&Oe()},[c]);const Ee=async()=>{if(s&&a)try{x(!0),p("");const{data:e,error:t}=await j.from("dog_parks").select("*").eq("id",s).eq("owner_id",a.id).single();if(t)throw new Error("ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");d(e),Ne({max_capacity:e.max_capacity||0,facilities:{parking:e.facilities?.parking||!1,shower:e.facilities?.shower||!1,restroom:e.facilities?.restroom||!1,agility:e.facilities?.agility||!1,rest_area:e.facilities?.rest_area||!1,water_station:e.facilities?.water_station||!1},large_dog_area:e.large_dog_area||!1,small_dog_area:e.small_dog_area||!1,private_booths:e.private_booths||!1,private_booth_count:e.private_booth_count||0,facility_details:e.facility_details||"",description:e.description||"",address:e.address||"",latitude:e.latitude||null,longitude:e.longitude||null,is_public:e.is_public||!1});const{data:l,error:i}=await j.from("smart_locks").select("*").eq("park_id",s);!i&&l&&(I(l),l.length>0&&E(l[0]))}catch(e){p(e.message||"ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ")}finally{x(!1)}},Oe=async()=>{if(c)try{const{data:e,error:s}=await j.from("dog_park_facility_images").select("*").eq("park_id",c.id);if(s&&"PGRST116"!==s.code)return;const a=Object.entries(G).filter(([,e])=>{if(e.required)return!0;if(e.conditionalOn&&c){const s=e.conditionalOn.split(".");if(1===s.length)return c[s[0]]??!1;if(2===s.length){const e=c[s[0]];if(e&&"object"==typeof e)return e[s[1]]??!1}}return!1}).map(([e])=>e).map(s=>{const a=(e||[]).find(e=>e.image_type===s);return{id:a?.id,image_type:s,image_url:a?.image_url,is_approved:a?.is_approved??null,admin_notes:a?.admin_notes}});ve(a)}catch(e){}};return m?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):c?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:e.jsxs(r,{to:"/my-parks-management",className:"flex items-center text-blue-600 hover:text-blue-800",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"ç®¡ç†ä¸­ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ä¸€è¦§ã«æˆ»ã‚‹"]})})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[m&&e.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),!m&&c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-lg border p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:c.name}),e.jsx("p",{className:"text-gray-600 mt-1",children:c.address}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(L,{className:"w-4 h-4 text-yellow-400 fill-current mr-1"}),e.jsx("span",{className:"text-sm font-medium",children:c.average_rating.toFixed(1)}),e.jsxs("span",{className:"text-sm text-gray-500 ml-1",children:["(",c.review_count,"ä»¶)"]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(r,{to:`/parks/${c.id}`,children:e.jsxs(o,{variant:"secondary",className:"min-w-[100px]",children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"å…¬é–‹ãƒšãƒ¼ã‚¸"]})}),e.jsxs(o,{onClick:()=>ne(!0),className:"min-w-[100px]",children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"è¨­å®šç·¨é›†"]})]})]})}),h&&e.jsxs("div",{className:"bg-red-100 border border-red-300 text-red-800 rounded-lg p-4 flex items-start",children:[e.jsx(S,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsx("p",{children:h})]}),u&&e.jsxs("div",{className:"bg-green-100 border border-green-300 text-green-800 rounded-lg p-4 flex items-start",children:[e.jsx(y,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsx("p",{children:u})]}),e.jsx(g,{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("div",{className:"flex space-x-8 px-6",children:[e.jsxs("button",{className:"py-4 px-2 border-b-2 font-medium text-sm transition-colors "+("overview"===w?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>_("overview"),children:[e.jsx(q,{className:"w-4 h-4 inline mr-2"}),"æ¦‚è¦ãƒ»ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹"]}),e.jsxs("button",{className:"py-4 px-2 border-b-2 font-medium text-sm transition-colors "+("stats"===w?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>_("stats"),children:[e.jsx(L,{className:"w-4 h-4 inline mr-2"}),"çµ±è¨ˆãƒ»åç›Š"]}),e.jsxs("button",{className:"py-4 px-2 border-b-2 font-medium text-sm transition-colors "+("pins"===w?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>_("pins"),children:[e.jsx(v,{className:"w-4 h-4 inline mr-2"}),"PINã‚³ãƒ¼ãƒ‰ç®¡ç†"]}),e.jsxs("button",{className:"py-4 px-2 border-b-2 font-medium text-sm transition-colors "+("settings"===w?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>_("settings"),children:[e.jsx(H,{className:"w-4 h-4 inline mr-2"}),"è¨­å®š"]}),e.jsxs("button",{className:"py-4 px-2 border-b-2 font-medium text-sm transition-colors "+("location"===w?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>_("location"),children:[e.jsx($,{className:"w-4 h-4 inline mr-2"}),"ä½ç½®èª¿æ•´"]})]})})}),"overview"===w&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(g,{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[e.jsx(P,{className:"w-6 h-6 text-blue-600 mr-2"}),"åŸºæœ¬æƒ…å ±"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"æ–½è¨­æƒ…å ±"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"ä½æ‰€:"})," ",c.address]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:"})," ","approved"===c.status?"é‹å–¶ä¸­":"å¯©æŸ»ä¸­"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"æ–™é‡‘:"})," Â¥",c.price||"800","/æ—¥"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"æœ€å¤§åå®¹äººæ•°:"})," ",c.max_capacity||"æœªè¨­å®š","äºº"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"ç¾åœ¨ã®åˆ©ç”¨è€…æ•°:"})," ",c.current_occupancy||0,"äºº"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"è©•ä¾¡:"})," â˜…",c.average_rating?.toFixed(1)||"0.0"," (",c.review_count||0,"ä»¶)"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"è¨­å‚™æƒ…å ±"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries({parking:"é§è»Šå ´",shower:"ã‚·ãƒ£ãƒ¯ãƒ¼è¨­å‚™",restroom:"ãƒˆã‚¤ãƒ¬",agility:"ã‚¢ã‚¸ãƒªãƒ†ã‚£è¨­å‚™",rest_area:"ä¼‘æ†©ã‚¹ãƒšãƒ¼ã‚¹",water_station:"çµ¦æ°´è¨­å‚™"}).map(([s,a])=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 rounded "+(c.facilities?.[s]?"bg-green-500":"bg-gray-300")}),e.jsx("span",{className:"text-sm",children:a})]},s))}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"å¤§å‹çŠ¬ã‚¨ãƒªã‚¢:"})," ",c.large_dog_area?"ã‚ã‚Š":"ãªã—"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"å°å‹çŠ¬ã‚¨ãƒªã‚¢:"})," ",c.small_dog_area?"ã‚ã‚Š":"ãªã—"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ¼ã‚¹:"})," ",c.private_booths?`${c.private_booth_count||1}å®¤`:"ãªã—"]})]})]})]})]}),"approved"===c?.status&&e.jsxs(g,{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[e.jsx(M,{className:"w-6 h-6 text-blue-600 mr-2"}),"å…¬é–‹è¨­å®š"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ä¸€è¦§ã«è¡¨ç¤º"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:ge.is_public?"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ä¸€è¦§ã‚„ãƒãƒƒãƒ—ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚åˆ©ç”¨è€…ãŒæ¤œç´¢ãƒ»äºˆç´„ã§ãã¾ã™ã€‚":"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ä¸€è¦§ã«è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã€‚ç›´æ¥URLã‚’çŸ¥ã‚‹äººã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã§ã™ã€‚"})]}),e.jsx("div",{className:"ml-4",children:e.jsx("button",{type:"button",disabled:me,onClick:()=>(async e=>{if(s&&a)try{xe(!0),p("");const{error:t}=await j.from("dog_parks").update({is_public:e,updated_at:(new Date).toISOString()}).eq("id",s).eq("owner_id",a.id);if(t)throw t;Ne(s=>({...s,is_public:e})),d(s=>s?{...s,is_public:e}:null),b(e?"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’å…¬é–‹ã—ã¾ã—ãŸ":"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’éå…¬é–‹ã«ã—ã¾ã—ãŸ"),setTimeout(()=>b(""),3e3)}catch(t){p("å…¬é–‹è¨­å®šã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ: "+t.message)}finally{xe(!1)}})(!ge.is_public),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${ge.is_public?"bg-blue-600":"bg-gray-200"} ${me?"opacity-50 cursor-not-allowed":""}`,children:e.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(ge.is_public?"translate-x-6":"translate-x-1")})})})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx("div",{className:"w-3 h-3 rounded-full "+(ge.is_public?"bg-green-500":"bg-yellow-500")}),e.jsx("span",{className:"font-medium",children:ge.is_public?"å…¬é–‹ä¸­":"éå…¬é–‹"})]}),!ge.is_public&&e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(S,{className:"w-5 h-5 text-yellow-600 mt-0.5 mr-2"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"æ³¨æ„:"})," éå…¬é–‹è¨­å®šä¸­ã¯ã€ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒä¸€è¦§ã«è¡¨ç¤ºã•ã‚Œãšã€æ–°ã—ã„åˆ©ç”¨è€…ã‹ã‚‰ã®äºˆç´„ã‚’å—ã‘ä»˜ã‘ã§ãã¾ã›ã‚“ã€‚"]})]})})]})]}),e.jsxs(g,{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[e.jsx(C,{className:"w-6 h-6 text-blue-600 mr-2"}),"ä»Šæ—¥ã®çµ±è¨ˆ"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(C,{className:"w-5 h-5 text-blue-600"}),e.jsx("h4",{className:"font-medium text-blue-900",children:"ä»Šæ—¥ã®äºˆç´„"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"5ä»¶"}),e.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"å‰æ—¥æ¯” +2ä»¶"})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(R,{className:"w-5 h-5 text-green-600"}),e.jsx("h4",{className:"font-medium text-green-900",children:"ä»Šæ—¥ã®åç›Š"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"Â¥4,000"}),e.jsx("p",{className:"text-xs text-green-700 mt-1",children:"å‰æ—¥æ¯” +Â¥1,600"})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(z,{className:"w-5 h-5 text-purple-600"}),e.jsx("h4",{className:"font-medium text-purple-900",children:"åˆ©ç”¨è€…æ•°"})]}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[c.current_occupancy,"äºº"]}),e.jsxs("p",{className:"text-xs text-purple-700 mt-1",children:["æœ€å¤§: ",c.max_capacity,"äºº"]})]})]})]}),e.jsxs(g,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[e.jsx(A,{className:"w-6 h-6 text-blue-600 mr-2"}),"ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ç®¡ç†"]}),e.jsxs(o,{onClick:()=>se(!0),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹äºˆå®šã‚’è¿½åŠ "]})]}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx(A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹äºˆå®šãŒã‚ã‚Šã¾ã›ã‚“"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"æ–½è¨­ã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹äºˆå®šã‚’è¿½åŠ ã—ã¦ãã ã•ã„"})]}),e.jsx("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(S,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ©Ÿèƒ½ã«ã¤ã„ã¦"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"â€¢ ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­ã¯æ–°è¦äºˆç´„ã‚’å—ã‘ä»˜ã‘ã¾ã›ã‚“"}),e.jsx("li",{children:"â€¢ æ—¢å­˜ã®äºˆç´„ãŒã‚ã‚‹å ´åˆã¯äº‹å‰ã«åˆ©ç”¨è€…ã«é€£çµ¡ã—ã¦ãã ã•ã„"}),e.jsx("li",{children:"â€¢ ç·Šæ€¥ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã®å ´åˆã¯å³åº§ã«æ–½è¨­ãŒåˆ©ç”¨åœæ­¢ã«ãªã‚Šã¾ã™"}),e.jsx("li",{children:"â€¢ ãƒ¦ãƒ¼ã‚¶ãƒ¼é€šçŸ¥ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã¨ã€åˆ©ç”¨è€…ã«ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ãŒé€ä¿¡ã•ã‚Œã¾ã™"})]})]})]})})]})]}),"stats"===w&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(g,{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[e.jsx(L,{className:"w-6 h-6 text-blue-600 mr-2"}),"åˆ©ç”¨çµ±è¨ˆ"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(C,{className:"w-5 h-5 text-blue-600"}),e.jsx("h4",{className:"font-medium text-blue-900",children:"ä»Šæœˆã®äºˆç´„"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"32ä»¶"}),e.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"å‰æœˆæ¯” +12%"})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(R,{className:"w-5 h-5 text-green-600"}),e.jsx("h4",{className:"font-medium text-green-900",children:"ä»Šæœˆã®åç›Š"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"Â¥25,600"}),e.jsx("p",{className:"text-xs text-green-700 mt-1",children:"å‰æœˆæ¯” +8%"})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(z,{className:"w-5 h-5 text-purple-600"}),e.jsx("h4",{className:"font-medium text-purple-900",children:"åˆ©ç”¨è€…æ•°"})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"128äºº"}),e.jsx("p",{className:"text-xs text-purple-700 mt-1",children:"å‰æœˆæ¯” +15%"})]})]}),e.jsx("div",{className:"h-64 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx("p",{className:"text-gray-500",children:"åˆ©ç”¨çµ±è¨ˆã‚°ãƒ©ãƒ•ï¼ˆå®Ÿè£…äºˆå®šï¼‰"})})]}),e.jsxs(g,{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[e.jsx(R,{className:"w-6 h-6 text-blue-600 mr-2"}),"åç›Šæƒ…å ±"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:"åç›Šé…åˆ†"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-800 mb-1",children:"ã‚ªãƒ¼ãƒŠãƒ¼å–ã‚Šåˆ†ï¼ˆ80%ï¼‰"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"Â¥20,480"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-800 mb-1",children:"ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æ‰‹æ•°æ–™ï¼ˆ20%ï¼‰"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"Â¥5,120"})]})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-green-900 mb-3",children:"åç›Šå†…è¨³"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-800 mb-1",children:"é€šå¸¸åˆ©ç”¨"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:"Â¥12,800"}),e.jsx("p",{className:"text-xs text-green-700",children:"16ä»¶"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-800 mb-1",children:"æ–½è¨­è²¸ã—åˆ‡ã‚Š"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:"Â¥8,800"}),e.jsx("p",{className:"text-xs text-green-700",children:"2ä»¶"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-800 mb-1",children:"ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ¼ã‚¹"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:"Â¥4,000"}),e.jsx("p",{className:"text-xs text-green-700",children:"2ä»¶"})]})]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-purple-900 mb-3",children:"æŒ¯è¾¼æƒ…å ±"}),e.jsx("p",{className:"text-sm text-purple-800 mb-2",children:"æŒ¯è¾¼ã¯æ¯æœˆ15æ—¥ã«å‰æœˆåˆ†ã‚’ä¸€æ‹¬ã§è¡Œã„ã¾ã™ã€‚æŒ¯è¾¼æ‰‹æ•°æ–™ã¯å½“ç¤¾è² æ‹…ã§ã™ã€‚"}),e.jsx(r,{to:"/owner-payment-system",children:e.jsxs(o,{size:"sm",className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"æŒ¯è¾¼æƒ…å ±ã‚’ç¢ºèª"]})})]})]})]})]}),"pins"===w&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(g,{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[e.jsx(v,{className:"w-6 h-6 text-blue-600 mr-2"}),"ã‚ªãƒ¼ãƒŠãƒ¼ç”¨PINã‚³ãƒ¼ãƒ‰ç™ºè¡Œ"]}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(y,{className:"w-5 h-5 text-blue-600 mt-1 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"ã‚ªãƒ¼ãƒŠãƒ¼ç‰¹æ¨©"}),e.jsx("p",{children:"ã‚ªãƒ¼ãƒŠãƒ¼ã¯æ±ºæ¸ˆä¸è¦ã§PINã‚³ãƒ¼ãƒ‰ã‚’ç™ºè¡Œã§ãã¾ã™ã€‚æ–½è¨­ã®ç®¡ç†ã‚„ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã«ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsx("li",{children:"PINã‚³ãƒ¼ãƒ‰ã¯5åˆ†é–“æœ‰åŠ¹ã§ã™"}),e.jsx("li",{children:"å…¥å ´ãƒ»é€€å ´ãã‚Œãã‚Œã§PINã‚³ãƒ¼ãƒ‰ãŒå¿…è¦ã§ã™"}),e.jsx("li",{children:"ã‚¹ã‚¿ãƒƒãƒ•ã¨å…±æœ‰ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™"}),e.jsx("li",{children:"ç®¡ç†ç”¨é€”ãªã®ã§æ±ºæ¸ˆã¯ä¸è¦ã§ã™"})]})]})]})}),e.jsxs("div",{className:"flex justify-center space-x-4 mb-4",children:[e.jsxs("button",{className:"px-6 py-3 rounded-lg flex items-center space-x-2 "+("entry"===O?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),onClick:()=>V("entry"),children:[e.jsx(D,{className:"w-5 h-5"}),e.jsx("span",{children:"å…¥å ´"})]}),e.jsxs("button",{className:"px-6 py-3 rounded-lg flex items-center space-x-2 "+("exit"===O?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),onClick:()=>V("exit"),children:[e.jsx(D,{className:"w-5 h-5 rotate-180"}),e.jsx("span",{children:"é€€å ´"})]})]}),k.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã‚’é¸æŠ"}),e.jsx("select",{value:T?.id||"",onChange:e=>{const s=k.find(s=>s.id===e.target.value);E(s||null)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:k.map(s=>e.jsx("option",{value:s.id,children:s.lock_name},s.id))})]}),T?e.jsx("div",{className:"mt-6",children:e.jsx(W,{lockId:T.lock_id,parkName:c.name,purpose:O,onSuccess:e=>{b(`PINã‚³ãƒ¼ãƒ‰ã€Œ${e}ã€ã‚’ç™ºè¡Œã—ã¾ã—ãŸã€‚æœ‰åŠ¹æœŸé™ã¯5åˆ†é–“ã§ã™ã€‚`),setTimeout(()=>b(""),5e3)},onError:e=>{p(e),setTimeout(()=>p(""),5e3)}})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(v,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“"}),e.jsx(o,{onClick:()=>_("settings"),children:"ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã‚’è¨­å®šã™ã‚‹"})]})]}),e.jsx(g,{className:"p-6 bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(v,{className:"w-6 h-6 text-blue-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"PINã‚³ãƒ¼ãƒ‰ã«ã¤ã„ã¦"}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-2",children:[e.jsx("p",{children:"â€¢ åˆ©ç”¨è€…ã¯PINã‚³ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¦å…¥é€€å ´ã—ã¾ã™"}),e.jsx("p",{children:"â€¢ PINã‚³ãƒ¼ãƒ‰ã¯5åˆ†é–“æœ‰åŠ¹ã§ã€åˆ©ç”¨è€…ãŒæ”¯æ‰•ã„å¾Œã«ç™ºè¡Œã•ã‚Œã¾ã™"}),e.jsx("p",{children:"â€¢ ã‚ªãƒ¼ãƒŠãƒ¼ã¯æ±ºæ¸ˆä¸è¦ã§PINã‚³ãƒ¼ãƒ‰ã‚’ç™ºè¡Œã§ãã¾ã™"}),e.jsx("p",{children:"â€¢ æ–½è¨­è²¸ã—åˆ‡ã‚Šã®å ´åˆã€åˆ©ç”¨è€…ã¯å‹é”ã«PINã‚³ãƒ¼ãƒ‰ã‚’å…±æœ‰ã§ãã¾ã™"})]})]})]})})]}),"settings"===w&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(g,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(A,{className:"w-5 h-5 text-blue-600 mr-2"}),"åŸºæœ¬è¨­å®š"]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"æ–½è¨­ã®åŸºæœ¬æƒ…å ±ã‚„è¨­å‚™æƒ…å ±ã‚’ç·¨é›†ã§ãã¾ã™ã€‚ä½æ‰€ã¨æ–™é‡‘ã¯å¤‰æ›´ã§ãã¾ã›ã‚“ã€‚"}),e.jsx(r,{to:`/parks/${c.id}/edit`,children:e.jsxs(o,{children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"åŸºæœ¬æƒ…å ±ã‚’ç·¨é›†"]})})]}),e.jsxs(g,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(J,{className:"w-5 h-5 text-blue-600 mr-2"}),"æ–½è¨­ç”»åƒç®¡ç†"]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"å„è¨­å‚™ã®ç”»åƒã‚’ç®¡ç†ã§ãã¾ã™ã€‚ç”»åƒã¯ã™ã¹ã¦1:1ã§ãƒˆãƒªãƒŸãƒ³ã‚°ã•ã‚Œã€æœ€é©åŒ–ã•ã‚Œã¾ã™ã€‚"}),h&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700",children:h}),u&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700",children:u}),e.jsx("div",{className:"space-y-6",children:fe.map(s=>{const a=G[s.image_type],t=a?.icon||q;return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(t,{className:"w-5 h-5 text-blue-600"}),e.jsx("h4",{className:"font-medium text-gray-900",children:a?.label||s.image_type})]}),!0===s.is_approved&&e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"æ‰¿èªæ¸ˆã¿"}),!1===s.is_approved&&e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:"å´ä¸‹"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:a?.description||"ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„"}),s.image_url?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"aspect-square w-48 bg-gray-100 rounded-lg overflow-hidden cursor-pointer",onClick:()=>Te(s.image_url||null),children:e.jsx("img",{src:s.image_url,alt:a?.label||s.image_type,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://via.placeholder.com/400x400?text=Image+Not+Available"}})}),e.jsxs("div",{className:"absolute top-2 right-2 flex space-x-2",children:[e.jsx("button",{onClick:()=>Te(s.image_url||null),className:"p-1 bg-white rounded-full shadow hover:bg-gray-100",children:e.jsx(M,{className:"w-4 h-4 text-blue-600"})}),e.jsx("button",{onClick:()=>handleImageDelete(s.id,s.image_type),className:"p-1 bg-white rounded-full shadow hover:bg-gray-100",disabled:Ce,children:e.jsx(Q,{className:"w-4 h-4 text-red-600"})})]})]}),!1===s.is_approved&&s.admin_notes&&e.jsxs("div",{className:"p-3 bg-red-50 rounded-lg text-sm text-red-800",children:[e.jsx("p",{className:"font-medium",children:"å´ä¸‹ç†ç”±:"}),e.jsx("p",{children:s.admin_notes})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"file",id:`replace-image-${s.image_type}`,accept:"image/*",className:"hidden",onChange:e=>{const a=e.target.files?.[0];a&&handleImageSelect(s.image_type,a)}}),e.jsxs("label",{htmlFor:`replace-image-${s.image_type}`,className:"cursor-pointer inline-flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"ç”»åƒã‚’å…¥ã‚Œæ›¿ãˆã‚‹"]})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-500 transition-colors",children:[e.jsx("input",{type:"file",id:`upload-image-${s.image_type}`,accept:"image/*",className:"hidden",onChange:e=>{const a=e.target.files?.[0];a&&handleImageSelect(s.image_type,a)}}),e.jsxs("label",{htmlFor:`upload-image-${s.image_type}`,className:"cursor-pointer flex flex-col items-center",children:[e.jsx(B,{className:"w-8 h-8 text-gray-400 mb-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç”»åƒã‚’é¸æŠ"})]})]}),s.file&&e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded",children:[e.jsx("span",{className:"text-sm truncate",children:s.file.name}),e.jsx(o,{size:"sm",onClick:()=>handleImageUpload(s.image_type),disabled:Ce,children:Ce?"ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä¸­...":"ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰"})]})]})]},s.image_type)})})]}),e.jsxs(g,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(R,{className:"w-5 h-5 text-blue-600 mr-2"}),"æ–™é‡‘è¨­å®š"]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"æ–™é‡‘ä½“ç³»ã¯å…¨å›½çµ±ä¸€ã§ã™ã€‚å¤‰æ›´ã¯ã§ãã¾ã›ã‚“ã€‚"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:"â€¢ é€šå¸¸åˆ©ç”¨:"}),e.jsx("span",{children:"Â¥800/æ—¥ (å›ºå®š)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:"â€¢ æ–½è¨­è²¸ã—åˆ‡ã‚Š:"}),e.jsx("span",{children:"Â¥4,400/æ™‚é–“ (å›ºå®š)"})]})]})]})]}),e.jsx(g,{className:"p-6 bg-gray-50",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(P,{className:"w-6 h-6 text-gray-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"é‹å–¶ã‚µãƒãƒ¼ãƒˆ"}),e.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[e.jsx("p",{children:"â€¢ è¨­å®šã«é–¢ã™ã‚‹ã”è³ªå•ã¯é‹å–¶äº‹å‹™å±€ã¾ã§ãŠå•ã„åˆã‚ã›ãã ã•ã„"}),e.jsx("p",{children:"â€¢ ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã‚·ã‚¹ãƒ†ãƒ ã®è¨­ç½®ãƒ»è¨­å®šã‚µãƒãƒ¼ãƒˆã‚’æä¾›ã—ã¦ã„ã¾ã™"}),e.jsx("p",{children:"â€¢ é‹å–¶é–‹å§‹å¾Œã‚‚ç¶™ç¶šçš„ãªã‚µãƒãƒ¼ãƒˆã‚’è¡Œã„ã¾ã™"}),e.jsx("p",{children:"â€¢ ğŸ“§ ã‚µãƒãƒ¼ãƒˆçª“å£: info@dogparkjp.com"})]})]})]})})]}),"location"===w&&e.jsx("div",{className:"space-y-6",children:e.jsxs(g,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-6 flex items-center",children:[e.jsx($,{className:"w-6 h-6 text-blue-600 mr-2"}),"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®ä½ç½®èª¿æ•´"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-blue-800 text-sm",children:[e.jsx("strong",{children:"ä½ç½®èª¿æ•´ã«ã¤ã„ã¦:"}),e.jsx("br",{}),"âš ï¸ ç¾åœ¨ã€ä½æ‰€æ¤œç´¢æ©Ÿèƒ½ã¯ä¸€æ™‚çš„ã«ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚",e.jsx("br",{}),e.jsx("strong",{children:"èµ¤ã„ãƒãƒ¼ã‚«ãƒ¼ã‚’ç›´æ¥ãƒ‰ãƒ©ãƒƒã‚°"}),"ã—ã¦ã€å®Ÿéš›ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®ä½ç½®ã«èª¿æ•´ã—ã¦ãã ã•ã„ã€‚",e.jsx("br",{}),"ãƒãƒ¼ã‚«ãƒ¼ã‚’ãƒ‰ãƒ©ãƒƒã‚°ã—ãŸå¾Œã€ã€Œä½ç½®ã‚’ä¿å­˜ã€ãƒœã‚¿ãƒ³ã§åº§æ¨™ã‚’ä¿å­˜ã§ãã¾ã™ã€‚"]})}),c&&e.jsx(f,{initialAddress:ge.address,initialLatitude:ge.latitude||void 0,initialLongitude:ge.longitude||void 0,onLocationChange:(e,s,a)=>{Ne(a=>({...a,latitude:e,longitude:s}))}}),e.jsx("div",{className:"flex justify-end",children:e.jsx(o,{type:"button",onClick:async()=>{if(c&&ge.latitude&&ge.longitude)try{de(!0),p("");const{error:e}=await j.from("dog_parks").update({latitude:ge.latitude,longitude:ge.longitude,updated_at:(new Date).toISOString()}).eq("id",c.id);if(e)throw e;b("ä½ç½®æƒ…å ±ã‚’æ›´æ–°ã—ã¾ã—ãŸã€‚"),await Ee(),setTimeout(()=>{b("")},3e3)}catch(e){const s=e instanceof Error?e.message:"object"==typeof e&&null!==e&&"message"in e?String(e.message):"ä¸æ˜ãªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ";p(`ä½ç½®æƒ…å ±ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ: ${s}`)}finally{de(!1)}},disabled:ce||!ge.latitude||!ge.longitude,className:"min-w-[120px]",children:ce?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"ä¿å­˜ä¸­..."]}):"ä½ç½®ã‚’ä¿å­˜"})})]})]})})]}),ye&&Se&&e.jsx(N,{imageFile:Se,onCropComplete:handleCropComplete,onCancel:handleCropCancel,aspectRatio:1,maxWidth:400,maxHeight:400}),Pe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"relative max-w-4xl w-full",children:[e.jsx("button",{onClick:()=>Te(null),className:"absolute top-4 right-4 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-75 z-10",children:e.jsx(K,{className:"w-6 h-6"})}),e.jsx("div",{className:"flex items-center justify-center h-[80vh]",children:e.jsx("img",{src:Pe,alt:"ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼",className:"max-h-full max-w-full object-contain"})})]})})]}):e.jsxs("div",{className:"max-w-4xl mx-auto text-center py-12",children:[e.jsx(S,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"æŒ‡å®šã•ã‚ŒãŸãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒè¦‹ã¤ã‹ã‚‰ãªã„ã‹ã€ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚"}),e.jsx(r,{to:"/owner-dashboard",children:e.jsx(o,{children:"ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚‹"})})]})}export{V as ParkManagement};
