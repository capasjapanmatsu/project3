import{j as e}from"./motion-CuO0nkIV.js";import{r as t,b as i}from"./react-vendor-cniURDpR.js";import{B as n}from"./Button-6ascT97E.js";import{X as a,aA as r,aB as o,aC as h}from"./ui-basic-icnN6BOT.js";var s=Object.defineProperty,d=(e,t,i)=>((e,t,i)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i)(e,"symbol"!=typeof t?t+"":t,i);const c={x:0,y:0,width:0,height:0,unit:"px"},l=(e,t,i)=>Math.min(Math.max(e,t),i),g=(e,t)=>e===t||e.width===t.width&&e.height===t.height&&e.x===t.x&&e.y===t.y&&e.unit===t.unit;function w(e,t,i){return"%"===e.unit?{...c,...e,unit:"%"}:{unit:"%",x:e.x?e.x/t*100:0,y:e.y?e.y/i*100:0,width:e.width?e.width/t*100:0,height:e.height?e.height/i*100:0}}function p(e,t,i){return e.unit?"px"===e.unit?{...c,...e,unit:"px"}:{unit:"px",x:e.x?e.x*t/100:0,y:e.y?e.y*i/100:0,width:e.width?e.width*t/100:0,height:e.height?e.height*i/100:0}:{...c,...e,unit:"px"}}function m(e,t,i,n,a,r=0,o=0,h=n,s=a){const d={...e};let c=Math.min(r,n),l=Math.min(o,a),g=Math.min(h,n),w=Math.min(s,a);t&&(t>1?(c=o?o*t:c,l=c/t,g=h*t):(l=r?r/t:l,c=l*t,w=s/t)),d.y<0&&(d.height=Math.max(d.height+d.y,l),d.y=0),d.x<0&&(d.width=Math.max(d.width+d.x,c),d.x=0);const p=n-(d.x+d.width);p<0&&(d.x=Math.min(d.x,n-c),d.width+=p);const m=a-(d.y+d.height);if(m<0&&(d.y=Math.min(d.y,a-l),d.height+=m),d.width<c&&(("sw"===i||"nw"==i)&&(d.x-=c-d.width),d.width=c),d.height<l&&(("nw"===i||"ne"==i)&&(d.y-=l-d.height),d.height=l),d.width>g&&(("sw"===i||"nw"==i)&&(d.x-=g-d.width),d.width=g),d.height>w&&(("nw"===i||"ne"==i)&&(d.y-=w-d.height),d.height=w),t){const e=d.width/d.height;if(e<t){const e=Math.max(d.width/t,l);("nw"===i||"ne"==i)&&(d.y-=e-d.height),d.height=e}else if(e>t){const e=Math.max(d.height*t,c);("sw"===i||"nw"==i)&&(d.x-=e-d.width),d.width=e}}return d}const u={capture:!0,passive:!1};let x=0;const y=class e extends t.PureComponent{constructor(){super(...arguments),d(this,"docMoveBound",!1),d(this,"mouseDownOnCrop",!1),d(this,"dragStarted",!1),d(this,"evData",{startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0}),d(this,"componentRef",t.createRef()),d(this,"mediaRef",t.createRef()),d(this,"resizeObserver"),d(this,"initChangeCalled",!1),d(this,"instanceId","rc-"+x++),d(this,"state",{cropIsActive:!1,newCropIsBeingDrawn:!1}),d(this,"onCropPointerDown",e=>{const{crop:t,disabled:i}=this.props,n=this.getBox();if(!t)return;const a=p(t,n.width,n.height);if(i)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const r=e.target.dataset.ord,o=!!r;let h=e.clientX,s=e.clientY,d=a.x,c=a.y;if(r){const t=e.clientX-n.x,i=e.clientY-n.y;let o=0,l=0;"ne"===r||"e"==r?(o=t-(a.x+a.width),l=i-a.y,d=a.x,c=a.y+a.height):"se"===r||"s"===r?(o=t-(a.x+a.width),l=i-(a.y+a.height),d=a.x,c=a.y):"sw"===r||"w"==r?(o=t-a.x,l=i-(a.y+a.height),d=a.x+a.width,c=a.y):("nw"===r||"n"==r)&&(o=t-a.x,l=i-a.y,d=a.x+a.width,c=a.y+a.height),h=d+n.x+o,s=c+n.y+l}this.evData={startClientX:h,startClientY:s,startCropX:d,startCropY:c,clientX:e.clientX,clientY:e.clientY,isResize:o,ord:r},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})}),d(this,"onComponentPointerDown",e=>{const{crop:t,disabled:i,locked:n,keepSelection:a,onChange:r}=this.props,o=this.getBox();if(i||n||a&&t)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const h=e.clientX-o.x,s=e.clientY-o.y,d={unit:"px",x:h,y:s,width:0,height:0};this.evData={startClientX:e.clientX,startClientY:e.clientY,startCropX:h,startCropY:s,clientX:e.clientX,clientY:e.clientY,isResize:!0},this.mouseDownOnCrop=!0,r(p(d,o.width,o.height),w(d,o.width,o.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})}),d(this,"onDocPointerMove",e=>{const{crop:t,disabled:i,onChange:n,onDragStart:a}=this.props,r=this.getBox();if(i||!t||!this.mouseDownOnCrop)return;e.cancelable&&e.preventDefault(),this.dragStarted||(this.dragStarted=!0,a&&a(e));const{evData:o}=this;let h;o.clientX=e.clientX,o.clientY=e.clientY,h=o.isResize?this.resizeCrop():this.dragCrop(),g(t,h)||n(p(h,r.width,r.height),w(h,r.width,r.height))}),d(this,"onComponentKeyDown",t=>{const{crop:i,disabled:n,onChange:a,onComplete:r}=this.props;if(n)return;const o=t.key;let h=!1;if(!i)return;const s=this.getBox(),d=this.makePixelCrop(s),c=(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)?e.nudgeStepLarge:t.shiftKey?e.nudgeStepMedium:e.nudgeStep;if("ArrowLeft"===o?(d.x-=c,h=!0):"ArrowRight"===o?(d.x+=c,h=!0):"ArrowUp"===o?(d.y-=c,h=!0):"ArrowDown"===o&&(d.y+=c,h=!0),h){t.cancelable&&t.preventDefault(),d.x=l(d.x,0,s.width-d.width),d.y=l(d.y,0,s.height-d.height);const e=p(d,s.width,s.height),i=w(d,s.width,s.height);a(e,i),r&&r(e,i)}}),d(this,"onHandlerKeyDown",(t,i)=>{const{aspect:n=0,crop:a,disabled:r,minWidth:o=0,minHeight:h=0,maxWidth:s,maxHeight:d,onChange:c,onComplete:l}=this.props,u=this.getBox();if(r||!a)return;if("ArrowUp"!==t.key&&"ArrowDown"!==t.key&&"ArrowLeft"!==t.key&&"ArrowRight"!==t.key)return;t.stopPropagation(),t.preventDefault();const x=(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)?e.nudgeStepLarge:t.shiftKey?e.nudgeStepMedium:e.nudgeStep,y=function(e,t,i,n){const a={...e};return"ArrowLeft"===t?"nw"===n?(a.x-=i,a.y-=i,a.width+=i,a.height+=i):"w"===n?(a.x-=i,a.width+=i):"sw"===n?(a.x-=i,a.width+=i,a.height+=i):"ne"===n?(a.y+=i,a.width-=i,a.height-=i):"e"===n?a.width-=i:"se"===n&&(a.width-=i,a.height-=i):"ArrowRight"===t&&("nw"===n?(a.x+=i,a.y+=i,a.width-=i,a.height-=i):"w"===n?(a.x+=i,a.width-=i):"sw"===n?(a.x+=i,a.width-=i,a.height-=i):"ne"===n?(a.y-=i,a.width+=i,a.height+=i):"e"===n?a.width+=i:"se"===n&&(a.width+=i,a.height+=i)),"ArrowUp"===t?"nw"===n?(a.x-=i,a.y-=i,a.width+=i,a.height+=i):"n"===n?(a.y-=i,a.height+=i):"ne"===n?(a.y-=i,a.width+=i,a.height+=i):"sw"===n?(a.x+=i,a.width-=i,a.height-=i):"s"===n?a.height-=i:"se"===n&&(a.width-=i,a.height-=i):"ArrowDown"===t&&("nw"===n?(a.x+=i,a.y+=i,a.width-=i,a.height-=i):"n"===n?(a.y+=i,a.height-=i):"ne"===n?(a.y+=i,a.width-=i,a.height-=i):"sw"===n?(a.x-=i,a.width+=i,a.height+=i):"s"===n?a.height+=i:"se"===n&&(a.width+=i,a.height+=i)),a}(p(a,u.width,u.height),t.key,x,i),v=m(y,n,i,u.width,u.height,o,h,s,d);if(!g(a,v)){const e=w(v,u.width,u.height);c(v,e),l&&l(v,e)}}),d(this,"onDocPointerDone",e=>{const{crop:t,disabled:i,onComplete:n,onDragEnd:a}=this.props,r=this.getBox();this.unbindDocMove(),!i&&t&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,a&&a(e),n&&n(p(t,r.width,r.height),w(t,r.width,r.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))}),d(this,"onDragFocus",()=>{var e;null==(e=this.componentRef.current)||e.scrollTo(0,0)})}get document(){return document}getBox(){const e=this.mediaRef.current;if(!e)return{x:0,y:0,width:0,height:0};const{x:t,y:i,width:n,height:a}=e.getBoundingClientRect();return{x:t,y:i,width:n,height:a}}componentDidUpdate(e){const{crop:t,onComplete:i}=this.props;if(i&&!e.crop&&t){const{width:e,height:n}=this.getBox();e&&n&&i(p(t,e,n),w(t,e,n))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect(),this.unbindDocMove()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,u),this.document.addEventListener("pointerup",this.onDocPointerDone,u),this.document.addEventListener("pointercancel",this.onDocPointerDone,u),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,u),this.document.removeEventListener("pointerup",this.onDocPointerDone,u),this.document.removeEventListener("pointercancel",this.onDocPointerDone,u),this.docMoveBound=!1)}getCropStyle(){const{crop:e}=this.props;if(e)return{top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`}}dragCrop(){const{evData:e}=this,t=this.getBox(),i=this.makePixelCrop(t),n=e.clientX-e.startClientX,a=e.clientY-e.startClientY;return i.x=l(e.startCropX+n,0,t.width-i.width),i.y=l(e.startCropY+a,0,t.height-i.height),i}getPointRegion(e,t,i,n){const{evData:a}=this,r=a.clientX-e.x,o=a.clientY-e.y;let h,s;return h=n&&t?"nw"===t||"n"===t||"ne"===t:o<a.startCropY,s=i&&t?"nw"===t||"w"===t||"sw"===t:r<a.startCropX,s?h?"nw":"sw":h?"ne":"se"}resolveMinDimensions(e,t,i=0,n=0){const a=Math.min(i,e.width),r=Math.min(n,e.height);return t&&(a||r)?t>1?a?[a,a/t]:[r*t,r]:r?[r*t,r]:[a,a/t]:[a,r]}resizeCrop(){const{evData:t}=this,{aspect:i=0,maxWidth:n,maxHeight:a}=this.props,r=this.getBox(),[o,h]=this.resolveMinDimensions(r,i,this.props.minWidth,this.props.minHeight);let s=this.makePixelCrop(r);const d=this.getPointRegion(r,t.ord,o,h),c=t.ord||d;let g=t.clientX-t.startClientX,w=t.clientY-t.startClientY;(o&&"nw"===c||"w"===c||"sw"===c)&&(g=Math.min(g,-o)),(h&&"nw"===c||"n"===c||"ne"===c)&&(w=Math.min(w,-h));const p={unit:"px",x:0,y:0,width:0,height:0};"ne"===d?(p.x=t.startCropX,p.width=g,i?(p.height=p.width/i,p.y=t.startCropY-p.height):(p.height=Math.abs(w),p.y=t.startCropY-p.height)):"se"===d?(p.x=t.startCropX,p.y=t.startCropY,p.width=g,p.height=i?p.width/i:w):"sw"===d?(p.x=t.startCropX+g,p.y=t.startCropY,p.width=Math.abs(g),p.height=i?p.width/i:w):"nw"===d&&(p.x=t.startCropX+g,p.width=Math.abs(g),i?(p.height=p.width/i,p.y=t.startCropY-p.height):(p.height=Math.abs(w),p.y=t.startCropY+w));const u=m(p,i,d,r.width,r.height,o,h,n,a);return i||e.xyOrds.indexOf(c)>-1?s=u:e.xOrds.indexOf(c)>-1?(s.x=u.x,s.width=u.width):e.yOrds.indexOf(c)>-1&&(s.y=u.y,s.height=u.height),s.x=l(s.x,0,r.width-s.width),s.y=l(s.y,0,r.height-s.height),s}renderCropSelection(){const{ariaLabels:t=e.defaultProps.ariaLabels,disabled:n,locked:a,renderSelectionAddon:r,ruleOfThirds:o,crop:h}=this.props,s=this.getCropStyle();if(h)return i.createElement("div",{style:s,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":t.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!n&&!a&&i.createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},i.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),i.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),i.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),i.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),i.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":t.nwDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"nw"),role:"button"}),i.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":t.nDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"n"),role:"button"}),i.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":t.neDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"ne"),role:"button"}),i.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":t.eDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"e"),role:"button"}),i.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":t.seDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"se"),role:"button"}),i.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":t.sDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"s"),role:"button"}),i.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":t.swDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"sw"),role:"button"}),i.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":t.wDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"w"),role:"button"})),r&&i.createElement("div",{className:"ReactCrop__selection-addon",onPointerDown:e=>e.stopPropagation()},r(this.state)),o&&i.createElement(i.Fragment,null,i.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),i.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(e){return p({...c,...this.props.crop||{}},e.width,e.height)}render(){const{aspect:e,children:t,circularCrop:n,className:a,crop:r,disabled:o,locked:h,style:s,ruleOfThirds:d}=this.props,{cropIsActive:c,newCropIsBeingDrawn:l}=this.state,g=r?this.renderCropSelection():null,w=((...e)=>e.filter(e=>e&&"string"==typeof e).join(" "))("ReactCrop",a,c&&"ReactCrop--active",o&&"ReactCrop--disabled",h&&"ReactCrop--locked",l&&"ReactCrop--new-crop",r&&e&&"ReactCrop--fixed-aspect",r&&n&&"ReactCrop--circular-crop",r&&d&&"ReactCrop--rule-of-thirds",!this.dragStarted&&r&&!r.width&&!r.height&&"ReactCrop--invisible-crop",n&&"ReactCrop--no-animate");return i.createElement("div",{ref:this.componentRef,className:w,style:s},i.createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},t),r?i.createElement("svg",{className:"ReactCrop__crop-mask",width:"100%",height:"100%"},i.createElement("defs",null,i.createElement("mask",{id:`hole-${this.instanceId}`},i.createElement("rect",{width:"100%",height:"100%",fill:"white"}),n?i.createElement("ellipse",{cx:`${r.x+r.width/2}${r.unit}`,cy:`${r.y+r.height/2}${r.unit}`,rx:`${r.width/2}${r.unit}`,ry:`${r.height/2}${r.unit}`,fill:"black"}):i.createElement("rect",{x:`${r.x}${r.unit}`,y:`${r.y}${r.unit}`,width:`${r.width}${r.unit}`,height:`${r.height}${r.unit}`,fill:"black"}))),i.createElement("rect",{fill:"black",fillOpacity:.5,width:"100%",height:"100%",mask:`url(#hole-${this.instanceId})`})):void 0,g)}};d(y,"xOrds",["e","w"]),d(y,"yOrds",["n","s"]),d(y,"xyOrds",["nw","ne","se","sw"]),d(y,"nudgeStep",1),d(y,"nudgeStepMedium",10),d(y,"nudgeStepLarge",100),d(y,"defaultProps",{ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}});let v=y;const C=({imageFile:i,onCropComplete:s,onCancel:d,aspectRatio:c=1,maxWidth:l=400,maxHeight:g=400})=>{const[m,u]=t.useState(""),[x,y]=t.useState(),[C,f]=t.useState(),[b,D]=t.useState(!1),R=t.useRef(null),M=t.useRef(null);t.useEffect(()=>{if(i){if(!i.type.startsWith("image/"))return alert("画像ファイルを選択してください。"),void d();if(i.size>10485760)return alert("ファイルサイズは10MB未満にしてください。"),void d();y(void 0);const e=new FileReader;e.addEventListener("load",()=>{const t=e.result;t&&"string"==typeof t&&u(t)}),e.addEventListener("error",e=>{}),e.readAsDataURL(i)}},[i,d]);const E=t.useCallback(e=>{if(e.target.files&&e.target.files.length>0){const t=e.target.files[0];if(!t.type.startsWith("image/"))return void alert("画像ファイルを選択してください。");if(t.size>10485760)return void alert("ファイルサイズは10MB未満にしてください。");y(void 0);const i=new FileReader;i.addEventListener("load",()=>u(i.result?.toString()||"")),i.readAsDataURL(t)}},[]),j=t.useCallback(e=>{const{width:t,height:i}=e.currentTarget,n=function(e,t,i){const n=p(e,t,i);return n.x=(t-n.width)/2,n.y=(i-n.height)/2,"%"===e.unit?w(n,t,i):n}(function(e,t,i,n){const a=p(e,i,n);return e.width&&(a.height=a.width/t),e.height&&(a.width=a.height*t),a.y+a.height>n&&(a.height=n-a.y,a.width=a.height*t),a.x+a.width>i&&(a.width=i-a.x,a.height=a.width/t),"%"===e.unit?w(a,i,n):a}({unit:"%",width:90},c,t,i),t,i);y(n)},[c]),N=t.useCallback(async()=>{if(C&&R.current&&M.current){D(!0);try{const e=R.current,t=M.current,i=t.getContext("2d");if(!i)throw new Error("Canvas context を取得できませんでした。");const n=e.naturalWidth/e.width,a=e.naturalHeight/e.height,r=Math.min(l,g);t.width=r,t.height=r,i.imageSmoothingEnabled=!0,i.imageSmoothingQuality="high",i.drawImage(e,C.x*n,C.y*a,C.width*n,C.height*a,0,0,r,r),t.toBlob(async e=>{if(!e)throw new Error("画像の処理に失敗しました。");const t=new File([e],"cropped-image.jpg",{type:"image/jpeg",lastModified:Date.now()});try{const e=await((e,t)=>new Promise((i,n)=>{const a=document.createElement("canvas"),r=a.getContext("2d"),o=new Image;r?(o.onload=()=>{try{let e=0,h=0,s=o.width,d=o.height;if(t.aspectRatio){const i=t.aspectRatio,n=o.width/o.height;n>i?(s=o.height*i,e=(o.width-s)/2):n<i&&(d=o.width/i,h=(o.height-d)/2)}a.width=t.maxWidth,a.height=t.maxHeight,r.drawImage(o,e,h,s,d,0,0,t.maxWidth,t.maxHeight),a.toBlob(e=>{if(e)if(t.maxSizeMB&&e.size>1024*t.maxSizeMB*1024){const e=Math.max(.1,t.quality-.2);a.toBlob(e=>{e?i(e):n(new Error("Failed to create compressed blob"))},"image/jpeg",e)}else i(e);else n(new Error("Failed to create blob"))},"image/jpeg",t.quality)}catch(e){n(e)}},o.onerror=()=>n(new Error("Failed to load image")),o.src=URL.createObjectURL(e)):n(new Error("Canvas context not available"))}))(t,{maxWidth:r,maxHeight:r,quality:.85,maxSizeMB:.3,outputFormat:"jpeg"}),i=new File([e],"optimized-image.jpg",{type:"image/jpeg",lastModified:Date.now()});s(i)}catch(i){s(t)}},"image/jpeg",.9)}catch(e){alert("画像の処理中にエラーが発生しました。")}finally{D(!1)}}else alert("クロップエリアを選択してください。")},[C,l,g,s]);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"画像をトリミング"}),e.jsx("button",{onClick:d,className:"text-gray-400 hover:text-gray-600",children:e.jsx(a,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-4",children:m?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"ドラッグして切り取り範囲を選択してください（1:1比率で切り取られます）"})}),e.jsx("div",{className:"flex justify-center max-h-96 overflow-hidden",children:e.jsx(v,{crop:x,onChange:(e,t)=>y(t),onComplete:e=>f(e),aspect:c,minWidth:100,minHeight:100,children:e.jsx("img",{ref:R,alt:"Crop me",src:m,style:{maxHeight:"400px",maxWidth:"100%"},onLoad:j})})}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsxs(n,{variant:"outline",onClick:()=>u(""),disabled:b,children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),"画像を変更"]}),e.jsxs(n,{onClick:N,disabled:!C||b,children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),b?"処理中...":"トリミング完了"]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(r,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("span",{className:"text-blue-600 hover:text-blue-500 font-medium",children:"画像を選択してください"}),e.jsx("input",{type:"file",accept:"image/*",onChange:E,className:"hidden"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"JPG、PNG、WEBP形式対応（10MB未満）"})]})}),e.jsx("canvas",{ref:M,style:{display:"none"}})]})})};export{C as I};
