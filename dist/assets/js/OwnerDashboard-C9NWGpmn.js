import{j as e}from"./data-vendor-BmFUkYzE.js";import{d as s,r as a,L as t}from"./core-vendor-DBEP70vW.js";import{u as l,s as r,B as i,C as c}from"./index-CDzr2Gkx.js";import{I as d}from"./Input-CcyqxK15.js";import{R as n,aj as x,aJ as m,A as o,i as h,aa as j,U as p,J as g,aK as u,F as b,M as f,C as N,z as v,d as w,_ as y,G as k,v as _,$ as S,s as C,N as z,X as D,a0 as q}from"./ui-vendor-B3gor5_P.js";import"./heavy-vendor-Bb5jGJvT.js";function L(){const{user:L}=l(),P=s(),[I,R]=a.useState([]),[T,E]=a.useState(!0),[F,A]=a.useState(!1),[U,B]=a.useState(0),[J,M]=a.useState(0),[O,Q]=a.useState(0),[G,K]=a.useState(null),[W,H]=a.useState(!1),[V,X]=a.useState(""),[Y,Z]=a.useState(""),[ee,se]=a.useState(!1),[ae,te]=a.useState(!1),[le,re]=a.useState([]),[ie,ce]=a.useState(null),[de,ne]=a.useState(!1),[xe,me]=a.useState(!1),[oe,he]=a.useState([]),[je,pe]=a.useState([]),[ge,ue]=a.useState([]),[be,fe]=a.useState({name:"",description:"",website:"",phone:"",status:"approved"}),Ne=async()=>{try{const{data:e,error:s}=await r.from("dog_parks").select("*").eq("owner_id",L?.id).order("created_at",{ascending:!1});if(s)throw s;R(e||[]),B(25600),M(32),Q(128)}catch(e){X("ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ")}},ve=async()=>{try{const{data:e,error:s}=await r.from("pet_facilities").select("*").eq("owner_id",L?.id).order("created_at",{ascending:!1});if(s)throw s;re(e||[])}catch(e){X("ãƒšãƒƒãƒˆæ–½è¨­ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ")}};return a.useEffect(()=>{if(!L)return void P("/login");(async()=>{try{E(!0),X(""),await Ne(),await ve()}catch(e){X("ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„ã€‚")}finally{E(!1)}})();const e=r.channel("dog_parks_changes").on("postgres_changes",{event:"*",schema:"public",table:"dog_parks",filter:`owner_id=eq.${L.id}`},e=>{Ne()}).subscribe();return()=>{e.unsubscribe()}},[L,P]),T?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):L?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"ã‚ªãƒ¼ãƒŠãƒ¼ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰"}),e.jsx("p",{className:"text-gray-600",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®ç™»éŒ²ãƒ»ç®¡ç†ã‚’è¡Œã„ã¾ã™"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(i,{variant:"secondary",onClick:async()=>{A(!0);try{await Promise.all([Ne(),ve()])}catch(e){X("ãƒ‡ãƒ¼ã‚¿ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ")}finally{A(!1)}},isLoading:F,className:"flex items-center",children:[e.jsx(n,{className:"w-4 h-4 mr-2"}),"æ›´æ–°"]}),e.jsx(t,{to:"/owner-payment-system",children:e.jsxs(i,{variant:"secondary",className:"flex items-center",children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"åç›Šã‚·ã‚¹ãƒ†ãƒ "]})}),e.jsx(t,{to:"/register-park",children:e.jsxs(i,{children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’ç™»éŒ²"]})})]})]}),V&&e.jsxs("div",{className:"bg-red-100 border border-red-300 text-red-800 rounded-lg p-4 flex items-start",children:[e.jsx(o,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsx("p",{children:V})]}),Y&&e.jsxs("div",{className:"bg-green-100 border border-green-300 text-green-800 rounded-lg p-4 flex items-start",children:[e.jsx(h,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsx("p",{children:Y})]}),e.jsxs("div",{className:"bg-gray-100 border border-gray-300 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"ãƒ‡ãƒãƒƒã‚°æƒ…å ±"}),e.jsx(i,{variant:"secondary",size:"sm",onClick:()=>se(!ee),children:ee?"éš ã™":"è¡¨ç¤º"})]}),ee&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"ãƒ¦ãƒ¼ã‚¶ãƒ¼ID:"})," ",L?.id]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"ãƒ‘ãƒ¼ã‚¯æ•°:"})," ",I.length]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"æœ€çµ‚æ›´æ–°:"})," ",(new Date).toLocaleString()]}),I.map(s=>e.jsxs("div",{className:"bg-white p-3 rounded border text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"åå‰:"})," ",s.name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"ID:"})," ",s.id]}),e.jsxs("div",{children:[e.jsx("strong",{children:"ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:"})," ",s.status]}),e.jsxs("div",{children:[e.jsx("strong",{children:"ä½œæˆæ—¥:"})," ",new Date(s.created_at).toLocaleString()]}),e.jsxs("div",{children:[e.jsx("strong",{children:"æ›´æ–°æ—¥:"})," ",s.updated_at?new Date(s.updated_at).toLocaleString():"ãªã—"]})]},s.id))]})]}),I.some(e=>"approved"===e.status)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(c,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"ä»Šæœˆã®åç›Š"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["Â¥",U.toLocaleString()]}),e.jsx("p",{className:"text-xs text-green-600",children:"å‰æœˆæ¯” +8%"})]}),e.jsx(x,{className:"w-8 h-8 text-green-600"})]}),e.jsx("div",{className:"mt-3 text-blue-600 text-sm flex items-center",children:e.jsxs(t,{to:"/owner-payment-system",className:"flex items-center",children:[e.jsx("span",{children:"è©³ç´°ã‚’è¦‹ã‚‹"}),e.jsx(j,{className:"w-4 h-4 ml-1"})]})})]}),e.jsxs(c,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"ä»Šæœˆã®äºˆç´„"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[J,"ä»¶"]}),e.jsx("p",{className:"text-xs text-blue-600",children:"å‰æœˆæ¯” +12%"})]}),e.jsx($,{className:"w-8 h-8 text-blue-600"})]}),e.jsxs("div",{className:"mt-3 text-blue-600 text-sm flex items-center",children:[e.jsx("span",{children:"è©³ç´°ã‚’è¦‹ã‚‹"}),e.jsx(j,{className:"w-4 h-4 ml-1"})]})]}),e.jsxs(c,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"åˆ©ç”¨è€…æ•°"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[O,"äºº"]}),e.jsx("p",{className:"text-xs text-purple-600",children:"å‰æœˆæ¯” +15%"})]}),e.jsx(p,{className:"w-8 h-8 text-purple-600"})]}),e.jsxs("div",{className:"mt-3 text-blue-600 text-sm flex items-center",children:[e.jsx("span",{children:"è©³ç´°ã‚’è¦‹ã‚‹"}),e.jsx(j,{className:"w-4 h-4 ml-1"})]})]})]}),e.jsx(c,{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-full",children:e.jsx(g,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold mb-1",children:"åç›Šã‚·ã‚¹ãƒ†ãƒ "}),e.jsx("p",{className:"text-sm opacity-90",children:"å£²ä¸Šã®80%ãŒã‚ªãƒ¼ãƒŠãƒ¼æ§˜ã«æ”¯æ‰•ã‚ã‚Œã¾ã™"})]})]}),e.jsx(t,{to:"/owner-payment-system",children:e.jsxs(i,{className:"bg-white text-gray-900 hover:bg-gray-100 hover:text-gray-900 font-bold",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"è©³ç´°ã‚’è¦‹ã‚‹"]})})]})}),e.jsx(c,{className:"bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(b,{className:"w-6 h-6 text-blue-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"å¯©æŸ»ãƒ—ãƒ­ã‚»ã‚¹"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm text-blue-800",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"1"}),e.jsx("span",{children:"ç¬¬ä¸€å¯©æŸ»ï¼ˆåŸºæœ¬æ¡ä»¶ç¢ºèªï¼‰"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"2"}),e.jsx("span",{children:"ç¬¬äºŒå¯©æŸ»ï¼ˆæ›¸é¡å¯©æŸ»ï¼‰"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"3"}),e.jsx("span",{children:"QRã‚³ãƒ¼ãƒ‰å®Ÿè¨¼æ¤œæŸ»"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"4"}),e.jsx("span",{children:"æ²è¼‰ãƒ»é‹å–¶é–‹å§‹"})]})]})]})]})}),0===I.length?e.jsxs(c,{className:"text-center py-12",children:[e.jsx(f,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"ã¾ã ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"æ–°ã—ã„ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’ç™»éŒ²ã—ã¦ã€å¤šãã®æ„›çŠ¬å®¶ã«åˆ©ç”¨ã—ã¦ã‚‚ã‚‰ã„ã¾ã—ã‚‡ã†"}),e.jsx(t,{to:"/register-park",children:e.jsxs(i,{children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’ç™»éŒ²ã™ã‚‹"]})})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:I.map(s=>{const a=(e=>{switch(e){case"pending":return{icon:N,label:"ç¬¬ä¸€å¯©æŸ»ä¸­",description:"ç”³è«‹å†…å®¹ã‚’å¯©æŸ»ä¸­ã§ã™ã€‚ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚",color:"bg-yellow-100 text-yellow-800"};case"first_stage_passed":return{icon:h,label:"ç¬¬ä¸€å¯©æŸ»é€šéï¼ˆæ—§ï¼‰",description:"ç¬¬ä¸€å¯©æŸ»ã‚’é€šéã—ã¾ã—ãŸã€‚ï¼ˆæ—§ã‚·ã‚¹ãƒ†ãƒ ï¼‰",color:"bg-blue-100 text-blue-800"};case"second_stage_waiting":return{icon:o,label:"äºŒæ¬¡å¯©æŸ»ç”³ã—è¾¼ã¿",description:"ç¬¬ä¸€å¯©æŸ»é€šéï¼ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã‚’è³¼å…¥ã—ã€ç¬¬äºŒå¯©æŸ»ã‚’æå‡ºã—ã¦ãã ã•ã„ã€‚",color:"bg-orange-100 text-orange-800",showSmartLockPurchase:!0};case"second_stage_review":return{icon:b,label:"ç¬¬äºŒå¯©æŸ»ä¸­",description:"ç¬¬äºŒå¯©æŸ»ã‚’å®Ÿæ–½ä¸­ã§ã™ã€‚å¯©æŸ»çµæœã‚’ãŠå¾…ã¡ãã ã•ã„ã€‚",color:"bg-purple-100 text-purple-800"};case"smart_lock_testing":return{icon:w,label:"ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯èªè¨¼å¾…ã¡",description:"ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã®å‹•ä½œç¢ºèªã‚’è¡Œã£ã¦ãã ã•ã„ã€‚",color:"bg-indigo-100 text-indigo-800"};case"approved":return{icon:h,label:"æ‰¿èªæ¸ˆã¿ãƒ»å…¬é–‹å¯èƒ½",description:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®é‹å–¶ã‚’é–‹å§‹ã§ãã¾ã™ï¼",color:"bg-green-100 text-green-800"};case"rejected":return{icon:o,label:"å´ä¸‹",description:"ç”³è«‹ãŒå´ä¸‹ã•ã‚Œã¾ã—ãŸã€‚è©³ç´°ã‚’ã”ç¢ºèªãã ã•ã„ã€‚",color:"bg-red-100 text-red-800"};default:return{icon:N,label:"ä¸æ˜",description:"ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒä¸æ˜ã§ã™ã€‚",color:"bg-gray-100 text-gray-800"}}})(s.status),l=a.icon;return e.jsxs(c,{className:"hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:s.name}),e.jsx("div",{className:"flex items-center space-x-2 mb-2",children:e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-1 ${a.color}`,children:[e.jsx(l,{className:"w-4 h-4"}),e.jsx("span",{children:a.label})]})}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:a.description})]})}),e.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:s.description}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm",children:s.address})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm",children:"24æ™‚é–“å–¶æ¥­"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:["åå®¹äººæ•°: ",s.max_capacity,"äºº"]}),e.jsxs("div",{children:["ç¾åœ¨ã®åˆ©ç”¨è€…: ",s.current_occupancy,"äºº"]})]})]}),"approved"===s.status&&e.jsx("div",{className:"bg-green-50 p-3 rounded-lg mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{className:"w-4 h-4 text-yellow-500"}),e.jsxs("span",{children:["è©•ä¾¡: â˜…",s.average_rating.toFixed(1)]})]}),e.jsx("div",{children:e.jsxs("span",{children:["ãƒ¬ãƒ“ãƒ¥ãƒ¼: ",s.review_count,"ä»¶"]})}),e.jsx("div",{children:e.jsxs("span",{children:["ç¾åœ¨ã®åˆ©ç”¨è€…: ",s.current_occupancy,"äºº"]})}),e.jsx("div",{children:e.jsxs("span",{children:["åˆ©ç”¨ç‡: ",Math.round(s.current_occupancy/s.max_capacity*100),"%"]})})]})}),"pending"===s.status&&e.jsx("div",{className:"bg-yellow-50 p-3 rounded-lg mb-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(o,{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"ç¬¬ä¸€å¯©æŸ»å¾…ã¡"}),e.jsx("p",{children:"ç®¡ç†è€…ã«ã‚ˆã‚‹å¯©æŸ»ã‚’ãŠå¾…ã¡ãã ã•ã„ã€‚é€šå¸¸3-5å–¶æ¥­æ—¥ã§çµæœã‚’ãŠçŸ¥ã‚‰ã›ã—ã¾ã™ã€‚"})]})]})}),"second_stage_waiting"===s.status&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 p-4 rounded-lg mb-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(w,{className:"w-6 h-6 text-orange-600 mt-0.5 flex-shrink-0"}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"text-sm text-orange-800",children:[e.jsx("p",{className:"font-bold mb-2 text-base",children:"ğŸ‰ ç¬¬ä¸€å¯©æŸ»é€šéãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼"}),e.jsx("p",{className:"mb-3",children:"äºŒæ¬¡å¯©æŸ»ã®ç”³ã—è¾¼ã¿ãŒå¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚"}),e.jsx("div",{className:"mb-4 text-center",children:e.jsx(t,{to:`/parks/${s.id}/second-stage`,children:e.jsxs(i,{className:"bg-orange-600 hover:bg-orange-700 text-white px-6 py-2 rounded-lg font-medium",children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"äºŒæ¬¡å¯©æŸ»ç”³ã—è¾¼ã¿"]})})}),e.jsxs("div",{className:"mb-4 p-3 bg-white rounded-lg border border-orange-200",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-orange-700 mb-2",children:[e.jsx("span",{children:"é€²æ—çŠ¶æ³"}),e.jsx("span",{children:"1/3ã‚¹ãƒ†ãƒƒãƒ—å®Œäº†"})]}),e.jsx("div",{className:"w-full bg-orange-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:"33%"}})})]}),e.jsx("p",{className:"mb-3",children:"æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã«é€²ã‚€ãŸã‚ã€ä»¥ä¸‹ã®æ‰‹é †ã‚’å®Œäº†ã—ã¦ãã ã•ã„ï¼š"}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-start space-x-3 p-2 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("div",{className:"w-6 h-6 bg-green-600 text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0",children:"âœ“"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-semibold text-green-800",children:"ç¬¬ä¸€å¯©æŸ»é€šé"}),e.jsx("p",{className:"text-xs text-green-700 mt-1",children:"åŸºæœ¬æƒ…å ±ã®å¯©æŸ»ãŒå®Œäº†ã—ã¾ã—ãŸ"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-2 bg-orange-50 rounded-lg border-2 border-orange-300",children:[e.jsx("div",{className:"w-6 h-6 bg-orange-600 text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0",children:"2"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-semibold text-orange-800",children:"ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã®è³¼å…¥ãƒ»è¨­ç½®"}),e.jsx("p",{className:"text-xs text-orange-700 mt-1",children:"ãƒšãƒƒãƒˆã‚·ãƒ§ãƒƒãƒ—ã§ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã‚’è³¼å…¥ã—ã€è¨­ç½®ã—ã¦ãã ã•ã„"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-2 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-400 text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0",children:"3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-semibold text-gray-600",children:"ç¬¬äºŒå¯©æŸ»ï¼ˆè¨­å‚™ç”»åƒï¼‰ã®æå‡º"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"è¨­ç½®å®Œäº†å¾Œã€è¨­å‚™ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„"})]})]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(t,{to:"/pet-shop",className:"flex-1",children:e.jsxs(i,{className:"w-full bg-orange-600 hover:bg-orange-700",children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"ãƒšãƒƒãƒˆã‚·ãƒ§ãƒƒãƒ—ã§ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯è³¼å…¥"]})})})]})})]})}),"first_stage_passed"===s.status&&e.jsx("div",{className:"bg-blue-50 p-3 rounded-lg mb-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(h,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"ç¬¬ä¸€å¯©æŸ»é€šéï¼ï¼ˆæ—§ã‚·ã‚¹ãƒ†ãƒ ï¼‰"}),e.jsx("p",{children:"ç¬¬äºŒå¯©æŸ»ã®è©³ç´°æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚"})]})]})}),"second_stage_review"===s.status&&e.jsx("div",{className:"bg-purple-50 p-3 rounded-lg mb-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(N,{className:"w-5 h-5 text-purple-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-purple-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"ç¬¬äºŒå¯©æŸ»ä¸­"}),e.jsx("p",{children:"æå‡ºã„ãŸã ã„ãŸè¨­å‚™ç”»åƒã‚’å¯©æŸ»ä¸­ã§ã™ã€‚çµæœã‚’ãŠå¾…ã¡ãã ã•ã„ã€‚"})]})]})}),"smart_lock_testing"===s.status&&e.jsx("div",{className:"bg-indigo-50 p-3 rounded-lg mb-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(w,{className:"w-5 h-5 text-indigo-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-indigo-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯å‹•ä½œç¢ºèª"}),e.jsx("p",{children:"ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã®å‹•ä½œç¢ºèªã‚’è¡Œã„ã€æ­£å¸¸ã«ä½œå‹•ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚"})]})]})}),e.jsxs("div",{className:"flex space-x-2",children:["qr_testing_ready"===s.status&&e.jsxs("div",{className:"flex justify-between w-full space-x-2",children:[e.jsx(t,{to:`/parks/${s.id}/publish-setup`,className:"flex-1",children:e.jsxs(i,{size:"sm",className:"w-full bg-green-600 hover:bg-green-700",children:[e.jsx(w,{className:"w-4 h-4 mr-1"}),"å…¬é–‹æº–å‚™ã‚’é–‹å§‹"]})}),e.jsx(i,{size:"sm",variant:"secondary",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:e=>{e.preventDefault(),e.stopPropagation(),K(s.id)},children:e.jsx(y,{className:"w-4 h-4"})})]}),"editing"===s.status&&e.jsxs("div",{className:"flex justify-between w-full space-x-2",children:[e.jsx(t,{to:`/parks/${s.id}/publish-setup`,className:"flex-1",children:e.jsxs(i,{size:"sm",className:"w-full bg-yellow-600 hover:bg-yellow-700",children:[e.jsx(k,{className:"w-4 h-4 mr-1"}),"ç·¨é›†ã‚’ç¶šã‘ã‚‹"]})}),e.jsx(i,{size:"sm",variant:"secondary",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:e=>{e.preventDefault(),e.stopPropagation(),K(s.id)},children:e.jsx(y,{className:"w-4 h-4"})})]}),"ready_to_publish"===s.status&&e.jsxs("div",{className:"flex justify-between w-full space-x-2",children:[e.jsx(t,{to:`/parks/${s.id}/publish-setup`,className:"flex-1",children:e.jsxs(i,{size:"sm",className:"w-full bg-green-600 hover:bg-green-700",children:[e.jsx(_,{className:"w-4 h-4 mr-1"}),"å…¬é–‹ã™ã‚‹"]})}),e.jsx(i,{size:"sm",variant:"secondary",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:e=>{e.preventDefault(),e.stopPropagation(),K(s.id)},children:e.jsx(y,{className:"w-4 h-4"})})]}),"approved"===s.status&&e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx(t,{to:`/parks/${s.id}`,children:e.jsxs(i,{size:"sm",variant:"secondary",children:[e.jsx(_,{className:"w-4 h-4 mr-1"}),"å…¬é–‹ãƒšãƒ¼ã‚¸ã‚’è¦‹ã‚‹"]})}),e.jsx(t,{to:`/parks/${s.id}/manage`,children:e.jsx(i,{size:"sm",children:"ç®¡ç†ã™ã‚‹"})})]}),"first_stage_passed"===s.status&&e.jsxs("div",{className:"flex justify-between w-full space-x-2",children:[e.jsx(t,{to:`/parks/${s.id}/second-stage`,className:"flex-1",children:e.jsxs(i,{size:"sm",className:"w-full bg-blue-600 hover:bg-blue-700",children:[e.jsx(S,{className:"w-4 h-4 mr-1"}),"ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰"]})}),e.jsx(i,{size:"sm",variant:"secondary",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:e=>{e.preventDefault(),e.stopPropagation(),K(s.id)},children:e.jsx(y,{className:"w-4 h-4"})})]}),"second_stage_waiting"===s.status&&e.jsx("div",{className:"flex justify-end w-full",children:e.jsx(i,{size:"sm",variant:"secondary",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:e=>{e.preventDefault(),e.stopPropagation(),K(s.id)},children:e.jsx(y,{className:"w-4 h-4"})})}),"pending"===s.status&&e.jsxs("div",{className:"flex justify-between w-full space-x-2",children:[e.jsx("div",{className:"flex-1 text-center py-2 text-gray-600 text-sm",children:"ç¬¬ä¸€å¯©æŸ»å¾…ã¡"}),e.jsx(i,{size:"sm",variant:"secondary",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:e=>{e.preventDefault(),e.stopPropagation(),K(s.id)},children:e.jsx(y,{className:"w-4 h-4"})})]}),"second_stage_review"===s.status&&e.jsxs("div",{className:"flex justify-between w-full space-x-2",children:[e.jsx("div",{className:"flex-1 text-center py-2 text-gray-600 text-sm",children:"ç¬¬äºŒå¯©æŸ»ä¸­"}),e.jsx(i,{size:"sm",variant:"secondary",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:e=>{e.preventDefault(),e.stopPropagation(),K(s.id)},children:e.jsx(y,{className:"w-4 h-4"})})]}),"rejected"===s.status&&e.jsxs("div",{className:"flex justify-between w-full space-x-2",children:[e.jsx("div",{className:"flex-1 text-center py-2 text-red-600 text-sm",children:"ç”³è«‹å´ä¸‹"}),e.jsx(i,{size:"sm",variant:"secondary",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:e=>{e.preventDefault(),e.stopPropagation(),K(s.id)},children:e.jsx(y,{className:"w-4 h-4"})})]})]})]},s.id)})}),e.jsxs(c,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[e.jsx(C,{className:"w-6 h-6 text-blue-600 mr-2"}),"ç®¡ç†ä¸­ã®ãã®ä»–æ–½è¨­ (",le.length,"æ–½è¨­)"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"ãƒšãƒƒãƒˆã‚·ãƒ§ãƒƒãƒ—ã€å‹•ç‰©ç—…é™¢ã€ãƒˆãƒªãƒŸãƒ³ã‚°ã‚µãƒ­ãƒ³ãªã©ã®æ–½è¨­ç®¡ç†"})]}),0===le.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(C,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"ã¾ã ãã®ä»–æ–½è¨­ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"ãƒšãƒƒãƒˆé–¢é€£æ–½è¨­ã‚’ç™»éŒ²ã—ã¦ã€ã‚ˆã‚Šå¤šãã®ãŠå®¢æ§˜ã«çŸ¥ã£ã¦ã‚‚ã‚‰ã„ã¾ã—ã‚‡ã†"}),e.jsx(t,{to:"/facility-registration",children:e.jsxs(i,{children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),"ãƒšãƒƒãƒˆé–¢é€£æ–½è¨­ã‚’ç™»éŒ²ã™ã‚‹"]})})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:le.map(s=>e.jsxs(c,{className:"hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxs("span",{className:"px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-1 "+("approved"===s.status?"bg-green-100 text-green-800":"pending"===s.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:["approved"===s.status&&e.jsx(h,{className:"w-4 h-4"}),"pending"===s.status&&e.jsx(N,{className:"w-4 h-4"}),"rejected"===s.status&&e.jsx(o,{className:"w-4 h-4"}),e.jsxs("span",{children:["approved"===s.status&&"å…¬é–‹ä¸­","pending"===s.status&&"å¯©æŸ»ä¸­","rejected"===s.status&&"å´ä¸‹","suspended"===s.status&&"åœæ­¢ä¸­"]})]}),"approved"===s.status&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"å…¬é–‹è¨­å®š:"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:"approved"===s.status,onChange:e=>(async(e,s)=>{try{const{error:a}=await r.from("pet_facilities").update({status:s?"approved":"suspended",updated_at:(new Date).toISOString()}).eq("id",e).eq("owner_id",L?.id);if(a)throw a;await ve(),Z("å…¬é–‹è¨­å®šã‚’æ›´æ–°ã—ã¾ã—ãŸ"),setTimeout(()=>Z(""),3e3)}catch(a){X("å…¬é–‹è¨­å®šã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ"),setTimeout(()=>X(""),3e3)}})(s.id,e.target.checked),className:"sr-only"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer peer-checked:bg-green-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all"})]})]})]})]})}),s.description&&e.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:s.description}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm",children:s.address})]}),s.phone&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(p,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm",children:s.phone})]}),s.website&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),e.jsx("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-800",children:"å…¬å¼ã‚µã‚¤ãƒˆ"})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(i,{size:"sm",variant:"secondary",onClick:()=>(e=>{ce(e),fe({name:e.name,description:e.description||"",website:e.website||"",phone:e.phone||"",status:e.status}),ne(!0)})(s),className:"flex items-center",children:[e.jsx(k,{className:"w-4 h-4 mr-1"}),"ä¿®æ­£"]}),"approved"===s.status&&e.jsxs(i,{size:"sm",variant:"secondary",onClick:()=>window.open(`/facility/${s.id}`,"_blank"),className:"flex items-center",children:[e.jsx(_,{className:"w-4 h-4 mr-1"}),"å…¬é–‹ãƒšãƒ¼ã‚¸"]})]}),e.jsx("div",{className:"text-sm text-gray-500",children:s.category_name||"ãã®ä»–æ–½è¨­"})]})]},s.id))})]}),e.jsx(c,{className:"bg-gray-50",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(b,{className:"w-6 h-6 text-gray-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"é‹å–¶ã‚µãƒãƒ¼ãƒˆ"}),e.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[e.jsx("p",{children:"â€¢ å¯©æŸ»ã«é–¢ã™ã‚‹ã”è³ªå•ã¯é‹å–¶äº‹å‹™å±€ã¾ã§ãŠå•ã„åˆã‚ã›ãã ã•ã„"}),e.jsx("p",{children:"â€¢ QRã‚³ãƒ¼ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã®è¨­ç½®ãƒ»è¨­å®šã‚µãƒãƒ¼ãƒˆã‚’æä¾›ã—ã¦ã„ã¾ã™"}),e.jsx("p",{children:"â€¢ é‹å–¶é–‹å§‹å¾Œã‚‚ç¶™ç¶šçš„ãªã‚µãƒãƒ¼ãƒˆã‚’è¡Œã„ã¾ã™"}),e.jsx("p",{children:"â€¢ ğŸ“§ ã‚µãƒãƒ¼ãƒˆçª“å£: info@dogparkjp.com"})]})]})]})}),G&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-lg w-full p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(o,{className:"w-10 h-10 text-red-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ç”³è«‹ã‚’å‰Šé™¤"}),e.jsx("p",{className:"text-sm text-gray-500",children:I.find(e=>e.id===G)?.name})]})]}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(o,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-red-800",children:[e.jsx("p",{className:"font-semibold mb-2",children:"âš ï¸ é‡è¦ãªè­¦å‘Š"}),e.jsxs("ul",{className:"space-y-1 list-disc list-inside",children:[e.jsx("li",{children:e.jsx("strong",{children:"ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“"})}),e.jsx("li",{children:"ã™ã¹ã¦ã®ç”³è«‹ãƒ‡ãƒ¼ã‚¿ãŒå®Œå…¨ã«å‰Šé™¤ã•ã‚Œã¾ã™"}),e.jsx("li",{children:"å†åº¦åˆ©ç”¨ã—ãŸã„å ´åˆã¯æœ€åˆã‹ã‚‰ç”³è«‹æ‰‹ç¶šããŒå¿…è¦ã§ã™"}),e.jsx("li",{children:"å¯©æŸ»é€²æ—ã‚„ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸç”»åƒã‚‚ã™ã¹ã¦å¤±ã‚ã‚Œã¾ã™"}),e.jsx("li",{children:"å‰Šé™¤å¾Œã¯åŒã˜æ–½è¨­åã§ã®å³åº§ã®å†ç”³è«‹ã¯ã§ãã¾ã›ã‚“"})]})]})]})}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"å‰Šé™¤ã•ã‚Œã‚‹å†…å®¹ï¼š"}),e.jsxs("ul",{className:"text-sm text-gray-700 space-y-1",children:[e.jsx("li",{children:"â€¢ ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®åŸºæœ¬æƒ…å ±"}),e.jsx("li",{children:"â€¢ ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ¸ˆã¿ã®æ–½è¨­ç”»åƒ"}),e.jsx("li",{children:"â€¢ å¯©æŸ»é€²æ—çŠ¶æ³"}),e.jsx("li",{children:"â€¢ éŠ€è¡Œå£åº§æƒ…å ±"}),e.jsx("li",{children:"â€¢ ç®¡ç†è€…ã‹ã‚‰ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯"})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:ae,className:"mt-1 rounded border-gray-300 text-red-600 focus:ring-red-500",onChange:e=>{te(e.target.checked)}}),e.jsxs("span",{className:"text-sm text-gray-700",children:["ä¸Šè¨˜ã®å†…å®¹ã‚’ç†è§£ã—ã€",e.jsx("strong",{children:"ç”³è«‹ã‚’å®Œå…¨ã«å‰Šé™¤ã™ã‚‹ã“ã¨ã«åŒæ„ã—ã¾ã™"})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(i,{variant:"secondary",onClick:()=>{K(null),te(!1)},disabled:W,children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"}),e.jsxs(i,{id:"confirm-delete-button",className:"bg-red-600 hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",isLoading:W,disabled:!ae,onClick:()=>{G&&(async e=>{try{H(!0),X("");const{data:s}=await r.from("dog_park_facility_images").select("id").eq("park_id",e);if(s&&s.length>0){const{error:s}=await r.from("dog_park_facility_images").delete().eq("park_id",e);if(s)throw new Error("æ–½è¨­ç”»åƒã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}const{data:a}=await r.from("dog_park_review_stages").select("id").eq("park_id",e);if(a&&a.length>0){const{error:s}=await r.from("dog_park_review_stages").delete().eq("park_id",e);if(s)throw new Error("å¯©æŸ»ã‚¹ãƒ†ãƒ¼ã‚¸ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}const{error:t}=await r.from("dog_parks").delete().eq("id",e).eq("owner_id",L?.id);if(t)throw t;await Ne(),K(null),te(!1);const l=I.find(s=>s.id===e);Z(`${l?.name||"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³"}ã®ç”³è«‹ã‚’å®Œå…¨ã«å‰Šé™¤ã—ã¾ã—ãŸã€‚å†åº¦ã”åˆ©ç”¨ã®éš›ã¯æ–°è¦ç”³è«‹ãŒå¿…è¦ã§ã™ã€‚`),setTimeout(()=>{Z("")},5e3)}catch(s){X(s.message||"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ"),setTimeout(()=>{X("")},3e3)}finally{H(!1)}})(G)},children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"å®Œå…¨ã«å‰Šé™¤ã™ã‚‹"]})]}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"ğŸ’¡ ãƒ’ãƒ³ãƒˆï¼š"})," ä¸€æ™‚çš„ã«ç”³è«‹ã‚’ä¸­æ–­ã—ãŸã„å ´åˆã¯ã€å‰Šé™¤ã›ãšã«é‹å–¶äº‹å‹™å±€ã«ã”ç›¸è«‡ãã ã•ã„ã€‚"]})})]})}),de&&ie&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"æ–½è¨­æƒ…å ±ã®ä¿®æ­£"}),e.jsx("button",{onClick:()=>ne(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(D,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),ie)try{me(!0),X("");const{error:e}=await r.from("pet_facilities").update({name:be.name,description:be.description,website:be.website,phone:be.phone,updated_at:(new Date).toISOString()}).eq("id",ie.id).eq("owner_id",L?.id);if(e)throw e;await ve(),ne(!1),Z("æ–½è¨­æƒ…å ±ã‚’æ›´æ–°ã—ã¾ã—ãŸ"),setTimeout(()=>Z(""),3e3)}catch(s){X("æ–½è¨­æƒ…å ±ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ"),setTimeout(()=>X(""),3e3)}finally{me(!1)}},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"æ–½è¨­å *"}),e.jsx(d,{type:"text",value:be.name,onChange:e=>fe(s=>({...s,name:e.target.value})),required:!0,className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"æ–½è¨­ã®èª¬æ˜ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆ"}),e.jsx("textarea",{value:be.description,onChange:e=>fe(s=>({...s,description:e.target.value})),rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"æ–½è¨­ã®ç‰¹å¾´ã‚„ã‚µãƒ¼ãƒ“ã‚¹å†…å®¹ã‚’è©³ã—ãè¨˜è¼‰ã—ã¦ãã ã•ã„"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"é›»è©±ç•ªå·"}),e.jsx(d,{type:"tel",value:be.phone,onChange:e=>fe(s=>({...s,phone:e.target.value})),className:"w-full",placeholder:"03-1234-5678"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆURL"}),e.jsx(d,{type:"url",value:be.website,onChange:e=>fe(s=>({...s,website:e.target.value})),className:"w-full",placeholder:"https://example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"æ–½è¨­ç”»åƒã®è¿½åŠ ãƒ»å¤‰æ›´"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>{const s=Array.from(e.target.files||[]);pe(s);const a=[];s.forEach(e=>{const t=new FileReader;t.onload=e=>{a.push(e.target?.result),a.length===s.length&&ue(a)},t.readAsDataURL(e)})},className:"hidden",id:"facility-images"}),e.jsxs("label",{htmlFor:"facility-images",className:"cursor-pointer bg-gray-50 hover:bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[e.jsx(q,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"ç”»åƒã‚’é¸æŠã¾ãŸã¯ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—"})]})]}),ge.length>0&&e.jsx("div",{className:"mt-4 grid grid-cols-3 gap-4",children:ge.map((s,a)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s,alt:`Preview ${a}`,className:"w-full h-24 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>{const e=[...ge];e.splice(a,1),ue(e);const s=[...je];s.splice(a,1),pe(s)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:e.jsx(D,{className:"w-3 h-3"})})]},a))})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200",children:[e.jsx(i,{type:"button",variant:"secondary",onClick:()=>ne(!1),children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"}),e.jsx(i,{type:"submit",isLoading:xe,disabled:!be.name.trim(),children:"ä¿å­˜"})]})]})]})})]}):void X("ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãŒå–å¾—ã§ãã¾ã›ã‚“")}function $({className:s}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}export{L as OwnerDashboard};
