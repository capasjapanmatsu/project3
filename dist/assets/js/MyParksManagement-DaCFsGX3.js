import{j as e}from"./motion-BHsL7Azw.js";import{r as s}from"./react-vendor-CMvmJHsS.js";import{a,L as t}from"./router-DXQOdrLL.js";import{u as r,S as l,B as i,s as n}from"./index-DUqt1QDh.js";import{C as c}from"./Card-DqVnP9TA.js";import{_ as d,n as x,M as m,J as o,F as g,Q as h,r as j,q as b,d as p,x as N,aJ as f,t as u}from"./ui-basic-D1oJx_i8.js";import"./heavy-features-Dlg1c9Yc.js";import"./supabase-D2tiogv8.js";function v(){const{user:v}=r(),w=a(),[y,_]=s.useState([]),[k,S]=s.useState({}),[$,C]=s.useState(!0);s.useEffect(()=>{if(!v)return;(async()=>{try{C(!0);const{data:e,error:s}=await n.from("dog_parks").select("\n            *,\n            profiles!dog_parks_owner_id_fkey(display_name, name)\n          ").eq("owner_id",v.id).order("created_at",{ascending:!1});if(s)return;_(e||[])}catch(e){}finally{C(!1)}})()},[v]);const F=s=>{const a={approved:{bg:"bg-green-100",text:"text-green-800",label:"公開中",icon:u},pending:{bg:"bg-yellow-100",text:"text-yellow-800",label:"第一審査中",icon:N},first_stage_passed:{bg:"bg-blue-100",text:"text-blue-800",label:"第二審査申請可能",icon:g},second_stage_waiting:{bg:"bg-orange-100",text:"text-orange-800",label:"第二審査申請準備中",icon:f},second_stage_review:{bg:"bg-purple-100",text:"text-purple-800",label:"第二審査中",icon:N},smart_lock_testing:{bg:"bg-indigo-100",text:"text-indigo-800",label:"スマートロック実証検査中",icon:p},rejected:{bg:"bg-red-100",text:"text-red-800",label:"却下",icon:b}},t=a[s]||a.pending,r=t.icon;return e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-1 ${t.bg} ${t.text}`,children:[e.jsx(r,{className:"w-4 h-4"}),e.jsx("span",{children:t.label})]})};return $?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):e.jsxs(e.Fragment,{children:[e.jsx(l,{title:"管理中ドッグラン一覧",description:"あなたが管理するドッグランの一覧と詳細管理ページです。"}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center mb-4",children:e.jsxs(i,{variant:"secondary",size:"sm",onClick:()=>w("/dashboard"),className:"mr-4",children:[e.jsx(d,{className:"w-4 h-4 mr-1"}),"ダッシュボードに戻る"]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[e.jsx(x,{className:"w-8 h-8 text-green-600 mr-3"}),"管理中ドッグラン一覧"]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["あなたが管理するドッグラン (",y.length,"施設) の詳細管理"]})]}),e.jsx(t,{to:"/park-registration",children:e.jsxs(i,{className:"bg-green-600 hover:bg-green-700",children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"新規ドッグラン登録"]})})]})]}),0===y.length?e.jsxs(c,{className:"p-12 text-center",children:[e.jsx(x,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"管理中のドッグランがありません"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"まずはドッグランを登録して、運営を開始しましょう。"}),e.jsx(t,{to:"/park-registration",children:e.jsxs(i,{className:"bg-green-600 hover:bg-green-700",children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"ドッグラン登録を始める"]})})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:y.map(s=>e.jsx(c,{className:"hover:shadow-lg transition-all duration-200",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:s.name}),e.jsxs("div",{className:"flex items-center text-gray-600 mb-3",children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm",children:s.address})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(o,{className:"w-4 h-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"text-sm font-medium",children:s.average_rating?.toFixed(1)||"0.0"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[s.review_count||0,"件のレビュー"]})]})]}),e.jsx("div",{className:"ml-4",children:F(s.status)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"料金"}),e.jsxs("div",{className:"font-semibold",children:["¥",s.price_per_hour?.toLocaleString()||"未設定","/時間"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"収容人数"}),e.jsxs("div",{className:"font-semibold",children:[s.capacity||"未設定","人"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"ステータス"}),e.jsx("div",{children:F(s.status||"pending")})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"作成日"}),e.jsx("div",{className:"font-semibold",children:new Date(s.created_at).toLocaleDateString("ja-JP")})]})]}),e.jsxs("div",{className:"flex gap-3",children:["second_stage_waiting"===s.status?e.jsx(t,{to:`/parks/${s.id}/second-stage`,className:"flex-1",children:e.jsxs(i,{className:"w-full bg-orange-600 hover:bg-orange-700",children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),"詳細情報を入力"]})}):"pending"===s.status?e.jsxs(i,{disabled:!0,className:"flex-1 bg-gray-400 cursor-not-allowed",children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"審査中（編集不可）"]}):e.jsx(t,{to:`/parks/${s.id}/manage`,className:"flex-1",children:e.jsxs(i,{className:"w-full bg-blue-600 hover:bg-blue-700",children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"管理・修正"]})}),"approved"===s.status&&e.jsx(t,{to:`/parks/${s.id}`,children:e.jsxs(i,{variant:"secondary",className:"px-4",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"公開ページ"]})})]})]})},s.id))})]})]})}export{v as MyParksManagement};
