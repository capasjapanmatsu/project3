import{j as e}from"./motion-BHsL7Azw.js";import{r as s}from"./react-vendor-CMvmJHsS.js";import{X as t,d as a,J as l,M as n,x as r,G as c}from"./ui-basic-C77EGLVg.js";function i({userCoupon:i,onClose:d,onUse:x}){const[o,m]=s.useState(""),[h,u]=s.useState(!1),j=s.useRef(null),{coupon:p}=i;s.useEffect(()=>{if(u(!0),j.current){j.current.style.userSelect="none",j.current.style.webkitUserSelect="none",j.current.style.pointerEvents="none";const e=e=>"PrintScreen"===e.key?(e.preventDefault(),alert("スクリーンショットは禁止されています。店員にこの画面を直接お見せください。"),!1):e.ctrlKey&&e.shiftKey&&"I"===e.key||"F12"===e.key||e.ctrlKey&&"s"===e.key?(e.preventDefault(),!1):void 0;document.addEventListener("keydown",e);const s=e=>(e.preventDefault(),!1);return document.addEventListener("contextmenu",s),()=>{document.removeEventListener("keydown",e),document.removeEventListener("contextmenu",s)}}},[]),s.useEffect(()=>{const e=()=>{const e=(new Date).getTime(),s=new Date(p.end_date).getTime()-e;if(s>0){const e=Math.floor(s/864e5),t=Math.floor(s%864e5/36e5),a=Math.floor(s%36e5/6e4);m(e>0?`${e}日${t}時間${a}分`:t>0?`${t}時間${a}分`:`${a}分`)}else m("有効期限切れ")};e();const s=setInterval(e,6e4);return()=>clearInterval(s)},[p.end_date]);const g=()=>p.discount_value?"percentage"===p.discount_type?`${p.discount_value}% OFF`:`${p.discount_value.toLocaleString()}円 OFF`:"";return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{ref:j,className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden",style:{filter:h?"none":"blur(5px)",WebkitFilter:h?"none":"blur(5px)"},children:[e.jsxs("div",{className:"bg-gradient-to-r from-pink-500 to-purple-600 text-white p-6 relative",children:[e.jsx("button",{onClick:d,className:"absolute top-4 right-4 text-white hover:text-gray-200 pointer-events-auto",children:e.jsx(t,{className:"w-6 h-6"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"ドッグパークJP"}),e.jsx("h2",{className:"text-xl font-medium",children:"クーポン"})]}),e.jsxs("div",{className:"flex items-center justify-center mt-4 bg-black bg-opacity-20 rounded-lg p-2",children:[e.jsx(a,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm",children:"スクリーンショット禁止"})]})]}),p.coupon_image_url&&e.jsx("div",{className:"aspect-[16/9] bg-gray-100",children:e.jsx("img",{src:p.coupon_image_url,alt:"クーポン画像",className:"w-full h-full object-cover",style:{userSelect:"none",pointerEvents:"none"}})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:p.title}),g()&&e.jsx("div",{className:"text-3xl font-extrabold text-red-600 mb-2",children:g()})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(l,{className:"w-5 h-5 text-yellow-500 mr-2 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"サービス内容"}),e.jsx("p",{className:"text-gray-700 text-sm",children:p.service_content})]})]})}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(n,{className:"w-5 h-5 text-gray-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"利用可能店舗"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"対象施設"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(r,{className:"w-5 h-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"有効期限："}),e.jsx("span",{className:"text-gray-600 ml-1",children:new Date(p.end_date).toLocaleDateString("ja-JP")}),o&&e.jsxs("span",{className:"text-sm text-red-600 ml-2",children:["(残り",o,")"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(c,{className:"w-5 h-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"使用制限："}),e.jsx("span",{className:"text-gray-600 ml-1",children:"once"===p.usage_limit_type?"1回限り":"何回でも"})]})]}),p.description&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-gray-600",children:p.description})}),e.jsx("div",{className:"text-center",children:i.is_used?e.jsxs("div",{className:"bg-gray-100 text-gray-600 py-3 px-4 rounded-lg",children:[e.jsx("p",{className:"font-semibold",children:"使用済み"}),e.jsx("p",{className:"text-sm",children:i.used_at&&new Date(i.used_at).toLocaleString("ja-JP")})]}):e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-green-800 font-semibold mb-2",children:"使用可能"}),e.jsx("p",{className:"text-green-700 text-sm mb-3",children:"この画面を店員さんにお見せください"}),"once"===p.usage_limit_type&&e.jsx("p",{className:"text-red-600 text-xs",children:"※このクーポンは1回限りです。使用後は表示できなくなります。"})]})}),e.jsxs("div",{className:"text-center text-xs text-gray-500 mt-4",children:["ID: ",i.qr_code_token.substring(0,8),"..."]})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 text-center",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["※このクーポンは","once"===p.usage_limit_type?"一度":"何度でも","ご利用いただけます"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"※有効期限をお確かめの上ご利用ください"})]})]})})}export{i as C};
