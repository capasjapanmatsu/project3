import{j as e}from"./motion-BHsL7Azw.js";import{r as t}from"./react-vendor-CMvmJHsS.js";import{L as s}from"./ui-basic-BVqAzqVO.js";const r=({src:r,alt:a,className:i="",width:n,height:c,priority:o=!1,placeholderSrc:l,onLoad:u,onError:d,sizes:m,loading:f="lazy",decoding:g="async",fetchpriority:h="auto"})=>{const[y,p]=t.useState(!1),[x,j]=t.useState(o),[b,v]=t.useState(!1),N=t.useRef(null),$=t.useRef(null);t.useEffect(()=>{if(o)return;const e=new IntersectionObserver(([t])=>{t.isIntersecting&&(j(!0),e.disconnect())},{rootMargin:"50px",threshold:.1});return $.current=e,N.current&&e.observe(N.current),()=>e.disconnect()},[o]);const w=t.useCallback(()=>{p(!0),u?.()},[u]),C=t.useCallback(()=>{v(!0),d?.()},[d]),L={backgroundColor:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",minHeight:c||"200px",minWidth:n||"100%"};return b?e.jsx("div",{className:`${i} bg-gray-200 flex items-center justify-center text-gray-500`,style:L,children:e.jsx("span",{className:"text-sm",children:"画像を読み込めませんでした"})}):e.jsxs("div",{className:`relative ${i}`,ref:N,children:[!y&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 animate-pulse",style:L,children:l?e.jsx("img",{src:l,alt:"",className:"w-full h-full object-cover opacity-50"}):e.jsx(s,{className:"w-8 h-8 text-gray-400 animate-spin"})}),x&&e.jsx("img",{src:r,alt:a,width:n,height:c,sizes:m,loading:o?"eager":f,decoding:g,fetchpriority:o?"high":h,onLoad:w,onError:C,className:`\n            ${y?"opacity-100":"opacity-0"}\n            transition-opacity duration-300 ease-in-out\n            ${i}\n          `,style:{aspectRatio:n&&c?`${n}/${c}`:"auto"}})]})};export{r as L};
