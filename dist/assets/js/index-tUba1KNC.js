const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/PWADebugPanel-DeYBgKQg.js","assets/js/data-vendor-CWrxVXZy.js","assets/js/core-vendor-0N04cbcW.js","assets/js/ui-vendor-DBGK8b52.js","assets/js/Home-D0H9KM9x.js","assets/js/Button-D_zbqes6.js","assets/js/heavy-vendor-CAfWpiSr.js","assets/js/Card-BskSggiq.js","assets/js/Login-DK4zzsho.js","assets/js/Input-CerDW6T2.js","assets/js/notification-C37g_ZFh.js","assets/js/Register-BTHRe1Hw.js","assets/js/postalCodeLookup-BVBMVLy5.js","assets/js/safeStorage-B_ZrVCeK.js","assets/js/ForgotPassword-DgVHDPKp.js","assets/js/ResetPassword-C-jgh0wh.js","assets/js/DogParkList-HgSM6BeG.js","assets/js/DogParkDetail-LhGSJCfj.js","assets/js/DoorLockButton-CpVcd3Qa.js","assets/js/Select-B_HRObGj.js","assets/js/DogParkRules-B443kONK.js","assets/js/PetShop-BYVwmi_T.js","assets/js/useStripe-DksAh1mJ.js","assets/js/external-vendor-CcgPsVUa.js","assets/js/stripe-config-03sBkt-B.js","assets/js/Cart-BadVXunG.js","assets/js/Checkout-DRtqQVBu.js","assets/js/ProductDetail-BKgV0zg0.js","assets/js/News-DRgsw262.js","assets/js/NewsDetail-hN-tC_kc.js","assets/js/DogInfo-CvPN6VsQ.js","assets/js/Breeds-B0BGvK8d.js","assets/js/Care-Cspkf_qM.js","assets/js/Food-od3HqfLV.js","assets/js/Training-Cv0rXQVs.js","assets/js/HealthManagement-EOG13e5j.js","assets/js/Walk--dwpqLOj.js","assets/js/Community-CwAoliZb.js","assets/js/Contact-Fghb-8gk.js","assets/js/TermsOfService-DiQ8eEPn.js","assets/js/PrivacyPolicy-BeKNflI1.js","assets/js/NotFound-BnhI2jGM.js","assets/js/UserDashboard-DBd3KtMx.js","assets/js/DogCard-fAEtu16c.js","assets/js/dogBreeds-6lxY8Uni.js","assets/js/VaccineBadge-D-4srpoy.js","assets/js/DogRegistration-CgeIDhQY.js","assets/js/DogManagement-BFfwo_QL.js","assets/js/DogProfile-B0LSPdDB.js","assets/js/ProfileSettings-Drn9Xta0.js","assets/js/ParkReservation-B5Xgv3hj.js","assets/js/DogParkHistory-IT48X5Ti.js","assets/js/OrderHistory-D5Stgclt.js","assets/js/LikedDogs-B1L8LTpe.js","assets/js/ParkRegistration-DRZ53cFd.js","assets/js/ParkRegistrationAgreement-C6bKfGGN.js","assets/js/ParkRegistrationSecondStage-DodwRgGL.js","assets/js/ParkManagement-B3xA1fif.js","assets/js/ParkPublishingSetup-CxmTuZ7G.js","assets/js/FacilityRegistration-DVDokaDG.js","assets/js/OwnerPaymentSystem-DU8SDAMq.js","assets/js/AdminDashboard-DcENhiuw.js","assets/js/AdminUserManagement-DThD7RKz.js","assets/js/AdminParkManagement-CFw8j3Da.js","assets/js/AdminReservationManagement-CDyl20eC.js","assets/js/AdminSalesManagement-BGzkejmD.js","assets/js/AdminVaccineApproval-BpgEbjpX.js","assets/js/AdminFacilityApproval-DtCYK1dY.js","assets/js/AdminShopManagement-NUDP5RPv.js","assets/js/csvExport-CWWwNDcn.js","assets/js/AdminRevenueReport-BHcU90nC.js","assets/js/AdminNewsManagement-D37RZaep.js"])))=>i.map(i=>d[i]);
import{c as e,j as t,_ as s,Q as a,a as r}from"./data-vendor-CWrxVXZy.js";import{b as n,r as i,L as l,u as o,d as c,R as d,e as m,f as h,N as x,B as u}from"./core-vendor-0N04cbcW.js";import{P as j,M as p,a as g,B as _,S as y,D as f,b as w,L as b,H as E,c as v}from"./ui-vendor-DBGK8b52.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var P={},N=n;P.createRoot=N.createRoot,P.hydrateRoot=N.hydrateRoot;const A=i.createContext(null),I={didCatch:!1,error:null};class k extends i.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=I}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(null!==e){for(var t,s,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];null===(t=(s=this.props).onReset)||void 0===t||t.call(s,{args:r,reason:"imperative-api"}),this.setState(I)}}componentDidCatch(e,t){var s,a;null===(s=(a=this.props).onError)||void 0===s||s.call(a,e,t)}componentDidUpdate(e,t){const{didCatch:s}=this.state,{resetKeys:a}=this.props;var r,n;s&&null!==t.error&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==t.length||e.some((e,s)=>!Object.is(e,t[s]))}(e.resetKeys,a)&&(null===(r=(n=this.props).onReset)||void 0===r||r.call(n,{next:a,prev:e.resetKeys,reason:"keys"}),this.setState(I))}render(){const{children:e,fallbackRender:t,FallbackComponent:s,fallback:a}=this.props,{didCatch:r,error:n}=this.state;let l=e;if(r){const e={error:n,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof t)l=t(e);else if(s)l=i.createElement(s,e);else{if(void 0===a)throw n;l=a}}return i.createElement(A.Provider,{value:{didCatch:r,error:n,resetErrorBoundary:this.resetErrorBoundary}},l)}}const D=e("https://onmcivwxtzqajcovptgf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ubWNpdnd4dHpxYWpjb3ZwdGdmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxODk3OTUsImV4cCI6MjA2NDc2NTc5NX0.AqFCz3GQUVeGaG2988LCzsE4aJpeio3xScoxv5T0-OU"),R=e=>{if(!e)return"不明なエラーが発生しました";switch(e.code){case"23505":return"このデータは既に存在しています";case"23503":return"関連するデータが存在しません";case"23502":return"必須項目が入力されていません";case"42501":return"操作する権限がありません";case"42703":return"データベースの構造に問題があります";case"PGRST116":return"データが見つかりません";case"PGRST301":return"送信されたデータが無効です";default:if(e.message){const t=e.message.toLowerCase();return t.includes("duplicate key")?"このデータは既に存在しています":t.includes("foreign key")?"関連するデータが存在しません":t.includes("not null")?"必須項目が入力されていません":t.includes("permission")?"操作する権限がありません":t.includes("authentication")?"認証に失敗しました":t.includes("network")?"ネットワークエラーが発生しました":e.message}return"データベース処理中にエラーが発生しました"}},T=i.createContext({user:null,session:null,loading:!0,logout:async()=>{await Promise.resolve()},isAuthenticated:!1,signInWithMagicLink:async()=>(await Promise.resolve(),{success:!1}),signInWithPassword:async()=>(await Promise.resolve(),{success:!1}),verify2FA:async()=>(await Promise.resolve(),{success:!1}),setIsTrustedDevice:()=>{},isAdmin:!1,userProfile:null}),L=({children:e})=>{const[s,a]=i.useState(null),[r,n]=i.useState(null),[l,o]=i.useState(!0),[c,d]=i.useState(!1),[m,h]=i.useState(!1),[x,u]=i.useState(null);i.useCallback(async(e,t)=>{try{const{data:t,error:s}=await D.from("profiles").select("*").eq("id",e).single();return s?null:t}catch(s){return null}},[]),i.useEffect(()=>{let e=!0;(async()=>{try{const{data:{user:t},error:s}=await D.auth.getUser();if(s)return void(e&&(n(null),a(null),d(!1),u(null),h(!1)));t&&e?(a(t),d(!0),u(null),h("capasjapan@gmail.com"===t.email)):e&&(n(null),a(null),d(!1),u(null),h(!1))}catch(t){e&&(n(null),a(null),d(!1),u(null),h(!1))}finally{e&&o(!1)}})();const{data:{subscription:t}}=D.auth.onAuthStateChange(async(t,s)=>{e&&("SIGNED_OUT"!==t&&s?"SIGNED_IN"===t&&s&&(n(s),a(s.user),d(!0),u(null),h("capasjapan@gmail.com"===s.user.email)):(n(null),a(null),d(!1),u(null),h(!1)),o(!1))});return()=>{e=!1,t.unsubscribe()}},[]);const j=i.useCallback(async e=>{try{const{error:t}=await D.auth.signInWithOtp({email:e,options:{emailRedirectTo:`${window.location.origin}/dashboard`}});return t?{success:!1,error:t.message}:{success:!0}}catch(t){return{success:!1,error:String(t)}}},[]),p=i.useCallback(async(e,t)=>{try{const{data:s,error:a}=await D.auth.signInWithPassword({email:e,password:t});return a?{success:!1,error:a.message}:{success:!0}}catch(s){return{success:!1,error:String(s)}}},[]),g=i.useCallback(async e=>{try{if(!s)return{success:!1,error:"ユーザーが認証されていません"};const{data:{session:t}}=await D.auth.getSession();if(!t?.access_token)return{success:!1,error:"認証が必要です"};const a=await fetch("https://onmcivwxtzqajcovptgf.supabase.co/functions/v1/verify-2fa",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.access_token}`},body:JSON.stringify({userId:s.id,code:e})});if(!a.ok){return{success:!1,error:(await a.json()).error||"認証に失敗しました"}}const r=await a.json();return{success:r.success,...r.error&&{error:r.error}}}catch(t){return{success:!1,error:String(t)}}},[s]),_=i.useCallback(e=>{try{localStorage.setItem("isTrustedDevice",JSON.stringify(e))}catch(t){}},[]),y=i.useCallback(async()=>{try{await D.auth.signOut({scope:"global"}),n(null),a(null),d(!1),u(null),h(!1);try{localStorage.removeItem("isTrustedDevice"),localStorage.removeItem("pre_payment_auth_state"),localStorage.removeItem("supabase.auth.token"),sessionStorage.clear();const e=[];for(let t=0;t<localStorage.length;t++){const s=localStorage.key(t);s&&s.startsWith("sb-")&&e.push(s)}e.forEach(e=>localStorage.removeItem(e))}catch(e){}setTimeout(()=>{window.location.reload()},100)}catch(e){n(null),a(null),d(!1),u(null),h(!1),setTimeout(()=>{window.location.reload()},100)}},[]),f={user:s,session:r,loading:l,logout:y,isAuthenticated:c,signInWithMagicLink:j,signInWithPassword:p,verify2FA:g,setIsTrustedDevice:_,isAdmin:m,userProfile:x};return t.jsx(T.Provider,{value:f,children:e})},O=()=>{const e=i.useContext(T);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e};function S(){const{isAuthenticated:e}=O(),s=(new Date).getFullYear();return t.jsx("footer",{className:"bg-gray-900 text-white py-12",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-8",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx(j,{className:"h-8 w-8 text-blue-400 mr-2"}),t.jsx("h3",{className:"text-xl font-bold",children:"ドッグパークJP"})]}),t.jsx("p",{className:"text-gray-400 leading-relaxed",children:"愛犬とのお散歩をもっと楽しく。 全国のドッグランを簡単に検索・予約できるサービスです。"})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"サービス"}),t.jsxs("ul",{className:"space-y-2",children:[t.jsx("li",{children:t.jsx(l,{to:"/",className:"text-gray-400 hover:text-white transition-colors",children:"ホーム"})}),t.jsx("li",{children:t.jsx(l,{to:"/parks",className:"text-gray-400 hover:text-white transition-colors",children:"ドッグラン一覧"})}),t.jsx("li",{children:t.jsx(l,{to:"/rules",className:"text-gray-400 hover:text-white transition-colors",children:"利用ルール"})}),t.jsx("li",{children:t.jsx(l,{to:"/petshop",className:"text-gray-400 hover:text-white transition-colors",children:"ペットショップ"})}),t.jsx("li",{children:t.jsx(l,{to:e?"/subscription":"/login",className:"text-gray-400 hover:text-white transition-colors",children:"サブスクリプション"})}),t.jsx("li",{children:t.jsx(l,{to:"/news",className:"text-gray-400 hover:text-white transition-colors",children:"新着情報"})})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ご利用者様向け"}),t.jsxs("ul",{className:"space-y-2",children:[t.jsx("li",{children:t.jsx(l,{to:"/register",className:"text-gray-400 hover:text-white transition-colors",children:"新規登録"})}),t.jsx("li",{children:t.jsx(l,{to:"/login",className:"text-gray-400 hover:text-white transition-colors",children:"ログイン"})}),t.jsx("li",{children:t.jsx(l,{to:"/dog-registration",className:"text-gray-400 hover:text-white transition-colors",children:"ワンちゃん登録"})}),t.jsx("li",{children:t.jsx(l,{to:e?"/access-control":"/login",className:"text-gray-400 hover:text-white transition-colors",children:"入場管理"})}),t.jsx("li",{children:t.jsx(l,{to:e?"/community":"/login",className:"text-gray-400 hover:text-white transition-colors",children:"コミュニティ"})})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"お問い合わせ"}),t.jsxs("ul",{className:"space-y-3",children:[t.jsxs("li",{className:"flex items-start",children:[t.jsx(p,{className:"w-5 h-5 text-gray-400 mr-2 mt-0.5"}),t.jsx("span",{className:"text-gray-400",children:"info@dogparkjp.com"})]}),t.jsxs("li",{className:"flex items-start",children:[t.jsx(g,{className:"w-5 h-5 text-gray-400 mr-2 mt-0.5"}),t.jsxs("span",{className:"text-gray-400",children:["〒861-0563",t.jsx("br",{}),"熊本県山鹿市鹿央町千田１７１８－１３",t.jsx("br",{}),"株式会社ＣＡＰＡＳ"]})]})]})]})]}),t.jsx("hr",{className:"border-gray-700 my-8"}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[t.jsxs("p",{className:"text-gray-400 text-sm mb-4 md:mb-0",children:["© ",s," ドッグパークJP. All rights reserved."]}),t.jsxs("div",{className:"flex space-x-6",children:[t.jsx(l,{to:"/privacy",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"プライバシーポリシー"}),t.jsx(l,{to:"/terms",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"利用規約"}),t.jsx(l,{to:"/business-information",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"特定商取引法に基づく表記"}),t.jsx(l,{to:"/contact",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"お問い合わせ"})]})]})]})})}function z(){const{user:e}=O(),[t,s]=i.useState(null),[a,r]=i.useState(!0),[n,l]=i.useState(null),[o,c]=i.useState(!1);i.useEffect(()=>{e?d():(s(null),r(!1),c(!1))},[e]);const d=async()=>{try{r(!0),l(null);const{data:e,error:t}=await D.from("stripe_user_subscriptions").select("*").maybeSingle();if(t)throw t;e?(s(e),c("paused"===e.status)):(s(null),c(!1))}catch(e){l(e.message||"サブスクリプションの取得に失敗しました")}finally{r(!1)}},m=e=>e?new Date(1e3*e).toLocaleDateString("ja-JP"):null;return{subscription:t,isActive:"active"===t?.status||"trialing"===t?.status,isPaused:o,loading:a,error:n,refresh:d,currentPeriodEnd:m(t?.current_period_end??null),currentPeriodStart:m(t?.current_period_start??null),paymentMethod:t?.payment_method_last4?`${t.payment_method_brand} **** ${t.payment_method_last4}`:null,willCancel:t?.cancel_at_period_end}}const V=e=>{if(!e)return"不明なエラーが発生しました";if("string"==typeof e)return e;if(e&&"object"==typeof e&&"message"in e){const t=e;if("PGRST116"===t.code)return"データが見つかりません。Netlify の環境変数設定を確認してください。";if("PGRST301"===t.code)return"データベース接続エラー。Netlify Supabase Extension の設定を確認してください。";switch(t.message){case"Invalid API key":return"API キーが無効です。Netlify の環境変数 VITE_SUPABASE_ANON_KEY を確認してください。";case"Invalid URL":return"データベース URL が無効です。Netlify の環境変数 VITE_SUPABASE_URL を確認してください。";case"Network error":return"ネットワークエラーが発生しました。インターネット接続を確認してください。";case"Authentication required":return"認証が必要です。ログインしてください。";default:return t.message||"不明なエラーが発生しました"}}return"不明なエラーが発生しました"},C=async(e,t={})=>{const{retries:s=0,timeout:a=5e3}=t;for(let n=0;n<=s;n++)try{const t=new AbortController,s=setTimeout(()=>t.abort(),a),r=await e();return clearTimeout(s),{...r,isOffline:!1}}catch(r){if(n===s){const e=r instanceof Error&&(r.message.includes("Network")||r.message.includes("fetch")||r.message.includes("AbortError"));return{data:null,error:r,isOffline:e}}await new Promise(e=>setTimeout(e,1e3*Math.pow(2,n)))}return{data:null,error:new Error("Max retries exceeded"),isOffline:!1}},M=(e,t,s)=>{(new Date).toISOString()},F=i.lazy(()=>s(()=>import("./PWADebugPanel-DeYBgKQg.js"),__vite__mapDeps([0,1,2,3]))),B=i.memo(function(){const{user:e,logout:s,isAdmin:a}=O(),r=o(),[n,c]=i.useState(""),[d,m]=i.useState(0),[h,x]=i.useState(0),{isActive:u}=z(),[p,g]=i.useState(!1),[E,v]=i.useState(!1),[P,N]=i.useState(!1),A=i.useCallback(()=>{const e=document.getElementById("pwa-install-button");e&&e.click()},[]);i.useEffect(()=>{v(window.matchMedia("(display-mode: standalone)").matches);const e=()=>{g(!0)},t=()=>{g(!1),v(!0)};return window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",t),()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",t)}},[]);const I=i.useCallback(async()=>{if(e)try{const t=await C(()=>D.from("profiles").select("name").eq("id",e.id).maybeSingle());if(t.error&&"PGRST116"!==t.error.code&&M("error",0,(t.error,e.id)),t.data?.name)c(t.data.name);else{const t=e.user_metadata?.name||e.email?.split("@")[0];t&&c(t)}}catch(t){M("error",0,e.id)}},[e]),k=i.useCallback(async()=>{if(e)try{const t=await C(()=>D.from("notifications").select("*",{count:"exact",head:!0}).eq("user_id",e.id).eq("read",!1));m(t.data||0)}catch(t){M("error",0,e.id)}},[e]),R=i.useCallback(async()=>{if(e)try{const t=await C(()=>D.from("cart_items").select("*",{count:"exact",head:!0}).eq("user_id",e.id));x(t.data||0)}catch(t){M("error",0,e.id)}},[e]);i.useEffect(()=>{e?(I(),k(),R()):(c(""),m(0),x(0))},[e,a,I,k,R]);const T=i.useCallback(async()=>{try{await s(),r("/")}catch(e){M("error")}},[s,r]);return t.jsxs(t.Fragment,{children:[t.jsx("nav",{className:"bg-white shadow-lg sticky top-0 z-50",children:t.jsx("div",{className:"container mx-auto px-4",children:t.jsxs("div",{className:"flex justify-between items-center h-16",children:[t.jsxs(l,{to:"/",className:"flex items-center space-x-3 hover:opacity-80 transition-opacity cursor-pointer group","aria-label":"ドッグパークJP ホーム",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-green-400 rounded-full flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow",children:t.jsx(j,{className:"h-7 w-7 text-white","aria-hidden":"true"})}),t.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-blue-400 rounded-full opacity-80",children:t.jsx(j,{className:"h-2 w-2 text-white","aria-hidden":"true"})})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("span",{className:"text-xl font-bold text-gray-800 leading-tight",children:["ドッグパーク",t.jsx("span",{className:"text-blue-600",children:"JP"})]}),t.jsx("span",{className:"text-xs text-gray-500 leading-none",children:"愛犬との素敵な時間を"})]})]}),t.jsx("div",{className:"flex items-center space-x-4",children:e?t.jsxs(t.Fragment,{children:[t.jsxs("span",{className:"text-gray-700 hidden md:inline-block",children:["こんにちは、",n||"ユーザー","さん",u&&t.jsxs("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1",children:[t.jsx("path",{d:"m3 11 18-5v12L3 14v-3z"}),t.jsx("path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6"})]}),"サブスク会員"]})]}),t.jsx(l,{to:"/dashboard",className:"text-gray-600 hover:text-blue-600 transition-colors hidden md:inline-block",children:"マイページ"}),t.jsx(l,{to:"/parks",className:"text-gray-600 hover:text-blue-600 transition-colors hidden md:inline-block",children:"ドッグラン一覧"}),t.jsx(l,{to:"/shop",className:"text-gray-600 hover:text-green-600 transition-colors hidden md:inline-block",children:"ペットショップ"}),t.jsxs(l,{to:"/community",className:"relative text-gray-600 hover:text-blue-600 transition-colors","aria-label":"通知 "+(d>0?`${d}件の未読通知があります`:""),children:[t.jsx(_,{className:"h-5 w-5","aria-hidden":"true"}),d>0&&t.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center","aria-hidden":"true",children:d>9?"9+":d})]}),t.jsxs(l,{to:"/cart",className:"relative text-gray-600 hover:text-green-600 transition-colors","aria-label":"カート "+(h>0?`${h}点の商品があります`:""),children:[t.jsx(y,{className:"h-5 w-5","aria-hidden":"true"}),h>0&&t.jsx("span",{className:"absolute -top-2 -right-2 bg-green-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center","aria-hidden":"true",children:h>9?"9+":h})]}),p&&!E&&t.jsxs("button",{onClick:A,className:"flex items-center space-x-1 text-blue-600 hover:text-blue-700 transition-colors bg-blue-50 hover:bg-blue-100 px-2 py-1 rounded-md","aria-label":"アプリをインストール",children:[t.jsx(f,{className:"h-4 w-4","aria-hidden":"true"}),t.jsx("span",{className:"hidden lg:inline text-sm",children:"アプリ化"})]}),E&&t.jsxs("div",{className:"flex items-center space-x-1 text-green-600 bg-green-50 px-2 py-1 rounded-md",children:[t.jsx(f,{className:"h-4 w-4","aria-hidden":"true"}),t.jsx("span",{className:"hidden lg:inline text-sm",children:"PWA"})]}),!1,a&&t.jsxs(l,{to:"/admin",className:"flex items-center space-x-1 text-red-600 hover:text-red-700 transition-colors","aria-label":"管理者ページ",children:[t.jsx(w,{className:"h-4 w-4","aria-hidden":"true"}),t.jsx("span",{className:"hidden md:inline",children:"管理者"})]}),t.jsxs("button",{onClick:()=>{T()},className:"flex items-center space-x-1 text-gray-600 hover:text-red-600 transition-colors","aria-label":"ログアウト",children:[t.jsx(b,{className:"h-4 w-4","aria-hidden":"true"}),t.jsx("span",{className:"hidden md:inline",children:"ログアウト"})]})]}):t.jsxs(t.Fragment,{children:[t.jsx(l,{to:"/login",className:"text-gray-600 hover:text-blue-600 transition-colors",children:"ログイン"}),t.jsx(l,{to:"/register",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"新規登録"})]})})]})})}),t.jsx(i.Suspense,{fallback:t.jsx("div",{children:"Loading debug panel..."}),children:t.jsx(F,{isOpen:P,onClose:()=>N(!1)})})]})});function J({title:e="ドッグパークJP",description:s="愛犬とのお散歩をもっと楽しく。全国のドッグランを簡単に検索・予約できるサービスです。",canonicalUrl:a,ogType:r="website",ogImage:n="https://dogparkjp.com/og-image.jpg"}){const i="ドッグパークJP"===e?e:`${e} | ドッグパークJP`;return t.jsxs(E,{children:[t.jsx("title",{children:i}),t.jsx("meta",{name:"description",content:s}),a&&t.jsx("link",{rel:"canonical",href:a}),t.jsx("meta",{property:"og:type",content:r}),t.jsx("meta",{property:"og:title",content:i}),t.jsx("meta",{property:"og:description",content:s}),t.jsx("meta",{property:"og:image",content:n}),a&&t.jsx("meta",{property:"og:url",content:a}),t.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),t.jsx("meta",{name:"twitter:title",content:i}),t.jsx("meta",{name:"twitter:description",content:s}),t.jsx("meta",{name:"twitter:image",content:n}),t.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),t.jsx("meta",{httpEquiv:"Content-Language",content:"ja"}),t.jsx("meta",{name:"theme-color",content:"#3B82F6"})]})}function U(){const{pathname:e}=c();return i.useEffect(()=>{window.scrollTo(0,0)},[e]),null}const W=({message:e="ロード中..."})=>t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:e})]})}),q=({children:e})=>{const{user:s,isAuthenticated:a,loading:r}=O();return r?t.jsx(W,{message:"認証確認中..."}):s&&a?t.jsx(t.Fragment,{children:e}):t.jsx(x,{to:"/login",replace:!0})},G=({children:e})=>{const{user:s,isAuthenticated:a,isAdmin:r,loading:n}=O();return n?t.jsx(W,{message:"認証確認中..."}):s&&a?r?t.jsx(t.Fragment,{children:e}):t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"アクセス拒否"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"管理者権限が必要です。"}),t.jsx(x,{to:"/dashboard",replace:!0})]})}):t.jsx(x,{to:"/login",replace:!0})},H=d.lazy(()=>s(()=>import("./Home-D0H9KM9x.js"),__vite__mapDeps([4,1,2,5,6,3,7])).then(e=>({default:e.Home}))),$=d.lazy(()=>s(()=>import("./Login-DK4zzsho.js"),__vite__mapDeps([8,1,2,5,6,3,7,9,10])).then(e=>({default:e.Login}))),K=d.lazy(()=>s(()=>import("./Register-BTHRe1Hw.js"),__vite__mapDeps([11,1,2,5,6,3,7,9,12,13])).then(e=>({default:e.Register}))),X=d.lazy(()=>s(()=>import("./ForgotPassword-DgVHDPKp.js"),__vite__mapDeps([14,1,2,13,3])).then(e=>({default:e.ForgotPassword}))),Y=d.lazy(()=>s(()=>import("./ResetPassword-C-jgh0wh.js"),__vite__mapDeps([15,1,2]))),Q=d.lazy(()=>s(()=>import("./DogParkList-HgSM6BeG.js"),__vite__mapDeps([16,1,2,5,6,3,7])).then(e=>({default:e.DogParkList}))),Z=d.lazy(()=>s(()=>import("./DogParkDetail-LhGSJCfj.js"),__vite__mapDeps([17,1,2,5,6,3,7,18,9,19])).then(e=>({default:e.DogParkDetail}))),ee=d.lazy(()=>s(()=>import("./DogParkRules-B443kONK.js"),__vite__mapDeps([20,1,2,7,5,6,3])).then(e=>({default:e.DogParkRules}))),te=d.lazy(()=>s(()=>import("./PetShop-BYVwmi_T.js"),__vite__mapDeps([21,1,2,5,6,3,7,9,22,23,24])).then(e=>({default:e.PetShop}))),se=d.lazy(()=>s(()=>import("./Cart-BadVXunG.js"),__vite__mapDeps([25,1,2,5,6,3,7])).then(e=>({default:e.Cart}))),ae=d.lazy(()=>s(()=>import("./Checkout-DRtqQVBu.js"),__vite__mapDeps([26,1,2,7,5,6,3,9,22,23])).then(e=>({default:e.Checkout}))),re=d.lazy(()=>s(()=>import("./ProductDetail-BKgV0zg0.js"),__vite__mapDeps([27,1,2,5,6,3,7,10])).then(e=>({default:e.ProductDetail}))),ne=d.lazy(()=>s(()=>import("./News-DRgsw262.js"),__vite__mapDeps([28,1,2,7,9,3])).then(e=>({default:e.News}))),ie=d.lazy(()=>s(()=>import("./NewsDetail-hN-tC_kc.js"),__vite__mapDeps([29,1,2,5,6,3,7])).then(e=>({default:e.NewsDetail}))),le=d.lazy(()=>s(()=>import("./DogInfo-CvPN6VsQ.js"),__vite__mapDeps([30,1,2]))),oe=d.lazy(()=>s(()=>import("./Breeds-B0BGvK8d.js"),__vite__mapDeps([31,1,2,5,6,3,7])).then(e=>({default:e.Breeds}))),ce=d.lazy(()=>s(()=>import("./Care-Cspkf_qM.js"),__vite__mapDeps([32,1,2,5,6,3,7])).then(e=>({default:e.Care}))),de=d.lazy(()=>s(()=>import("./Food-od3HqfLV.js"),__vite__mapDeps([33,1,2,5,6,3,7])).then(e=>({default:e.Food}))),me=d.lazy(()=>s(()=>import("./Training-Cv0rXQVs.js"),__vite__mapDeps([34,1,2,5,6,3,7])).then(e=>({default:e.Training}))),he=d.lazy(()=>s(()=>import("./HealthManagement-EOG13e5j.js"),__vite__mapDeps([35,1,2,5,6,3,7])).then(e=>({default:e.HealthManagement}))),xe=d.lazy(()=>s(()=>import("./Walk--dwpqLOj.js"),__vite__mapDeps([36,1,2,5,6,3,7])).then(e=>({default:e.Walk}))),ue=d.lazy(()=>s(()=>import("./Community-CwAoliZb.js"),__vite__mapDeps([37,1,2,5,6,3,7])).then(e=>({default:e.Community}))),je=d.lazy(()=>s(()=>import("./Contact-Fghb-8gk.js"),__vite__mapDeps([38,1,2,7,5,6,3,9])).then(e=>({default:e.Contact}))),pe=d.lazy(()=>s(()=>import("./TermsOfService-DiQ8eEPn.js"),__vite__mapDeps([39,1,2,7,3])).then(e=>({default:e.TermsOfService}))),ge=d.lazy(()=>s(()=>import("./PrivacyPolicy-BeKNflI1.js"),__vite__mapDeps([40,1,2,7,3])).then(e=>({default:e.PrivacyPolicy}))),_e=d.lazy(()=>s(()=>import("./NotFound-BnhI2jGM.js"),__vite__mapDeps([41,1,2,3])).then(e=>({default:e.NotFound}))),ye=d.lazy(()=>s(()=>import("./UserDashboard-DBd3KtMx.js"),__vite__mapDeps([42,1,2,5,6,3,7,43,44,9,19,45])).then(e=>({default:e.UserDashboard}))),fe=d.lazy(()=>s(()=>import("./DogRegistration-CgeIDhQY.js"),__vite__mapDeps([46,1,2,5,6,3,7,9,19,44,10])).then(e=>({default:e.DogRegistration}))),we=d.lazy(()=>s(()=>import("./DogManagement-BFfwo_QL.js"),__vite__mapDeps([47,1,2,5,6,3,7,43,44,9,19,45])).then(e=>({default:e.DogManagement}))),be=d.lazy(()=>s(()=>import("./DogProfile-B0LSPdDB.js"),__vite__mapDeps([48,1,2,7,5,6,3])).then(e=>({default:e.DogProfile}))),Ee=d.lazy(()=>s(()=>import("./ProfileSettings-Drn9Xta0.js"),__vite__mapDeps([49,1,2,5,6,3,7,9,12])).then(e=>({default:e.ProfileSettings}))),ve=d.lazy(()=>s(()=>import("./ParkReservation-B5Xgv3hj.js"),__vite__mapDeps([50,1,2,5,6,3,7,9,45,22,23,24])).then(e=>({default:e.ParkReservation}))),Pe=d.lazy(()=>s(()=>import("./DogParkHistory-IT48X5Ti.js"),__vite__mapDeps([51,1,2,5,6,3,7,9])).then(e=>({default:e.DogParkHistory}))),Ne=d.lazy(()=>s(()=>import("./OrderHistory-D5Stgclt.js"),__vite__mapDeps([52,1,2,5,6,3,7])).then(e=>({default:e.OrderHistory}))),Ae=d.lazy(()=>s(()=>import("./LikedDogs-B1L8LTpe.js"),__vite__mapDeps([53,1,2,5,6,3,7])).then(e=>({default:e.LikedDogs}))),Ie=d.lazy(()=>s(()=>import("./ParkRegistration-DRZ53cFd.js"),__vite__mapDeps([54,1,2,5,6,3,7,9])).then(e=>({default:e.ParkRegistration}))),ke=d.lazy(()=>s(()=>import("./ParkRegistrationAgreement-C6bKfGGN.js"),__vite__mapDeps([55,1,2,5,6,3,7])).then(e=>({default:e.ParkRegistrationAgreement}))),De=d.lazy(()=>s(()=>import("./ParkRegistrationSecondStage-DodwRgGL.js"),__vite__mapDeps([56,1,2,5,6,3,7,9])).then(e=>({default:e.ParkRegistrationSecondStage}))),Re=d.lazy(()=>s(()=>import("./ParkManagement-B3xA1fif.js"),__vite__mapDeps([57,1,2,5,6,3,7])).then(e=>({default:e.ParkManagement}))),Te=d.lazy(()=>s(()=>import("./ParkPublishingSetup-CxmTuZ7G.js"),__vite__mapDeps([58,1,2,5,6,3,7,18,9])).then(e=>({default:e.ParkPublishingSetup}))),Le=d.lazy(()=>s(()=>import("./FacilityRegistration-DVDokaDG.js"),__vite__mapDeps([59,1,2,5,6,3,7,9]))),Oe=d.lazy(()=>s(()=>import("./OwnerPaymentSystem-DU8SDAMq.js"),__vite__mapDeps([60,1,2,5,6,3,7])).then(e=>({default:e.OwnerPaymentSystem}))),Se=d.lazy(()=>s(()=>import("./AdminDashboard-DcENhiuw.js"),__vite__mapDeps([61,1,2,5,6,3,7,9])).then(e=>({default:e.AdminDashboard}))),ze=d.lazy(()=>s(()=>import("./AdminUserManagement-DThD7RKz.js"),__vite__mapDeps([62,1,2,7,5,6,3,9])).then(e=>({default:e.AdminUserManagement}))),Ve=d.lazy(()=>s(()=>import("./AdminParkManagement-CFw8j3Da.js"),__vite__mapDeps([63,1,2,5,6,3,7,9,19])).then(e=>({default:e.AdminParkManagement}))),Ce=d.lazy(()=>s(()=>import("./AdminReservationManagement-CDyl20eC.js"),__vite__mapDeps([64,1,2,5,6,3,7,9])).then(e=>({default:e.AdminReservationManagement}))),Me=d.lazy(()=>s(()=>import("./AdminSalesManagement-BGzkejmD.js"),__vite__mapDeps([65,1,2,7,5,6,3,9])).then(e=>({default:e.AdminSalesManagement}))),Fe=d.lazy(()=>s(()=>import("./AdminVaccineApproval-BpgEbjpX.js"),__vite__mapDeps([66,1,2,5,6,3,7]))),Be=d.lazy(()=>s(()=>import("./AdminFacilityApproval-DtCYK1dY.js"),__vite__mapDeps([67,1,2,5,6,3,7,9,19]))),Je=d.lazy(()=>s(()=>import("./AdminShopManagement-NUDP5RPv.js"),__vite__mapDeps([68,1,2,5,6,3,7,9,19,69])).then(e=>({default:e.AdminShopManagement}))),Ue=d.lazy(()=>s(()=>import("./AdminRevenueReport-BHcU90nC.js"),__vite__mapDeps([70,1,2,7,5,6,3,9,69])).then(e=>({default:e.AdminRevenueReport}))),We=d.lazy(()=>s(()=>import("./AdminNewsManagement-D37RZaep.js"),__vite__mapDeps([71,1,2,5,6,3,7,9,19])).then(e=>({default:e.AdminNewsManagement}))),qe=({children:e})=>t.jsx(v,{children:t.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[t.jsx(J,{}),t.jsx(B,{}),t.jsx("main",{className:"flex-1",children:e}),t.jsx(S,{})]})}),Ge=()=>t.jsxs(qe,{children:[t.jsx(U,{}),t.jsx(i.Suspense,{fallback:t.jsx(W,{message:"ページを読み込み中..."}),children:t.jsxs(m,{children:[t.jsx(h,{path:"/",element:t.jsx(H,{})}),t.jsx(h,{path:"/login",element:t.jsx($,{})}),t.jsx(h,{path:"/register",element:t.jsx(K,{})}),t.jsx(h,{path:"/forgot-password",element:t.jsx(X,{})}),t.jsx(h,{path:"/reset-password",element:t.jsx(Y,{})}),t.jsx(h,{path:"/parks",element:t.jsx(Q,{})}),t.jsx(h,{path:"/parks/:id",element:t.jsx(Z,{})}),t.jsx(h,{path:"/rules",element:t.jsx(ee,{})}),t.jsx(h,{path:"/petshop",element:t.jsx(te,{})}),t.jsx(h,{path:"/cart",element:t.jsx(se,{})}),t.jsx(h,{path:"/checkout",element:t.jsx(ae,{})}),t.jsx(h,{path:"/products/:id",element:t.jsx(re,{})}),t.jsx(h,{path:"/news",element:t.jsx(ne,{})}),t.jsx(h,{path:"/news/:id",element:t.jsx(ie,{})}),t.jsx(h,{path:"/dog-info",element:t.jsx(le,{})}),t.jsx(h,{path:"/dog-info/breeds",element:t.jsx(oe,{})}),t.jsx(h,{path:"/dog-info/care",element:t.jsx(ce,{})}),t.jsx(h,{path:"/dog-info/food",element:t.jsx(de,{})}),t.jsx(h,{path:"/dog-info/training",element:t.jsx(me,{})}),t.jsx(h,{path:"/dog-info/health",element:t.jsx(he,{})}),t.jsx(h,{path:"/dog-info/walk",element:t.jsx(xe,{})}),t.jsx(h,{path:"/community",element:t.jsx(ue,{})}),t.jsx(h,{path:"/contact",element:t.jsx(je,{})}),t.jsx(h,{path:"/terms",element:t.jsx(pe,{})}),t.jsx(h,{path:"/privacy",element:t.jsx(ge,{})}),t.jsx(h,{path:"/dashboard",element:t.jsx(q,{children:t.jsx(ye,{})})}),t.jsx(h,{path:"/dog-registration",element:t.jsx(q,{children:t.jsx(fe,{})})}),t.jsx(h,{path:"/dog-management",element:t.jsx(q,{children:t.jsx(we,{})})}),t.jsx(h,{path:"/dog-profile/:id",element:t.jsx(q,{children:t.jsx(be,{})})}),t.jsx(h,{path:"/profile-settings",element:t.jsx(q,{children:t.jsx(Ee,{})})}),t.jsx(h,{path:"/reservation/:parkId",element:t.jsx(q,{children:t.jsx(ve,{})})}),t.jsx(h,{path:"/park-history",element:t.jsx(q,{children:t.jsx(Pe,{})})}),t.jsx(h,{path:"/order-history",element:t.jsx(q,{children:t.jsx(Ne,{})})}),t.jsx(h,{path:"/liked-dogs",element:t.jsx(q,{children:t.jsx(Ae,{})})}),t.jsx(h,{path:"/park-registration",element:t.jsx(q,{children:t.jsx(Ie,{})})}),t.jsx(h,{path:"/park-registration-agreement",element:t.jsx(q,{children:t.jsx(ke,{})})}),t.jsx(h,{path:"/parks/:id/second-stage",element:t.jsx(q,{children:t.jsx(De,{})})}),t.jsx(h,{path:"/parks/:id/manage",element:t.jsx(q,{children:t.jsx(Re,{})})}),t.jsx(h,{path:"/parks/:id/reserve",element:t.jsx(q,{children:t.jsx(ve,{})})}),t.jsx(h,{path:"/parks/:id/publish-setup",element:t.jsx(q,{children:t.jsx(Te,{})})}),t.jsx(h,{path:"/facility-registration",element:t.jsx(q,{children:t.jsx(Le,{})})}),t.jsx(h,{path:"/owner-payment-system",element:t.jsx(q,{children:t.jsx(Oe,{})})}),t.jsx(h,{path:"/register-park",element:t.jsx(q,{children:t.jsx(Ie,{})})}),t.jsx(h,{path:"/admin",element:t.jsx(G,{children:t.jsx(Se,{})})}),t.jsx(h,{path:"/admin/users",element:t.jsx(G,{children:t.jsx(ze,{})})}),t.jsx(h,{path:"/admin/parks",element:t.jsx(G,{children:t.jsx(Ve,{})})}),t.jsx(h,{path:"/admin/reservations",element:t.jsx(G,{children:t.jsx(Ce,{})})}),t.jsx(h,{path:"/admin/sales",element:t.jsx(G,{children:t.jsx(Me,{})})}),t.jsx(h,{path:"/admin/vaccine-approval",element:t.jsx(G,{children:t.jsx(Fe,{})})}),t.jsx(h,{path:"/admin/facility-approval",element:t.jsx(G,{children:t.jsx(Be,{})})}),t.jsx(h,{path:"/admin/shop",element:t.jsx(G,{children:t.jsx(Je,{})})}),t.jsx(h,{path:"/admin/revenue",element:t.jsx(G,{children:t.jsx(Ue,{})})}),t.jsx(h,{path:"/admin/news",element:t.jsx(G,{children:t.jsx(We,{})})}),t.jsx(h,{path:"*",element:t.jsx(_e,{})})]})})]}),He=new a({defaultOptions:{queries:{staleTime:6e4,gcTime:3e5,retry:1,refetchOnWindowFocus:!1,refetchIntervalInBackground:!1},mutations:{retry:1}}}),$e=({resetErrorBoundary:e})=>t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"エラーが発生しました"}),t.jsx("button",{onClick:e,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"再試行"})]})}),Ke=document.getElementById("root");if(Ke){P.createRoot(Ke).render(t.jsx(k,{FallbackComponent:$e,children:t.jsx(r,{client:He,children:t.jsx(u,{children:t.jsx(L,{children:t.jsx(Ge,{})})})})}))}export{J as S,z as a,C as b,V as c,R as h,M as l,D as s,O as u};
