const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/css/ImageCropper-OEN34m2J.css"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,s,a)=>((t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a)(t,"symbol"!=typeof s?s+"":s,a);import{j as s}from"./motion-CuO0nkIV.js";import{Q as a,a as n}from"./heavy-features-BIdEME4r.js";import{d as r,r as i,b as l}from"./react-vendor-cniURDpR.js";import{L as o,u as c,a as d,R as m,b as u,N as h,B as x}from"./router-Cg6wfOY4.js";import{_ as p,c as j}from"./supabase-B0bqaRGb.js";import{H as g,a as f,M as b,K as y,U as _,b as w,P as v,S as k,c as E,B as S,d as N,D as P,e as I,L as A,f as L,A as D,g as R,h as O,i as T,E as C,j as z,k as V,l as M}from"./ui-basic-icnN6BOT.js";var F={},$=r;F.createRoot=$.createRoot,F.hydrateRoot=$.hydrateRoot;const U=i.createContext(null),W={didCatch:!1,error:null};class q extends i.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=W}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(null!==e){for(var t,s,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];null===(t=(s=this.props).onReset)||void 0===t||t.call(s,{args:n,reason:"imperative-api"}),this.setState(W)}}componentDidCatch(e,t){var s,a;null===(s=(a=this.props).onError)||void 0===s||s.call(a,e,t)}componentDidUpdate(e,t){const{didCatch:s}=this.state,{resetKeys:a}=this.props;var n,r;s&&null!==t.error&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==t.length||e.some((e,s)=>!Object.is(e,t[s]))}
/*! Capacitor: https://capacitorjs.com/ - MIT License */(e.resetKeys,a)&&(null===(n=(r=this.props).onReset)||void 0===n||n.call(r,{next:a,prev:e.resetKeys,reason:"keys"}),this.setState(W))}render(){const{children:e,fallbackRender:t,FallbackComponent:s,fallback:a}=this.props,{didCatch:n,error:r}=this.state;let l=e;if(n){const e={error:r,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof t)l=t(e);else if(s)l=i.createElement(s,e);else{if(void 0===a)throw r;l=a}}return i.createElement(U.Provider,{value:{didCatch:n,error:r,resetErrorBoundary:this.resetErrorBoundary}},l)}}var B,G;(G=B||(B={})).Unimplemented="UNIMPLEMENTED",G.Unavailable="UNAVAILABLE";class J extends Error{constructor(e,t,s){super(e),this.message=e,this.code=t,this.data=s}}const H=e=>{const t=e.CapacitorCustomPlatform||null,s=e.Capacitor||{},a=s.Plugins=s.Plugins||{},n=()=>null!==t?t.name:(e=>{var t,s;return(null==e?void 0:e.androidBridge)?"android":(null===(s=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===s?void 0:s.bridge)?"ios":"web"})(e),r=e=>{var t;return null===(t=s.PluginHeaders)||void 0===t?void 0:t.find(t=>t.name===e)},i=new Map;return s.convertFileSrc||(s.convertFileSrc=e=>e),s.getPlatform=n,s.handleError=t=>e.console.error(t),s.isNativePlatform=()=>"web"!==n(),s.isPluginAvailable=e=>{const t=i.get(e);return!!(null==t?void 0:t.platforms.has(n()))||!!r(e)},s.registerPlugin=(e,l={})=>{const o=i.get(e);if(o)return o.proxy;const c=n(),d=r(e);let m;const u=a=>{let n;const r=(...r)=>{const i=(async()=>(!m&&c in l?m=m="function"==typeof l[c]?await l[c]():l[c]:null!==t&&!m&&"web"in l&&(m=m="function"==typeof l.web?await l.web():l.web),m))().then(t=>{const i=((t,a)=>{var n,r;if(!d){if(t)return null===(r=t[a])||void 0===r?void 0:r.bind(t);throw new J(`"${e}" plugin is not implemented on ${c}`,B.Unimplemented)}{const r=null==d?void 0:d.methods.find(e=>a===e.name);if(r)return"promise"===r.rtype?t=>s.nativePromise(e,a.toString(),t):(t,n)=>s.nativeCallback(e,a.toString(),t,n);if(t)return null===(n=t[a])||void 0===n?void 0:n.bind(t)}})(t,a);if(i){const e=i(...r);return n=null==e?void 0:e.remove,e}throw new J(`"${e}.${a}()" is not implemented on ${c}`,B.Unimplemented)});return"addListener"===a&&(i.remove=async()=>n()),i};return r.toString=()=>`${a.toString()}() { [capacitor code] }`,Object.defineProperty(r,"name",{value:a,writable:!1,configurable:!1}),r},h=u("addListener"),x=u("removeListener"),p=(e,t)=>{const s=h({eventName:e},t),a=async()=>{const a=await s;x({eventName:e,callbackId:a},t)},n=new Promise(e=>s.then(()=>e({remove:a})));return n.remove=async()=>{await a()},n},j=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return d?p:h;case"removeListener":return x;default:return u(t)}}});return a[e]=j,i.set(e,{name:e,proxy:j,platforms:new Set([...Object.keys(l),...d?[c]:[]])}),j},s.Exception=J,s.DEBUG=!!s.DEBUG,s.isLoggingEnabled=!!s.isLoggingEnabled,s},X=(e=>e.Capacitor=H(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),K=X.registerPlugin;class Y{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let s=!1;this.listeners[e]||(this.listeners[e]=[],s=!0),this.listeners[e].push(t);const a=this.windowListeners[e];a&&!a.registered&&this.addWindowListener(a),s&&this.sendRetainedArgumentsForEvent(e);return Promise.resolve({remove:async()=>this.removeListener(e,t)})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,s){const a=this.listeners[e];if(a)a.forEach(e=>e(t));else if(s){let s=this.retainedEventArguments[e];s||(s=[]),s.push(t),this.retainedEventArguments[e]=s}}hasListeners(e){var t;return!!(null===(t=this.listeners[e])||void 0===t?void 0:t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new X.Exception(e,B.Unimplemented)}unavailable(e="not available"){return new X.Exception(e,B.Unavailable)}async removeListener(e,t){const s=this.listeners[e];if(!s)return;const a=s.indexOf(t);this.listeners[e].splice(a,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(t=>{this.notifyListeners(e,t)}))}}const Z=K("WebView"),Q=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),ee=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class te extends Y{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(e=>{if(e.length<=0)return;let[s,a]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=ee(s).trim(),a=ee(a).trim(),t[s]=a}),t}async setCookie(e){try{const t=Q(e.key),s=Q(e.value),a=`; expires=${(e.expires||"").replace("expires=","")}`,n=(e.path||"/").replace("path=",""),r=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${s||""}${a}; path=${n}; ${r};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}const se=K("CapacitorCookies",{web:()=>new te}),ae=(e,t={})=>{const s=Object.assign({method:e.method||"GET",headers:e.headers},t),a=((e={})=>{const t=Object.keys(e);return Object.keys(e).map(e=>e.toLocaleLowerCase()).reduce((s,a,n)=>(s[a]=e[t[n]],s),{})})(e.headers)["content-type"]||"";if("string"==typeof e.data)s.body=e.data;else if(a.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[s,a]of Object.entries(e.data||{}))t.set(s,a);s.body=t.toString()}else if(a.includes("multipart/form-data")||e.data instanceof FormData){const t=new FormData;if(e.data instanceof FormData)e.data.forEach((e,s)=>{t.append(s,e)});else for(const s of Object.keys(e.data))t.append(s,e.data[s]);s.body=t;const a=new Headers(s.headers);a.delete("content-type"),s.headers=a}else(a.includes("application/json")||"object"==typeof e.data)&&(s.body=JSON.stringify(e.data));return s};class ne extends Y{async request(e){const t=ae(e,e.webFetchExtra),s=((e,t=!0)=>e?Object.entries(e).reduce((e,s)=>{const[a,n]=s;let r,i;return Array.isArray(n)?(i="",n.forEach(e=>{r=t?encodeURIComponent(e):e,i+=`${a}=${r}&`}),i.slice(0,-1)):(r=t?encodeURIComponent(n):n,i=`${a}=${r}`),`${e}&${i}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),a=s?`${e.url}?${s}`:e.url,n=await fetch(a,t),r=n.headers.get("content-type")||"";let i,l,{responseType:o="text"}=n.ok?e:{};switch(r.includes("application/json")&&(o="json"),o){case"arraybuffer":case"blob":l=await n.blob(),i=await(async e=>new Promise((t,s)=>{const a=new FileReader;a.onload=()=>{const e=a.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},a.onerror=e=>s(e),a.readAsDataURL(e)}))(l);break;case"json":i=await n.json();break;default:i=await n.text()}const c={};return n.headers.forEach((e,t)=>{c[t]=e}),{data:i,headers:c,status:n.status,url:n.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}const re=K("CapacitorHttp",{web:()=>new ne}),ie=Object.freeze(Object.defineProperty({__proto__:null,Capacitor:X,CapacitorCookies:se,CapacitorException:J,CapacitorHttp:re,get ExceptionCode(){return B},WebPlugin:Y,WebView:Z,buildRequestInit:ae,registerPlugin:K},Symbol.toStringTag,{value:"Module"})),le=K("App",{web:()=>p(()=>import("./web-iqNJMXGm.js"),[]).then(e=>new e.AppWeb)}),oe=i.createContext({isLoaded:!1,isLoading:!0,error:null,google:null});function ce({children:e,apiKey:t,libraries:a=["places"]}){const[n,r]=i.useState(!1),[l,o]=i.useState(!0),[c,d]=i.useState(null),[m,u]=i.useState(null);i.useEffect(()=>{(async()=>{try{const s=t||"AIzaSyC9sxGamDZmdKIz3vP1CWLJORl-QkoWgHg";if(window.google?.maps)return u(window.google),r(!0),void o(!1);if(window._googleMapsLoading){const e=setInterval(()=>{window.google?.maps&&(clearInterval(e),u(window.google),r(!0),o(!1))},100);return void setTimeout(()=>{if(clearInterval(e),!window.google?.maps){d("Google Maps API読み込みタイムアウト（待機中）"),o(!1)}},3e4)}window._googleMapsLoading=!0;const n=document.createElement("script"),i=`https://maps.googleapis.com/maps/api/js?key=${s}${a.length>0?`&libraries=${a.join(",")}`:""}`;n.src=i,n.async=!0,n.defer=!0;const l=new Promise((e,t)=>{n.onload=()=>{if(window._googleMapsLoading=!1,window.google?.maps)u(window.google),r(!0),o(!1),e();else{const e="Google Maps APIの初期化に失敗しました";d(e),o(!1),t(new Error(e))}},n.onerror=e=>{window._googleMapsLoading=!1;const s="Google Maps API の読み込みに失敗しました - ネットワークエラーまたはAPIキーが無効です";d(s),o(!1),t(new Error(s))},setTimeout(()=>{if(!window.google?.maps){window._googleMapsLoading=!1;const e="Google Maps API の読み込みがタイムアウトしました（30秒）";d(e),o(!1),t(new Error(e))}},3e4),document.head.appendChild(n)});try{await l}catch(e){}}catch(s){const e=s instanceof Error?s.message:"Google Maps の初期化で予期しないエラーが発生しました";d(e),o(!1)}})()},[t,a]);const h={isLoaded:n,isLoading:l,error:c,google:m};return s.jsx(oe.Provider,{value:h,children:e})}function de(){const e=i.useContext(oe);if(void 0===e)throw new Error("useGoogleMaps must be used within a GoogleMapsProvider");return e}async function me(){try{const e=await fetch("/auth/me",{credentials:"include"});return e.ok?await e.json():null}catch{return null}}const ue=j("https://onmcivwxtzqajcovptgf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ubWNpdnd4dHpxYWpjb3ZwdGdmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxODk3OTUsImV4cCI6MjA2NDc2NTc5NX0.AqFCz3GQUVeGaG2988LCzsE4aJpeio3xScoxv5T0-OU",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),he=e=>{if(!e)return"不明なエラーが発生しました";switch(e.code){case"23505":return"このデータは既に存在しています";case"23503":return"関連するデータが存在しません";case"23502":return"必須項目が入力されていません";case"42501":return"操作する権限がありません";case"42703":return"データベースの構造に問題があります";case"PGRST116":return"データが見つかりません";case"PGRST301":return"送信されたデータが無効です";default:if(e.message){const t=e.message.toLowerCase();return t.includes("duplicate key")?"このデータは既に存在しています":t.includes("foreign key")?"関連するデータが存在しません":t.includes("not null")?"必須項目が入力されていません":t.includes("permission")?"操作する権限がありません":t.includes("authentication")?"認証に失敗しました":t.includes("network")?"ネットワークエラーが発生しました":e.message}return"データベース処理中にエラーが発生しました"}},xe=i.createContext({user:null,session:null,loading:!0,effectiveUserId:null,logout:async()=>{await Promise.resolve()},isAuthenticated:!1,signInWithMagicLink:async()=>(await Promise.resolve(),{success:!1}),signInWithPassword:async()=>(await Promise.resolve(),{success:!1}),signInWithGoogle:async()=>(await Promise.resolve(),{success:!1}),signInWithTwitter:async()=>(await Promise.resolve(),{success:!1}),verify2FA:async()=>(await Promise.resolve(),{success:!1}),setIsTrustedDevice:()=>{},isAdmin:!1,userProfile:null,lineUser:null,isLineAuthenticated:!1}),pe=({children:e})=>{const[t,a]=i.useState(null),[n,r]=i.useState(null),[l,o]=i.useState(!0),[c,d]=i.useState(!1),[m,u]=i.useState(!1),[h,x]=i.useState(null),[p,j]=i.useState(null),[g,f]=i.useState(null),[b,y]=i.useState(!1);i.useCallback(async(e,t)=>{try{const{data:t,error:s}=await ue.from("profiles").select("*").eq("id",e).single();return s?null:t}catch(s){return null}},[]),i.useEffect(()=>{let e=!0;(async()=>{try{const{data:{user:t}}=await ue.auth.getUser();if(t&&e){a(t),d(!0),x(null),u("capasjapan@gmail.com"===t.email),j(t.id),o(!1);try{const t=await me();t&&e&&(f(t),y(!0))}catch{}return}try{const t=await me();if(t&&e){f(t),y(!0),j(t.app_user_id||t.id);try{const t=await fetch("/line/exchange-supabase-session",{method:"POST",credentials:"include"});if(t.ok){const{access_token:s,refresh_token:n}=await t.json(),{data:i}=await ue.auth.setSession({access_token:s,refresh_token:n});if(i?.session&&e)return r(i.session),a(i.session.user),d(!0),x(null),u("capasjapan@gmail.com"===i.session.user.email),j(i.session.user.id),void o(!1)}}catch{}return void o(!1)}}catch{}e&&(r(null),a(null),d(!1),x(null),u(!1),f(null),y(!1),j(null),o(!1))}catch{e&&o(!1)}})();const{data:{subscription:t}}=ue.auth.onAuthStateChange((t,s)=>{if(e)if("SIGNED_OUT"===t)r(null),a(null),d(!1),x(null),u(!1),j(null),o(!1);else if("SIGNED_IN"===t&&s){r(s),a(s.user),d(!0),x(null),u("capasjapan@gmail.com"===s.user.email),j(s.user.id),o(!1);try{ue.rpc("rpc_daily_login_bonus",{p_user:s.user.id}).catch(console.warn)}catch{}}else"TOKEN_REFRESHED"===t&&s&&(r(s),a(s.user),j(s.user.id),o(!1))});return()=>{e=!1,t.unsubscribe()}},[]);const _=i.useCallback(async e=>{try{const{error:t}=await ue.auth.signInWithOtp({email:e,options:{emailRedirectTo:`${window.location.origin}/dashboard`}});return t?{success:!1,error:t.message}:{success:!0}}catch(t){return{success:!1,error:String(t)}}},[]),w=i.useCallback(async(e,t)=>{try{const{data:s,error:a}=await ue.auth.signInWithPassword({email:e,password:t});return a?{success:!1,error:a.message}:{success:!0}}catch(s){return{success:!1,error:String(s)}}},[]),v=i.useCallback(async()=>{try{const{data:e,error:t}=await ue.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/dashboard`,queryParams:{}}});return t?{success:!1,error:t.message}:{success:!0}}catch(e){return{success:!1,error:String(e)}}},[]),k=i.useCallback(async()=>{try{const{data:e,error:t}=await ue.auth.signInWithOAuth({provider:"twitter",options:{redirectTo:`${window.location.origin}/dashboard`}});return t?{success:!1,error:t.message}:{success:!0}}catch(e){return{success:!1,error:String(e)}}},[]),E=i.useCallback(async e=>{try{if(!t)return{success:!1,error:"ユーザーが認証されていません"};const{data:{session:s}}=await ue.auth.getSession();if(!s?.access_token)return{success:!1,error:"認証が必要です"};const a=await fetch("https://onmcivwxtzqajcovptgf.supabase.co/functions/v1/verify-2fa",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.access_token}`},body:JSON.stringify({userId:t.id,code:e})});if(!a.ok){return{success:!1,error:(await a.json()).error||"認証に失敗しました"}}const n=await a.json();return{success:n.success,...n.error&&{error:n.error}}}catch(s){return{success:!1,error:String(s)}}},[t]),S=i.useCallback(e=>{try{localStorage.setItem("isTrustedDevice",JSON.stringify(e))}catch(t){}},[]),N=i.useCallback(async()=>{try{if(g||b)try{await fetch("/auth/logout",{method:"POST",credentials:"include"})}catch(e){}(t||c)&&await ue.auth.signOut({scope:"global"}),r(null),a(null),d(!1),x(null),u(!1),f(null),y(!1),j(null);try{localStorage.removeItem("isTrustedDevice"),localStorage.removeItem("pre_payment_auth_state"),localStorage.removeItem("supabase.auth.token"),localStorage.removeItem("skipSplashOnce"),sessionStorage.clear();const e=[];for(let t=0;t<localStorage.length;t++){const s=localStorage.key(t);s&&s.startsWith("sb-")&&e.push(s)}e.forEach(e=>localStorage.removeItem(e))}catch(s){}setTimeout(()=>{window.location.href="/"},100)}catch(s){r(null),a(null),d(!1),x(null),u(!1),f(null),y(!1),j(null),setTimeout(()=>{window.location.href="/"},100)}},[g,b,t,c]),P=i.useMemo(()=>({user:t,session:n,loading:l,logout:N,isAuthenticated:c,effectiveUserId:p,signInWithMagicLink:_,signInWithPassword:w,signInWithGoogle:v,signInWithTwitter:k,verify2FA:E,setIsTrustedDevice:S,isAdmin:m,userProfile:h,lineUser:g,isLineAuthenticated:b}),[t,n,l,N,c,p,_,w,v,k,E,S,m,h,g,b]);return s.jsx(xe.Provider,{value:P,children:e})},je=()=>{const e=i.useContext(xe);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},ge=i.createContext({isMaintenanceActive:!1,maintenanceInfo:null,loading:!0,error:null,clientIP:null,isIPWhitelisted:!1,refreshMaintenanceStatus:async()=>{}}),fe=({children:e})=>{const[t,a]=i.useState(!1),[n,r]=i.useState(null),[l,o]=i.useState(!0),[c,d]=i.useState(null),[m,u]=i.useState(null),[h,x]=i.useState(!1),p=i.useCallback(async()=>{try{u("127.0.0.1"),x(!0)}catch(e){u("127.0.0.1"),x(!0)}},[]),j=i.useCallback(async()=>{try{let e=ue.from("maintenance_schedules").select("*").eq("is_active",!0).is("dog_park_id",null).order("start_time",{ascending:!1}).limit(1),{data:t,error:s}=await e;if(s&&"object"==typeof s&&"42703"===s.code){const e=await ue.from("maintenance_schedules").select("*").eq("status","active").order("start_date",{ascending:!1}).limit(1);t=e.data,s=e.error}if(s)throw s;if(t&&t.length>0){const e=t[0],s=e.start_time??e.start_date??null,n=e.end_time??e.end_date??null,i=e.is_emergency??!1;a(!0),r({id:e.id,title:e.title??e.name??"メンテナンス",message:e.message??e.description??"",start_time:s,end_time:n,is_emergency:!!i})}else a(!1),r(null)}catch(e){a(!1),r(null)}},[]),g=i.useCallback(async()=>{o(!0);try{await j()}finally{o(!1)}},[j]);i.useEffect(()=>{(async()=>{o(!0);try{await p(),await j()}finally{o(!1)}})()},[p,j]);const f={isMaintenanceActive:t,maintenanceInfo:n,loading:l,error:c,clientIP:m,isIPWhitelisted:h,refreshMaintenanceStatus:g};return s.jsx(ge.Provider,{value:f,children:e})},be=()=>{const e=i.useContext(ge);if(!e)throw new Error("useMaintenance must be used within a MaintenanceProvider");return e},ye=i.forwardRef(({children:e,className:t="",onClick:a,elevation:n="md",rounded:r="lg",border:i=!1,hoverEffect:l=!1,as:o="div",...c},d)=>{const m=i?"border border-gray-200":"",u=l?"hover:shadow-lg transition-shadow duration-300":"",h=a?"cursor-pointer":"";return s.jsx(o,{ref:d,className:`bg-white ${{none:"",sm:"shadow-sm",md:"shadow-md",lg:"shadow-lg"}[n]} ${{none:"rounded-none",sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg",full:"rounded-full"}[r]} ${m} ${u} ${h} ${t}`,onClick:a,...c,children:e})});function _e({title:e="ドッグパークJP",description:t="愛犬とのお散歩をもっと楽しく。全国のドッグランを簡単に検索・予約できるサービスです。",canonicalUrl:a,ogType:n="website",ogImage:r="https://dogparkjp.com/og-image.jpg"}){const i="ドッグパークJP"===e?e:`${e} | ドッグパークJP`;return s.jsxs(g,{children:[s.jsx("title",{children:i}),s.jsx("meta",{name:"description",content:t}),a&&s.jsx("link",{rel:"canonical",href:a}),s.jsx("meta",{property:"og:type",content:n}),s.jsx("meta",{property:"og:title",content:i}),s.jsx("meta",{property:"og:description",content:t}),s.jsx("meta",{property:"og:image",content:r}),a&&s.jsx("meta",{property:"og:url",content:a}),s.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),s.jsx("meta",{name:"twitter:title",content:i}),s.jsx("meta",{name:"twitter:description",content:t}),s.jsx("meta",{name:"twitter:image",content:r}),s.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),s.jsx("meta",{httpEquiv:"Content-Language",content:"ja"}),s.jsx("meta",{name:"theme-color",content:"#3B82F6"})]})}function we(){return s.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[s.jsx(_e,{title:"ドッグラン運営の注意事項",description:"運営にあたっての重要な注意事項"}),s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"ドッグラン運営の注意事項"}),s.jsxs(ye,{className:"p-6 space-y-4",children:[s.jsx("p",{children:"運営開始前に、以下の事項を必ずご確認ください。"}),s.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[s.jsxs("li",{children:["万が一、事故やトラブルが発生した場合は、",s.jsx("span",{className:"font-semibold",children:"早急に現場へ向かい対応"}),"してください。"]}),s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold",children:"ウンチ等の廃棄用ゴミ箱の設置は必須"}),"です。定期的に袋を交換し、衛生管理を徹底してください。"]}),s.jsxs("li",{children:["施設内での",s.jsx("span",{className:"font-semibold",children:"除草剤の使用は禁止"}),"です。手作業や安全な方法での雑草管理をお願いします。"]}),s.jsxs("li",{children:["ワンちゃんが飲み込んでしまいそうな小さな物が落ちていないか、",s.jsx("span",{className:"font-semibold",children:"定期巡回"}),"してください。"]}),s.jsxs("li",{children:["フェンスや設備に",s.jsx("span",{className:"font-semibold",children:"突起物・鋭利な箇所が無いか"}),"を点検し、怪我の恐れがある箇所は速やかに是正してください。"]}),s.jsxs("li",{children:["フェンスは",s.jsx("strong",{children:"金属製または樹脂等の丈夫な素材"}),"を使用し、",s.jsx("strong",{children:"ネット等は使用禁止"}),"としてください。",s.jsx("br",{}),"高さは",s.jsx("strong",{children:"1m20cm以上"}),"を目安とし、",s.jsx("strong",{children:"下側に15cm以上の隙間が生じない"}),"構造にしてください。"]}),s.jsxs("li",{children:["入退場口は",s.jsx("strong",{children:"必ず二重扉"}),"（前室）とし、",s.jsx("strong",{children:"外側はスマートロック付きの扉"}),"を設置してください。"]}),s.jsxs("li",{children:["エリア分けの目安：",s.jsx("strong",{children:"大型犬は10kg以上"}),"／",s.jsx("strong",{children:"小型犬は10kg以下"}),"で区分し、混雑時は安全上の配慮を優先してください。"]}),s.jsxs("li",{children:["施設内の見やすい場所に",s.jsx("strong",{children:"緊急連絡先"}),"（運営者名・電話番号）を必ず掲示してください。"]})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"上記は最低限の事項です。安全で快適な運営のため、随時点検・改善をお願いします。"})]}),s.jsx("div",{className:"mt-6",children:s.jsx(o,{to:"/my-parks-management",className:"text-blue-700 hover:text-blue-900 underline",children:"管理中ドッグラン一覧へ戻る"})})]})}function ve(){const e=c(),[t,a]=i.useState("/"),{user:n,lineUser:l,effectiveUserId:d}=je(),m=n?.id||l?.id||d,[u,h]=i.useState(0),[x,p]=i.useState(0);i.useEffect(()=>{const t=e.pathname.split("/")[1];a(t?`/${t}`:"/")},[e]),i.useEffect(()=>{let e=!0;const t=async()=>{if(m)try{const[t,s]=await Promise.all([ue.from("notifications").select("*",{count:"exact",head:!0}).eq("user_id",m).eq("read",!1),ue.from("messages").select("*",{count:"exact",head:!0}).eq("receiver_id",m).eq("read",!1)]);e&&(h(t?.data||0),p(s?.data||0))}catch{e&&(h(0),p(0))}else e&&(h(0),p(0))};if(t(),!m)return()=>{e=!1};const s=ue.channel("bn_notifications").on("postgres_changes",{event:"*",schema:"public",table:"notifications",filter:`user_id=eq.${m}`},()=>{t()}).subscribe(),a=ue.channel("bn_messages").on("postgres_changes",{event:"*",schema:"public",table:"messages",filter:`receiver_id=eq.${m}`},()=>{t()}).subscribe();return()=>{e=!1;try{s.unsubscribe()}catch{}try{a.unsubscribe()}catch{}}},[m]);e.pathname.startsWith("/community");const j=[{path:"/",label:"ホーム",icon:f,badge:0},{path:"/parks",label:"ドッグラン",icon:b,badge:0},{path:"/access-control",label:"入退場",icon:y,badge:0},{path:"/community",label:"コミュニティ",icon:_,badge:u+x},{path:"/dashboard",label:"マイページ",icon:w,badge:0}],g=s.jsx("div",{className:"fixed left-0 right-0 z-[70] md:hidden",style:{bottom:0,paddingBottom:"env(safe-area-inset-bottom, 0px)",transform:"translateZ(0)",pointerEvents:"none"},children:s.jsx("div",{className:"flex justify-around items-center h-16 bg-white border-t border-gray-200 pointer-events-auto",children:j.map(e=>{const a=e.icon,n="/"===(r=e.path)?"/"===t:t.startsWith(r);var r;return s.jsxs(o,{to:e.path,className:"flex flex-col items-center justify-center w-full h-full no-underline hover:no-underline relative "+(n?"text-blue-600":"text-gray-500"),children:[s.jsxs("div",{className:"relative",children:[s.jsx(a,{className:"w-6 h-6 "+(n?"text-blue-600":"text-gray-500")}),e.badge>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] rounded-full min-w-[16px] h-[16px] px-1 flex items-center justify-center",children:e.badge>9?"9+":e.badge})]}),s.jsx("span",{className:"text-xs mt-1",children:e.label})]},e.path)})})});if("undefined"!=typeof document){const e="global-bottom-nav-root";let t=document.getElementById(e);return t||(t=document.createElement("div"),t.id=e,document.body.appendChild(t)),r.createPortal(g,t)}return g}function ke(){const{isAuthenticated:e}=je(),t=(new Date).getFullYear();return s.jsx("footer",{className:"bg-gray-900 text-white py-16 pb-28 md:pb-16",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-8",children:[s.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(v,{className:"h-8 w-8 text-blue-400 mr-2"}),s.jsx("h3",{className:"text-xl font-bold",children:"ドッグパークJP"})]}),s.jsx("p",{className:"text-gray-400 leading-relaxed",children:"愛犬とのお散歩をもっと楽しく。 全国のドッグランを簡単に検索・予約できるサービスです。"}),s.jsx("div",{className:"mt-4",children:s.jsx("a",{href:"https://line.me/R/ti/p/%40662udgcy",target:"_blank",rel:"noopener noreferrer","aria-label":"公式LINEに登録",className:"inline-flex items-center px-4 py-2 rounded-lg bg-[#06C755] hover:bg-[#05b34d] text-white font-semibold shadow",children:"公式LINEに登録"})})]}),s.jsxs("div",{children:[e&&s.jsx(o,{to:"/inquiry",className:"block w-full text-center bg-gradient-to-r from-pink-500 to-red-500 hover:from-pink-600 hover:to-red-600 text-white font-bold py-2 rounded-lg shadow mb-3",children:"要望・お問い合わせはこちら"}),s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"サービス"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(o,{to:"/",className:"text-gray-400 hover:text-white transition-colors",children:"ホーム"})}),s.jsx("li",{children:s.jsx(o,{to:"/parks",className:"text-gray-400 hover:text-white transition-colors",children:"ドッグラン一覧"})}),s.jsx("li",{children:s.jsx(o,{to:"/rules",className:"text-gray-400 hover:text-white transition-colors",children:"利用ルール"})}),s.jsx("li",{children:s.jsx(o,{to:"/petshop",className:"text-gray-400 hover:text-white transition-colors",children:"ペットショップ"})}),s.jsx("li",{children:s.jsx(o,{to:e?"/subscription-intro":"/login",className:"text-gray-400 hover:text-white transition-colors",children:"サブスクリプション"})}),s.jsx("li",{children:s.jsx(o,{to:"/news",className:"text-gray-400 hover:text-white transition-colors",children:"新着情報"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ご利用者様向け"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(o,{to:"/register",className:"text-gray-400 hover:text-white transition-colors",children:"新規登録"})}),s.jsx("li",{children:s.jsx(o,{to:"/liff/login",className:"text-gray-400 hover:text-white transition-colors",children:"ログイン"})}),s.jsx("li",{children:s.jsx(o,{to:"/dog-registration",className:"text-gray-400 hover:text-white transition-colors",children:"ワンちゃん登録"})}),s.jsx("li",{children:s.jsx(o,{to:e?"/access-control":"/login",className:"text-gray-400 hover:text-white transition-colors",children:"入場管理"})}),s.jsx("li",{children:s.jsx(o,{to:e?"/community":"/login",className:"text-gray-400 hover:text-white transition-colors",children:"コミュニティ"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"事業者向け"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsxs(o,{to:"/park-registration-agreement",className:"text-gray-400 hover:text-white transition-colors flex items-center",children:[s.jsx(v,{className:"w-4 h-4 mr-2"}),"ドッグラン経営者募集"]})}),s.jsx("li",{children:s.jsxs(o,{to:"/facility-registration",className:"text-gray-400 hover:text-white transition-colors flex items-center",children:[s.jsx(k,{className:"w-4 h-4 mr-2"}),"ワンちゃんを行ける施設オーナー募集"]})}),s.jsx("li",{children:s.jsxs(o,{to:"/sponsor-inquiry",className:"text-gray-400 hover:text-white transition-colors flex items-center",children:[s.jsx(E,{className:"w-4 h-4 mr-2"}),"スポンサー募集"]})})]})]})]}),s.jsx("hr",{className:"border-gray-700 my-8"}),s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[s.jsxs("p",{className:"text-gray-400 text-sm mb-4 md:mb-0",children:["© ",t," ドッグパークJP. All rights reserved."]}),s.jsxs("div",{className:"flex space-x-6",children:[s.jsx(o,{to:"/privacy",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"プライバシーポリシー"}),s.jsx(o,{to:"/terms",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"利用規約"}),s.jsx(o,{to:"/legal/tokushoho",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"特定商取引法に基づく表記"}),s.jsx(o,{to:"/contact",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"お問い合わせ"}),s.jsx("a",{href:"https://line.me/R/ti/p/%40662udgcy",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"公式LINE"})]})]})]})})}ye.displayName="Card";const Ee=()=>s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 animate-scale-in",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]}),s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsx("div",{className:"h-3 bg-gray-200 rounded"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-5/6"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-4/6"})]})]})}),Se=()=>s.jsx("div",{className:"min-h-screen bg-gray-50 animate-fade-in",children:s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8 animate-slide-up",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]}),s.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[...Array(6)].map((e,t)=>s.jsx("div",{className:"animate-scale-in",style:{animationDelay:100*t+"ms"},children:s.jsx(Ee,{})},t))})]})}),Ne=()=>s.jsx("div",{className:"min-h-screen bg-gray-50 animate-fade-in",children:s.jsxs("div",{className:"container mx-auto px-4 py-6",children:[s.jsxs("div",{className:"mb-6 animate-slide-up",children:[s.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),s.jsx("div",{className:"grid gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:[...Array(8)].map((e,t)=>s.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm animate-scale-in",style:{animationDelay:80*t+"ms"},children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-32 bg-gray-200 rounded mb-3"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-3"}),s.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3"})]})},t))})]})}),Pe=()=>s.jsx("div",{className:"min-h-screen bg-gray-50 animate-fade-in",children:s.jsxs("div",{className:"container mx-auto px-4 py-6",children:[s.jsx("div",{className:"mb-8 animate-slide-up",children:s.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]})}),s.jsx("div",{className:"grid gap-4 md:grid-cols-3 mb-8",children:[...Array(3)].map((e,t)=>s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm animate-scale-in",style:{animationDelay:150*t+"ms"},children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-3"}),s.jsx("div",{className:"h-12 bg-gray-200 rounded w-3/4"})]})},t))}),s.jsx("div",{className:"grid gap-6 lg:grid-cols-2",children:[...Array(4)].map((e,t)=>s.jsx("div",{className:"animate-scale-in",style:{animationDelay:120*(t+3)+"ms"},children:s.jsx(Ee,{})},t))})]})});function Ie(){const{user:e}=je(),[t,s]=i.useState(null),[a,n]=i.useState(!0),[r,l]=i.useState(null),[o,c]=i.useState(!1);i.useEffect(()=>{e?d():(s(null),n(!1),c(!1))},[e]);const d=async()=>{try{n(!0),l(null);let{data:e,error:t}=await ue.from("stripe_user_subscriptions").select("customer_id, subscription_id, status, price_id, current_period_start, current_period_end, cancel_at_period_end, payment_method_brand, payment_method_last4").maybeSingle();if(t||!e){const{data:e}=await ue.from("stripe_customers").select("customer_id").maybeSingle();if(e?.customer_id){const{data:t}=await ue.from("stripe_subscriptions").select("customer_id, subscription_id, status, price_id, current_period_start, current_period_end, cancel_at_period_end, payment_method_brand, payment_method_last4").eq("customer_id",e.customer_id).maybeSingle();if(t)return s(t),void c("paused"===t.status)}s(null),c(!1)}else s(e),c("paused"===e.status)}catch(e){l(e.message||"サブスクリプションの取得に失敗しました")}finally{n(!1)}},m=e=>e?new Date(1e3*e).toLocaleDateString("ja-JP"):null;return{subscription:t,isActive:"active"===t?.status||"trialing"===t?.status,isPaused:o,loading:a,error:r,refresh:d,currentPeriodEnd:m(t?.current_period_end??null),currentPeriodStart:m(t?.current_period_start??null),paymentMethod:t?.payment_method_last4?`${t.payment_method_brand} **** ${t.payment_method_last4}`:null,willCancel:t?.cancel_at_period_end}}const Ae=e=>{if(!e)return"不明なエラーが発生しました";if("string"==typeof e)return e;if(e&&"object"==typeof e&&"message"in e){const t=e;if("PGRST116"===t.code)return"データが見つかりません。Netlify の環境変数設定を確認してください。";if("PGRST301"===t.code)return"データベース接続エラー。Netlify Supabase Extension の設定を確認してください。";switch(t.message){case"Invalid API key":return"API キーが無効です。Netlify の環境変数 VITE_SUPABASE_ANON_KEY を確認してください。";case"Invalid URL":return"データベース URL が無効です。Netlify の環境変数 VITE_SUPABASE_URL を確認してください。";case"Network error":return"ネットワークエラーが発生しました。インターネット接続を確認してください。";case"Authentication required":return"認証が必要です。ログインしてください。";default:return t.message||"不明なエラーが発生しました"}}return"不明なエラーが発生しました"},Le=async(e,t={})=>{const{retries:s=0,timeout:a=5e3}=t;for(let r=0;r<=s;r++)try{const t=new AbortController,s=setTimeout(()=>t.abort(),a),n=await e();return clearTimeout(s),{...n,isOffline:!1}}catch(n){if(r===s){const e=n instanceof Error&&(n.message.includes("Network")||n.message.includes("fetch")||n.message.includes("AbortError"));return{data:null,error:n,isOffline:e}}await new Promise(e=>setTimeout(e,1e3*Math.pow(2,r)))}return{data:null,error:new Error("Max retries exceeded"),isOffline:!1}},De=(e,t,s)=>{(new Date).toISOString()},Re=i.lazy(()=>p(()=>import("./PWADebugPanel-GEyINNuF.js"),[])),Oe=i.memo(function(){const{user:e,logout:t,isAdmin:a,effectiveUserId:n}=je(),[r,l]=i.useState(null),c=d(),[m,u]=i.useState(""),[h,x]=i.useState(0),[p,j]=i.useState(0),{isActive:g}=Ie(),[f,b]=i.useState(!1),[y,_]=i.useState(!1),[w,v]=i.useState(!1),[k,E]=i.useState(!1),L=i.useRef(null),D=i.useCallback(()=>{const e=document.getElementById("pwa-install-button");e&&e.click()},[]);i.useEffect(()=>{_(window.matchMedia("(display-mode: standalone)").matches);const e=()=>{b(!0)},t=()=>{b(!1),_(!0)};return window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",t),()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",t)}},[]),i.useEffect(()=>{let e=!0;return(async()=>{try{const t=await me();e&&l(t)}catch{e&&l(null)}})(),()=>{e=!1}},[]),i.useEffect(()=>{const e=e=>{k&&L.current&&!L.current.contains(e.target)&&E(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[k]);const R=Boolean(e||r||n),O=i.useCallback(async()=>{if(r?.display_name)u(r.display_name);else if(e)try{const t=await Le(()=>ue.from("profiles").select("name").eq("id",e.id).maybeSingle());if(t.error&&"PGRST116"!==t.error.code&&De("error",0,(t.error,e.id)),t.data?.name)u(t.data.name);else{const t=e.user_metadata?.name||e.email?.split("@")[0]||"";t&&u(t)}}catch(t){De("error",0,e.id)}},[e,r]),T=i.useCallback(async()=>{if(e)try{const t=await Le(()=>ue.from("notifications").select("*",{count:"exact",head:!0}).eq("user_id",e?.id||n).eq("read",!1));x(t.data||0)}catch(t){De("error",0,e.id)}},[e]),C=i.useCallback(async()=>{try{const t=e?.id||n;if(!t)return void j(0);const s=await Le(()=>ue.from("cart_items").select("*",{count:"exact",head:!0}).eq("user_id",t));j(s.data||0)}catch(t){De("error")}},[e,n]);i.useEffect(()=>{e?(O(),T(),C()):r?(u(r.display_name||""),x(0),C()):(u(""),x(0),j(0))},[e,r,a,O,T,C]);const z=i.useCallback(async()=>{try{await async function(){try{await fetch("/auth/logout",{method:"POST",credentials:"include"})}catch{}}(),await t(),window.location.assign("/"),c("/")}catch(e){De("error")}},[t,c]);return s.jsxs(s.Fragment,{children:[s.jsx("style",{children:"\n        @keyframes logoSlideIn {\n          0% {\n            transform: translateX(-100px) rotate(-180deg);\n            opacity: 0;\n          }\n          50% {\n            transform: translateX(10px) rotate(10deg);\n          }\n          100% {\n            transform: translateX(0) rotate(0deg);\n            opacity: 1;\n          }\n        }\n        \n        @keyframes textReveal {\n          0% {\n            transform: translateY(20px);\n            opacity: 0;\n            letter-spacing: 0.3em;\n          }\n          50% {\n            letter-spacing: 0.1em;\n          }\n          100% {\n            transform: translateY(0);\n            opacity: 1;\n            letter-spacing: normal;\n          }\n        }\n        \n        @keyframes jpPop {\n          0% {\n            transform: scale(0) rotate(180deg);\n            opacity: 0;\n          }\n          50% {\n            transform: scale(1.2) rotate(10deg);\n          }\n          100% {\n            transform: scale(1) rotate(0deg);\n            opacity: 1;\n          }\n        }\n        \n        @keyframes subtitleFade {\n          0% {\n            transform: translateX(-20px);\n            opacity: 0;\n          }\n          100% {\n            transform: translateX(0);\n            opacity: 1;\n          }\n        }\n        \n        .navbar-logo-icon {\n          animation: logoSlideIn 0.8s ease-out forwards !important;\n          animation-duration: 0.8s !important;\n          animation-iteration-count: 1 !important;\n        }\n        \n        .navbar-text-dogpark {\n          animation: textReveal 0.6s ease-out 0.3s forwards !important;\n          animation-duration: 0.6s !important;\n          animation-delay: 0.3s !important;\n          animation-iteration-count: 1 !important;\n          opacity: 0;\n        }\n        \n        .navbar-text-jp {\n          animation: jpPop 0.5s ease-out 0.7s forwards !important;\n          animation-duration: 0.5s !important;\n          animation-delay: 0.7s !important;\n          animation-iteration-count: 1 !important;\n          opacity: 0;\n          display: inline-block;\n        }\n        \n        .navbar-subtitle-text {\n          animation: subtitleFade 0.6s ease-out 1s forwards !important;\n          animation-duration: 0.6s !important;\n          animation-delay: 1s !important;\n          animation-iteration-count: 1 !important;\n          opacity: 0;\n        }\n        "}),s.jsx("nav",{className:"bg-white shadow-lg fixed top-0 left-0 right-0 z-[80] pb-1",style:{pointerEvents:"auto",transform:"translateZ(0)",willChange:"transform"},children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsxs(o,{to:"/",className:"flex items-center space-x-3 hover:opacity-80 transition-opacity cursor-pointer group no-underline hover:no-underline","aria-label":"ドッグパークJP ホーム",children:[s.jsx("div",{className:"navbar-logo-icon",children:s.jsx("img",{src:"/icons/icon_android_48x48.png",alt:"ドッグパーク",className:"w-12 h-12",onError:e=>{e.target.style.display="none";const t=e.target.parentElement;if(t){const s=document.createElement("div");s.className="w-12 h-12 bg-gradient-to-br from-blue-500 to-green-400 rounded-full flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow",s.innerHTML='<svg class="h-7 w-7 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M18,4C16.29,4 15.25,4.33 14.65,4.61C13.88,4.23 13,4 12,4C11,4 10.12,4.23 9.35,4.61C8.75,4.33 7.71,4 6,4C3,4 1,12 1,14C1,14.83 2.32,15.59 4.14,15.9C4.78,18.14 7.8,19.85 11.5,20V15.72C10.91,15.35 10,14.68 10,14C10,13 11,12 12,12C13,12 14,13 14,14C14,14.68 13.09,15.35 12.5,15.72V20C16.2,19.85 19.22,18.14 19.86,15.9C21.68,15.59 23,14.83 23,14C23,12 21,4 18,4Z"/></svg>',t.replaceChild(s,e.target)}}})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("span",{className:"text-xl font-bold leading-tight",children:[s.jsx("span",{className:"navbar-text-dogpark text-gray-800",children:"ドッグパーク"}),s.jsx("span",{className:"navbar-text-jp text-blue-600 ml-1",children:"JP"})]}),s.jsx("span",{className:"navbar-subtitle-text text-xs text-gray-500 leading-none",children:"愛犬との素敵な時間を"})]})]}),s.jsx("div",{className:"flex items-center space-x-4",children:R?s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"text-gray-700 hidden md:inline-block",children:["こんにちは、",m||"ユーザー","さん",g&&s.jsxs("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1",children:[s.jsx("path",{d:"m3 11 18-5v12L3 14v-3z"}),s.jsx("path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6"})]}),"サブスク会員"]})]}),s.jsx(o,{to:"/dashboard",className:"text-gray-600 hover:text-blue-600 transition-colors hidden md:inline-block no-underline hover:no-underline",children:"マイページ"}),s.jsx(o,{to:"/parks",className:"text-gray-600 hover:text-blue-600 transition-colors hidden md:inline-block no-underline hover:no-underline",children:"ドッグラン一覧"}),s.jsx(o,{to:"/petshop",className:"text-gray-600 hover:text-green-600 transition-colors hidden md:inline-block no-underline hover:no-underline",children:"ペットショップ"}),s.jsxs(o,{to:"/community",className:"relative inline-flex items-center justify-center w-10 h-10 rounded-md text-gray-600 hover:text-blue-600 active:opacity-70 transition-colors no-underline hover:no-underline focus:outline-none focus:ring-2 focus:ring-blue-500 z-[60]","aria-label":"通知 "+(h>0?`${h}件の未読通知があります`:""),children:[s.jsx(S,{className:"h-5 w-5 pointer-events-none","aria-hidden":"true"}),h>0&&s.jsx("span",{className:"pointer-events-none absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center","aria-hidden":"true",children:h>9?"9+":h})]}),s.jsxs(o,{to:"/petshop",className:"relative inline-flex items-center justify-center w-10 h-10 rounded-md text-gray-600 hover:text-green-600 active:opacity-70 transition-colors no-underline hover:no-underline focus:outline-none focus:ring-2 focus:ring-green-500 z-[60]","aria-label":"カート "+(p>0?`${p}点の商品があります`:""),children:[s.jsx(N,{className:"h-5 w-5 pointer-events-none","aria-hidden":"true","data-cart-target":"true"}),p>0&&s.jsx("span",{className:"pointer-events-none absolute -top-2 -right-2 bg-red-500 text-white text-[10px] rounded-full min-w-[18px] h-[18px] px-1 flex items-center justify-center","aria-hidden":"true",children:p>9?"9+":p})]}),f&&!y&&s.jsxs("button",{onClick:D,className:"flex items-center space-x-1 text-blue-600 hover:text-blue-700 transition-colors bg-blue-50 hover:bg-blue-100 px-2 py-1 rounded-md","aria-label":"アプリをインストール",children:[s.jsx(P,{className:"h-4 w-4","aria-hidden":"true"}),s.jsx("span",{className:"hidden lg:inline text-sm",children:"アプリ化"})]}),y&&s.jsxs("div",{className:"flex items-center space-x-1 text-green-600 bg-green-50 px-2 py-1 rounded-md",children:[s.jsx(P,{className:"h-4 w-4","aria-hidden":"true"}),s.jsx("span",{className:"hidden lg:inline text-sm",children:"PWA"})]}),!1,a&&s.jsxs(o,{to:"/admin",className:"flex items-center space-x-1 text-red-600 hover:text-red-700 transition-colors no-underline hover:no-underline","aria-label":"管理者ページ",children:[s.jsx(I,{className:"h-4 w-4","aria-hidden":"true"}),s.jsx("span",{className:"hidden md:inline",children:"管理者"})]}),s.jsxs("button",{onClick:()=>{z()},className:"inline-flex items-center justify-center w-10 h-10 rounded-md text-gray-600 hover:text-red-600 active:opacity-70 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 z-[60]","aria-label":"ログアウト",children:[s.jsx(A,{className:"h-4 w-4 pointer-events-none","aria-hidden":"true"}),s.jsx("span",{className:"hidden md:inline ml-1",children:"ログアウト"})]})]}):s.jsxs(s.Fragment,{children:[s.jsx(o,{to:"/login?method=password",className:"text-gray-600 hover:text-blue-600 transition-colors no-underline hover:no-underline",children:"ログイン"}),s.jsx(o,{to:"/register",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors no-underline hover:no-underline",children:"新規登録"})]})})]})})}),s.jsx(i.Suspense,{fallback:s.jsx("div",{children:"Loading debug panel..."}),children:s.jsx(Re,{isOpen:w,onClose:()=>v(!1)})})]})});function Te(){const{pathname:e}=c();return i.useEffect(()=>{window.scrollTo(0,0)},[e]),null}const Ce=new class{constructor(){t(this,"isDevelopment",!1),t(this,"isDebugEnabled",this.isDevelopment)}debug(e,...t){this.isDebugEnabled}info(e,...t){this.isDevelopment||this.isDebugEnabled}warn(e,...t){}error(e,...t){}};(()=>{{const e=()=>{};console.log=e,console.debug=e,console.info=e;const t=console.warn,s=console.error;console.warn=(...e)=>{const s=e[0]?.toString()||"";(s.includes("React")||s.includes("Warning")||s.includes("Error"))&&t(...e)},console.error=(...e)=>{s(...e)}}})();const ze=e=>new Promise(t=>{const s=new Image;s.onload=()=>t(),s.onerror=()=>t(),s.src=e}),Ve=({onComplete:e})=>{const t=d(),a=c(),{signInWithMagicLink:n,signInWithPassword:r,signInWithGoogle:l,signInWithTwitter:o}=je(),[m,u]=i.useState(0),[h]=i.useState(!0),[x,p]=i.useState(!1),[j,g]=i.useState(""),[f,b]=i.useState(""),[y,_]=i.useState(""),[w,v]=i.useState(!1),[k,E]=i.useState(!0),[S,N]=i.useState(.1),[P,I]=i.useState(.3),[A,M]=i.useState(0),[F,$]=i.useState(!1),U=i.useRef(null),W=i.useRef(null),[q,B]=i.useState(0),[G,J]=i.useState(0),[H,X]=i.useState([]),[K,Y]=i.useState(!0),Z=" さあ！ワンちゃんと",Q=" 冒険に出かけましょう",[ee,te]=i.useState(!1),[se,ae]=i.useState(!1),[ne,re]=i.useState(!1),[ie,le]=i.useState(()=>new Array(10).fill(!1)),[oe,ce]=i.useState(()=>new Array(11).fill(!1)),de=new URLSearchParams(a.search);de.get("redirect");const me=de.get("message");i.useCallback(()=>{te(!0),setTimeout(()=>ae(!0),80),re(!0)},[]);const ue=i.useCallback(()=>{const e=Date.now(),t=()=>{const s=Date.now()-e,a=Math.min(s/3e3,1),n=a<.5?2*a*a:1-Math.pow(-2*a+2,3)/2;N(.1+.9*n);I(.3+.7*n),a<1?requestAnimationFrame(t):setTimeout(()=>{he()},0)};requestAnimationFrame(t)},[]),he=i.useCallback(()=>{const e=Date.now(),t=()=>{const s=Date.now()-e,a=Math.min(s/400,1);let n;if(a<.1)n=10*a;else{const e=(a-.1)/.9;n=1-Math.pow(e,2)}if(M(n),a<1)requestAnimationFrame(t);else{M(0);let e=0;const t=()=>{if(e<10)le(t=>{const s=[...t];return s[e]=!0,s}),e++,setTimeout(t,60);else{let e=0;const t=()=>{e<11?(ce(t=>{const s=[...t];return s[e]=!0,s}),e++,setTimeout(t,60)):setTimeout(()=>{$(!0)},100)};t()}};t()}};requestAnimationFrame(t)},[10,11]);i.useEffect(()=>{try{if("1"===localStorage.getItem("skipSplashOnce"))return localStorage.removeItem("skipSplashOnce"),void e()}catch{}setTimeout(()=>{const e=()=>{u(t=>{const s=Math.min(t+.02,1);return s<1?requestAnimationFrame(e):setTimeout(ue,500),s})};requestAnimationFrame(e)},800)},[ue]);const xe=i.useCallback(async(e,t)=>{let s=0,a=0;const n=e.length,r=Array.from({length:Math.min(1,n)},()=>(async()=>{for(;s<n;){const i=s++,l=e[i];try{await l.loader()}catch(r){}finally{a++,t(a,n),await new Promise(e=>setTimeout(e,120))}}})());await Promise.all(r)},[]);i.useEffect(()=>{let e=!0;const t=Date.now();return(async()=>{if(!e)return;const s=[{name:"Splash",loader:()=>ze("/images/splash-dog-running.webp")},{name:"Passport",loader:()=>ze("/images/passport-watermark.webp")},{name:"Icon192",loader:()=>ze("/icons/icon_android_192x192.png")},{name:"Icon144",loader:()=>ze("/icons/icon_android_144x144.png")},{name:"Favicon",loader:()=>ze("/favicon.svg")}];["/login"].forEach(e=>(e=>{try{const t=document.createElement("link");t.rel="prefetch",t.href=e,document.head.appendChild(t)}catch{}})(e));const a=[...s];X(a.map(e=>e.name));let n=0;await xe(a,(t,s)=>{if(!e)return;const a=Math.max(n,Math.round(t/s*100));n=a,B(a),J(a)});const r=Date.now()-t;r<3500&&await new Promise(e=>setTimeout(e,3500-r)),e&&Y(!1)})(),()=>{e=!1}},[xe]),i.useEffect(()=>{},[]);return s.jsxs("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",style:{background:"linear-gradient(135deg, #E8F4FD 0%, #F0F8FF 25%, #FFF8E1 50%, #F3E5F5 75%, #E1F5FE 100%)"},children:[s.jsx("div",{className:"fixed inset-0 z-[10000] bg-white pointer-events-none transition-opacity duration-100",style:{opacity:A,mixBlendMode:"screen"}}),s.jsx("style",{children:"\n        @import url('https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@700;800;900&display=swap');\n        \n        @keyframes logoSlideIn {\n          0% {\n            transform: translateX(-100px) rotate(-180deg);\n            opacity: 0;\n          }\n          50% {\n            transform: translateX(10px) rotate(10deg);\n          }\n          100% {\n            transform: translateX(0) rotate(0deg);\n            opacity: 1;\n          }\n        }\n        \n        @keyframes textReveal {\n          0% {\n            transform: translateY(20px);\n            opacity: 0;\n            letter-spacing: 0.3em;\n          }\n          50% {\n            letter-spacing: 0.1em;\n          }\n          100% {\n            transform: translateY(0);\n            opacity: 1;\n            letter-spacing: normal;\n          }\n        }\n        \n        @keyframes jpPop {\n          0% {\n            transform: scale(0) rotate(180deg);\n            opacity: 0;\n          }\n          50% {\n            transform: scale(1.2) rotate(10deg);\n          }\n          100% {\n            transform: scale(1) rotate(0deg);\n            opacity: 1;\n          }\n        }\n        \n        @keyframes subtitleFade {\n          0% {\n            transform: translateX(-20px);\n            opacity: 0;\n          }\n          100% {\n            transform: translateX(0);\n            opacity: 1;\n          }\n        }\n        \n        /* スプラッシュスクリーンのアニメーションは常に有効にする */\n        .logo-icon {\n          animation: logoSlideIn 0.8s ease-out forwards !important;\n          animation-duration: 0.8s !important;\n          animation-iteration-count: 1 !important;\n        }\n        \n        .text-dogpark {\n          animation: textReveal 0.6s ease-out 0.3s forwards !important;\n          animation-duration: 0.6s !important;\n          animation-delay: 0.3s !important;\n          animation-iteration-count: 1 !important;\n          opacity: 0;\n        }\n        \n        .text-jp {\n          animation: jpPop 0.5s ease-out 0.7s forwards !important;\n          animation-duration: 0.5s !important;\n          animation-delay: 0.7s !important;\n          animation-iteration-count: 1 !important;\n          opacity: 0;\n          display: inline-block;\n        }\n        \n        .subtitle-text {\n          animation: subtitleFade 0.6s ease-out 1s forwards !important;\n          animation-duration: 0.6s !important;\n          animation-delay: 1s !important;\n          animation-iteration-count: 1 !important;\n          opacity: 0;\n        }\n\n        /* ロゴタイトルに合わせた挙動: それぞれ独立に出現 */\n        .hidden-left { transform: translate3d(-120%,0,0); opacity: 0; }\n        .hidden-right { transform: translate3d(120%,0,0); opacity: 0; }\n        .hidden-up { transform: translate3d(0,24px,0); opacity: 0; }\n\n        .anim-left { animation: animLeft 20s cubic-bezier(0.18, 0.9, 0.2, 1) forwards; }\n        .anim-right { animation: animRight 20s cubic-bezier(0.18, 0.9, 0.2, 1) forwards; }\n        .anim-up { animation: animUp 20s cubic-bezier(0.18, 0.9, 0.2, 1) forwards; }\n\n        @keyframes animLeft {\n          0% { transform: translate3d(-120%,0,0); opacity: 0; }\n          70% { transform: translate3d(1.5%,0,0); opacity: 1; }\n          88% { transform: translate3d(0,-6px,0); }\n          100% { transform: translate3d(0,0,0); opacity: 1; }\n        }\n        @keyframes animRight {\n          0% { transform: translate3d(120%,0,0); opacity: 0; }\n          70% { transform: translate3d(-1.5%,0,0); opacity: 1; }\n          88% { transform: translate3d(0,-6px,0); }\n          100% { transform: translate3d(0,0,0); opacity: 1; }\n        }\n        @keyframes animUp {\n          0% { transform: translate3d(0,24px,0); opacity: 0; }\n          75% { transform: translate3d(0,-2px,0); opacity: 1; }\n          100% { transform: translate3d(0,0,0); opacity: 1; }\n        }\n        "}),s.jsxs("div",{className:"min-h-screen flex flex-col",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("img",{src:"/images/splash-dog-running.webp",alt:"走るワンちゃん",className:"w-full h-full object-cover transition-opacity duration-1000",style:{opacity:m,filter:`opacity(${P})`},onError:e=>{e.target.style.display="none";const t=e.target.parentElement;t&&(t.innerHTML='<div class="w-full h-full bg-gradient-to-br from-blue-200 to-green-200 flex items-center justify-center"><span class="text-8xl">🐕</span></div>')}}),s.jsx("div",{className:"absolute top-2 left-0 right-0 px-4 sm:px-6 z-[2]",children:s.jsx("div",{className:"mx-auto max-w-6xl",children:s.jsxs("div",{className:"inline-flex items-center bg-transparent",children:[s.jsx("div",{className:"logo-icon",children:s.jsx("img",{src:"/icons/icon_ios_180x180.png",alt:"ドッグパーク",className:"w-12 h-12 sm:w-16 sm:h-16",onError:e=>{e.target.style.display="none"}})}),s.jsxs("div",{className:"ml-3",children:[s.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-800 text-dogpark",children:["ドッグパーク",s.jsx("span",{className:"text-jp text-blue-600 ml-1",children:"JP"})]}),s.jsx("p",{className:"subtitle-text text-sm sm:text-lg text-gray-700 -mt-2",children:"愛犬との素敵な時間を"})]})]})})}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 pb-4",children:s.jsx("div",{className:"text-center w-full pl-2",children:s.jsxs("div",{className:"space-y-2 px-4",children:[s.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-black leading-tight tracking-wide",style:{fontFamily:'"M PLUS Rounded 1c", Zen Maru Gothic, sans-serif',textShadow:"0 0 10px rgba(255,255,255,0.9), 0 0 20px rgba(255,255,255,0.8), 0 0 30px rgba(255,255,255,0.6), 2px 2px 4px rgba(255,255,255,0.9), -2px -2px 4px rgba(255,255,255,0.9), 2px -2px 4px rgba(255,255,255,0.9), -2px 2px 4px rgba(255,255,255,0.9)",color:"#355E3B"},children:s.jsxs("span",{ref:U,className:"relative inline-block",children:[Z.split("").map((e,t)=>s.jsx("span",{className:"inline-block transition-opacity duration-150 "+(ie[t]?"opacity-100":"opacity-0"),children:e},t)),s.jsx("svg",{className:"absolute left-0",style:{bottom:"-0.15em"},width:U.current?.offsetWidth||0,height:24,children:s.jsx("path",{d:`M0 12 Q ${.25*(U.current?.offsetWidth||0)} 24, ${.5*(U.current?.offsetWidth||0)} 12 Q ${.75*(U.current?.offsetWidth||0)} 0, ${U.current?.offsetWidth||0} 12`,fill:"none",stroke:"rgba(239, 68, 68, 0.5)",strokeWidth:12,strokeLinecap:"round",style:{strokeDasharray:1200,strokeDashoffset:F?0:1200,transition:"stroke-dashoffset 700ms ease-out 80ms"}})})]})}),s.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-black leading-tight tracking-wide",style:{fontFamily:'"M PLUS Rounded 1c", Zen Maru Gothic, sans-serif',textShadow:"0 0 10px rgba(255,255,255,0.9), 0 0 20px rgba(255,255,255,0.8), 0 0 30px rgba(255,255,255,0.6), 2px 2px 4px rgba(255,255,255,0.9), -2px -2px 4px rgba(255,255,255,0.9), 2px -2px 4px rgba(255,255,255,0.9), -2px 2px 4px rgba(255,255,255,0.9)",color:"#3C6E47"},children:s.jsxs("span",{ref:W,className:"relative inline-block",children:[Q.split("").map((e,t)=>s.jsx("span",{className:"inline-block transition-opacity duration-150 "+(oe[t]?"opacity-100":"opacity-0"),children:e},t)),s.jsx("svg",{className:"absolute left-0",style:{bottom:"-0.15em"},width:W.current?.offsetWidth||0,height:24,children:s.jsx("path",{d:`M0 12 Q ${.25*(W.current?.offsetWidth||0)} 24, ${.5*(W.current?.offsetWidth||0)} 12 Q ${.75*(W.current?.offsetWidth||0)} 0, ${W.current?.offsetWidth||0} 12`,fill:"none",stroke:"rgba(239, 68, 68, 0.5)",strokeWidth:12,strokeLinecap:"round",style:{strokeDasharray:1200,strokeDashoffset:F?0:1200,transition:"stroke-dashoffset 700ms ease-out 220ms"}})})]})})]})})}),K&&s.jsxs("div",{className:"absolute bottom-10 left-1/2 transform -translate-x-1/2 w-80 max-w-[90vw]",children:[s.jsx("div",{className:"flex justify-center mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-16 h-16 border-4 border-gray-400/50 rounded-full"}),s.jsx("div",{className:"absolute top-0 left-0 w-16 h-16 border-4 border-gray-500 border-t-transparent rounded-full animate-spin"}),s.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:s.jsx(L,{className:"w-8 h-8 text-gray-600"})})]})}),s.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-full p-2 shadow-lg",children:s.jsxs("div",{className:"relative bg-white/30 rounded-full h-8 overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-blue-400 to-blue-600 rounded-full transition-all duration-300 ease-out",style:{width:`${q}%`}}),s.jsx("div",{className:"absolute top-1/2 transform -translate-y-1/2 transition-all duration-300 ease-out",style:{left:`calc(${G}% - 12px)`,transform:"translateY(-50%)"},children:s.jsx(L,{className:"w-6 h-6 text-gray-700 drop-shadow-md"})})]})}),s.jsxs("div",{className:"text-center mt-3",children:[s.jsxs("p",{className:"text-white text-sm font-medium",style:{textShadow:"0 2px 4px rgba(0,0,0,0.5)"},children:["準備中... ",Math.round(q),"%"]}),s.jsx("p",{className:"text-white/80 text-xs mt-1",style:{textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:"アプリを最適化しています"})]})]})]}),!h&&s.jsxs("div",{className:"absolute bottom-20 left-1/2 transform -translate-x-1/2 flex items-center space-x-3 text-white opacity-80",children:[s.jsx("div",{className:"w-3 h-3 bg-white rounded-full animate-pulse"}),s.jsx("div",{className:"w-3 h-3 bg-white rounded-full animate-pulse",style:{animationDelay:"0.3s"}}),s.jsx("div",{className:"w-3 h-3 bg-white rounded-full animate-pulse",style:{animationDelay:"0.6s"}}),s.jsx("span",{className:"ml-4 text-lg font-light",children:"準備中..."})]}),s.jsx("div",{className:`w-full transition-all duration-800 ${h?"opacity-100 translate-y-0":"opacity-0 translate-y-8"} ${h?"":"absolute top-full"}`,children:s.jsxs("div",{className:"max-w-md mx-auto p-4",children:[me&&s.jsx("div",{className:"mb-6 p-4 bg-blue-50/80 backdrop-blur-sm border border-blue-200/50 rounded-xl",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(D,{className:"w-4 h-4 text-blue-600"})})}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-blue-800",children:decodeURIComponent(me)})})]})}),s.jsxs("div",{className:"backdrop-blur-sm bg-white/90 shadow-xl border border-white/20 rounded-lg p-6",children:[s.jsxs("div",{className:"flex mb-6 bg-gray-100/50 p-1 rounded-lg",children:[s.jsxs("button",{type:"button",onClick:()=>E(!0),className:"flex-1 flex items-center justify-center py-2 px-4 rounded-md transition-all "+(k?"bg-blue-500 text-white shadow-sm":"text-blue-500 hover:bg-white/50"),children:[s.jsx(R,{className:"w-4 h-4 mr-2"}),"パスワード"]}),s.jsxs("button",{type:"button",onClick:()=>E(!1),className:"flex-1 flex items-center justify-center py-2 px-4 rounded-md transition-all "+(k?"text-blue-500 hover:bg-white/50":"bg-blue-500 text-white shadow-sm"),children:[s.jsx(O,{className:"w-4 h-4 mr-2"}),"Magic Link"]})]}),j&&s.jsxs("div",{className:"mb-4 p-3 bg-red-50/80 backdrop-blur-sm border border-red-200/50 rounded-lg flex items-center",children:[s.jsx(T,{className:"w-5 h-5 text-red-500 mr-2 flex-shrink-0"}),s.jsx("span",{className:"text-sm text-red-700",children:j})]}),s.jsxs("div",{className:"min-h-[220px] flex flex-col justify-between",children:[s.jsxs("div",{className:"space-y-2 mb-2",children:[s.jsxs("button",{type:"button",onClick:async()=>{try{localStorage.setItem("skipSplashOnce","1"),localStorage.setItem("hasSeenSplash","true")}catch{}await l()},className:"w-full py-2 px-4 bg-white border border-gray-300 hover:bg-gray-50 text-gray-900 font-medium rounded-md transition-all flex items-center justify-center","aria-label":"Googleアカウントでログイン",children:[s.jsx("img",{src:"/icons/google.svg",alt:"",className:"w-5 h-5 mr-2"}),s.jsx("span",{className:"text-gray-900 font-semibold",children:"Googleアカウントでログイン"})]}),s.jsxs("button",{type:"button",onClick:async()=>{try{localStorage.setItem("skipSplashOnce","1"),localStorage.setItem("hasSeenSplash","true")}catch{}await o()},className:"w-full py-2 px-4 bg-black hover:bg-gray-900 text-white font-medium rounded-md transition-all flex items-center justify-center","aria-label":"X (Twitter) でログイン",children:[s.jsx("img",{src:"/icons/x.svg",alt:"",className:"w-5 h-5 mr-2"}),"X (Twitter) でログイン"]}),s.jsxs("button",{type:"button",onClick:()=>{try{localStorage.setItem("skipSplashOnce","1"),localStorage.setItem("hasSeenSplash","true")}catch{}window.location.assign("/liff/login")},className:"w-full py-2 px-4 bg-green-600 hover:bg-green-700 text-white font-medium rounded-md transition-all flex items-center justify-center","aria-label":"LINEでログイン（スプラッシュをスキップ）",children:[s.jsx("img",{src:"/icons/line.svg",alt:"",className:"w-5 h-5 mr-2"}),"LINEアカウントでログイン"]})]}),s.jsx("div",{className:"mb-4 text-center",children:s.jsx("button",{type:"button",onClick:()=>{try{localStorage.setItem("hasSeenSplash","true")}catch{}e()},className:"text-xs text-blue-600 hover:text-blue-700 underline",children:"今はスキップして先へ進む"})}),k?s.jsxs("form",{onSubmit:t=>{(async t=>{t.preventDefault(),p(!0),g("");try{const t=await r(f,y);t.success?(localStorage.setItem("lastUsedEmail",f),setTimeout(()=>{e()},100)):g(t.error||"ログインに失敗しました。もう一度お試しください。")}catch(s){Ce.error("❌ Password login error:",s),g(s instanceof Error?s.message:"ログインに失敗しました。もう一度お試しください。")}finally{p(!1)}})(t)},className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"メールアドレス"}),s.jsx("input",{id:"email",type:"email",value:f,onChange:e=>b(e.target.value),placeholder:"メールアドレスを入力",required:!0,disabled:x,className:"w-full px-3 py-2 bg-white/70 backdrop-blur-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"パスワード"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"password",type:w?"text":"password",value:y,onChange:e=>_(e.target.value),placeholder:"パスワードを入力",required:!0,disabled:x,className:"w-full px-3 py-2 bg-white/70 backdrop-blur-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-10"}),s.jsx("button",{type:"button",onClick:()=>v(!w),className:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:x,children:w?s.jsx(C,{className:"w-4 h-4 text-gray-400"}):s.jsx(z,{className:"w-4 h-4 text-gray-400"})})]})]}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{type:"submit",disabled:x||!f||!y,className:"w-full py-2 px-4 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-medium rounded-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:x?"処理中...":"ログイン"})})]}):s.jsxs("form",{onSubmit:e=>{(async e=>{e.preventDefault(),p(!0),g("");try{const e=await n(f);e.success?(localStorage.setItem("lastUsedEmail",f),g("")):g(e.error||"Magic Linkの送信に失敗しました。もう一度お試しください。")}catch(t){Ce.error("❌ Magic link error:",t),g(t instanceof Error?t.message:"Magic Linkの送信に失敗しました。もう一度お試しください。")}finally{p(!1)}})(e)},className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"magic-email",className:"block text-sm font-medium text-gray-700 mb-1",children:"メールアドレス"}),s.jsx("input",{id:"magic-email",type:"email",value:f,onChange:e=>b(e.target.value),placeholder:"メールアドレスを入力",required:!0,disabled:x,className:"w-full px-3 py-2 bg-white/70 backdrop-blur-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsx("div",{className:"h-[68px] flex items-end",children:s.jsx("p",{className:"text-xs text-gray-500 text-center w-full",children:"メールアドレスに送信されるリンクをクリックしてログインします"})}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{type:"submit",disabled:x||!f,className:"w-full py-2 px-4 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-medium rounded-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:x?"送信中...":"メールを送信"})})]})]}),s.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200/50",children:s.jsxs("p",{className:"text-center text-sm text-gray-600",children:["アカウントをお持ちでない方は"," ",s.jsxs("button",{onClick:()=>{try{localStorage.setItem("hasSeenSplash","true")}catch{}e(),t("/register")},className:"text-blue-500 hover:text-blue-700 underline font-medium inline-flex items-center",children:[s.jsx(V,{className:"w-4 h-4 mr-1"}),"こちらから新規登録"]})]})})]}),s.jsx("div",{className:"text-center mt-4",children:s.jsx("button",{onClick:()=>{try{localStorage.setItem("hasSeenSplash","true")}catch{}e()},className:"text-sm text-blue-500 hover:text-blue-700 underline","aria-label":"スプラッシュをスキップして本編へ進む",children:"スキップ"})})]})}),s.jsx("div",{className:"flex-shrink-0 text-center pb-6",children:s.jsx("div",{className:"text-sm text-gray-600 opacity-80",children:"© 2025 CAPAS Co., Ltd. All rights reserved."})})]})]})},Me=l.lazy(()=>p(()=>import("./CampaignModal-Cp17ysVf.js"),[])),Fe=l.lazy(()=>p(()=>import("./FloatingActionButton-t3DXWtfw.js"),[])),$e=l.lazy(()=>p(()=>import("./Inquiry-DOsyPsnR.js"),[])),Ue=l.lazy(()=>p(()=>import("./AdminInquiries-DJU_mnS_.js"),[])),We=({children:e})=>{const{user:t,loading:a}=je(),n=d(),r=c(),[l,o]=i.useState(null);return i.useEffect(()=>{if(a)return;if(t)return void o(!0);let e=!0;return(async()=>{const t=await me();if(e){if(t)try{if(!(await fetch("/line/exchange-supabase-session",{method:"POST",credentials:"include"})).ok)throw new Error("exchange failed")}catch{}if(o(Boolean(t)),!t){const e=encodeURIComponent(r.pathname+r.search);n(`/login?redirect=${e}`,{replace:!0})}}})(),()=>{e=!1}},[t,a,r.pathname,r.search,n]),a||null===l?s.jsx(Se,{}):t||l?s.jsx(s.Fragment,{children:e}):null},qe=({children:e})=>{const{user:t,isAuthenticated:a,isAdmin:n,loading:r}=je();return r?s.jsx(Se,{}):t&&a?n?s.jsx(s.Fragment,{children:e}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"アクセス拒否"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"管理者権限が必要です。"}),s.jsx(h,{to:"/dashboard",replace:!0})]})}):s.jsx(h,{to:"/liff/login",replace:!0})},Be=l.lazy(()=>p(()=>import("./Home-B8xnqbMR.js"),[]).then(e=>({default:e.Home}))),Ge=l.lazy(()=>p(()=>import("./Login-CzhZlvcs.js"),[]).then(e=>({default:e.Login}))),Je=l.lazy(()=>p(()=>import("./Register-vjeZPaTp.js"),[]).then(e=>({default:e.Register}))),He=l.lazy(()=>p(()=>import("./ForgotPassword-B4yOPR40.js"),[]).then(e=>({default:e.ForgotPassword}))),Xe=l.lazy(()=>p(()=>import("./ResetPassword-CBvfDjs9.js"),[])),Ke=l.lazy(()=>p(()=>import("./Landing-Bj5qaNVm.js"),[])),Ye=l.lazy(()=>p(()=>import("./DogParkList-C2uUwtbl.js"),[]).then(e=>({default:e.DogParkList}))),Ze=l.lazy(()=>p(()=>import("./DogParkDetail-CNTnZIIG.js"),[]).then(e=>({default:e.DogParkDetail}))),Qe=l.lazy(()=>p(()=>import("./DogParkRules-CB1AsfYg.js"),[]).then(e=>({default:e.DogParkRules}))),et=l.lazy(()=>p(()=>import("./FacilityDetail-_rx3AQ8e.js"),__vite__mapDeps([0])).then(e=>({default:e.FacilityDetail}))),tt=l.lazy(()=>p(()=>import("./FacilityReserve-DKvG-TiM.js"),[])),st=l.lazy(()=>p(()=>import("./PetShop-DYbUzesh.js"),[]).then(e=>({default:e.PetShop}))),at=l.lazy(()=>p(()=>import("./Cart-Qf8V0Ek7.js"),[]).then(e=>({default:e.Cart}))),nt=l.lazy(()=>p(()=>import("./Checkout-CeaF0EvN.js"),[]).then(e=>({default:e.Checkout}))),rt=l.lazy(()=>p(()=>import("./ProductDetail-vkKqJt1c.js"),[]).then(e=>({default:e.ProductDetail}))),it=l.lazy(()=>p(()=>import("./News-BSy7LbDv.js"),[]).then(e=>({default:e.News}))),lt=l.lazy(()=>p(()=>import("./NewsDetail-CHaKOCrf.js"),[]).then(e=>({default:e.NewsDetail}))),ot=l.lazy(()=>p(()=>import("./DogInfo-DyOqEjd0.js"),[])),ct=l.lazy(()=>p(()=>import("./Breeds-IWnSIN4I.js"),[]).then(e=>({default:e.Breeds}))),dt=l.lazy(()=>p(()=>import("./Care-DiGbfjKn.js"),[]).then(e=>({default:e.Care}))),mt=l.lazy(()=>p(()=>import("./Food-BQkiEA_1.js"),[]).then(e=>({default:e.Food}))),ut=l.lazy(()=>p(()=>import("./Training-Cs0TpuK0.js"),[]).then(e=>({default:e.Training}))),ht=l.lazy(()=>p(()=>import("./HealthManagement-Ko3ydqnp.js"),[]).then(e=>({default:e.HealthManagement}))),xt=l.lazy(()=>p(()=>import("./Walk-eaNHJ4fV.js"),[]).then(e=>({default:e.Walk}))),pt=l.lazy(()=>p(()=>import("./Community-CIYUQPOE.js"),[]).then(e=>({default:e.Community}))),jt=l.lazy(()=>p(()=>import("./Contact-BNEZApMj.js"),[]).then(e=>({default:e.Contact}))),gt=l.lazy(()=>p(()=>import("./AccessControl-rsNhdRAt.js"),[]).then(e=>({default:e.AccessControl}))),ft=l.lazy(()=>p(()=>import("./SubscriptionIntro-Cbx1YTl3.js"),[]).then(e=>({default:e.SubscriptionIntro}))),bt=l.lazy(()=>p(()=>import("./InviteUnlock-C6vJ9M19.js"),[])),yt=l.lazy(()=>p(()=>import("./PaymentConfirmation-_btEsYOL.js"),[])),_t=l.lazy(()=>p(()=>import("./TermsOfService-Bt1Sj1PH.js"),[]).then(e=>({default:e.TermsOfService}))),wt=l.lazy(()=>p(()=>import("./PrivacyPolicy-DQhidDC9.js"),[]).then(e=>({default:e.PrivacyPolicy}))),vt=l.lazy(()=>p(()=>import("./BusinessInformation-BbliaO0u.js"),[]).then(e=>({default:e.BusinessInformation}))),kt=l.lazy(()=>p(()=>import("./SponsorApplication-BDe7QGWO.js"),[]).then(e=>({default:e.SponsorApplication}))),Et=l.lazy(()=>p(()=>import("./SponsorInquiry-DgLV3eyC.js"),[])),St=l.lazy(()=>p(()=>import("./LegalTokushoho-CYftrEkE.js"),[])),Nt=l.lazy(()=>p(()=>import("./NotFound-AxDqVCXA.js"),[]).then(e=>({default:e.NotFound})));l.lazy(()=>p(()=>import("./TestPinGenerator-B2GHYdIG.js"),[]));const Pt=l.lazy(()=>p(()=>import("./UserDashboard-BgFdVjf4.js"),__vite__mapDeps([0]))),It=l.lazy(()=>p(()=>import("./DogRegistration-CTtj5yxH.js"),__vite__mapDeps([0])).then(e=>({default:e.DogRegistration}))),At=l.lazy(()=>p(()=>import("./DogManagement-B3iiymGz.js"),__vite__mapDeps([0])).then(e=>({default:e.DogManagement}))),Lt=l.lazy(()=>p(()=>import("./DogProfile-k5gHbb4J.js"),[]).then(e=>({default:e.DogProfile}))),Dt=l.lazy(()=>p(()=>import("./JPPassport-BYbAeUO5.js"),[]).then(e=>({default:e.JPPassport}))),Rt=l.lazy(()=>p(()=>import("./ProfileSettings-w9KZSyVh.js"),[]).then(e=>({default:e.ProfileSettings}))),Ot=l.lazy(()=>p(()=>import("./PaymentMethodSettings-DeN9gObO.js"),[]).then(e=>({default:e.PaymentMethodSettings}))),Tt=l.lazy(()=>p(()=>import("./DogParkHistory-Du7VQ8L7.js"),[]).then(e=>({default:e.DogParkHistory}))),Ct=l.lazy(()=>p(()=>import("./LikedDogs-BnGYVGBu.js"),[]).then(e=>({default:e.LikedDogs}))),zt=l.lazy(()=>p(()=>import("./MyCoupons-Oq3Wej9T.js"),[]).then(e=>({default:e.MyCoupons}))),Vt=l.lazy(()=>p(()=>import("./MyReservations-DeprnJr0.js"),[])),Mt=l.lazy(()=>p(()=>import("./OrderHistory-9uh_aJXi.js"),[]).then(e=>({default:e.OrderHistory}))),Ft=l.lazy(()=>p(()=>import("./PointsHistory-DMLr-o90.js"),[])),$t=l.lazy(()=>p(()=>import("./PhotoGallery-DTtNOKcR.js"),[])),Ut=l.lazy(()=>p(()=>import("./PrefBoard-DyhUkvuL.js"),[])),Wt=l.lazy(()=>p(()=>import("./PrefThread-R8TEgaXW.js"),[])),qt=l.lazy(()=>p(()=>import("./ParkReservation-B9rHlIR0.js"),[]).then(e=>({default:e.ParkReservation}))),Bt=l.lazy(()=>p(()=>import("./ParkRegistration-O1WZSlfP.js"),__vite__mapDeps([0]))),Gt=l.lazy(()=>p(()=>import("./ParkRegistrationAgreement-JYrO0u-W.js"),[])),Jt=l.lazy(()=>p(()=>import("./ParkRegistrationSecondStage-KHBR9FOY.js"),__vite__mapDeps([0])).then(e=>({default:e.ParkRegistrationSecondStage}))),Ht=l.lazy(()=>p(()=>import("./ParkManagement-o8jKYaKO.js"),__vite__mapDeps([0])).then(e=>({default:e.ParkManagement}))),Xt=l.lazy(()=>p(()=>import("./ParkEdit-jjOxfr0y.js"),[])),Kt=l.lazy(()=>p(()=>import("./ParkPublishingSetup-B3n3aj-5.js"),[]).then(e=>({default:e.ParkPublishingSetup}))),Yt=l.lazy(()=>p(()=>import("./FacilityRegistration-s0W841YY.js"),[])),Zt=l.lazy(()=>p(()=>import("./FacilityEdit-CC-kpyon.js"),__vite__mapDeps([0]))),Qt=l.lazy(()=>p(()=>import("./OwnerPaymentSystem-BZNx4Kls.js"),[]).then(e=>({default:e.OwnerPaymentSystem}))),es=l.lazy(()=>p(()=>import("./AdminDashboard-CWL3XkR0.js"),[]).then(e=>({default:e.AdminDashboard}))),ts=l.lazy(()=>p(()=>import("./AdminUserManagement-LYdi-xQn.js"),[]).then(e=>({default:e.AdminUserManagement}))),ss=l.lazy(()=>p(()=>import("./AdminUserDetail-_3wU_RPQ.js"),[]).then(e=>({default:e.AdminUserDetail}))),as=l.lazy(()=>p(()=>import("./AdminParkManagement-BuT2B6AQ.js"),[]).then(e=>({default:e.AdminParkManagement}))),ns=l.lazy(()=>p(()=>import("./AdminReservationManagement-Dm2ilm2K.js"),[]).then(e=>({default:e.AdminReservationManagement}))),rs=l.lazy(()=>p(()=>import("./AdminSalesManagement-DzJjZfhf.js"),[]).then(e=>({default:e.AdminSalesManagement}))),is=l.lazy(()=>p(()=>import("./AdminVaccineApproval-DZyutidQ.js"),[])),ls=l.lazy(()=>p(()=>import("./AdminFacilityApproval-ClUY_tRe.js"),[])),os=l.lazy(()=>p(()=>import("./AdminShopManagement-CmXQ-gkQ.js"),[]).then(e=>({default:e.AdminShopManagement}))),cs=l.lazy(()=>p(()=>import("./AdminRevenueReport-VqmOvAvR.js"),[]).then(e=>({default:e.AdminRevenueReport}))),ds=l.lazy(()=>p(()=>import("./AdminNewsManagement-BKONUA6k.js"),[]).then(e=>({default:e.AdminNewsManagement}))),ms=l.lazy(()=>p(()=>import("./AdminSponsors-BsFNZ4uw.js"),[]).then(e=>({default:e.AdminSponsors}))),us=l.lazy(()=>p(()=>import("./AdminSalesOverview-C_uK6c6i.js"),[])),hs=l.lazy(()=>p(()=>import("./AdminOwnerPayoutDetail-B1YVrd1s.js"),[])),xs=l.lazy(()=>p(()=>import("./AdminParkRevenueDetail-mAPo1OBq.js"),[])),ps=l.lazy(()=>p(()=>import("./MyParksManagement-CuC3QlOq.js"),[]).then(e=>({default:e.MyParksManagement}))),js=l.lazy(()=>p(()=>import("./MyFacilitiesManagement-BcHA4pTD.js"),[]).then(e=>({default:e.MyFacilitiesManagement}))),gs=({children:e})=>s.jsx(M,{children:s.jsx(ce,{children:s.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[s.jsx(_e,{}),s.jsx(Oe,{}),s.jsx("main",{className:"flex-1",children:e}),s.jsx(ke,{}),s.jsx(ve,{}),s.jsx(i.Suspense,{fallback:null,children:s.jsx(Fe,{})})]})})}),fs=()=>{const e=d(),t=c(),{isAuthenticated:a,user:n}=je();i.useEffect(()=>{const t=le.addListener("appUrlOpen",({url:t})=>{try{const s=new URL(t);if("dogparkjp.com"===s.host){const t=`${s.pathname}${s.search}`;e(t,{replace:!0})}}catch{}});return()=>{t.remove()}},[e]);const[r,l]=i.useState(()=>{if("/sponsor-application"===t.pathname||"/sponsor-inquiry"===t.pathname)return!1;return!localStorage.getItem("hasSeenSplash")}),[o,h]=i.useState(!1);i.useEffect(()=>{if(!localStorage.getItem("campaignModalShown")){const e=setTimeout(()=>{h(!0)},1e3);return()=>clearTimeout(e)}},[]);return s.jsxs(s.Fragment,{children:[r&&s.jsx(Ve,{onComplete:()=>{localStorage.setItem("hasSeenSplash","true"),l(!1);const s=["/sponsor-inquiry","/sponsor-application","/contact","/about","/terms","/privacy","/business-information","/parks","/facilities","/products","/dog-info"].some(e=>t.pathname.startsWith(e));if(a&&n&&!s){const s=new URLSearchParams(t.search).get("redirect")||"/dashboard";e(s,{replace:!0})}}}),!r&&s.jsx(fe,{children:s.jsxs(gs,{children:[s.jsx(Te,{}),s.jsx(i.Suspense,{fallback:null,children:s.jsx(Me,{isOpen:o,onClose:()=>{h(!1),localStorage.setItem("campaignModalShown","true")}})}),s.jsxs(m,{children:[s.jsx(u,{path:"/",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(Be,{})})}),s.jsx(u,{path:"/landing",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(Ke,{})})}),s.jsx(u,{path:"/login",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(Ge,{})})}),s.jsx(u,{path:"/register",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(Je,{})})}),s.jsx(u,{path:"/forgot-password",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(He,{})})}),s.jsx(u,{path:"/reset-password",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(Xe,{})})}),s.jsx(u,{path:"/parks",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(Ye,{})})}),s.jsx(u,{path:"/parks/:id",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(Ze,{})})}),s.jsx(u,{path:"/facilities/:id",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(et,{})})}),s.jsx(u,{path:"/facilities/:id/reserve",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(tt,{})})}),s.jsx(u,{path:"/rules",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(Qe,{})})}),s.jsx(u,{path:"/petshop",element:s.jsx(i.Suspense,{fallback:s.jsx(Ne,{}),children:s.jsx(st,{})})}),s.jsx(u,{path:"/cart",element:s.jsx(i.Suspense,{fallback:s.jsx(Ne,{}),children:s.jsx(at,{})})}),s.jsx(u,{path:"/checkout",element:s.jsx(i.Suspense,{fallback:s.jsx(Ne,{}),children:s.jsx(nt,{})})}),s.jsx(u,{path:"/products/:id",element:s.jsx(i.Suspense,{fallback:s.jsx(Ne,{}),children:s.jsx(rt,{})})}),s.jsx(u,{path:"/news",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(it,{})})}),s.jsx(u,{path:"/news/:newsId",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(lt,{})})}),s.jsx(u,{path:"/dog-info",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(ot,{})})}),s.jsx(u,{path:"/dog-info/breeds",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(ct,{})})}),s.jsx(u,{path:"/dog-info/care",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(dt,{})})}),s.jsx(u,{path:"/dog-info/food",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(mt,{})})}),s.jsx(u,{path:"/dog-info/training",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(ut,{})})}),s.jsx(u,{path:"/dog-info/health",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(ht,{})})}),s.jsx(u,{path:"/dog-info/walk",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(xt,{})})}),s.jsx(u,{path:"/community",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(pt,{})})}),s.jsx(u,{path:"/invite/:token",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(bt,{})})})}),s.jsx(u,{path:"/inquiry",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx($e,{})})})}),s.jsx(u,{path:"/contact",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(jt,{})})}),s.jsx(u,{path:"/terms",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(_t,{})})}),s.jsx(u,{path:"/privacy",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(wt,{})})}),s.jsx(u,{path:"/legal/tokushoho",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(St,{})})}),s.jsx(u,{path:"/business-information",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(vt,{})})}),s.jsx(u,{path:"/sponsor-inquiry",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(Et,{})})}),s.jsx(u,{path:"/sponsor-application",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(kt,{})})}),s.jsx(u,{path:"/subscription-intro",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(ft,{})})}),s.jsx(u,{path:"/payment-confirmation",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(yt,{})})}),s.jsx(u,{path:"/access-control",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(gt,{})})})}),s.jsx(u,{path:"/my-parks-management",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(ps,{})})})}),s.jsx(u,{path:"/park-operation-guidelines",element:s.jsx(We,{children:s.jsx(we,{})})}),!1,s.jsx(u,{path:"/my-facilities-management",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(js,{})})})}),s.jsx(u,{path:"/dashboard",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(Pt,{})})})}),s.jsx(u,{path:"/dog-registration",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(It,{})})})}),s.jsx(u,{path:"/dog-management",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(At,{})})})}),s.jsx(u,{path:"/dog-profile/:id",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(Lt,{})})})}),s.jsx(u,{path:"/jp-passport",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(Dt,{})})})}),s.jsx(u,{path:"/profile-settings",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(Rt,{})})})}),s.jsx(u,{path:"/payment-method-settings",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(Ot,{})})})}),s.jsx(u,{path:"/dogpark-history",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(Tt,{})})})}),s.jsx(u,{path:"/my-coupons",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(zt,{})})})}),s.jsx(u,{path:"/my-reservations",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(Vt,{})})})}),s.jsx(u,{path:"/order-history",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(Mt,{})})})}),s.jsx(u,{path:"/photos",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx($t,{})})})}),s.jsx(u,{path:"/community/boards",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(Ut,{})})})}),s.jsx(u,{path:"/community/boards/:id",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(Wt,{})})})}),s.jsx(u,{path:"/orders",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(Mt,{})})})}),s.jsx(u,{path:"/points",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(Ft,{})})})}),s.jsx(u,{path:"/reservation/:parkId",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(qt,{})})})}),s.jsx(u,{path:"/liked-dogs",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(Ct,{})})})}),s.jsx(u,{path:"/park-registration",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(Bt,{})})})}),s.jsx(u,{path:"/park-registration-agreement",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(Gt,{})})})}),s.jsx(u,{path:"/parks/:id/second-stage",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(Jt,{})})})}),s.jsx(u,{path:"/parks/:id/manage",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(Ht,{})})})}),s.jsx(u,{path:"/parks/:id/edit",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(Xt,{})})})}),s.jsx(u,{path:"/parks/:id/reserve",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(qt,{})})})}),s.jsx(u,{path:"/parks/:id/publish-setup",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(Kt,{})})})}),s.jsx(u,{path:"/facility-registration",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(Yt,{})})})}),s.jsx(u,{path:"/facilities/:id/edit",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(Zt,{})})})}),s.jsx(u,{path:"/owner-payment-system",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(Qt,{})})})}),s.jsx(u,{path:"/register-park",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(Bt,{})})})}),s.jsx(u,{path:"/admin",element:s.jsx(qe,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(es,{})})})}),s.jsx(u,{path:"/admin/inquiries",element:s.jsx(qe,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(Ue,{})})})}),s.jsx(u,{path:"/admin/users",element:s.jsx(qe,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(ts,{})})})}),s.jsx(u,{path:"/admin/users/:userId",element:s.jsx(qe,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(ss,{})})})}),s.jsx(u,{path:"/admin/sponsors",element:s.jsx(qe,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(ms,{})})})}),s.jsx(u,{path:"/admin/parks",element:s.jsx(qe,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(as,{})})})}),s.jsx(u,{path:"/admin/reservations",element:s.jsx(qe,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(ns,{})})})}),s.jsx(u,{path:"/admin/sales",element:s.jsx(qe,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(rs,{})})})}),s.jsx(u,{path:"/admin/sales-overview",element:s.jsx(qe,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(us,{})})})}),s.jsx(u,{path:"/admin/vaccine-approval",element:s.jsx(qe,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(is,{})})})}),s.jsx(u,{path:"/admin/facility-approval",element:s.jsx(qe,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(ls,{})})})}),s.jsx(u,{path:"/admin/shop",element:s.jsx(qe,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(os,{})})})}),s.jsx(u,{path:"/admin/revenue",element:s.jsx(qe,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(cs,{})})})}),s.jsx(u,{path:"/admin/revenue/owner/:ownerId",element:s.jsx(qe,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(hs,{})})})}),s.jsx(u,{path:"/admin/revenue/park/:parkId",element:s.jsx(qe,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(xs,{})})})}),s.jsx(u,{path:"/admin/news",element:s.jsx(qe,{children:s.jsx(i.Suspense,{fallback:s.jsx(Pe,{}),children:s.jsx(ds,{})})})}),s.jsx(u,{path:"/my-parks",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(ps,{})})})}),s.jsx(u,{path:"/my-facilities",element:s.jsx(We,{children:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(js,{})})})}),s.jsx(u,{path:"*",element:s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(Nt,{})})})]})]})})]})},bs=new a({defaultOptions:{queries:{staleTime:6e4,gcTime:3e5,retry:1,refetchOnWindowFocus:!1,refetchIntervalInBackground:!1},mutations:{retry:1}}}),ys=({resetErrorBoundary:e})=>s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"エラーが発生しました"}),s.jsx("button",{onClick:e,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"再試行"})]})}),_s=document.getElementById("root");if(_s){F.createRoot(_s).render(s.jsx(q,{FallbackComponent:ys,children:s.jsx(n,{client:bs,children:s.jsx(x,{children:s.jsx(pe,{children:s.jsx(fs,{})})})})}))}export{ye as C,_e as S,Y as W,de as a,Ie as b,De as c,Le as d,be as e,Ae as f,he as h,ie as i,Ce as l,K as r,ue as s,je as u};
