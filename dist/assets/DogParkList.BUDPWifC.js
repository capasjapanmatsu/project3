var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,n=(t,s,r)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,l=(e,t)=>{for(var s in t||(t={}))i.call(t,s)&&n(e,s,t[s]);if(r)for(var s of r(t))a.call(t,s)&&n(e,s,t[s]);return e},c=(e,r)=>t(e,s(r)),o=(e,t,s)=>new Promise(((r,i)=>{var a=e=>{try{l(s.next(e))}catch(t){i(t)}},n=e=>{try{l(s.throw(e))}catch(t){i(t)}},l=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,n);l((s=s.apply(e,t)).next())}));import{s as d,j as h,C as m,B as p}from"./index.oOj2R_C7.js";import{r as x,L as u}from"./router.icJHpBzt.js";import{A as g,R as f,e as b,$ as y,a0 as j,U as v,C as w,c as N,V as _,a1 as S,h as k}from"./ui.UnEvinBv.js";import"./vendor.D1SiiUJb.js";import"./supabase.CZ8ekJUM.js";function I(e,t,s,r){return new(s||(s=Promise))((function(t,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function n(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var r;e.done?t(e.value):(r=e.value,r instanceof s?r:new s((function(e){e(r)}))).then(a,n)}l((r=r.apply(e,[])).next())}))}function E(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}"function"==typeof SuppressedError&&SuppressedError;var P=E((function e(t,s){if(t===s)return!0;if(t&&s&&"object"==typeof t&&"object"==typeof s){if(t.constructor!==s.constructor)return!1;var r,i,a;if(Array.isArray(t)){if((r=t.length)!=s.length)return!1;for(i=r;0!==i--;)if(!e(t[i],s[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===s.source&&t.flags===s.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===s.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===s.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(s).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(s,a[i]))return!1;for(i=r;0!==i--;){var n=a[i];if(!e(t[n],s[n]))return!1}return!0}return t!=t&&s!=s}));const C="__googleMapsScriptId";var O,$;($=O||(O={}))[$.INITIALIZED=0]="INITIALIZED",$[$.LOADING=1]="LOADING",$[$.SUCCESS=2]="SUCCESS",$[$.FAILURE=3]="FAILURE";class L{constructor({apiKey:e,authReferrerPolicy:t,channel:s,client:r,id:i=C,language:a,libraries:n=[],mapIds:l,nonce:c,region:o,retries:d=3,url:h="https://maps.googleapis.com/maps/api/js",version:m}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=t,this.channel=s,this.client=r,this.id=i||C,this.language=a,this.libraries=n,this.mapIds=l,this.nonce=c,this.region=o,this.retries=d,this.url=h,this.version=m,L.instance){if(!P(this.options,L.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(L.instance.options)}`);return L.instance}L.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?O.FAILURE:this.done?O.SUCCESS:this.loading?O.LOADING:O.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise(((e,t)=>{this.loadCallback((s=>{s?t(s.error):e(window.google)}))}))}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,t;if(document.getElementById(this.id))return void this.callback();const s={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(s).forEach((e=>!s[e]&&delete s[e])),(null===(t=null===(e=null===window||void 0===window?void 0:window.google)||void 0===e?void 0:e.maps)||void 0===t?void 0:t.importLibrary)||(e=>{let t,s,r,i="google",a="importLibrary",n="__ib__",l=document,c=window;c=c[i]||(c[i]={});const o=c.maps||(c.maps={}),d=new Set,h=new URLSearchParams,m=()=>t||(t=new Promise(((a,c)=>I(this,0,void 0,(function*(){var m;for(r in yield s=l.createElement("script"),s.id=this.id,h.set("libraries",[...d]+""),e)h.set(r.replace(/[A-Z]/g,(e=>"_"+e[0].toLowerCase())),e[r]);h.set("callback",i+".maps."+n),s.src=this.url+"?"+h,o[n]=a,s.onerror=()=>t=c(Error("The Google Maps JavaScript API could not load.")),s.nonce=this.nonce||(null===(m=l.querySelector("script[nonce]"))||void 0===m?void 0:m.nonce)||"",l.head.append(s)})))));o[a]||(o[a]=(e,...t)=>d.add(e)&&m().then((()=>o[a](e,...t))))})(s);const r=this.libraries.map((e=>this.importLibrary(e)));r.length||r.push(this.importLibrary("core")),Promise.all(r).then((()=>this.callback()),(e=>{const t=new ErrorEvent("error",{error:e});this.loadErrorCallback(t)}))}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const e=this.errors.length*Math.pow(2,this.errors.length);setTimeout((()=>{this.deleteScript(),this.setScript()}),e)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach((e=>{e(this.onerrorEvent)})),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return void this.callback();this.loading=!0,this.setScript()}}}function R(){const[e,t]=x.useState([]),[s,r]=x.useState({}),[i,a]=x.useState({}),[n,I]=x.useState(!0),[E,P]=x.useState(null),[C,O]=x.useState(""),[$,R]=x.useState(null),[M,D]=x.useState(new Date),[A,T]=x.useState(!1),[z,F]=x.useState({}),K=x.useRef(null),U=x.useRef(null),G=x.useRef([]),q=x.useRef(null),[J,Z]=x.useState(!1);x.useEffect((()=>{navigator.geolocation.getCurrentPosition((e=>{R({lat:e.coords.latitude,lng:e.coords.longitude})}),(e=>{R({lat:35.6812,lng:139.7671})}))}),[]);const W=()=>o(null,null,(function*(){try{T(!0);const{data:e,error:s}=yield d.from("dog_parks").select("id, current_occupancy, max_capacity").eq("status","approved");if(s)return;const r=new Date;D(r),t((t=>t.map((t=>{const s=null==e?void 0:e.find((e=>e.id===t.id));if(s&&e){const e=[...z[t.id]||[],{timestamp:r.toISOString(),occupancy:s.current_occupancy,maxCapacity:s.max_capacity}].slice(-20);return F((s=>c(l({},s),{[t.id]:e}))),l(l({},t),s)}return t}))))}catch(e){}finally{T(!1)}}));x.useEffect((()=>{o(null,null,(function*(){try{I(!0),P(null);const{data:e,error:s}=yield d.from("dog_parks").select("*").eq("status","approved").order("created_at",{ascending:!1});if(s)throw P(`データ取得エラー: ${s.message||"Unknown error"}`),s;$&&e&&e.sort(((e,t)=>V($.lat,$.lng,e.latitude,e.longitude)-V($.lat,$.lng,t.latitude,t.longitude))),t(e||[]),e&&0!==e.length||P("表示できるドッグランがありません。データベースの内容を確認してください。");const i=(new Date).toISOString().split("T")[0],{data:n,error:l}=yield d.from("reservations").select("*").eq("reservation_type","whole_facility").eq("status","confirmed").eq("date",i),c={};(n||[]).forEach((e=>{if(e&&e.park_id){const t=e.park_id;c[t]||(c[t]=[]),c[t].push(e)}})),r(c);const{data:o,error:h}=yield d.from("park_maintenance").select("park_id, title, description, start_date, end_date, is_emergency, status").in("status",["scheduled","active"]).gte("end_date",(new Date).toISOString());if(h);else{const e={};(o||[]).forEach((t=>{const s=new Date,r=new Date(t.start_date),i=new Date(t.end_date);i>s&&(!e[t.park_id]||r<=s&&i>s)&&(e[t.park_id]={id:t.park_id,title:t.title,description:t.description,start_date:t.start_date,end_date:t.end_date,is_emergency:t.is_emergency})})),a(e)}}catch(e){P(`データ取得エラー: ${e.message||"Unknown error"}`)}finally{I(!1)}}));const e=d.channel("dog_parks_changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"dog_parks"},(e=>{t((t=>t.map((t=>t.id===e.new.id?l(l({},t),e.new):t))));const s=new Date;F((t=>{const r=[...t[e.new.id]||[],{timestamp:s.toISOString(),occupancy:e.new.current_occupancy,maxCapacity:e.new.max_capacity}].slice(-20);return c(l({},t),{[e.new.id]:r})}))})).subscribe();return q.current=setInterval(W,3e4),()=>{e.unsubscribe(),q.current&&clearInterval(q.current)}}),[$]);const B=(e,t)=>{const s=e/t*100;return s<25?{text:"空いています",color:"text-green-600 bg-green-100",barColor:"bg-green-500",description:"快適に利用できます",emoji:"😊"}:s<50?{text:"やや空いています",color:"text-blue-600 bg-blue-100",barColor:"bg-blue-500",description:"適度な混雑です",emoji:"🙂"}:s<75?{text:"やや混んでいます",color:"text-yellow-600 bg-yellow-100",barColor:"bg-yellow-500",description:"少し混雑しています",emoji:"😐"}:{text:"混んでいます",color:"text-red-600 bg-red-100",barColor:"bg-red-500",description:"大変混雑しています",emoji:"😰"}};x.useEffect((()=>{if(!$||!K.current)return;o(null,null,(function*(){try{const t=new L({apiKey:"AIzaSyC9sxGamDZmdKIz3vP1CWLJORl-QkoWgHg",version:"weekly",libraries:["places"]}),r=yield t.load();if(!K.current)return;const i=new r.maps.Map(K.current,{center:$,zoom:13,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1,styles:[{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels.icon",stylers:[{visibility:"off"}]}]});U.current=i,G.current.forEach((e=>e.setMap(null))),G.current=[];const a=new r.maps.Marker({position:$,map:i,icon:{path:r.maps.SymbolPath.CIRCLE,scale:10,fillColor:"#4285F4",fillOpacity:1,strokeWeight:2,strokeColor:"#FFFFFF"},title:"現在地"});G.current.push(a),e.forEach((e=>{const t=B(e.current_occupancy,e.max_capacity);let a="red";t.color.includes("green")?a="green":t.color.includes("blue")?a="blue":t.color.includes("yellow")&&(a="yellow");const n=new r.maps.Marker({position:{lat:Number(e.latitude),lng:Number(e.longitude)},map:i,title:e.name,icon:{url:`https://maps.google.com/mapfiles/ms/icons/${a}-dot.png`}}),l=Array.from({length:5},((t,s)=>`<span style="color: ${s<Math.round(e.average_rating)?"#fbbf24":"#d1d5db"};">★</span>`)).join(""),c=s[e.id]||[];let o="";if(c.length>0){const e=[];c.forEach((t=>{const s=parseInt(t.start_time),r=s+t.duration;e.push({start:`${s.toString().padStart(2,"0")}:00`,end:`${r.toString().padStart(2,"0")}:00`})})),o='\n              <div style="margin-top: 8px; padding: 8px; background-color: #fff7ed; border: 1px solid #fed7aa; border-radius: 4px;">\n                <p style="font-weight: 500; color: #9a3412; margin-bottom: 4px; font-size: 12px;">本日の貸し切り時間</p>\n            ',e.forEach((e=>{o+=`<p style="font-size: 11px; color: #9a3412; margin: 2px 0;">${e.start}〜${e.end}</p>`})),o+="</div>"}const d=new r.maps.InfoWindow({content:`\n              <div style="padding: 12px; max-width: 300px;">\n                <h3 style="margin: 0 0 8px 0; font-size: 16px; font-weight: bold;">${e.name}</h3>\n                <div style="display: flex; align-items: center; margin-bottom: 4px;">\n                  ${l}\n                  <span style="margin-left: 4px; font-size: 12px; color: #666;">${e.average_rating.toFixed(1)} (${e.review_count}件)</span>\n                </div>\n                <p style="margin: 0 0 4px 0; font-size: 14px; color: #666;">${e.address}</p>\n                <p style="margin: 0 0 4px 0; font-size: 14px;">通常利用: ¥800/日</p>\n                <p style="margin: 0 0 4px 0; font-size: 14px;">施設貸し切り: ¥4,400/時間</p>\n                ${e.private_booths?'<p style="margin: 0 0 4px 0; font-size: 14px;">プライベートブース: サブスク使い放題・1日券でも利用可能</p>':""}\n                <p style="margin: 0 0 8px 0; font-size: 14px;">${t.text} (${e.current_occupancy}/${e.max_capacity})</p>\n                ${o}\n                <a href="/parks/${e.id}" style="display: inline-block; padding: 8px 16px; background-color: #2563eb; color: white; text-decoration: none; border-radius: 6px; font-size: 14px; margin-top: 8px;">詳細を見る</a>\n              </div>\n            `});n.addListener("click",(()=>{d.open(i,n)})),G.current.push(n)})),O("")}catch(t){O("Google Mapsの読み込みに失敗しました。APIキーが正しく設定されているか確認してください。")}}))}),[$,e,s]);const V=(e,t,s,r)=>{const i=(s-e)*Math.PI/180,a=(r-t)*Math.PI/180,n=Math.sin(i/2)*Math.sin(i/2)+Math.cos(e*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin(a/2)*Math.sin(a/2);return 6371*(2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n)))};return x.useEffect((()=>{const e=setTimeout((()=>{n&&(Z(!0),P("タイムアウト: サーバーから応答がありません。ネットワークやRLS設定を再確認してください。"),I(!1))}),1e4);return()=>clearTimeout(e)}),[n]),n&&!J?h.jsx("div",{className:"flex justify-center items-center h-64",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),h.jsx("p",{className:"text-gray-600",children:"ドッグラン情報を読み込み中..."})]})}):E?h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:"flex justify-between items-center",children:h.jsx("h1",{className:"text-2xl font-bold",children:"ドッグラン一覧"})}),h.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[h.jsxs("div",{className:"flex items-center mb-4",children:[h.jsx(g,{className:"w-6 h-6 text-red-500 mr-2"}),h.jsx("h2",{className:"text-lg font-semibold text-red-800",children:"エラーが発生しました"})]}),h.jsx("p",{className:"text-red-700 mb-4",children:E}),h.jsxs("div",{className:"space-y-2 text-sm text-red-600",children:[h.jsx("p",{children:h.jsx("strong",{children:"考えられる原因:"})}),h.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[h.jsx("li",{children:"データベースの接続エラー"}),h.jsx("li",{children:"ドッグランデータが登録されていない"}),h.jsx("li",{children:"RLS（Row Level Security）の設定問題"}),h.jsx("li",{children:"ネットワーク接続の問題"})]})]}),h.jsxs("div",{className:"mt-4 flex space-x-2",children:[h.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium",children:"再読み込み"}),h.jsx("button",{onClick:()=>{P(null),I(!0)},className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg font-medium",children:"再試行"})]})]})]}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h1",{className:"text-2xl font-bold",children:"ドッグラン一覧"}),h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsxs("div",{className:"text-sm text-gray-600",children:["最終更新: ",M.toLocaleTimeString("ja-JP")]}),h.jsxs("button",{onClick:()=>{W()},disabled:A,className:"flex items-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors "+(A?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-100 text-blue-700 hover:bg-blue-200"),children:[h.jsx(f,{className:"w-4 h-4 "+(A?"animate-spin":"")}),h.jsx("span",{children:A?"更新中...":"更新"})]})]})]}),h.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("div",{className:"w-2 h-2 rounded-full "+(A?"bg-yellow-500 animate-pulse":"bg-green-500")}),h.jsx("span",{className:"text-sm font-medium text-blue-900",children:A?"リアルタイム更新中...":"リアルタイム更新中"})]}),h.jsx("div",{className:"text-xs text-blue-700",children:"30秒ごとに自動更新"})]})}),h.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[h.jsx("h2",{className:"font-semibold text-blue-900 mb-2",children:"料金体系"}),h.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm text-blue-800",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-medium",children:"通常利用"}),h.jsx("p",{children:"1日800円（時間制限なし）"})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-medium",children:"サブスクリプション"}),h.jsx("p",{children:"月額3,800円（全国共通）"})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-medium",children:"施設貸し切り"}),h.jsx("p",{children:"4,400円/時間（人数制限なし）"}),h.jsx("p",{className:"text-xs text-blue-600",children:"※前日までの予約が必要"})]})]})]}),h.jsx("div",{className:"relative",children:C?h.jsx("div",{className:"w-full h-[400px] bg-gray-100 rounded-lg shadow-md flex items-center justify-center",children:h.jsxs("div",{className:"text-center p-6",children:[h.jsx(b,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),h.jsx("p",{className:"text-gray-600 mb-2",children:"地図を表示できません"}),h.jsx("p",{className:"text-sm text-red-600",children:C}),h.jsx("div",{className:"mt-4 p-3 bg-yellow-50 rounded-lg text-left",children:h.jsxs("p",{className:"text-sm text-yellow-800",children:[h.jsx("strong",{children:"解決方法:"}),h.jsx("br",{}),"1. .envファイルにVITE_GOOGLE_MAPS_API_KEY=your_api_keyを追加",h.jsx("br",{}),"2. Google Cloud ConsoleでMaps JavaScript APIを有効化",h.jsx("br",{}),"3. APIキーの制限設定を確認"]})})]})}):h.jsx("div",{ref:K,className:"w-full h-[400px] rounded-lg shadow-md"})}),0===e.length?h.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:h.jsxs("div",{className:"text-center",children:[h.jsx(b,{className:"w-12 h-12 text-yellow-500 mx-auto mb-4"}),h.jsx("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"ドッグランが見つかりません"}),h.jsx("p",{className:"text-yellow-700 mb-4",children:"現在表示できるドッグランがありません。"}),h.jsxs("div",{className:"space-y-2 text-sm text-yellow-600",children:[h.jsx("p",{children:h.jsx("strong",{children:"考えられる原因:"})}),h.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-left inline-block",children:[h.jsx("li",{children:"データベースにドッグランデータが登録されていない"}),h.jsx("li",{children:"承認済み（status='approved'）のドッグランがない"}),h.jsx("li",{children:"RLS（Row Level Security）の設定により表示されない"})]})]}),h.jsx("div",{className:"mt-4",children:h.jsx("button",{onClick:()=>window.location.reload(),className:"bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg font-medium",children:"再読み込み"})})]})}):h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((e=>{const t=B(e.current_occupancy,e.max_capacity),r=(e=>{const t=z[e]||[];if(t.length<2)return"stable";const s=t.slice(-3),r=t.slice(-6,-3);if(0===s.length||0===r.length)return"stable";const i=s.reduce(((e,t)=>e+t.occupancy),0)/s.length,a=r.reduce(((e,t)=>e+t.occupancy),0)/r.length;return i>a+1?"increasing":i<a-1?"decreasing":"stable"})(e.id),a=$?V($.lat,$.lng,Number(e.latitude),Number(e.longitude)):null,n=(e=>{const t=s[e]||[];if(0===t.length)return null;const r=[];return t.forEach((e=>{const t=parseInt(e.start_time),s=t+e.duration;r.push({start:`${t.toString().padStart(2,"0")}:00`,end:`${s.toString().padStart(2,"0")}:00`})})),r})(e.id),l=n&&n.length>0,c=i[e.id];let o=null;if(c){const e=new Date,t=new Date(c.start_date),s=new Date(c.end_date);e>=t&&e<s?o="active":e<t&&(o="scheduled")}return h.jsxs(m,{className:"overflow-hidden",children:[e.image_url&&h.jsxs("div",{className:"relative h-56 mb-4 -m-6 mb-4",children:[h.jsx("img",{src:e.image_url,alt:e.name,className:"w-full h-full object-cover",loading:"lazy",onError:e=>{e.currentTarget.src="https://images.pexels.com/photos/1108099/pexels-photo-1108099.jpeg"}}),h.jsx("div",{className:"absolute bottom-3 left-1/2 transform -translate-x-1/2",children:h.jsx("span",{className:`px-3 py-1.5 rounded-full text-sm font-semibold shadow-lg ${t.color}`,children:t.text})}),o&&c&&h.jsx("div",{className:"absolute top-2 left-2",children:h.jsx("span",{className:"px-3 py-1.5 rounded-full text-sm font-semibold text-white shadow-lg "+("active"===o?c.is_emergency?"bg-red-600":"bg-orange-600":"bg-blue-600"),children:"active"===o?c.is_emergency?"緊急メンテナンス中":"メンテナンス中":"メンテナンス予定"})}),!o&&l&&h.jsx("div",{className:"absolute top-2 left-2",children:h.jsx("span",{className:"px-3 py-1.5 rounded-full text-sm font-semibold bg-orange-500 text-white shadow-lg",children:"本日貸し切りあり"})})]}),h.jsxs("div",{className:e.image_url?"px-6 pb-6":"",children:[h.jsx("h3",{className:"text-lg font-semibold mb-2",children:e.name}),a&&h.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:[h.jsx(b,{className:"w-4 h-4 mr-1"}),h.jsxs("span",{children:[a.toFixed(1),"km"]})]}),r&&h.jsxs("div",{className:"flex items-center text-sm mb-3",children:["increasing"===r?h.jsx(y,{className:"w-4 h-4 mr-1 text-orange-500"}):"decreasing"===r?h.jsx(j,{className:"w-4 h-4 mr-1 text-green-500"}):null,h.jsx("span",{className:"text-gray-600",children:"increasing"===r?"混雑傾向":"decreasing"===r?"空いてきています":""})]}),h.jsxs("div",{className:"flex items-center justify-between text-sm mb-3",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(v,{className:"w-4 h-4 mr-1 text-blue-600"}),h.jsx("span",{className:"text-gray-600",children:"現在の利用者数"})]}),h.jsx("div",{className:"flex items-center",children:h.jsxs("span",{className:"font-semibold "+(e.current_occupancy/e.max_capacity>.8?"text-red-600":e.current_occupancy/e.max_capacity>.6?"text-orange-600":"text-green-600"),children:[e.current_occupancy,"/",e.max_capacity]})})]}),o&&c&&h.jsxs("div",{className:"bg-red-50 p-3 rounded-lg mb-3",children:[h.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[h.jsx(g,{className:"w-4 h-4 text-red-600"}),h.jsx("span",{className:"text-sm font-medium text-red-800",children:c.title})]}),c.description&&h.jsx("p",{className:"text-sm text-red-700 mb-2",children:c.description}),h.jsx("div",{className:"text-xs text-red-600",children:h.jsxs("div",{className:"flex items-center space-x-1",children:[h.jsx(w,{className:"w-3 h-3"}),h.jsxs("span",{children:[new Date(c.start_date).toLocaleDateString("ja-JP",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),"〜",new Date(c.end_date).toLocaleDateString("ja-JP",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})}),h.jsx("p",{className:`text-xs ${"active"===o?c.is_emergency?"text-red-600":"text-orange-600":"text-blue-600"} mt-2`,children:"※メンテナンス期間中は利用できません"})]}),!o&&l&&h.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg",children:[h.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[h.jsx(g,{className:"w-4 h-4 text-orange-600"}),h.jsx("span",{className:"text-sm font-medium text-orange-800",children:"本日の貸し切り時間"})]}),h.jsx("div",{className:"space-y-1",children:n.map(((e,t)=>h.jsxs("div",{className:"flex items-center text-xs text-orange-700",children:[h.jsx(w,{className:"w-3 h-3 mr-1 flex-shrink-0"}),h.jsxs("span",{children:[e.start,"〜",e.end]})]},t)))}),h.jsx("p",{className:"text-xs text-orange-600 mt-2",children:"※貸し切り時間中は通常利用できません"})]}),h.jsxs("div",{className:"flex items-center space-x-4",children:[e.large_dog_area&&h.jsxs("div",{className:"flex items-center text-sm text-blue-600",children:[h.jsx(N,{className:"w-4 h-4 mr-1"}),h.jsx("span",{children:"大型犬OK"})]}),e.small_dog_area&&h.jsxs("div",{className:"flex items-center text-sm text-pink-600",children:[h.jsx(_,{className:"w-4 h-4 mr-1"}),h.jsx("span",{children:"小型犬OK"})]})]}),h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("div",{className:"flex items-center text-gray-600",children:[h.jsx(S,{className:"w-4 h-4 mr-2"}),h.jsx("span",{className:"text-sm font-medium",children:"¥800/日"})]})}),e.private_booths&&h.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-sm font-medium text-purple-800",children:"プライベートブース"}),h.jsxs("span",{className:"text-sm text-purple-600",children:[e.private_booth_count,"室"]})]}),h.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"サブスク使い放題・1日券でも利用可能（追加料金なし）"})]})]}),h.jsxs("div",{className:"mt-4 space-y-3",children:[h.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries({parking:"駐車場",shower:"シャワー設備",restroom:"トイレ",agility:"アジリティ設備",rest_area:"休憩スペース",water_station:"給水設備"}).map((([t,s])=>e.facilities[t]&&h.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[h.jsx(k,{className:"w-4 h-4 mr-1 text-green-600 flex-shrink-0"}),h.jsx("span",{children:s})]},t)))}),e.facility_details&&h.jsx("p",{className:"text-sm text-gray-600 border-t pt-3 line-clamp-2",children:e.facility_details}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsx(u,{to:`/parks/${e.id}`,children:h.jsx(p,{variant:"secondary",className:"w-full",style:{backgroundColor:"white",color:"#2563eb",borderColor:"#d1d5db"},children:"詳細・レビュー"})}),"active"===o?h.jsx(p,{className:"w-full bg-gray-400 cursor-not-allowed",disabled:!0,title:"メンテナンス中のため予約できません",children:"予約不可"}):h.jsx(u,{to:`/parks/${e.id}/reserve`,children:h.jsx(p,{className:"w-full",children:"予約する"})})]})]})]},e.id)}))})]})}export{R as DogParkList};
