import{u as e,b as s,j as a,B as t}from"./index-rzoKNnex.js";import{u as i,r,L as l}from"./vendor-Cwmn0chA.js";import{C as n}from"./Card-CRM3w0N8.js";import{I as c}from"./Input-DdOgOQvG.js";import{a as d,l as x,i as m,f as o,b as h,g as j,$ as g,ae as p,h as N,G as u,t as f,ad as v,n as b,X as w}from"./ui-CMSAjam7.js";import"./supabase-Dzr8oIt2.js";function y(){const{user:y,isAdmin:_}=e(),k=i(),[S,C]=r.useState("overview"),[P,D]=r.useState({totalUsers:0,totalParks:0,pendingParks:0,pendingVaccines:0,totalReservations:0,monthlyRevenue:0,lastMonthRevenue:0,totalSubscriptions:0,activeSubscriptions:0,newUsersThisMonth:0,unreadMessages:0}),[q,z]=r.useState([]),[M,L]=r.useState([]),[R,V]=r.useState([]),[T,J]=r.useState(!0),[U,I]=r.useState(""),[$,O]=r.useState(null),[E,A]=r.useState(null),[B,G]=r.useState(!1),[F,H]=r.useState(""),[K,Q]=r.useState(""),[W,X]=r.useState([]),[Y,Z]=r.useState(""),[ee,se]=r.useState("");r.useEffect((()=>{_?ae():k("/")}),[_,k]);const ae=async()=>{try{J(!0),H(""),Q("");const{data:e,error:a}=await s.rpc("get_admin_stats");if(a)throw a;D({totalUsers:e.total_users||0,totalParks:e.total_parks||0,pendingParks:e.pending_parks||0,pendingVaccines:e.pending_vaccines||0,totalReservations:e.total_reservations||0,monthlyRevenue:e.monthly_revenue||0,lastMonthRevenue:e.last_month_revenue||0,totalSubscriptions:e.total_subscriptions||0,activeSubscriptions:e.active_subscriptions||0,newUsersThisMonth:e.new_users_this_month||0,unreadMessages:e.unread_messages||0});const[t,i,r]=await Promise.all([s.from("dog_parks").select("*, owner:profiles(*)").eq("status","pending"),s.from("vaccine_certifications").select("*, dog:dogs(*, owner:profiles(*))").eq("status","pending"),s.from("profiles").select("*").order("created_at",{ascending:!1})]);if(t.error)throw t.error;if(i.error)throw i.error;if(r.error)throw r.error;z(t.data||[]),L(i.data||[]),V(r.data||[])}catch(e){}finally{J(!1)}},te=async e=>{try{G(!0),H(""),Q("");const{error:a}=await s.from("dog_parks").update({status:"first_stage_passed"}).eq("id",e);if(a)throw a;const{error:t}=await s.from("dog_park_review_stages").insert([{park_id:e,first_stage_passed_at:(new Date).toISOString()}]);if(t)throw t;const{data:i,error:r}=await s.from("dog_parks").select("name, owner_id").eq("id",e).single();if(r)throw r;const{error:l}=await s.from("notifications").insert([{user_id:i.owner_id,type:"park_approval_required",title:"第一審査通過のお知らせ",message:`${i.name}の第一審査が通過しました。第二審査の詳細情報を入力してください。`,data:{park_id:e}}]);if(l)throw l;await ae(),O(null),Q("ドッグランを承認しました。"),setTimeout((()=>{Q("")}),3e3)}catch(a){H("承認に失敗しました: "+a.message)}finally{G(!1)}},ie=async e=>{try{G(!0),H(""),Q("");const{error:a}=await s.from("dog_parks").update({status:"rejected"}).eq("id",e);if(a)throw a;const{data:t,error:i}=await s.from("dog_parks").select("name, owner_id").eq("id",e).single();if(i)throw i;const{error:r}=await s.from("notifications").insert([{user_id:t.owner_id,type:"park_approval_required",title:"ドッグラン審査結果のお知らせ",message:`${t.name}の審査が却下されました。詳細はダッシュボードをご確認ください。`,data:{park_id:e}}]);if(r)throw r;await ae(),O(null),Q("ドッグランを却下しました。"),setTimeout((()=>{Q("")}),3e3)}catch(a){H("却下に失敗しました: "+a.message)}finally{G(!1)}},re=async e=>{try{G(!0),H(""),Q("");const{error:a}=await s.from("vaccine_certifications").update({status:"approved",approved_at:(new Date).toISOString()}).eq("id",e);if(a)throw a;const{data:t,error:i}=await s.from("vaccine_certifications").select("*, dog:dogs(name, owner_id)").eq("id",e).single();if(i)throw i;const{error:r}=await s.from("notifications").insert([{user_id:t.dog.owner_id,type:"vaccine_approval_required",title:"ワクチン証明書承認のお知らせ",message:`${t.dog.name}ちゃんのワクチン証明書が承認されました。ドッグランを利用できるようになりました。`,data:{dog_id:t.dog_id}}]);if(r)throw r;await ae(),A(null),Q("ワクチン証明書を承認しました。"),setTimeout((()=>{Q("")}),3e3)}catch(a){H("承認に失敗しました: "+a.message)}finally{G(!1)}},le=async e=>{try{G(!0),H(""),Q("");const{error:a}=await s.from("vaccine_certifications").update({status:"rejected"}).eq("id",e);if(a)throw a;const{data:t,error:i}=await s.from("vaccine_certifications").select("*, dog:dogs(name, owner_id)").eq("id",e).single();if(i)throw i;const{error:r}=await s.from("notifications").insert([{user_id:t.dog.owner_id,type:"vaccine_approval_required",title:"ワクチン証明書却下のお知らせ",message:`${t.dog.name}ちゃんのワクチン証明書が却下されました。詳細はマイページをご確認ください。`,data:{dog_id:t.dog_id}}]);if(r)throw r;await ae(),A(null),Q("ワクチン証明書を却下しました。"),setTimeout((()=>{Q("")}),3e3)}catch(a){H("却下に失敗しました: "+a.message)}finally{G(!1)}},ne=R.filter((e=>{var s;return(null==(s=e.name)?void 0:s.toLowerCase().includes(U.toLowerCase()))||e.id.toLowerCase().includes(U.toLowerCase())}));r.useEffect((()=>{ce()}),[]);const ce=async()=>{const{data:e,error:a}=await s.from("news_announcements").select("*").order("created_at",{ascending:!1});a||X(e||[])};return T?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold flex items-center",children:[a.jsx(d,{className:"w-8 h-8 text-red-600 mr-3"}),"管理者ダッシュボード"]}),a.jsx("p",{className:"text-gray-600",children:"システム全体の管理と監視"})]}),a.jsxs("div",{className:"text-sm text-gray-500",children:["最終更新: ",(new Date).toLocaleString("ja-JP")]})]}),F&&a.jsxs("div",{className:"bg-red-100 border border-red-300 text-red-800 rounded-lg p-4 flex items-start",children:[a.jsx(x,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),a.jsx("p",{children:F})]}),K&&a.jsxs("div",{className:"bg-green-100 border border-green-300 text-green-800 rounded-lg p-4 flex items-start",children:[a.jsx(m,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0"}),a.jsx("p",{children:K})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(n,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"総ユーザー数"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:P.totalUsers}),a.jsxs("p",{className:"text-xs text-green-600",children:["+",P.newUsersThisMonth," 今月"]})]}),a.jsx(o,{className:"w-8 h-8 text-blue-600"})]})}),a.jsx(n,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"総ドッグラン数"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:P.totalParks}),P.pendingParks>0&&a.jsxs("p",{className:"text-xs text-orange-600",children:["承認待ち: ",P.pendingParks]})]}),a.jsx(h,{className:"w-8 h-8 text-green-600"})]})}),a.jsx(n,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"今月の予約数"}),a.jsx("p",{className:"text-2xl font-bold text-purple-600",children:P.totalReservations}),a.jsxs("p",{className:"text-xs text-purple-600",children:["サブスク会員: ",P.activeSubscriptions]})]}),a.jsx(j,{className:"w-8 h-8 text-purple-600"})]})}),a.jsx(n,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"今月の売上"}),a.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["¥",P.monthlyRevenue.toLocaleString()]}),P.lastMonthRevenue>0&&a.jsxs("p",{className:"text-xs text-gray-500",children:["前月比: ",Math.round(100*(P.monthlyRevenue/P.lastMonthRevenue-1)),"%"]})]}),a.jsx(g,{className:"w-8 h-8 text-orange-600"})]})})]}),(P.pendingParks>0||P.pendingVaccines>0||P.unreadMessages>0)&&a.jsxs(n,{className:"p-6 bg-red-50 border-red-200",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx(x,{className:"w-6 h-6 text-red-600"}),a.jsx("h2",{className:"text-lg font-semibold text-red-900",children:"緊急対応が必要"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[P.pendingParks>0&&a.jsxs("div",{className:"bg-white p-4 rounded-lg border border-red-200",children:[a.jsx("p",{className:"font-medium text-red-900",children:"ドッグラン承認待ち"}),a.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[P.pendingParks,"件"]}),a.jsx(l,{to:"/admin/management",children:a.jsx(t,{size:"sm",className:"mt-2",children:"確認する"})})]}),P.pendingVaccines>0&&a.jsxs("div",{className:"bg-white p-4 rounded-lg border border-red-200",children:[a.jsx("p",{className:"font-medium text-red-900",children:"ワクチン証明書承認待ち"}),a.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[P.pendingVaccines,"件"]}),a.jsx(l,{to:"/admin/management",children:a.jsx(t,{size:"sm",className:"mt-2",children:"確認する"})})]}),P.unreadMessages>0&&a.jsxs("div",{className:"bg-white p-4 rounded-lg border border-red-200",children:[a.jsx("p",{className:"font-medium text-red-900",children:"未読お問い合わせ"}),a.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[P.unreadMessages,"件"]}),a.jsx(t,{size:"sm",className:"mt-2",onClick:()=>k("/admin/contact"),children:"確認する"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(l,{to:"/admin/management",children:a.jsx(n,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:a.jsx(p,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:"ワクチン証明書・ドッグラン管理"}),a.jsx("p",{className:"text-sm text-gray-600",children:"ワクチン証明書の承認・ドッグランの審査管理"})]})]})})}),a.jsx(l,{to:"/admin/shop",children:a.jsx(n,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:a.jsx(N,{className:"w-6 h-6 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:"ショップ管理"}),a.jsx("p",{className:"text-sm text-gray-600",children:"商品管理・注文管理・在庫管理"})]})]})})}),a.jsx(l,{to:"/admin/revenue",children:a.jsx(n,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:a.jsx(u,{className:"w-6 h-6 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:"売上レポート"}),a.jsx("p",{className:"text-sm text-gray-600",children:"ドッグラン別売上・振込管理"})]})]})})})]}),a.jsxs("div",{className:"flex space-x-4 border-b",children:[a.jsxs("button",{className:"px-4 py-2 font-medium relative flex items-center space-x-2 "+("overview"===S?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>C("overview"),children:[a.jsx(f,{className:"w-4 h-4"}),a.jsx("span",{children:"概要"})]}),a.jsxs("button",{className:"px-4 py-2 font-medium relative flex items-center space-x-2 "+("parks"===S?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>C("parks"),children:[a.jsx(h,{className:"w-4 h-4"}),a.jsx("span",{children:"ドッグラン管理"}),P.pendingParks>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:P.pendingParks})]}),a.jsxs("button",{className:"px-4 py-2 font-medium relative flex items-center space-x-2 "+("vaccines"===S?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>C("vaccines"),children:[a.jsx(p,{className:"w-4 h-4"}),a.jsx("span",{children:"ワクチン承認"}),P.pendingVaccines>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:P.pendingVaccines})]}),a.jsxs("button",{className:"px-4 py-2 font-medium relative flex items-center space-x-2 "+("users"===S?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>C("users"),children:[a.jsx(o,{className:"w-4 h-4"}),a.jsx("span",{children:"ユーザー管理"})]})]}),"overview"===S&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs(n,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"システム概要"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-2",children:"プラットフォーム統計"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"アクティブユーザー:"}),a.jsxs("span",{className:"font-medium",children:[P.totalUsers,"人"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"承認済みドッグラン:"}),a.jsxs("span",{className:"font-medium",children:[P.totalParks-P.pendingParks,"施設"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"今月の予約:"}),a.jsxs("span",{className:"font-medium",children:[P.totalReservations,"件"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"今月の売上:"}),a.jsxs("span",{className:"font-medium",children:["¥",P.monthlyRevenue.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"アクティブサブスク:"}),a.jsxs("span",{className:"font-medium",children:[P.activeSubscriptions,"件"]})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-2",children:"承認待ち項目"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"ドッグラン:"}),a.jsxs("span",{className:"font-medium "+(P.pendingParks>0?"text-red-600":"text-green-600"),children:[P.pendingParks,"件"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"ワクチン証明書:"}),a.jsxs("span",{className:"font-medium "+(P.pendingVaccines>0?"text-red-600":"text-green-600"),children:[P.pendingVaccines,"件"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"未読お問い合わせ:"}),a.jsxs("span",{className:"font-medium "+(P.unreadMessages>0?"text-red-600":"text-green-600"),children:[P.unreadMessages,"件"]})]})]})]})]})]}),a.jsxs(n,{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"売上推移"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(l,{to:"/admin/revenue",children:a.jsxs(t,{size:"sm",variant:"secondary",children:[a.jsx(u,{className:"w-4 h-4 mr-1"}),"詳細レポート"]})}),a.jsxs(t,{size:"sm",variant:"secondary",children:[a.jsx(v,{className:"w-4 h-4 mr-1"}),"CSV"]})]})]}),a.jsx("div",{className:"h-64 bg-gray-100 rounded-lg flex items-center justify-center",children:a.jsx("p",{className:"text-gray-500",children:"売上グラフ（実装予定）"})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(l,{to:"/admin/management",children:a.jsx(n,{className:"p-4 hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:a.jsx(p,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:"ワクチン・ドッグラン管理"}),a.jsx("p",{className:"text-sm text-gray-600",children:"承認・審査管理"})]})]})})}),a.jsx(l,{to:"/admin/shop",children:a.jsx(n,{className:"p-4 hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:a.jsx(N,{className:"w-6 h-6 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:"ショップ管理"}),a.jsx("p",{className:"text-sm text-gray-600",children:"注文・商品管理"})]})]})})}),a.jsx(l,{to:"/admin/revenue",children:a.jsx(n,{className:"p-4 hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:a.jsx(u,{className:"w-6 h-6 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:"売上レポート"}),a.jsx("p",{className:"text-sm text-gray-600",children:"ドッグラン別売上・振込管理"})]})]})})})]}),a.jsxs(n,{className:"p-6 mt-6",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"新着情報管理"}),a.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4 mb-6",children:[a.jsx(c,{label:"タイトル",value:Y,onChange:e=>Z(e.target.value),className:"flex-1"}),a.jsx(c,{label:"内容",value:ee,onChange:e=>se(e.target.value),className:"flex-1"}),a.jsx(t,{onClick:async()=>{if(!Y||!ee)return;const{data:e,error:a}=await s.from("news_announcements").insert([{title:Y,content:ee}]);a||(Z(""),se(""),ce())},children:"追加"})]}),a.jsx("div",{className:"space-y-4",children:W.map((e=>a.jsxs("div",{className:"flex items-center justify-between border-b pb-2",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-bold",children:e.title}),a.jsx("div",{className:"text-sm text-gray-700",children:e.content}),a.jsx("div",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleString("ja-JP")})]}),a.jsx(t,{variant:"danger",size:"sm",onClick:()=>(async e=>{const{error:a}=await s.from("news_announcements").delete().eq("id",e);a||ce()})(e.id),children:"削除"})]},e.id)))})]})]}),"parks"===S&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"ドッグラン承認管理"}),a.jsxs("div",{className:"text-sm text-gray-500",children:["承認待ち: ",P.pendingParks,"件"]})]}),0===q.length?a.jsxs(n,{className:"text-center py-12",children:[a.jsx(m,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"承認待ちのドッグランはありません"})]}):a.jsx("div",{className:"space-y-4",children:q.map((e=>{var s;return a.jsx(n,{className:"p-6",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-lg font-semibold mb-2",children:e.name}),a.jsx("p",{className:"text-gray-600 mb-2",children:e.description}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"住所:"})," ",e.address]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"料金:"})," ¥",e.price,"/時間"]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"最大収容:"})," ",e.max_capacity,"人"]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"オーナー:"})," ",(null==(s=e.owner)?void 0:s.name)||"未設定"]})]}),a.jsx("div",{className:"mt-2",children:a.jsxs("span",{className:"text-xs text-gray-500",children:["申請日: ",new Date(e.created_at).toLocaleDateString("ja-JP")]})})]}),a.jsxs("div",{className:"flex space-x-2 ml-4",children:[a.jsxs(t,{size:"sm",variant:"secondary",onClick:()=>O(e),children:[a.jsx(b,{className:"w-4 h-4 mr-1"}),"詳細"]}),a.jsxs(t,{size:"sm",onClick:()=>te(e.id),className:"bg-green-600 hover:bg-green-700",disabled:B,children:[a.jsx(m,{className:"w-4 h-4 mr-1"}),"承認"]}),a.jsxs(t,{size:"sm",onClick:()=>ie(e.id),className:"bg-red-600 hover:bg-red-700",disabled:B,children:[a.jsx(b,{className:"w-4 h-4 mr-1"}),"却下"]})]})]})},e.id)}))})]}),"vaccines"===S&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"ワクチン証明書承認"}),a.jsxs("div",{className:"text-sm text-gray-500",children:["承認待ち: ",P.pendingVaccines,"件"]})]}),0===M.length?a.jsxs(n,{className:"text-center py-12",children:[a.jsx(m,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"承認待ちのワクチン証明書はありません"})]}):a.jsx("div",{className:"space-y-4",children:M.map((e=>a.jsx(n,{className:"p-6",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("h4",{className:"text-lg font-semibold mb-2",children:[e.dog.name,"のワクチン証明書"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"犬種:"})," ",e.dog.breed]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"性別:"})," ",e.dog.gender]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"飼い主:"})," ",e.dog.owner.name]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"申請日:"})," ",new Date(e.created_at).toLocaleDateString("ja-JP")]})]})]}),a.jsxs("div",{className:"flex space-x-2 ml-4",children:[a.jsxs(t,{size:"sm",variant:"secondary",onClick:()=>A(e),children:[a.jsx(b,{className:"w-4 h-4 mr-1"}),"詳細"]}),a.jsxs(t,{size:"sm",onClick:()=>re(e.id),className:"bg-green-600 hover:bg-green-700",disabled:B,children:[a.jsx(m,{className:"w-4 h-4 mr-1"}),"承認"]}),a.jsxs(t,{size:"sm",onClick:()=>le(e.id),className:"bg-red-600 hover:bg-red-700",disabled:B,children:[a.jsx(b,{className:"w-4 h-4 mr-1"}),"却下"]})]})]})},e.id)))})]}),"users"===S&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"ユーザー管理"}),a.jsx("div",{className:"w-64",children:a.jsx(c,{label:"",value:U,onChange:e=>I(e.target.value),placeholder:"ユーザー名またはIDで検索..."})})]}),a.jsx("div",{className:"space-y-2",children:ne.map((e=>a.jsx(n,{className:"p-4",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold",children:e.name||"ユーザー名未設定"}),a.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[a.jsxs("p",{children:["ID: ",e.id]}),a.jsxs("p",{children:["タイプ: ","owner"===e.user_type?"施設オーナー":"admin"===e.user_type?"管理者":"利用者"]}),a.jsxs("p",{children:["登録日: ",new Date(e.created_at).toLocaleDateString("ja-JP")]})]})]}),a.jsx("div",{className:"flex space-x-2",children:a.jsxs(t,{size:"sm",variant:"secondary",children:[a.jsx(b,{className:"w-4 h-4 mr-1"}),"詳細"]})})]})},e.id)))})]}),$&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-bold",children:"ドッグラン詳細"}),a.jsx("button",{onClick:()=>O(null),className:"text-gray-500 hover:text-gray-700",children:a.jsx(b,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-2",children:"基本情報"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"施設名"}),a.jsx("p",{className:"text-gray-900",children:$.name})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"料金"}),a.jsxs("p",{className:"text-gray-900",children:["¥",$.price,"/時間"]})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"住所"}),a.jsx("p",{className:"text-gray-900",children:$.address})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"説明"}),a.jsx("p",{className:"text-gray-900",children:$.description})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-2",children:"設備情報"}),a.jsx("div",{className:"grid grid-cols-3 gap-4",children:Object.entries({parking:"駐車場",shower:"シャワー設備",restroom:"トイレ",agility:"アジリティ設備",rest_area:"休憩スペース",water_station:"給水設備"}).map((([e,s])=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 rounded "+($.facilities[e]?"bg-green-500":"bg-gray-300")}),a.jsx("span",{className:"text-sm",children:s})]},e)))})]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx(t,{variant:"secondary",onClick:()=>O(null),children:"閉じる"}),a.jsx(t,{onClick:()=>ie($.id),className:"bg-red-600 hover:bg-red-700",disabled:B,children:"却下"}),a.jsx(t,{onClick:()=>te($.id),className:"bg-green-600 hover:bg-green-700",disabled:B,children:"承認"})]})]})]})})}),E&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-bold",children:"ワクチン証明書詳細"}),a.jsx("button",{onClick:()=>A(null),className:"text-gray-500 hover:text-gray-700",children:a.jsx(w,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-2",children:"犬の情報"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"名前"}),a.jsx("p",{className:"text-gray-900",children:E.dog.name})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"犬種"}),a.jsx("p",{className:"text-gray-900",children:E.dog.breed})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"性別"}),a.jsx("p",{className:"text-gray-900",children:E.dog.gender})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"生年月日"}),a.jsx("p",{className:"text-gray-900",children:new Date(E.dog.birth_date).toLocaleDateString("ja-JP")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"飼い主"}),a.jsx("p",{className:"text-gray-900",children:E.dog.owner.name})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"申請日"}),a.jsx("p",{className:"text-gray-900",children:new Date(E.created_at).toLocaleDateString("ja-JP")})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-2",children:"ワクチン証明書画像"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.rabies_vaccine_image&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"狂犬病ワクチン"}),a.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[a.jsxs("p",{className:"text-sm text-gray-600",children:["画像ファイル: ",E.rabies_vaccine_image]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"※ 実際の画像確認は別途システムで行ってください"})]})]}),E.combo_vaccine_image&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"混合ワクチン"}),a.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[a.jsxs("p",{className:"text-sm text-gray-600",children:["画像ファイル: ",E.combo_vaccine_image]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"※ 実際の画像確認は別途システムで行ってください"})]})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx(t,{variant:"secondary",onClick:()=>A(null),children:"閉じる"}),a.jsx(t,{onClick:()=>le(E.id),className:"bg-red-600 hover:bg-red-700",disabled:B,children:"却下"}),a.jsx(t,{onClick:()=>re(E.id),className:"bg-green-600 hover:bg-green-700",disabled:B,children:"承認"})]})]})]})})})]})}export{y as AdminDashboard};
