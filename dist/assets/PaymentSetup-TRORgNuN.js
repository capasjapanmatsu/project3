import{u as _,j as e,C as n,B as g,s as A}from"./index-BB1ywuBb.js";import{u as M,r as m}from"./react-vendor-Co5xHYdE.js";import{I as u}from"./Input-Bmh34ZUQ.js";import{i as x,_ as Y,$ as i,A as f,a as I,y as q}from"./ui-vendor-B2-VOB5s.js";import"./supabase-vendor-FDBaXLCh.js";function H(){const{user:N}=_(),o=M(),[b,p]=m.useState(!1),[j,l]=m.useState(""),[v,y]=m.useState(!1),[s,c]=m.useState({cardNumber:"",cardHolder:"",expiryMonth:"",expiryYear:"",cvv:"",isDefault:!0}),w=a=>a.replace(/\D/g,"").replace(/(.{4})/g,"$1 ").trim().slice(0,19),C=a=>{const r=a.replace(/\s/g,"");return r.startsWith("4")?"visa":r.startsWith("5")||r.startsWith("2")?"mastercard":r.startsWith("3")?"amex":r.startsWith("35")?"jcb":"visa"},S=()=>{if(s.cardNumber.replace(/\s/g,"").length!==16)return l("ã‚«ãƒ¼ãƒ‰ç•ªå·ã¯16æ¡ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚"),!1;if(!s.cardHolder.trim())return l("ã‚«ãƒ¼ãƒ‰åç¾©äººã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚"),!1;if(!s.expiryMonth||!s.expiryYear)return l("æœ‰åŠ¹æœŸé™ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚"),!1;if(s.cvv.length<3)return l("CVVã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„ã€‚"),!1;const r=new Date,t=r.getFullYear()%100,h=r.getMonth()+1,d=parseInt(s.expiryYear),D=parseInt(s.expiryMonth);return d<t||d===t&&D<h?(l("æœ‰åŠ¹æœŸé™ãŒéå»ã®æ—¥ä»˜ã§ã™ã€‚"),!1):!0},k=async a=>{if(a.preventDefault(),l(""),!!S()){p(!0);try{const r=s.cardNumber.replace(/\s/g,""),t="**** **** **** "+r.slice(-4),h=C(r),{error:d}=await A.from("payment_cards").insert([{user_id:N?.id,card_number_masked:t,card_holder_name:s.cardHolder,expiry_month:parseInt(s.expiryMonth),expiry_year:parseInt(s.expiryYear),card_brand:h,is_default:s.isDefault}]);if(d)throw d;y(!0),setTimeout(()=>{o("/entrance-qr")},3e3)}catch(r){l(r.message||"æ±ºæ¸ˆæ–¹æ³•ã®è¨­å®šã«å¤±æ•—ã—ã¾ã—ãŸ")}finally{p(!1)}}};return v?e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs(n,{className:"text-center p-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(x,{className:"w-8 h-8 text-green-600"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã‚’ç™»éŒ²ã—ã¾ã—ãŸ"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"å…¥å ´QRãƒšãƒ¼ã‚¸ã«æˆ»ã‚Šã¾ã™..."}),e.jsx(g,{onClick:()=>o("/entrance-qr"),children:"å…¥å ´QRãƒšãƒ¼ã‚¸ã¸"})]})}):e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsx("div",{className:"flex items-center space-x-4 mb-6",children:e.jsxs("button",{onClick:()=>o("/entrance-qr"),className:"flex items-center text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"å…¥å ´QRã«æˆ»ã‚‹"]})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center justify-center",children:[e.jsx(i,{className:"w-8 h-8 text-blue-600 mr-3"}),"ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ç™»éŒ²"]}),e.jsx("p",{className:"text-gray-600",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³å…¥å ´QRã®ç™ºè¡Œã«ã¯ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã®ç™»éŒ²ãŒå¿…è¦ã§ã™"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(n,{className:"p-6",children:e.jsxs("form",{onSubmit:k,children:[j&&e.jsxs("div",{className:"mb-4 p-3 bg-red-100 border border-red-300 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(f,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"text-red-800 font-medium",children:"ã‚¨ãƒ©ãƒ¼"})]}),e.jsx("p",{className:"text-red-700 mt-1",children:j})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(u,{label:"ã‚«ãƒ¼ãƒ‰ç•ªå· *",value:s.cardNumber,onChange:a=>{const r=w(a.target.value);c({...s,cardNumber:r})},placeholder:"1234 5678 9012 3456",maxLength:19,required:!0}),e.jsx(u,{label:"ã‚«ãƒ¼ãƒ‰åç¾©äºº *",value:s.cardHolder,onChange:a=>c({...s,cardHolder:a.target.value.toUpperCase()}),placeholder:"TARO YAMADA",required:!0}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"æœ‰åŠ¹æœŸé™ï¼ˆæœˆï¼‰ *"}),e.jsxs("select",{value:s.expiryMonth,onChange:a=>c({...s,expiryMonth:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"æœˆ"}),Array.from({length:12},(a,r)=>e.jsx("option",{value:String(r+1).padStart(2,"0"),children:String(r+1).padStart(2,"0")},r+1))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"æœ‰åŠ¹æœŸé™ï¼ˆå¹´ï¼‰ *"}),e.jsxs("select",{value:s.expiryYear,onChange:a=>c({...s,expiryYear:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"å¹´"}),Array.from({length:10},(a,r)=>{const t=new Date().getFullYear()+r;return e.jsx("option",{value:String(t).slice(-2),children:t},t)})]})]}),e.jsx(u,{label:"CVV *",value:s.cvv,onChange:a=>c({...s,cvv:a.target.value.replace(/\D/g,"")}),placeholder:"123",maxLength:4,required:!0})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"isDefault",checked:s.isDefault,onChange:a=>c({...s,isDefault:a.target.checked}),className:"rounded text-blue-600"}),e.jsx("label",{htmlFor:"isDefault",className:"text-sm text-gray-700",children:"ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æ”¯æ‰•ã„æ–¹æ³•ã¨ã—ã¦è¨­å®š"})]}),e.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(f,{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"é‡è¦ãªæ³¨æ„äº‹é …"}),e.jsxs("ul",{className:"space-y-1 text-xs",children:[e.jsx("li",{children:"â€¢ ã‚«ãƒ¼ãƒ‰æƒ…å ±ã¯æš—å·åŒ–ã—ã¦å®‰å…¨ã«ä¿å­˜ã•ã‚Œã¾ã™"}),e.jsx("li",{children:"â€¢ å®Ÿéš›ã®ã‚«ãƒ¼ãƒ‰ç•ªå·ã¯ä¿å­˜ã•ã‚Œã¾ã›ã‚“"}),e.jsx("li",{children:"â€¢ å…¥å ´QRç™ºè¡Œæ™‚ã«è‡ªå‹•ã§èª²é‡‘ã•ã‚Œã¾ã™"}),e.jsx("li",{children:"â€¢ ä¸æ­£åˆ©ç”¨é˜²æ­¢ã®ãŸã‚ã€æœ¬äººç¢ºèªãŒå¿…è¦ãªå ´åˆãŒã‚ã‚Šã¾ã™"})]})]})]})}),e.jsxs(g,{type:"submit",isLoading:b,className:"w-full bg-blue-600 hover:bg-blue-700 text-lg py-3",children:[e.jsx(i,{className:"w-5 h-5 mr-2"}),"ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã‚’ç™»éŒ²"]})]})]})})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(n,{className:"p-4 bg-green-50 border-green-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(I,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"font-semibold text-green-900",children:"ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£"})]}),e.jsxs("div",{className:"text-sm text-green-800 space-y-2",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(x,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"SSLæš—å·åŒ–é€šä¿¡"})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(x,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"PCI DSSæº–æ‹ "})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(x,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"ã‚«ãƒ¼ãƒ‰ç•ªå·ã¯ä¿å­˜ã•ã‚Œã¾ã›ã‚“"})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(x,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"ä¸æ­£åˆ©ç”¨ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ "})]})]})]}),e.jsxs(n,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"å¯¾å¿œã‚«ãƒ¼ãƒ‰ãƒ–ãƒ©ãƒ³ãƒ‰"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-gray-50 rounded",children:[e.jsx(i,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium",children:"VISA"})]}),e.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-gray-50 rounded",children:[e.jsx(i,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Mastercard"})]}),e.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-gray-50 rounded",children:[e.jsx(i,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium",children:"JCB"})]}),e.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-gray-50 rounded",children:[e.jsx(i,{className:"w-5 h-5 text-blue-800"}),e.jsx("span",{className:"text-sm font-medium",children:"AMEX"})]})]})]}),e.jsxs(n,{className:"p-4 bg-blue-50 border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(q,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"font-semibold text-blue-900",children:"èª²é‡‘ã«ã¤ã„ã¦"})]}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("p",{children:"â€¢ å…¥å ´QRç™ºè¡Œæ™‚ã«è‡ªå‹•èª²é‡‘"}),e.jsx("p",{children:"â€¢ å˜ç™ºåˆ©ç”¨: Â¥800/æ—¥"}),e.jsx("p",{children:"â€¢ ã‚µãƒ–ã‚¹ã‚¯ä¼šå“¡ã¯è¿½åŠ æ–™é‡‘ãªã—"}),e.jsx("p",{children:"â€¢ åˆ©ç”¨æ˜ç´°ã¯ãƒ¡ãƒ¼ãƒ«ã§é€ä¿¡"}),e.jsx("p",{children:"â€¢ è¿”é‡‘ã¯åˆ©ç”¨å‰ã®ã¿å¯èƒ½"})]})]}),e.jsxs(n,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"ã‚µãƒãƒ¼ãƒˆ"}),e.jsxs("div",{className:"text-sm text-gray-700 space-y-2",children:[e.jsx("p",{children:"ã‚«ãƒ¼ãƒ‰ç™»éŒ²ã§ãŠå›°ã‚Šã®å ´åˆã¯ã€ã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µãƒãƒ¼ãƒˆã¾ã§ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚"}),e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded",children:[e.jsx("p",{className:"font-medium",children:"ã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µãƒãƒ¼ãƒˆ"}),e.jsx("p",{children:"ğŸ“ 0120-XXX-XXX"}),e.jsx("p",{children:"ğŸ“§ info@dogparkjp.com"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"å¹³æ—¥ 9:00-18:00"})]})]})]})]})]})]})}export{H as PaymentSetup};
