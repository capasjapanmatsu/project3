import{j as e,X as q,A as R,Y as le,ad as $,ae as ne,C as ie,af as H,a as O,W as ce,R as J,ag as oe,H as de,g as z,p as me,ah as I,F as xe,c as ue,y as he,l as W,a2 as U,a0 as V}from"./ui-vendor-FlUr4cJt.js";import{r as o,L as B,u as ge}from"./react-vendor-_GyjDmDn.js";import{C as E,B as w,s as C,h as pe,u as ye}from"./index-BSYT0262.js";import{I as S}from"./Input-wBkmcJUR.js";import"./supabase-vendor-Df9iqQzW.js";const be=({type:s,className:n="w-6 h-6"})=>{switch(s){case"network":return e.jsx(ce,{className:`${n} text-orange-600`});case"authentication":return e.jsx(O,{className:`${n} text-red-600`});case"authorization":return e.jsx(H,{className:`${n} text-red-600`});case"validation":return e.jsx(R,{className:`${n} text-yellow-600`});case"timeout":return e.jsx(ie,{className:`${n} text-blue-600`});case"server":return e.jsx(ne,{className:`${n} text-red-600`});case"not_found":return e.jsx($,{className:`${n} text-gray-600`});case"storage":return e.jsx($,{className:`${n} text-orange-600`});case"payment":return e.jsx(le,{className:`${n} text-purple-600`});default:return e.jsx(R,{className:`${n} text-gray-600`})}},Q=({error:s,onClear:n,onRetry:v,className:m="",showAsModal:u=!1})=>{if(o.useEffect(()=>{if(s&&s.severity==="low"&&s.type==="validation"){const l=setTimeout(()=>{n()},5e3);return()=>clearTimeout(l)}},[s,n]),!s)return null;const x=(l=>{switch(l){case"low":return{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-800",button:"bg-yellow-600 hover:bg-yellow-700"};case"medium":return{bg:"bg-orange-50",border:"border-orange-200",text:"text-orange-800",button:"bg-orange-600 hover:bg-orange-700"};case"high":return{bg:"bg-red-50",border:"border-red-200",text:"text-red-800",button:"bg-red-600 hover:bg-red-700"};case"critical":return{bg:"bg-red-100",border:"border-red-300",text:"text-red-900",button:"bg-red-700 hover:bg-red-800"};default:return{bg:"bg-gray-50",border:"border-gray-200",text:"text-gray-800",button:"bg-gray-600 hover:bg-gray-700"}}})(s.severity),b=()=>{const l=[];return s.retryable&&v&&l.push(e.jsxs(w,{size:"sm",onClick:()=>void v(),className:x.button,children:[e.jsx(J,{className:"w-4 h-4 mr-1"}),"å†è©¦è¡Œ"]},"retry")),s.type==="authentication"&&l.push(e.jsxs(w,{size:"sm",onClick:()=>window.location.href="/login",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(oe,{className:"w-4 h-4 mr-1"}),"ãƒ­ã‚°ã‚¤ãƒ³"]},"login")),(s.severity==="high"||s.severity==="critical")&&l.push(e.jsxs(w,{size:"sm",variant:"secondary",onClick:()=>window.location.href="/",children:[e.jsx(de,{className:"w-4 h-4 mr-1"}),"ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹"]},"home")),l.push(e.jsxs(w,{size:"sm",variant:"secondary",onClick:n,children:[e.jsx(q,{className:"w-4 h-4 mr-1"}),"é–‰ã˜ã‚‹"]},"close")),l},j=e.jsx("div",{className:`${x.bg} ${x.border} border rounded-lg p-4 ${m}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(be,{type:s.type,className:"flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`text-sm font-medium ${x.text} mb-1`,children:"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ"}),e.jsx("p",{className:`text-sm ${x.text} mb-3`,children:s.userMessage}),!1]}),!u&&e.jsx("button",{onClick:n,className:`ml-2 ${x.text} hover:opacity-75`,"aria-label":"ã‚¨ãƒ©ãƒ¼ã‚’é–‰ã˜ã‚‹",children:e.jsx(q,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:b()})]})]})});return u?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx(E,{className:"max-w-md w-full",children:j})}):j};function je({formData:s,onFormDataChange:n,onSubmit:v,error:m,isLoading:u}){const[h,x]=o.useState(""),[b,j]=o.useState(!1),l=t=>{n(t)},y=async t=>{if(!t.trim()){x("");return}j(!0);try{const{data:i,error:r}=await C.from("dog_parks").select("id, name").eq("name",t.trim()).limit(1);if(r){console.error("åå‰é‡è¤‡ãƒã‚§ãƒƒã‚¯ã‚¨ãƒ©ãƒ¼:",r),x("");return}i&&i.length>0?x("ã“ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³åã¯æ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚åˆ¥ã®åå‰ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚"):x("")}catch(i){console.error("åå‰é‡è¤‡ãƒã‚§ãƒƒã‚¯ã‚¨ãƒ©ãƒ¼:",i),x("")}finally{j(!1)}};return o.useEffect(()=>{const t=setTimeout(()=>{s.name.trim()?y(s.name):x("")},500);return()=>clearTimeout(t)},[s.name]),e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(z,{className:"w-6 h-6 text-green-600"}),e.jsx("span",{className:"text-green-800 font-medium",children:"ç¬¬ä¸€æ¬¡å¯©æŸ»/æœ¬äººç¢ºèªç”³è«‹ä¸­"})]}),e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ç™»éŒ² - è©³ç´°æƒ…å ±å…¥åŠ›"}),e.jsx("p",{className:"text-gray-600",children:"ç¬¬ä¸€æ¬¡å¯©æŸ»/æœ¬äººç¢ºèªç”³è«‹ä¸­ã§ã™ã€‚è©³ç´°ãªæ–½è¨­æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚"})]}),e.jsx(E,{className:"mb-6 bg-green-50 border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(z,{className:"w-6 h-6 text-green-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-green-900",children:"ç¬¬ä¸€æ¬¡å¯©æŸ»/æœ¬äººç¢ºèªç”³è«‹ä¸­"}),e.jsx("p",{className:"text-sm text-green-800",children:"åŸºæœ¬æ¡ä»¶ã¨æœ¬äººç¢ºèªã‚’ç”³è«‹ä¸­ã§ã™"})]})]}),e.jsx("div",{className:"text-right text-sm text-green-700",children:e.jsx("p",{children:"æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—: ç¬¬äºŒå¯©æŸ»ï¼ˆæ›¸é¡å¯©æŸ»ï¼‰"})})]})}),m&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(R,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-800",children:m})]})}),e.jsx(E,{className:"p-6",children:e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(S,{label:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³å *",value:s.name,onChange:t=>l({name:t.target.value}),placeholder:"ä¾‹: æ¸‹è°·ä¸­å¤®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³",required:!0}),b&&e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"åå‰ã®é‡è¤‡ã‚’ç¢ºèªä¸­..."}),h&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-start space-x-1",children:[e.jsx(R,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:h})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"èª¬æ˜"}),e.jsx("textarea",{value:s.description,onChange:t=>l({description:t.target.value}),placeholder:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®ç‰¹å¾´ã‚„é­…åŠ›ã‚’ã”ç´¹ä»‹ãã ã•ã„",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),e.jsx("div",{className:"mb-4",children:e.jsx(S,{label:"ä½æ‰€ *",value:s.address,onChange:t=>l({address:t.target.value}),placeholder:"ä¾‹: æ±äº¬éƒ½æ¸‹è°·åŒºé“ç„å‚1-1-1",required:!0})}),e.jsxs("div",{className:"mb-4",children:[e.jsx(S,{label:"æœ€å¤§åå®¹é ­æ•° *",type:"number",min:"1",value:s.maxCapacity,onChange:t=>l({maxCapacity:t.target.value}),placeholder:"ä¾‹: 15",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"åŒæ™‚ã«åˆ©ç”¨ã§ãã‚‹çŠ¬ã®æœ€å¤§é ­æ•°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"å¯¾å¿œçŠ¬ç¨® *"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:s.largeDogArea,onChange:t=>l({largeDogArea:t.target.checked}),className:"rounded text-blue-600"}),e.jsx("span",{children:"å¤§å‹çŠ¬ã‚¨ãƒªã‚¢"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:s.smallDogArea,onChange:t=>l({smallDogArea:t.target.checked}),className:"rounded text-blue-600"}),e.jsx("span",{children:"å°å‹çŠ¬ã‚¨ãƒªã‚¢"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("input",{type:"checkbox",checked:s.privateBooths,onChange:t=>l({privateBooths:t.target.checked}),className:"rounded text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"è²¸ã—åˆ‡ã‚Šãƒ–ãƒ¼ã‚¹"})]}),s.privateBooths&&e.jsx("div",{className:"ml-6",children:e.jsx(S,{label:"è²¸ã—åˆ‡ã‚Šãƒ–ãƒ¼ã‚¹æ•°",type:"number",min:"1",value:s.privateBoothCount,onChange:t=>l({privateBoothCount:t.target.value}),placeholder:"ä¾‹: 2"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"è¨­å‚™ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆç¬¬ä¸€å¯©æŸ»ã§é¸æŠã—ãŸå†…å®¹ã‚’ç¢ºèªãƒ»ä¿®æ­£ã§ãã¾ã™ï¼‰"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries({parking:"é§è»Šå ´",shower:"ã‚·ãƒ£ãƒ¯ãƒ¼è¨­å‚™",restroom:"ãƒˆã‚¤ãƒ¬",agility:"ã‚¢ã‚¸ãƒªãƒ†ã‚£è¨­å‚™",rest_area:"ä¼‘æ†©ã‚¹ãƒšãƒ¼ã‚¹",water_station:"çµ¦æ°´è¨­å‚™"}).map(([t,i])=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:s.facilities[t],onChange:r=>l({facilities:{...s.facilities,[t]:r.target.checked}}),className:"rounded text-blue-600"}),e.jsx("span",{children:i})]},t))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"è¨­å‚™ã®è©³ç´°æƒ…å ±"}),e.jsx("textarea",{value:s.facilityDetails,onChange:t=>l({facilityDetails:t.target.value}),placeholder:"è¨­å‚™ã‚„ã‚µãƒ¼ãƒ“ã‚¹ã«ã¤ã„ã¦ã®è©³ç´°ãªæƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),e.jsx(E,{className:"bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(me,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"ç¬¬äºŒå¯©æŸ»ã«ã¤ã„ã¦"}),e.jsxs("ul",{className:"space-y-1 text-xs",children:[e.jsx("li",{children:"â€¢ è©³ç´°ãªæ–½è¨­æƒ…å ±ã¨å¿…è¦æ›¸é¡ã®å¯©æŸ»ã‚’è¡Œã„ã¾ã™"}),e.jsx("li",{children:"â€¢ å¯©æŸ»æœŸé–“ã¯é€šå¸¸3-5å–¶æ¥­æ—¥ã§ã™"}),e.jsx("li",{children:"â€¢ é€šéå¾Œã€QRã‚³ãƒ¼ãƒ‰å®Ÿè¨¼æ¤œæŸ»ã®æ—¥ç¨‹èª¿æ•´ã‚’è¡Œã„ã¾ã™"}),e.jsx("li",{children:"â€¢ å®Ÿè¨¼æ¤œæŸ»å®Œäº†å¾Œã€ä¸€èˆ¬å…¬é–‹ã¨ãªã‚Šã¾ã™"})]})]})]})}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs(B,{to:"/owner-payment-system",className:"text-blue-600 hover:text-blue-800 flex items-center",children:[e.jsx(I,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"text-sm",children:"åç›Šã‚·ã‚¹ãƒ†ãƒ ã«ã¤ã„ã¦"})]}),e.jsx(w,{type:"submit",isLoading:u,disabled:u||!!h||b,className:"bg-blue-600 hover:bg-blue-700",children:"ç¬¬äºŒå¯©æŸ»ã«ç”³ã—è¾¼ã‚€"})]}),h&&e.jsx("div",{className:"mt-2 p-3 bg-red-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-red-800 flex items-start space-x-2",children:[e.jsx(R,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³åã«å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚åå‰ã‚’å¤‰æ›´ã—ã¦ã‹ã‚‰å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚"})]})})]})})]})}function fe({formData:s,onFormDataChange:n,onSubmit:v,error:m,profileData:u,profileLoading:h,onProfileUpdate:x}){const[b,j]=o.useState(!1),[l,y]=o.useState(u),[t,i]=o.useState(!1),r=a=>{n(a)},g=(a,k)=>{a.target.files&&a.target.files[0]&&r(k==="front"?{identityDocumentFront:a.target.files[0]}:{identityDocumentBack:a.target.files[0]})},N=()=>s.identityDocumentType==="license",f=()=>!(!s.identityDocumentFront||N()&&!s.identityDocumentBack),T=()=>{x(l),j(!1)};return e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold text-center mb-8",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ç™»éŒ² - ç¬¬ä¸€å¯©æŸ»ãƒ»æœ¬äººç¢ºèª"}),e.jsx(E,{className:"mb-6 bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(xe,{className:"w-6 h-6 text-blue-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"æ–°ã—ã„å¯©æŸ»ãƒ—ãƒ­ã‚»ã‚¹ã«ã¤ã„ã¦"}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"ç¬¬ä¸€å¯©æŸ»ãƒ»æœ¬äººç¢ºèª:"})," åŸºæœ¬çš„ãªæ¡ä»¶ã®ç¢ºèªã¨æœ¬äººç¢ºèªæ›¸é¡ã®å¯©æŸ»"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ç¬¬äºŒå¯©æŸ»:"})," è©³ç´°ãªæ–½è¨­æƒ…å ±"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯å®Ÿè¨¼æ¤œæŸ»:"})," å®Ÿéš›ã®æ–½è¨­ã§ã®å‹•ä½œç¢ºèª"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"æ²è¼‰ãƒ»é‹å–¶é–‹å§‹:"})," ä¸€èˆ¬å…¬é–‹ã¨äºˆç´„å—ä»˜é–‹å§‹"]})]}),e.jsx("div",{className:"mt-3 flex items-center",children:e.jsxs(B,{to:"/owner-payment-system",className:"text-blue-600 hover:text-blue-800 flex items-center",children:[e.jsx(I,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"text-sm font-medium",children:"æ–™é‡‘ä½“ç³»ã¨åç›Šã‚·ã‚¹ãƒ†ãƒ ã«ã¤ã„ã¦è©³ã—ãè¦‹ã‚‹"})]})})]})]})}),e.jsx(E,{className:"mb-6 bg-yellow-50 border-yellow-200",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ue,{className:"w-6 h-6 text-yellow-600 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-yellow-900 mb-2",children:"ç™»éŒ²æƒ…å ±ã®ç¢ºèª"}),e.jsxs("div",{className:"text-sm text-yellow-800 mb-4",children:[e.jsx("p",{children:"æœ¬äººç¢ºèªæ›¸é¡ã«è¨˜è¼‰ã•ã‚ŒãŸæƒ…å ±ã¨ä¸€è‡´ã™ã‚‹ã‹ã”ç¢ºèªãã ã•ã„ã€‚"}),e.jsx("p",{children:"é–“é•ã„ãŒã‚ã‚‹å ´åˆã¯ä¿®æ­£ã—ã¦ã‹ã‚‰æœ¬äººç¢ºèªæ›¸é¡ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚"})]}),h?e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-yellow-600"}),e.jsx("span",{className:"ml-2 text-yellow-800",children:"ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã‚’èª­ã¿è¾¼ã¿ä¸­..."})]}):e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-yellow-200",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"æ°å"}),e.jsx("p",{className:"font-medium text-gray-900",children:u.name||"æœªè¨­å®š"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"éƒµä¾¿ç•ªå·"}),e.jsx("p",{className:"font-medium text-gray-900",children:u.postal_code||"æœªè¨­å®š"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"ä½æ‰€"}),e.jsx("p",{className:"font-medium text-gray-900",children:u.address||"æœªè¨­å®š"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"é›»è©±ç•ªå·"}),e.jsx("p",{className:"font-medium text-gray-900",children:u.phone_number||"æœªè¨­å®š"})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs(w,{variant:"secondary",onClick:()=>{y(u),j(!0)},className:"flex items-center",children:[e.jsx(he,{className:"w-4 h-4 mr-1"}),"æƒ…å ±ã‚’ä¿®æ­£"]})})]})]})]})}),e.jsx(E,{className:"mb-6 bg-green-50 border-green-200",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(O,{className:"w-6 h-6 text-green-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:"æœ¬äººç¢ºèªæ›¸é¡ã«ã¤ã„ã¦"}),e.jsxs("div",{className:"text-sm text-green-800 space-y-1",children:[e.jsx("p",{children:"å®‰å…¨ãªãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ é‹å–¶ã®ãŸã‚ã€ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚ªãƒ¼ãƒŠãƒ¼ã«ã¯æœ¬äººç¢ºèªãŒå¿…è¦ã§ã™ã€‚"}),e.jsxs("p",{children:[e.jsx("strong",{children:"å€‹äººã®å ´åˆï¼š"}),"é‹è»¢å…è¨±è¨¼ï¼ˆè¡¨é¢ãƒ»è£é¢ï¼‰ã€ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰ã€ãƒ‘ã‚¹ãƒãƒ¼ãƒˆã®ã„ãšã‚Œã‹"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"æ³•äººã®å ´åˆï¼š"}),"ç™»è¨˜ç°¿è¬„æœ¬ï¼ˆéå»6ã‹æœˆä»¥å†…ã«å–å¾—ã—ãŸã‚‚ã®ï¼‰"]}),e.jsx("p",{children:"ä½æ‰€ã¨æ°åãŒç™»éŒ²æƒ…å ±ã¨ä¸€è‡´ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚"})]})]})]})}),e.jsx(E,{className:"mb-6 bg-orange-50 border-orange-200",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(W,{className:"w-6 h-6 text-orange-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-orange-900 mb-2",children:"é‡è¦ãªæ³¨æ„äº‹é …"}),e.jsxs("div",{className:"text-sm text-orange-800 space-y-1",children:[e.jsx("p",{children:e.jsx("strong",{children:"æœ¬äººç¢ºèªæ›¸é¡ã®ä½æ‰€ãƒ»æ°åã¨ä¸Šè¨˜ã®ç™»éŒ²æƒ…å ±ãŒä¸€è‡´ã—ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚"})}),e.jsx("p",{children:"ä¸€è‡´ã—ãªã„å ´åˆã¯å¯©æŸ»ãŒé€šã‚‰ãªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚"}),e.jsx("p",{children:"å¼•ã£è¶Šã—ãªã©ã§ä½æ‰€ãŒå¤‰ã‚ã£ãŸå ´åˆã¯ã€å¿…ãšä¸Šè¨˜ã®ã€Œæƒ…å ±ã‚’ä¿®æ­£ã€ã‹ã‚‰æœ€æ–°ã®æƒ…å ±ã«æ›´æ–°ã—ã¦ãã ã•ã„ã€‚"})]})]})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ç™»éŒ²æƒ…å ±ã®ä¿®æ­£"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(S,{label:"æ°å",value:l.name,onChange:a=>y({...l,name:a.target.value}),placeholder:"å±±ç”°å¤ªéƒ"}),e.jsx(S,{label:"éƒµä¾¿ç•ªå·",value:l.postal_code,onChange:a=>y({...l,postal_code:a.target.value}),placeholder:"123-4567"}),e.jsx(S,{label:"ä½æ‰€",value:l.address,onChange:a=>y({...l,address:a.target.value}),placeholder:"æ±äº¬éƒ½æ–°å®¿åŒºè¥¿æ–°å®¿1-1-1"}),e.jsx(S,{label:"é›»è©±ç•ªå·",value:l.phone_number,onChange:a=>y({...l,phone_number:a.target.value}),placeholder:"090-1234-5678"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx(w,{variant:"secondary",onClick:()=>j(!1),children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"}),e.jsx(w,{onClick:T,disabled:h,children:"ä¿å­˜"})]})]})}),m&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(R,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-800",children:m})]})}),e.jsx(E,{className:"p-6",children:e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-lg font-bold text-gray-800 mb-3",children:"ç¾åœ¨ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’é‹å–¶ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ *"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"isCurrentlyOperating",value:"yes",checked:s.isCurrentlyOperating==="yes",onChange:a=>r({isCurrentlyOperating:a.target.value}),className:"text-blue-600"}),e.jsx("span",{children:"ã¯ã„ï¼ˆã™ã§ã«é‹å–¶ä¸­ï¼‰"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"isCurrentlyOperating",value:"no",checked:s.isCurrentlyOperating==="no",onChange:a=>r({isCurrentlyOperating:a.target.value}),className:"text-blue-600"}),e.jsx("span",{children:"ã„ã„ãˆï¼ˆæ–°è¦é–‹è¨­äºˆå®šï¼‰"})]})]}),s.isCurrentlyOperating==="no"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mt-4 pl-4 border-l-4 border-blue-200",children:[e.jsx("label",{className:"block text-lg font-bold text-gray-800 mb-3",children:"äºˆå®šåœ°ã¯ã‚ãªãŸã®æ‰€æœ‰åœ°ã§ã™ã‹ï¼Ÿ *"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"isOwnedLand",value:"yes",checked:s.isOwnedLand==="yes",onChange:a=>r({isOwnedLand:a.target.value}),className:"text-blue-600"}),e.jsx("span",{children:"ã¯ã„ï¼ˆæ‰€æœ‰åœ°ï¼‰"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"isOwnedLand",value:"no",checked:s.isOwnedLand==="no",onChange:a=>r({isOwnedLand:a.target.value}),className:"text-blue-600"}),e.jsx("span",{children:"ã„ã„ãˆï¼ˆå€Ÿç”¨åœ°ï¼‰"})]})]}),s.isOwnedLand==="no"&&e.jsxs("div",{className:"mt-4 pl-4 border-l-4 border-yellow-200",children:[e.jsx("label",{className:"block text-lg font-bold text-gray-800 mb-3",children:"åœŸåœ°æ‰€æœ‰è€…ã®è¨±å¯ã¯å¾—ã¦ã„ã¾ã™ã‹ï¼Ÿ *"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"hasOwnerPermission",value:"yes",checked:s.hasOwnerPermission==="yes",onChange:a=>r({hasOwnerPermission:a.target.value}),className:"text-blue-600"}),e.jsx("span",{children:"ã¯ã„"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"hasOwnerPermission",value:"no",checked:s.hasOwnerPermission==="no",onChange:a=>r({hasOwnerPermission:a.target.value}),className:"text-blue-600"}),e.jsx("span",{children:"ã„ã„ãˆ"})]})]})]}),e.jsxs("div",{className:"mt-4 pl-4 border-l-4 border-green-200",children:[e.jsx("label",{className:"block text-lg font-bold text-gray-800 mb-3",children:"è¿‘éš£ä½æ°‘ã®ç†è§£ã¯å¾—ã¦ã„ã¾ã™ã‹ï¼Ÿ *"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"hasNeighborConsent",value:"yes",checked:s.hasNeighborConsent==="yes",onChange:a=>r({hasNeighborConsent:a.target.value}),className:"text-blue-600"}),e.jsx("span",{children:"ã¯ã„"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"hasNeighborConsent",value:"no",checked:s.hasNeighborConsent==="no",onChange:a=>r({hasNeighborConsent:a.target.value}),className:"text-blue-600"}),e.jsx("span",{children:"ã„ã„ãˆ"})]})]})]})]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(S,{label:e.jsx("span",{className:"text-lg font-bold text-gray-800",children:"åºƒã•ï¼ˆã¡ï¼‰ *"}),type:"number",min:"1",value:s.landArea,onChange:a=>r({landArea:a.target.value}),placeholder:"ä¾‹: 500",required:!0}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®é‹å–¶ã«ã¯æœ€ä½100ã¡ä»¥ä¸Šã®åºƒã•ãŒå¿…è¦ã§ã™"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-lg font-bold text-gray-800 mb-3",children:"æ–½è¨­ã¾ã§ã¯é€±ã«1åº¦ç¨‹åº¦ã€çŠ¶æ³ã®ç¢ºèªã‚„ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã«è¡Œãã“ã¨ãŒã§ãã¾ã™ã‹ï¼Ÿ *"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"canVisitWeekly",value:"yes",checked:s.canVisitWeekly==="yes",onChange:a=>r({canVisitWeekly:a.target.value}),className:"text-blue-600"}),e.jsx("span",{children:"ã¯ã„"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"canVisitWeekly",value:"no",checked:s.canVisitWeekly==="no",onChange:a=>r({canVisitWeekly:a.target.value}),className:"text-blue-600"}),e.jsx("span",{children:"ã„ã„ãˆ"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-lg font-bold text-gray-800 mb-3",children:"ç·Šæ€¥æ™‚ï¼ˆæ€ªæˆ‘ã‚„äº‹æ•…ãªã©ï¼‰ã«1æ™‚é–“ä»¥å†…ã«æ–½è¨­ã«åˆ°ç€ã§ãã¾ã™ã‹ï¼Ÿ *"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"canReachQuickly",value:"yes",checked:s.canReachQuickly==="yes",onChange:a=>r({canReachQuickly:a.target.value}),className:"text-blue-600"}),e.jsx("span",{children:"ã¯ã„"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"canReachQuickly",value:"no",checked:s.canReachQuickly==="no",onChange:a=>r({canReachQuickly:a.target.value}),className:"text-blue-600"}),e.jsx("span",{children:"ã„ã„ãˆ"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-lg font-bold text-gray-800 mb-3",children:"åç¤¾ä¼šçš„å‹¢åŠ›ã¨ã®é–¢ä¿‚ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ *"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"isAntiSocialForces",value:"no",checked:s.isAntiSocialForces==="no",onChange:a=>r({isAntiSocialForces:a.target.value}),className:"text-blue-600"}),e.jsx("span",{children:"ã„ã„ãˆï¼ˆé–¢ä¿‚ãªã—ï¼‰"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"isAntiSocialForces",value:"yes",checked:s.isAntiSocialForces==="yes",onChange:a=>r({isAntiSocialForces:a.target.value}),className:"text-blue-600"}),e.jsx("span",{children:"ã¯ã„ï¼ˆé–¢ä¿‚ã‚ã‚Šï¼‰"})]})]}),s.isAntiSocialForces==="yes"&&e.jsx("div",{className:"mt-2 p-3 bg-red-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(H,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-800",children:"åç¤¾ä¼šçš„å‹¢åŠ›ã¨ã®é–¢ä¿‚ãŒã‚ã‚‹å ´åˆã€ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®ç™»éŒ²ã¯ã§ãã¾ã›ã‚“ã€‚å½“ç¤¾ã¯åç¤¾ä¼šçš„å‹¢åŠ›ã¨ã®é–¢ä¿‚ã‚’ä¸€åˆ‡èªã‚ã¦ãŠã‚Šã¾ã›ã‚“ã€‚"})]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-lg font-bold text-gray-800 mb-3",children:"æœ¬äººç¢ºèªæ›¸é¡ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ *"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ç”³è«‹è€…ã®ç¨®é¡ *"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"applicantType",value:"individual",checked:s.applicantType==="individual",onChange:a=>r({applicantType:a.target.value,identityDocumentType:"",identityDocumentFront:null,identityDocumentBack:null}),className:"mr-2",required:!0}),e.jsx("span",{children:"å€‹äºº"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"applicantType",value:"corporate",checked:s.applicantType==="corporate",onChange:a=>r({applicantType:a.target.value,identityDocumentType:"",identityDocumentFront:null,identityDocumentBack:null}),className:"mr-2",required:!0}),e.jsx("span",{children:"æ³•äºº"})]})]})]}),s.applicantType&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.applicantType==="individual"?"æå‡ºã™ã‚‹æ›¸é¡ã®ç¨®é¡":"æå‡ºæ›¸é¡"," *"]}),e.jsx("div",{className:"space-y-2",children:s.applicantType==="individual"?e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"identityDocumentType",value:"license",checked:s.identityDocumentType==="license",onChange:a=>r({identityDocumentType:a.target.value,identityDocumentFront:null,identityDocumentBack:null}),className:"mr-2",required:!0}),e.jsx("span",{children:"é‹è»¢å…è¨±è¨¼ï¼ˆè¡¨é¢ãƒ»è£é¢ã®2æšï¼‰"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"identityDocumentType",value:"mynumber",checked:s.identityDocumentType==="mynumber",onChange:a=>r({identityDocumentType:a.target.value,identityDocumentFront:null,identityDocumentBack:null}),className:"mr-2",required:!0}),e.jsx("span",{children:"ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"identityDocumentType",value:"passport",checked:s.identityDocumentType==="passport",onChange:a=>r({identityDocumentType:a.target.value,identityDocumentFront:null,identityDocumentBack:null}),className:"mr-2",required:!0}),e.jsx("span",{children:"ãƒ‘ã‚¹ãƒãƒ¼ãƒˆ"})]})]}):e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"identityDocumentType",value:"registration",checked:s.identityDocumentType==="registration",onChange:a=>r({identityDocumentType:a.target.value,identityDocumentFront:null,identityDocumentBack:null}),className:"mr-2",required:!0}),e.jsx("span",{children:"ç™»è¨˜ç°¿è¬„æœ¬ï¼ˆéå»6ã‹æœˆä»¥å†…ã®ã‚‚ã®ï¼‰"})]})})]}),s.identityDocumentType&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(U,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/jpg",onChange:a=>g(a,"front"),className:"hidden",id:"identity-upload-front",required:!0}),e.jsx("label",{htmlFor:"identity-upload-front",className:"cursor-pointer text-blue-600 hover:text-blue-800 font-medium",children:"ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2 font-medium",children:[s.identityDocumentType==="license"&&"é‹è»¢å…è¨±è¨¼ã®è¡¨é¢",s.identityDocumentType==="mynumber"&&"ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰",s.identityDocumentType==="passport"&&"ãƒ‘ã‚¹ãƒãƒ¼ãƒˆ",s.identityDocumentType==="registration"&&"ç™»è¨˜ç°¿è¬„æœ¬"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"JPGãƒ»PNGå½¢å¼ã®ã¿ã€æœ€å¤§ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º: 10MB"}),s.identityDocumentFront&&e.jsxs("p",{className:"text-sm text-green-600 mt-2",children:["é¸æŠã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«: ",s.identityDocumentFront.name]})]}),N()&&e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(U,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/jpg",onChange:a=>g(a,"back"),className:"hidden",id:"identity-upload-back",required:!0}),e.jsx("label",{htmlFor:"identity-upload-back",className:"cursor-pointer text-blue-600 hover:text-blue-800 font-medium",children:"ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2 font-medium",children:"é‹è»¢å…è¨±è¨¼ã®è£é¢"}),e.jsx("p",{className:"text-sm text-gray-500",children:"JPGãƒ»PNGå½¢å¼ã®ã¿ã€æœ€å¤§ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º: 10MB"}),s.identityDocumentBack&&e.jsxs("p",{className:"text-sm text-green-600 mt-2",children:["é¸æŠã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«: ",s.identityDocumentBack.name]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(W,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-2",children:"ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹æ›¸é¡ã«ã¤ã„ã¦"}),e.jsxs("ul",{className:"space-y-1 text-sm",children:[e.jsx("li",{children:"â€¢ æ–‡å­—ãŒã¯ã£ãã‚Šã¨èª­ã‚ã‚‹é®®æ˜ãªç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„"}),e.jsx("li",{children:"â€¢ æ›¸é¡å…¨ä½“ãŒç”»åƒã«åã¾ã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„"}),e.jsx("li",{children:"â€¢ ç”»åƒã¯æ­£é¢ã‹ã‚‰æ’®å½±ã—ã€å‚¾ããŒãªã„ã‚ˆã†ã«ã—ã¦ãã ã•ã„"}),s.identityDocumentType==="registration"&&e.jsx("li",{children:"â€¢ ç™»è¨˜ç°¿è¬„æœ¬ã¯å–å¾—ã‹ã‚‰6ã‹æœˆä»¥å†…ã®ã‚‚ã®ãŒå¿…è¦ã§ã™"}),e.jsx("li",{children:"â€¢ æœ¬äººç¢ºèªæ›¸é¡ã®ä½æ‰€ãƒ»æ°åãŒä¸Šè¨˜ç™»éŒ²æƒ…å ±ã¨ä¸€è‡´ã—ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™"})]})]})]})})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-lg font-bold text-gray-800 mb-3",children:"äºˆå®šè¨­å‚™ *"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries({parking:"é§è»Šå ´",shower:"ã‚·ãƒ£ãƒ¯ãƒ¼è¨­å‚™",restroom:"ãƒˆã‚¤ãƒ¬",agility:"ã‚¢ã‚¸ãƒªãƒ†ã‚£è¨­å‚™",rest_area:"ä¼‘æ†©ã‚¹ãƒšãƒ¼ã‚¹",water_station:"çµ¦æ°´è¨­å‚™"}).map(([a,k])=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:s.facilities[a],onChange:_=>r({facilities:{...s.facilities,[a]:_.target.checked}}),className:"rounded text-blue-600"}),e.jsx("span",{className:"text-sm",children:k})]},a))})]}),e.jsx(E,{className:"bg-yellow-50 border-yellow-200",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(R,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"ç¬¬ä¸€å¯©æŸ»ãƒ»æœ¬äººç¢ºèªã«ã¤ã„ã¦"}),e.jsxs("ul",{className:"space-y-1 text-xs",children:[e.jsx("li",{children:"â€¢ åŸºæœ¬çš„ãªé–‹è¨­æ¡ä»¶ã‚’æº€ãŸã—ã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã—ã¾ã™"}),e.jsx("li",{children:"â€¢ æœ¬äººç¢ºèªæ›¸é¡ã®ä½æ‰€ãƒ»æ°åãŒç™»éŒ²æƒ…å ±ã¨ä¸€è‡´ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™"}),e.jsx("li",{children:"â€¢ é€šéå¾Œã€è©³ç´°ãªæ–½è¨­æƒ…å ±ã®å…¥åŠ›ã«é€²ã¿ã¾ã™"}),e.jsx("li",{children:"â€¢ ç¬¬äºŒå¯©æŸ»ã§ã¯æ›¸é¡å¯©æŸ»ã‚’è¡Œã„ã¾ã™"}),e.jsx("li",{children:"â€¢ æœ€çµ‚çš„ã«QRã‚³ãƒ¼ãƒ‰å®Ÿè¨¼æ¤œæŸ»ã‚’çµŒã¦æ²è¼‰é–‹å§‹ã¨ãªã‚Šã¾ã™"})]})]})]})}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs(B,{to:"/owner-payment-system",className:"text-blue-600 hover:text-blue-800 flex items-center",children:[e.jsx(I,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"text-sm",children:"åç›Šã‚·ã‚¹ãƒ†ãƒ ã«ã¤ã„ã¦"})]}),e.jsxs(w,{type:"submit",className:"w-1/2 bg-blue-600 hover:bg-blue-700",disabled:!f()||t,isLoading:t,children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"ç¬¬ä¸€å¯©æŸ»ãƒ»æœ¬äººç¢ºèªã‚’ç”³ã—è¾¼ã‚€"]})]})]})})]})}function Ne({rejectedParks:s,onUpdateRejectedParks:n,onResubmit:v,onError:m}){const[u,h]=o.useState(!1),[x,b]=o.useState(null),j=async l=>{try{h(!0);const{error:y}=await C.from("dog_parks").delete().eq("id",l);if(y)throw y;const t=s.filter(i=>i.id!==l);n(t),b(null)}catch(y){console.error("Error deleting park:",y),m(y.message||"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ")}finally{h(!1)}};return s.length===0?null:e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"mb-6 bg-red-50 border-red-200",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(R,{className:"w-6 h-6 text-red-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-900 mb-2",children:"å´ä¸‹ã•ã‚ŒãŸç”³è«‹"}),e.jsx("p",{className:"text-sm text-red-800 mb-4",children:"ä»¥ä¸‹ã®ç”³è«‹ã¯å¯©æŸ»ã®çµæœã€å´ä¸‹ã•ã‚Œã¾ã—ãŸã€‚ç”³è«‹å†…å®¹ã‚’è¦‹ç›´ã—ã¦å†æå‡ºã™ã‚‹ã‹ã€å‰Šé™¤ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚"}),e.jsx("div",{className:"space-y-4",children:s.map(l=>e.jsx("div",{className:"bg-white p-4 rounded-lg border border-red-200",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:l.name}),e.jsx("p",{className:"text-sm text-gray-600",children:l.address}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["ç”³è«‹æ—¥: ",new Date(l.created_at).toLocaleDateString("ja-JP")]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(w,{size:"sm",variant:"secondary",onClick:()=>v(l),children:[e.jsx(J,{className:"w-4 h-4 mr-1"}),"å†ç”³è«‹"]}),e.jsxs(w,{size:"sm",variant:"secondary",className:"text-red-600 hover:text-red-700",onClick:()=>b(l.id),children:[e.jsx(V,{className:"w-4 h-4 mr-1"}),"å‰Šé™¤"]})]})]})},l.id))})]})]})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"ç”³è«‹ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚ç”³è«‹ã‚’å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(w,{variant:"secondary",onClick:()=>b(null),children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"}),e.jsxs(w,{className:"bg-red-600 hover:bg-red-700",isLoading:u,onClick:()=>j(x),children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"å‰Šé™¤ã™ã‚‹"]})]})]})})]})}function ve(){const[s,n]=o.useState(null),[v,m]=o.useState(!1),[u,h]=o.useState(null),x=o.useCallback(()=>{n(null),h(null)},[]),b=o.useCallback(t=>{if(t instanceof Error){const i=t.message.toLowerCase();if(i.includes("network")||i.includes("fetch")||i.includes("connection"))return{type:"network",severity:"medium",message:t.message,originalError:t,userMessage:"ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã«å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚",recoverable:!0,retryable:!0};if(i.includes("timeout")||i.includes("timed out")||t.name==="AbortError")return{type:"timeout",severity:"medium",message:t.message,originalError:t,userMessage:"ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚",recoverable:!0,retryable:!0};if(i.includes("jwt")||i.includes("unauthorized")||i.includes("refresh_token"))return{type:"authentication",severity:"high",message:t.message,originalError:t,userMessage:"ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒæœŸé™åˆ‡ã‚Œã§ã™ã€‚å†åº¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„ã€‚",recoverable:!0,retryable:!1};if(i.includes("forbidden")||i.includes("permission")||i.includes("row-level security"))return{type:"authorization",severity:"high",message:t.message,originalError:t,userMessage:"ã“ã®æ“ä½œã‚’å®Ÿè¡Œã™ã‚‹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚",recoverable:!1,retryable:!1};if(i.includes("validation")||i.includes("invalid")||i.includes("required"))return{type:"validation",severity:"low",message:t.message,originalError:t,userMessage:"å…¥åŠ›å†…å®¹ã«å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚ç¢ºèªã—ã¦ãã ã•ã„ã€‚",recoverable:!0,retryable:!1};if(i.includes("storage")||i.includes("bucket")||i.includes("file"))return{type:"storage",severity:"medium",message:t.message,originalError:t,userMessage:"ãƒ•ã‚¡ã‚¤ãƒ«ã®å‡¦ç†ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã—ã°ã‚‰ãå¾…ã£ã¦ã‹ã‚‰å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚",recoverable:!0,retryable:!0};if(i.includes("payment")||i.includes("stripe")||i.includes("subscription"))return{type:"payment",severity:"high",message:t.message,originalError:t,userMessage:"æ±ºæ¸ˆå‡¦ç†ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã‚«ãƒ¼ãƒ‰æƒ…å ±ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚",recoverable:!0,retryable:!0};if(i.includes("500")||i.includes("502")||i.includes("503")||i.includes("520"))return{type:"server",severity:"high",message:t.message,originalError:t,userMessage:"ã‚µãƒ¼ãƒãƒ¼ã§ä¸€æ™‚çš„ãªå•é¡ŒãŒç™ºç”Ÿã—ã¦ã„ã¾ã™ã€‚ã—ã°ã‚‰ãå¾…ã£ã¦ã‹ã‚‰å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚",recoverable:!0,retryable:!0};if(i.includes("404")||i.includes("not found"))return{type:"not_found",severity:"medium",message:t.message,originalError:t,userMessage:"è¦æ±‚ã•ã‚ŒãŸãƒªã‚½ãƒ¼ã‚¹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚",recoverable:!1,retryable:!1}}if(typeof t=="object"&&t!==null&&"code"in t){const i=pe(t);return{type:"server",severity:"medium",message:i,originalError:t,userMessage:i,recoverable:!0,retryable:!0}}return{type:"unknown",severity:"medium",message:t instanceof Error?t.message:String(t),originalError:t,userMessage:"äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã—ã°ã‚‰ãå¾…ã£ã¦ã‹ã‚‰å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚",recoverable:!0,retryable:!0}},[]),j=o.useCallback(t=>{t.severity==="critical"&&console.error("Critical Error:",{type:t.type,message:t.message,timestamp:t.timestamp,context:t.context})},[]),l=o.useCallback((t,i)=>{const r={...b(t),timestamp:new Date,...i&&{context:i}};j(r),n(r)},[b,j]),y=o.useCallback(async(t,i)=>{m(!0),x();try{const r=await t();return m(!1),r}catch(r){return l(r,i),m(!1),b(r).retryable&&h(()=>async()=>{await y(t,i)}),null}},[l,x,b]);return{error:s,isLoading:v,clearError:x,handleError:l,retryAction:u,executeWithErrorHandling:y}}const we={maxAttempts:3,baseDelay:1e3,maxDelay:1e4,backoffFactor:2,retryableErrors:["network","timeout","server","storage"],autoRetry:!0};function ke(s={}){const n={...we,...s},[v,m]=o.useState({attempts:0,isRetrying:!1,lastError:null,nextRetryIn:0}),u=o.useRef(),h=o.useRef(),x=o.useCallback(()=>{u.current&&clearTimeout(u.current),h.current&&clearInterval(h.current),m({attempts:0,isRetrying:!1,lastError:null,nextRetryIn:0})},[]),b=o.useCallback(()=>{u.current&&clearTimeout(u.current),h.current&&clearInterval(h.current),m(r=>({...r,isRetrying:!1,nextRetryIn:0}))},[]),j=o.useCallback(r=>{const g=n.baseDelay*Math.pow(n.backoffFactor,r);return Math.min(g,n.maxDelay)},[n]),l=o.useCallback(r=>{const g=r.message.toLowerCase();return!!(n.retryableErrors.includes("network")&&(g.includes("network")||g.includes("fetch")||g.includes("connection"))||n.retryableErrors.includes("timeout")&&(g.includes("timeout")||g.includes("timed out")||r.name==="AbortError")||n.retryableErrors.includes("server")&&(g.includes("500")||g.includes("502")||g.includes("503")||g.includes("520"))||n.retryableErrors.includes("storage")&&(g.includes("storage")||g.includes("bucket")))},[n.retryableErrors]),y=o.useCallback((r,g)=>{let N=Math.ceil(r/1e3);m(f=>({...f,nextRetryIn:N})),h.current=setInterval(()=>{N--,m(f=>({...f,nextRetryIn:N})),N<=0&&(h.current&&clearInterval(h.current),g())},1e3)},[]),t=o.useCallback(async(r,g=0)=>{try{m(f=>({...f,attempts:g,lastError:null}));const N=await r();return x(),N}catch(N){const f=N instanceof Error?N:new Error(String(N));if(m(a=>({...a,lastError:f})),g>=n.maxAttempts-1)throw m(a=>({...a,isRetrying:!1})),f;if(!l(f))throw m(a=>({...a,isRetrying:!1})),f;if(!n.autoRetry)throw m(a=>({...a,isRetrying:!1})),f;const T=j(g);return m(a=>({...a,isRetrying:!0})),new Promise((a,k)=>{y(T,()=>{u.current=setTimeout(()=>{t(r,g+1).then(a).catch(k)},0)})})}},[n,l,j,x,y]);return{execute:o.useCallback(r=>t(r,0),[t]),state:v,reset:x,cancelRetry:b}}const G={api:{maxAttempts:3,baseDelay:1e3,maxDelay:5e3,backoffFactor:1.5,retryableErrors:["network","timeout","server"],autoRetry:!0}};function Re(){const s=ge(),{user:n}=ye(),[v,m]=o.useState(!1),[u,h]=o.useState(1),[x,b]=o.useState([]),[j,l]=o.useState(null),[y,t]=o.useState({name:"",postal_code:"",address:"",phone_number:"",email:""}),[i,r]=o.useState(!1),[g,N]=o.useState(!1),{error:f,clearError:T,handleError:a,executeWithErrorHandling:k}=ve(),_=ke(G.api),[p,M]=o.useState({isCurrentlyOperating:"",isOwnedLand:"",hasOwnerPermission:"",hasNeighborConsent:"",landArea:"",isAntiSocialForces:"",canVisitWeekly:"",canReachQuickly:"",applicantType:"",identityDocumentType:"",identityDocumentFront:null,identityDocumentBack:null,name:"",description:"",address:"",maxCapacity:"10",largeDogArea:!0,smallDogArea:!0,privateBooths:!1,privateBoothCount:"0",facilities:{parking:!1,shower:!1,restroom:!1,agility:!1,rest_area:!1,water_station:!1},facilityDetails:""});o.useEffect(()=>{if(!n){s("/login");return}X(),Y(),K()},[n,s]);const X=async()=>{await k(async()=>{const{data:c,error:d}=await C.from("dog_parks").select("*").eq("owner_id",n?.id).eq("status","rejected");if(d)throw d;b(c||[])},{operation:"fetch_rejected_parks"})},Y=async()=>{await k(async()=>{const{data:c,error:d}=await C.from("owner_verifications").select("status").eq("user_id",n?.id).single();if(d&&d.code!=="PGRST116")throw d;l(c?.status||null)},{operation:"check_identity_verification"})},K=async()=>{await k(async()=>{r(!0);const{data:c,error:d}=await C.from("profiles").select("name, postal_code, address, phone_number, email").eq("id",n?.id).single();if(d)throw d;t(c||{name:"",postal_code:"",address:"",phone_number:"",email:""})},{operation:"fetch_profile_data"}),r(!1)},Z=async c=>{await k(async()=>{r(!0);const{error:d}=await C.from("profiles").update(c).eq("id",n?.id);if(d)throw d;t(c),N(!1)},{operation:"update_profile_data"}),r(!1)},L=c=>{M(d=>({...d,...c}))},ee=c=>{b(c)},se=c=>{M(d=>({...d,name:c.name,description:c.description||"",address:c.address,maxCapacity:c.max_capacity?.toString()||"10",largeDogArea:c.large_dog_area||!0,smallDogArea:c.small_dog_area||!0,privateBooths:c.private_booths||!1,privateBoothCount:c.private_booth_count?.toString()||"0",facilities:c.facilities||{parking:!1,shower:!1,restroom:!1,agility:!1,rest_area:!1,water_station:!1},facilityDetails:c.facility_details||""})),h(2)},te=c=>{if(!c.isCurrentlyOperating)throw new Error("ç¾åœ¨ã®é‹å–¶çŠ¶æ³ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚");if(c.isCurrentlyOperating==="no"){if(!c.isOwnedLand)throw new Error("äºˆå®šåœ°ã®æ‰€æœ‰çŠ¶æ³ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚");if(c.isOwnedLand==="no"&&!c.hasOwnerPermission)throw new Error("åœŸåœ°æ‰€æœ‰è€…ã®è¨±å¯ã«ã¤ã„ã¦é¸æŠã—ã¦ãã ã•ã„ã€‚");if(!c.hasNeighborConsent)throw new Error("è¿‘éš£ä½æ°‘ã®ç†è§£ã«ã¤ã„ã¦é¸æŠã—ã¦ãã ã•ã„ã€‚")}if(!c.landArea||parseInt(c.landArea)<=0)throw new Error("åºƒã•ã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");if(!c.isAntiSocialForces)throw new Error("åç¤¾ä¼šçš„å‹¢åŠ›ã¨ã®é–¢ä¿‚ã«ã¤ã„ã¦é¸æŠã—ã¦ãã ã•ã„ã€‚");if(c.isAntiSocialForces==="yes")throw new Error("åç¤¾ä¼šçš„å‹¢åŠ›ã¨ã®é–¢ä¿‚ãŒã‚ã‚‹å ´åˆã€ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®ç™»éŒ²ã¯ã§ãã¾ã›ã‚“ã€‚");if(!c.canVisitWeekly)throw new Error("é€±1å›ã®è¨ªå•å¯å¦ã«ã¤ã„ã¦é¸æŠã—ã¦ãã ã•ã„ã€‚");if(!c.canReachQuickly)throw new Error("ç·Šæ€¥æ™‚ã®åˆ°ç€å¯å¦ã«ã¤ã„ã¦é¸æŠã—ã¦ãã ã•ã„ã€‚");if(!c.identityDocumentFront)throw new Error("æœ¬äººç¢ºèªæ›¸é¡ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚");if(c.isCurrentlyOperating==="no"){if(c.isOwnedLand==="no"&&c.hasOwnerPermission==="no")throw new Error("åœŸåœ°æ‰€æœ‰è€…ã®è¨±å¯ã‚’å¾—ã¦ã‹ã‚‰ãŠç”³ã—è¾¼ã¿ãã ã•ã„ã€‚å€Ÿç”¨åœ°ã§ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³é‹å–¶ã«ã¯æ‰€æœ‰è€…ã®åŒæ„ãŒå¿…è¦ã§ã™ã€‚");if(c.hasNeighborConsent==="no")throw new Error("è¿‘éš£ä½æ°‘ã®ç†è§£ã‚’å¾—ã¦ã‹ã‚‰ãŠç”³ã—è¾¼ã¿ãã ã•ã„ã€‚åœ°åŸŸã¨ã®è‰¯å¥½ãªé–¢ä¿‚ã¯é‹å–¶ã«ãŠã„ã¦é‡è¦ã§ã™ã€‚")}if(parseInt(c.landArea)<100)throw new Error("ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®é‹å–¶ã«ã¯æœ€ä½100ã¡ä»¥ä¸Šã®åºƒã•ãŒå¿…è¦ã§ã™ã€‚");if(c.canVisitWeekly==="no")throw new Error("é€±ã«1åº¦ç¨‹åº¦ã®è¨ªå•ãŒå¿…è¦ã§ã™ã€‚æ–½è¨­ã®çŠ¶æ³ç¢ºèªã‚„ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã®ãŸã‚ã€å®šæœŸçš„ãªè¨ªå•ãŒã§ãã‚‹æ–¹ã®ã¿ãŠç”³ã—è¾¼ã¿ãã ã•ã„ã€‚");if(c.canReachQuickly==="no")throw new Error("ç·Šæ€¥æ™‚ã«1æ™‚é–“ä»¥å†…ã«æ–½è¨­ã«åˆ°ç€ã§ãã‚‹ã“ã¨ãŒå¿…è¦ã§ã™ã€‚è¿…é€Ÿãªå¯¾å¿œãŒã§ãã‚‹æ–¹ã®ã¿ãŠç”³ã—è¾¼ã¿ãã ã•ã„ã€‚")},ae=async c=>{c.preventDefault(),await k(async()=>{if(te(p),!n)throw new Error("ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãŒå–å¾—ã§ãã¾ã›ã‚“ã€‚å†åº¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„ã€‚");m(!0);try{if(p.identityDocumentFront){console.log("ğŸ” Identity document upload starting..."),console.log("ğŸ“ User ID:",n.id),console.log("ğŸ“„ File details:",{name:p.identityDocumentFront.name,type:p.identityDocumentFront.type,size:p.identityDocumentFront.size,lastModified:p.identityDocumentFront.lastModified});const d=`identity_${n.id}_${Date.now()}_${p.identityDocumentFront.name}`;console.log("ğŸ“ Upload file name:",d),console.log("ğŸš€ Starting storage upload...");const{data:F,error:D}=await C.storage.from("vaccine-certs").upload(d,p.identityDocumentFront,{upsert:!0});if(D)throw console.error("âŒ Storage upload error:",D),new Error(`ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ: ${D.message}`);console.log("âœ… Storage upload success:",F),console.log("ğŸ’¾ Starting database save...");const P={user_id:n.id,verification_id:F.path,status:"pending",verification_data:{document_url:F.path,uploaded_at:new Date().toISOString(),file_name:p.identityDocumentFront.name,file_size:p.identityDocumentFront.size,file_type:p.identityDocumentFront.type,application_stage:"first_stage"}};console.log("ğŸ“Š Database data:",P);const{error:A}=await C.from("owner_verifications").upsert(P,{onConflict:"user_id"});if(A)throw console.error("âŒ Database save error:",A),new Error(`ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ: ${A.message}`);console.log("âœ… Database save success"),console.log("ğŸ‰ Identity document upload completed successfully")}h(2),window.scrollTo({top:0,behavior:"smooth"})}catch(d){console.error("âŒ First stage submission failed:",d);const F=d instanceof Error?d.message:"ç”³è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚";throw new Error(F)}finally{m(!1)}},{operation:"first_stage_submission"})},re=async c=>{c.preventDefault(),console.log("ğŸš€ ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡é–‹å§‹"),m(!0),T();try{await k(async()=>{console.log("ğŸ“¡ ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ç¢ºèªä¸­...");const{data:{user:d},error:F}=await C.auth.getUser();if(F||!d)throw console.error("âŒ ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã‚¨ãƒ©ãƒ¼:",F),new Error("ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚å†åº¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„ã€‚");console.log("âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼æˆåŠŸ:",d.id),console.log("ğŸ“ ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ›´æ–°ä¸­...");const{error:D}=await C.from("profiles").update({user_type:"owner"}).eq("id",d.id);if(D)throw console.error("âŒ ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ›´æ–°ã‚¨ãƒ©ãƒ¼:",D),new Error("ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸã€‚");console.log("âœ… ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ›´æ–°æˆåŠŸ"),console.log("ğŸ¢ ãƒ‰ãƒƒã‚°ãƒ©ãƒ³æƒ…å ±ç™»éŒ²ä¸­...");const P={owner_id:d.id,name:p.name,description:p.description,address:p.address,price:800,max_capacity:parseInt(p.maxCapacity,10),large_dog_area:p.largeDogArea,small_dog_area:p.smallDogArea,private_booths:p.privateBooths,private_booth_count:parseInt(p.privateBoothCount,10),private_booth_price:0,facilities:p.facilities,facility_details:p.facilityDetails,status:"pending"};console.log("ğŸ“‹ ç™»éŒ²ãƒ‡ãƒ¼ã‚¿:",P);const{error:A}=await C.from("dog_parks").insert([P]);if(A)throw console.error("âŒ ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ç™»éŒ²ã‚¨ãƒ©ãƒ¼:",A),A;console.log("âœ… ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ç™»éŒ²æˆåŠŸ"),console.log("ğŸ”„ ã‚ªãƒ¼ãƒŠãƒ¼ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ç§»å‹•ä¸­..."),setTimeout(()=>{s("/owner-dashboard")},100)})}catch(d){console.error("âŒ å…¨ä½“ã‚¨ãƒ©ãƒ¼:",d),a(d instanceof Error?d:new Error("ä¸æ˜ãªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚"))}finally{m(!1)}};return u===1?e.jsxs("div",{children:[e.jsx(Q,{error:f,onClear:T,className:"mb-6"}),e.jsx(Ne,{rejectedParks:x,onUpdateRejectedParks:ee,onResubmit:se,onError:a}),e.jsx(fe,{formData:p,onFormDataChange:L,onSubmit:ae,error:f?.userMessage||"",profileData:y,profileLoading:i,onProfileUpdate:Z})]}):e.jsxs("div",{children:[e.jsx(Q,{error:f,onClear:T,..._.state.isRetrying?{}:{onRetry:()=>_.execute(()=>Promise.resolve())},className:"mb-6"}),_.state.isRetrying&&e.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-800 font-medium",children:"è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤ä¸­..."}),e.jsxs("p",{className:"text-blue-600 text-sm",children:["è©¦è¡Œå›æ•°: ",_.state.attempts+1,"/",G.api.maxAttempts,_.state.nextRetryIn>0&&` | æ¬¡ã®è©¦è¡Œã¾ã§: ${_.state.nextRetryIn}ç§’`]})]}),e.jsx("button",{onClick:_.cancelRetry,className:"text-blue-600 hover:text-blue-800 text-sm underline",children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"})]})}),u===2&&e.jsx(je,{formData:p,onFormDataChange:L,onSubmit:re,error:f?.userMessage||"",isLoading:v})]})}export{Re as ParkRegistration};
