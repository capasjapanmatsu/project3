import{s as e,j as t,C as s,B as a}from"./index-uQwv9uAE.js";import{r,L as i}from"./vendor-BHVjIt_u.js";import{R as n,b as l,y as c,U as o,Q as d,V as m,A as h,C as x,a as p,G as u,Y as g,s as f}from"./ui-BLTQwnYp.js";import"./supabase-CKbzEL5D.js";function y(e,t,s,a){return new(s||(s=Promise))((function(t,r){function i(e){try{l(a.next(e))}catch(t){r(t)}}function n(e){try{l(a.throw(e))}catch(t){r(t)}}function l(e){var a;e.done?t(e.value):(a=e.value,a instanceof s?a:new s((function(e){e(a)}))).then(i,n)}l((a=a.apply(e,[])).next())}))}function b(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}"function"==typeof SuppressedError&&SuppressedError;var j=b((function e(t,s){if(t===s)return!0;if(t&&s&&"object"==typeof t&&"object"==typeof s){if(t.constructor!==s.constructor)return!1;var a,r,i;if(Array.isArray(t)){if((a=t.length)!=s.length)return!1;for(r=a;0!==r--;)if(!e(t[r],s[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===s.source&&t.flags===s.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===s.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===s.toString();if((a=(i=Object.keys(t)).length)!==Object.keys(s).length)return!1;for(r=a;0!==r--;)if(!Object.prototype.hasOwnProperty.call(s,i[r]))return!1;for(r=a;0!==r--;){var n=i[r];if(!e(t[n],s[n]))return!1}return!0}return t!=t&&s!=s}));const v="__googleMapsScriptId";var w,N;(N=w||(w={}))[N.INITIALIZED=0]="INITIALIZED",N[N.LOADING=1]="LOADING",N[N.SUCCESS=2]="SUCCESS",N[N.FAILURE=3]="FAILURE";class _{constructor({apiKey:e,authReferrerPolicy:t,channel:s,client:a,id:r=v,language:i,libraries:n=[],mapIds:l,nonce:c,region:o,retries:d=3,url:m="https://maps.googleapis.com/maps/api/js",version:h}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=t,this.channel=s,this.client=a,this.id=r||v,this.language=i,this.libraries=n,this.mapIds=l,this.nonce=c,this.region=o,this.retries=d,this.url=m,this.version=h,_.instance){if(!j(this.options,_.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(_.instance.options)}`);return _.instance}_.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?w.FAILURE:this.done?w.SUCCESS:this.loading?w.LOADING:w.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise(((e,t)=>{this.loadCallback((s=>{s?t(s.error):e(window.google)}))}))}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,t;if(document.getElementById(this.id))return void this.callback();const s={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(s).forEach((e=>!s[e]&&delete s[e])),(null===(t=null===(e=null===window||void 0===window?void 0:window.google)||void 0===e?void 0:e.maps)||void 0===t?void 0:t.importLibrary)||(e=>{let t,s,a,r="google",i="importLibrary",n="__ib__",l=document,c=window;c=c[r]||(c[r]={});const o=c.maps||(c.maps={}),d=new Set,m=new URLSearchParams,h=()=>t||(t=new Promise(((i,c)=>y(this,0,void 0,(function*(){var h;for(a in yield s=l.createElement("script"),s.id=this.id,m.set("libraries",[...d]+""),e)m.set(a.replace(/[A-Z]/g,(e=>"_"+e[0].toLowerCase())),e[a]);m.set("callback",r+".maps."+n),s.src=this.url+"?"+m,o[n]=i,s.onerror=()=>t=c(Error("The Google Maps JavaScript API could not load.")),s.nonce=this.nonce||(null===(h=l.querySelector("script[nonce]"))||void 0===h?void 0:h.nonce)||"",l.head.append(s)})))));o[i]||(o[i]=(e,...t)=>d.add(e)&&h().then((()=>o[i](e,...t))))})(s);const a=this.libraries.map((e=>this.importLibrary(e)));a.length||a.push(this.importLibrary("core")),Promise.all(a).then((()=>this.callback()),(e=>{const t=new ErrorEvent("error",{error:e});this.loadErrorCallback(t)}))}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const e=this.errors.length*Math.pow(2,this.errors.length);setTimeout((()=>{this.deleteScript(),this.setScript()}),e)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach((e=>{e(this.onerrorEvent)})),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return void this.callback();this.loading=!0,this.setScript()}}}function S(){const[y,b]=r.useState([]),[j,v]=r.useState({}),[w,N]=r.useState({}),[S,k]=r.useState(!0),[I,E]=r.useState(null),[$,P]=r.useState(""),[C,O]=r.useState(null),[L,M]=r.useState(new Date),[D,A]=r.useState(!1),[R,T]=r.useState({}),z=r.useRef(null),F=r.useRef(null),K=r.useRef([]),J=r.useRef(null),[G,U]=r.useState(!1);r.useEffect((()=>{navigator.geolocation.getCurrentPosition((e=>{O({lat:e.coords.latitude,lng:e.coords.longitude})}),(e=>{O({lat:35.6812,lng:139.7671})}))}),[]);const q=async()=>{try{A(!0);const{data:t,error:s}=await e.from("dog_parks").select("id, current_occupancy, max_capacity").eq("status","approved");if(s)return;const a=new Date;M(a),b((e=>e.map((e=>{const s=t?.find((t=>t.id===e.id));if(s&&t){const t=[...R[e.id]||[],{timestamp:a.toISOString(),occupancy:s.current_occupancy,maxCapacity:s.max_capacity}].slice(-20);return T((s=>({...s,[e.id]:t}))),{...e,...s}}return e}))))}catch(t){}finally{A(!1)}};r.useEffect((()=>{(async()=>{try{k(!0),E(null);const{data:t,error:s}=await e.from("dog_parks").select("*").eq("status","approved").order("created_at",{ascending:!1});if(s)throw E(s.message||"データ取得エラー"),s;C&&t&&t.sort(((e,t)=>W(C.lat,C.lng,e.latitude,e.longitude)-W(C.lat,C.lng,t.latitude,t.longitude))),b(t||[]),t&&0!==t.length||E("データがありません（APIレスポンス: "+JSON.stringify(t)+"）");const a=(new Date).toISOString().split("T")[0],{data:r,error:i}=await e.from("reservations").select("*").eq("reservation_type","whole_facility").eq("status","confirmed").eq("date",a);if(i)throw i;const n={};(r||[]).forEach((e=>{n[e.park_id]||(n[e.park_id]=[]),n[e.park_id].push(e)})),v(n);const{data:l,error:c}=await e.from("park_maintenance").select("park_id, title, description, start_date, end_date, is_emergency, status").in("status",["scheduled","active"]).gte("end_date",(new Date).toISOString());if(c);else{const e={};(l||[]).forEach((t=>{const s=new Date,a=new Date(t.start_date),r=new Date(t.end_date);r>s&&(!e[t.park_id]||a<=s&&r>s)&&(e[t.park_id]={id:t.park_id,title:t.title,description:t.description,start_date:t.start_date,end_date:t.end_date,is_emergency:t.is_emergency})})),N(e)}}catch(t){E(t.message||"データ取得エラー")}finally{k(!1)}})();const t=e.channel("dog_parks_changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"dog_parks"},(e=>{b((t=>t.map((t=>t.id===e.new.id?{...t,...e.new}:t))));const t=new Date;T((s=>{const a=[...s[e.new.id]||[],{timestamp:t.toISOString(),occupancy:e.new.current_occupancy,maxCapacity:e.new.max_capacity}].slice(-20);return{...s,[e.new.id]:a}}))})).subscribe();return J.current=setInterval(q,3e4),()=>{t.unsubscribe(),J.current&&clearInterval(J.current)}}),[C]);const Z=(e,t)=>{const s=e/t*100;return s<25?{text:"空いています",color:"text-green-600 bg-green-100",barColor:"bg-green-500",description:"快適に利用できます",emoji:"😊"}:s<50?{text:"やや空いています",color:"text-blue-600 bg-blue-100",barColor:"bg-blue-500",description:"適度な混雑です",emoji:"🙂"}:s<75?{text:"やや混んでいます",color:"text-yellow-600 bg-yellow-100",barColor:"bg-yellow-500",description:"少し混雑しています",emoji:"😐"}:{text:"混んでいます",color:"text-red-600 bg-red-100",barColor:"bg-red-500",description:"大変混雑しています",emoji:"😰"}};r.useEffect((()=>{if(!C||!z.current)return;(async()=>{try{const e=new _({apiKey:"AIzaSyC9sxGamDZmdKIz3vP1CWLJORl-QkoWgHg",version:"weekly",libraries:["places"]}),t=await e.load();if(!z.current)return;const s=new t.maps.Map(z.current,{center:C,zoom:13,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1,styles:[{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels.icon",stylers:[{visibility:"off"}]}]});F.current=s,K.current.forEach((e=>e.setMap(null))),K.current=[];const a=new t.maps.Marker({position:C,map:s,icon:{path:t.maps.SymbolPath.CIRCLE,scale:10,fillColor:"#4285F4",fillOpacity:1,strokeWeight:2,strokeColor:"#FFFFFF"},title:"現在地"});K.current.push(a),y.forEach((e=>{const a=Z(e.current_occupancy,e.max_capacity);let r="red";a.color.includes("green")?r="green":a.color.includes("blue")?r="blue":a.color.includes("yellow")&&(r="yellow");const i=new t.maps.Marker({position:{lat:Number(e.latitude),lng:Number(e.longitude)},map:s,title:e.name,icon:{url:`https://maps.google.com/mapfiles/ms/icons/${r}-dot.png`}}),n=Array.from({length:5},((t,s)=>`<span style="color: ${s<Math.round(e.average_rating)?"#fbbf24":"#d1d5db"};">★</span>`)).join(""),l=j[e.id]||[];let c="";if(l.length>0){const e=[];l.forEach((t=>{const s=parseInt(t.start_time),a=s+t.duration;e.push({start:`${s.toString().padStart(2,"0")}:00`,end:`${a.toString().padStart(2,"0")}:00`})})),c='\n              <div style="margin-top: 8px; padding: 8px; background-color: #fff7ed; border: 1px solid #fed7aa; border-radius: 4px;">\n                <p style="font-weight: 500; color: #9a3412; margin-bottom: 4px; font-size: 12px;">本日の貸し切り時間</p>\n            ',e.forEach((e=>{c+=`<p style="font-size: 11px; color: #9a3412; margin: 2px 0;">${e.start}〜${e.end}</p>`})),c+="</div>"}const o=new t.maps.InfoWindow({content:`\n              <div style="padding: 12px; max-width: 300px;">\n                <h3 style="margin: 0 0 8px 0; font-size: 16px; font-weight: bold;">${e.name}</h3>\n                <div style="display: flex; align-items: center; margin-bottom: 4px;">\n                  ${n}\n                  <span style="margin-left: 4px; font-size: 12px; color: #666;">${e.average_rating.toFixed(1)} (${e.review_count}件)</span>\n                </div>\n                <p style="margin: 0 0 4px 0; font-size: 14px; color: #666;">${e.address}</p>\n                <p style="margin: 0 0 4px 0; font-size: 14px;">通常利用: ¥800/日</p>\n                <p style="margin: 0 0 4px 0; font-size: 14px;">施設貸し切り: ¥4,400/時間</p>\n                ${e.private_booths?'<p style="margin: 0 0 4px 0; font-size: 14px;">プライベートブース: サブスク使い放題・1日券でも利用可能</p>':""}\n                <p style="margin: 0 0 8px 0; font-size: 14px;">${a.text} (${e.current_occupancy}/${e.max_capacity})</p>\n                ${c}\n                <a href="/parks/${e.id}" style="display: inline-block; padding: 8px 16px; background-color: #2563eb; color: white; text-decoration: none; border-radius: 6px; font-size: 14px; margin-top: 8px;">詳細を見る</a>\n              </div>\n            `});i.addListener("click",(()=>{o.open(s,i)})),K.current.push(i)})),P("")}catch(e){P("Google Mapsの読み込みに失敗しました。APIキーが正しく設定されているか確認してください。")}})()}),[C,y,j]);const W=(e,t,s,a)=>{const r=(s-e)*Math.PI/180,i=(a-t)*Math.PI/180,n=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return 6371*(2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n)))};return r.useEffect((()=>{const e=setTimeout((()=>{S&&(U(!0),E("タイムアウト: サーバーから応答がありません。ネットワークやRLS設定を再確認してください。"),k(!1))}),1e4);return()=>clearTimeout(e)}),[S]),S&&!G?t.jsx("div",{className:"flex justify-center items-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h1",{className:"text-2xl font-bold",children:"ドッグラン一覧"}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("div",{className:"text-sm text-gray-600",children:["最終更新: ",L.toLocaleTimeString("ja-JP")]}),t.jsxs("button",{onClick:()=>{q()},disabled:D,className:"flex items-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors "+(D?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-100 text-blue-700 hover:bg-blue-200"),children:[t.jsx(n,{className:"w-4 h-4 "+(D?"animate-spin":"")}),t.jsx("span",{children:D?"更新中...":"更新"})]})]})]}),t.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 rounded-full "+(D?"bg-yellow-500 animate-pulse":"bg-green-500")}),t.jsx("span",{className:"text-sm font-medium text-blue-900",children:D?"リアルタイム更新中...":"リアルタイム更新中"})]}),t.jsx("div",{className:"text-xs text-blue-700",children:"30秒ごとに自動更新"})]})}),t.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[t.jsx("h2",{className:"font-semibold text-blue-900 mb-2",children:"料金体系"}),t.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm text-blue-800",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium",children:"通常利用"}),t.jsx("p",{children:"1日800円（時間制限なし）"})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium",children:"サブスクリプション"}),t.jsx("p",{children:"月額3,800円（全国共通）"})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium",children:"施設貸し切り"}),t.jsx("p",{children:"4,400円/時間（人数制限なし）"}),t.jsx("p",{className:"text-xs text-blue-600",children:"※前日までの予約が必要"})]})]})]}),t.jsx("div",{className:"relative",children:$?t.jsx("div",{className:"w-full h-[400px] bg-gray-100 rounded-lg shadow-md flex items-center justify-center",children:t.jsxs("div",{className:"text-center p-6",children:[t.jsx(l,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 mb-2",children:"地図を表示できません"}),t.jsx("p",{className:"text-sm text-red-600",children:$}),t.jsx("div",{className:"mt-4 p-3 bg-yellow-50 rounded-lg text-left",children:t.jsxs("p",{className:"text-sm text-yellow-800",children:[t.jsx("strong",{children:"解決方法:"}),t.jsx("br",{}),"1. .envファイルにVITE_GOOGLE_MAPS_API_KEY=your_api_keyを追加",t.jsx("br",{}),"2. Google Cloud ConsoleでMaps JavaScript APIを有効化",t.jsx("br",{}),"3. APIキーの制限設定を確認"]})})]})}):t.jsx("div",{ref:z,className:"w-full h-[400px] rounded-lg shadow-md"})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map((e=>{const r=Z(e.current_occupancy,e.max_capacity),n=(e=>{const t=R[e]||[];if(t.length<2)return"stable";const s=t.slice(-3),a=t.slice(-6,-3);if(0===s.length||0===a.length)return"stable";const r=s.reduce(((e,t)=>e+t.occupancy),0)/s.length,i=a.reduce(((e,t)=>e+t.occupancy),0)/a.length;return r>i+1?"increasing":r<i-1?"decreasing":"stable"})(e.id),y=C?W(C.lat,C.lng,Number(e.latitude),Number(e.longitude)):null,b=(e=>{const t=j[e]||[];if(0===t.length)return null;const s=[];return t.forEach((e=>{const t=parseInt(e.start_time),a=t+e.duration;s.push({start:`${t.toString().padStart(2,"0")}:00`,end:`${a.toString().padStart(2,"0")}:00`})})),s})(e.id),v=b&&b.length>0,N=w[e.id];let _=null;if(N){const e=new Date,t=new Date(N.start_date),s=new Date(N.end_date);e>=t&&e<s?_="active":e<t&&(_="scheduled")}return t.jsxs(s,{className:"overflow-hidden",children:[e.image_url&&t.jsxs("div",{className:"relative h-48 mb-4 -m-6 mb-4",children:[t.jsx("img",{src:e.image_url,alt:e.name,className:"w-full h-full object-cover",loading:"lazy",onError:e=>{e.currentTarget.src="https://images.pexels.com/photos/1108099/pexels-photo-1108099.jpeg"}}),t.jsx("div",{className:"absolute top-3 right-3",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-sm font-medium ${r.color}`,children:r.text})}),_&&N&&t.jsx("div",{className:"absolute top-3 left-3",children:t.jsx("span",{className:"px-2 py-1 rounded-full text-sm font-medium text-white "+("active"===_?N.is_emergency?"bg-red-600":"bg-orange-600":"bg-blue-600"),children:"active"===_?N.is_emergency?"緊急メンテナンス中":"メンテナンス中":"メンテナンス予定"})}),!_&&v&&t.jsx("div",{className:"absolute top-3 left-3",children:t.jsx("span",{className:"px-2 py-1 rounded-full text-sm font-medium bg-orange-500 text-white",children:"本日貸し切りあり"})})]}),t.jsxs("div",{className:e.image_url?"px-6 pb-6":"",children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:e.name}),t.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[[1,2,3,4,5].map((s=>t.jsx(c,{className:"w-4 h-4 "+(s<=Math.round(e.average_rating)?"text-yellow-400 fill-current":"text-gray-300")},s))),t.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.average_rating.toFixed(1)}),t.jsxs("span",{className:"text-xs text-gray-500",children:["(",e.review_count,"件)"]})]}),t.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:e.description}),t.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(o,{className:"w-4 h-4 text-gray-600"}),t.jsx("span",{className:"text-sm font-medium text-gray-900",children:"現在の混雑状況"}),"stable"!==n&&t.jsxs("div",{className:"flex items-center space-x-1",children:["increasing"===n?t.jsx(d,{className:"w-3 h-3 text-red-500"}):t.jsx(m,{className:"w-3 h-3 text-green-500"}),t.jsx("span",{className:"text-xs text-gray-500",children:"increasing"===n?"増加中":"減少中"})]})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center justify-center space-x-1 ${r.color}`,children:[t.jsx("span",{children:r.emoji}),t.jsx("span",{children:r.text})]}),t.jsx("p",{className:"text-xs text-gray-600 mt-1",children:r.description})]})]}),t.jsxs("div",{className:"mb-2",children:[t.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[t.jsxs("span",{children:[e.current_occupancy,"人"]}),t.jsxs("span",{children:[Math.round(e.current_occupancy/e.max_capacity*100),"%"]}),t.jsxs("span",{children:[e.max_capacity,"人"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${r.barColor}`,style:{width:e.current_occupancy/e.max_capacity*100+"%"}})})]}),t.jsx("p",{className:"text-xs text-gray-600",children:r.description})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center text-gray-600",children:[t.jsx(l,{className:"w-4 h-4 mr-2 flex-shrink-0"}),t.jsx("span",{className:"text-sm truncate",children:e.address})]}),null!==y&&t.jsxs("p",{className:"text-xs text-gray-500",children:["現在地から約",Math.round(10*y)/10,"km"]}),_&&N&&t.jsxs("div",{className:"p-3 rounded-lg "+("active"===_?N.is_emergency?"bg-red-50":"bg-orange-50":"bg-blue-50"),children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[t.jsx(h,{className:"w-4 h-4 "+("active"===_?N.is_emergency?"text-red-600":"text-orange-600":"text-blue-600")}),t.jsx("span",{className:"text-sm font-medium "+("active"===_?N.is_emergency?"text-red-800":"text-orange-800":"text-blue-800"),children:"active"===_?N.is_emergency?"緊急メンテナンス中":"メンテナンス中":"メンテナンス予定"})]}),t.jsx("p",{className:`text-sm font-medium ${"active"===_?N.is_emergency?"text-red-700":"text-orange-700":"text-blue-700"} mb-1`,children:N.title}),N.description&&t.jsx("p",{className:`text-xs ${"active"===_?N.is_emergency?"text-red-600":"text-orange-600":"text-blue-600"} mb-2`,children:N.description}),t.jsx("div",{className:"space-y-1",children:t.jsxs("div",{className:"flex items-center text-xs "+("active"===_?N.is_emergency?"text-red-700":"text-orange-700":"text-blue-700"),children:[t.jsx(x,{className:"w-3 h-3 mr-1 flex-shrink-0"}),t.jsxs("span",{children:[new Date(N.start_date).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"})," ",new Date(N.start_date).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}),"〜",new Date(N.end_date).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"})," ",new Date(N.end_date).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})]})]})}),t.jsx("p",{className:`text-xs ${"active"===_?N.is_emergency?"text-red-600":"text-orange-600":"text-blue-600"} mt-2`,children:"※メンテナンス期間中は利用できません"})]}),!_&&v&&t.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[t.jsx(h,{className:"w-4 h-4 text-orange-600"}),t.jsx("span",{className:"text-sm font-medium text-orange-800",children:"本日の貸し切り時間"})]}),t.jsx("div",{className:"space-y-1",children:b.map(((e,s)=>t.jsxs("div",{className:"flex items-center text-xs text-orange-700",children:[t.jsx(x,{className:"w-3 h-3 mr-1 flex-shrink-0"}),t.jsxs("span",{children:[e.start,"〜",e.end]})]},s)))}),t.jsx("p",{className:"text-xs text-orange-600 mt-2",children:"※貸し切り時間中は通常利用できません"})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[e.large_dog_area&&t.jsxs("div",{className:"flex items-center text-sm text-blue-600",children:[t.jsx(p,{className:"w-4 h-4 mr-1"}),t.jsx("span",{children:"大型犬OK"})]}),e.small_dog_area&&t.jsxs("div",{className:"flex items-center text-sm text-pink-600",children:[t.jsx(u,{className:"w-4 h-4 mr-1"}),t.jsx("span",{children:"小型犬OK"})]})]}),t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex items-center text-gray-600",children:[t.jsx(g,{className:"w-4 h-4 mr-2"}),t.jsx("span",{className:"text-sm font-medium",children:"¥800/日"})]})}),e.private_booths&&t.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-purple-800",children:"プライベートブース"}),t.jsxs("span",{className:"text-sm text-purple-600",children:[e.private_booth_count,"室"]})]}),t.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"サブスク使い放題・1日券でも利用可能（追加料金なし）"})]})]}),t.jsxs("div",{className:"mt-4 space-y-3",children:[t.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries({parking:"駐車場",shower:"シャワー設備",restroom:"トイレ",agility:"アジリティ設備",rest_area:"休憩スペース",water_station:"給水設備"}).map((([s,a])=>e.facilities[s]&&t.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsx(f,{className:"w-4 h-4 mr-1 text-green-600 flex-shrink-0"}),t.jsx("span",{children:a})]},s)))}),e.facility_details&&t.jsx("p",{className:"text-sm text-gray-600 border-t pt-3 line-clamp-2",children:e.facility_details}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx(i,{to:`/parks/${e.id}`,children:t.jsx(a,{variant:"secondary",className:"w-full",style:{backgroundColor:"white",color:"#2563eb",borderColor:"#d1d5db"},children:"詳細・レビュー"})}),"active"===_?t.jsx(a,{className:"w-full bg-gray-400 cursor-not-allowed",disabled:!0,title:"メンテナンス中のため予約できません",children:"予約不可"}):t.jsx(i,{to:`/parks/${e.id}/reserve`,children:t.jsx(a,{className:"w-full",children:"予約する"})})]})]})]})]},e.id)}))})]})}export{S as DogParkList};
