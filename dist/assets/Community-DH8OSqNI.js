import{u as e,s,j as a,B as t}from"./index-T-nty6Ge.js";import{r,L as l}from"./vendor-BHVjIt_u.js";import{C as i}from"./Card-DW8Xk96S.js";import{h as c,k as n,q as d,ac as m,B as x,ad as o,ae as h,P as j,X as u,K as g,af as f,ag as b,i as N,b as p,_ as y,t as w,ah as _}from"./ui-srxHNTHo.js";import"./supabase-CKbzEL5D.js";function v(){const{user:v}=e(),[k,q]=r.useState("friends"),[S,C]=r.useState([]),[D,$]=r.useState([]),[z,P]=r.useState([]),[T,L]=r.useState([]),[J,I]=r.useState(!0),[O,B]=r.useState(null),[E,K]=r.useState(""),[Q,A]=r.useState(!1),[F,G]=r.useState([]),[H,M]=r.useState([]),[R,U]=r.useState(""),[V,W]=r.useState(""),[X,Y]=r.useState([]);r.useEffect((()=>{if(v){Z();const e=s.channel("friend_requests_changes").on("postgres_changes",{event:"*",schema:"public",table:"friend_requests",filter:`requested_id=eq.${v.id}`},(()=>{ee()})).subscribe(),a=s.channel("notifications_changes").on("postgres_changes",{event:"*",schema:"public",table:"notifications",filter:`user_id=eq.${v.id}`},(()=>{ae()})).subscribe(),t=s.channel("messages_changes").on("postgres_changes",{event:"*",schema:"public",table:"messages",filter:`receiver_id=eq.${v.id}`},(()=>{te()})).subscribe();return()=>{e.unsubscribe(),a.unsubscribe(),t.unsubscribe()}}}),[v]);const Z=async()=>{try{I(!0),await Promise.all([ee(),se(),ae(),te(),re(),le(),ie()])}catch(e){}finally{I(!1)}},ee=async()=>{const{data:e,error:a}=await s.from("friend_requests").select("\n        *,\n        requester:profiles!friend_requests_requester_id_fkey(*)\n      ").eq("requested_id",v?.id).eq("status","pending").order("created_at",{ascending:!1});if(a)throw a;C(e||[])},se=async()=>{const{data:e,error:a}=await s.rpc("get_friends_with_dogs",{p_user_id:v?.id});if(a)throw a;$(e||[])},ae=async()=>{const{data:e,error:a}=await s.from("notifications").select("*").eq("user_id",v?.id).order("created_at",{ascending:!1}).limit(20);if(a)throw a;P(e||[]);const t=e?.filter((e=>!e.read))||[];t.length>0&&await s.from("notifications").update({read:!0}).in("id",t.map((e=>e.id)))},te=async()=>{const{data:e,error:a}=await s.from("latest_messages").select("\n        *,\n        sender:profiles!messages_sender_id_fkey(*)\n      ").or(`sender_id.eq.${v?.id},receiver_id.eq.${v?.id}`).order("created_at",{ascending:!1});if(a)throw a;L(e||[])},re=async()=>{const{data:e,error:a}=await s.from("dog_encounters").select("\n        *,\n        dog1:dogs!dog_encounters_dog1_id_fkey(*),\n        dog2:dogs!dog_encounters_dog2_id_fkey(*),\n        park:dog_parks(*)\n      ").order("encounter_date",{ascending:!1}).limit(10);if(a)throw a;G(e||[])},le=async()=>{const{data:e,error:a}=await s.from("dogs").select("*").eq("owner_id",v?.id);if(a)throw a;M(e||[])},ie=async()=>{const{data:e,error:a}=await s.from("dog_blacklist").select("\n        *,\n        blacklisted_dog:dogs!dog_blacklist_dog_id_fkey(\n          *,\n          owner:profiles!dogs_owner_id_fkey(*)\n        )\n      ").eq("user_id",v?.id).order("created_at",{ascending:!1});if(a)throw a;Y(e||[])},ce=async(e,a)=>{try{const{error:t}=await s.from("friend_requests").update({status:a?"accepted":"rejected",responded_at:(new Date).toISOString()}).eq("id",e);if(t)throw t;await ee(),a&&await se(),W(a?"友達リクエストを承認しました":"友達リクエストを拒否しました"),setTimeout((()=>W("")),3e3)}catch(t){U("リクエストの処理に失敗しました"),setTimeout((()=>U("")),3e3)}},ne=e=>{switch(e){case"friend_request":return a.jsx(m,{className:"w-5 h-5 text-blue-600"});case"friend_accepted":return a.jsx(_,{className:"w-5 h-5 text-green-600"});case"friend_at_park":return a.jsx(c,{className:"w-5 h-5 text-purple-600"});case"reservation_reminder":return a.jsx(N,{className:"w-5 h-5 text-orange-600"});case"blacklisted_dog_nearby":return a.jsx(n,{className:"w-5 h-5 text-red-600"});default:return a.jsx(x,{className:"w-5 h-5 text-gray-600"})}},de=e=>{switch(e){case"friend_request":return"bg-blue-50";case"friend_accepted":return"bg-green-50";case"friend_at_park":return"bg-purple-50";case"reservation_reminder":return"bg-orange-50";case"blacklisted_dog_nearby":return"bg-red-50";default:return"bg-gray-50"}},me=e=>"オス"===e?"くん":"ちゃん",xe=(e,s)=>{if(s&&s.length>0){const e=s[0];return`${e.name}${me(e.gender)}の飼い主さん`}return`${e?.name||"ユーザー"}さん`};return J?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("h1",{className:"text-2xl font-bold mb-8 flex items-center",children:[a.jsx(c,{className:"w-8 h-8 text-blue-600 mr-3"}),"コミュニティ"]}),R&&a.jsxs("div",{className:"mb-6 p-4 bg-red-50 rounded-lg flex items-start",children:[a.jsx(n,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),a.jsx("p",{className:"text-red-800",children:R})]}),V&&a.jsxs("div",{className:"mb-6 p-4 bg-green-50 rounded-lg flex items-start",children:[a.jsx(d,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0"}),a.jsx("p",{className:"text-green-800",children:V})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2",children:[a.jsxs("div",{className:"flex space-x-1 border-b mb-6 overflow-x-auto",children:[a.jsxs("button",{className:"px-4 py-2 font-medium relative whitespace-nowrap "+("friends"===k?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>q("friends"),children:[a.jsx(c,{className:"w-5 h-5 inline mr-1"}),"友達"]}),a.jsxs("button",{className:"px-4 py-2 font-medium relative whitespace-nowrap "+("requests"===k?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>q("requests"),children:[a.jsx(m,{className:"w-5 h-5 inline mr-1"}),"リクエスト",S.length>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:S.length})]}),a.jsxs("button",{className:"px-4 py-2 font-medium relative whitespace-nowrap "+("notifications"===k?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>q("notifications"),children:[a.jsx(x,{className:"w-5 h-5 inline mr-1"}),"通知",z.filter((e=>!e.read)).length>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:z.filter((e=>!e.read)).length})]}),a.jsxs("button",{className:"px-4 py-2 font-medium relative whitespace-nowrap "+("messages"===k?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>q("messages"),children:[a.jsx(o,{className:"w-5 h-5 inline mr-1"}),"メッセージ",T.filter((e=>!e.read&&e.receiver_id===v?.id)).length>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:T.filter((e=>!e.read&&e.receiver_id===v?.id)).length})]}),a.jsxs("button",{className:"px-4 py-2 font-medium relative whitespace-nowrap "+("blacklist"===k?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>q("blacklist"),children:[a.jsx(n,{className:"w-5 h-5 inline mr-1"}),"ブラックリスト",X.length>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:X.length})]})]}),"friends"===k&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"友達一覧"}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs(t,{variant:"secondary",size:"sm",onClick:()=>se(),children:[a.jsx(h,{className:"w-4 h-4 mr-1"}),"並び替え"]})})]}),0===D.length?a.jsxs(i,{className:"text-center py-8",children:[a.jsx(c,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"まだ友達がいません"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"同じドッグランで出会ったワンちゃんの飼い主さんと友達になれます"})]}):a.jsx("div",{className:"space-y-4",children:D.map((e=>a.jsx(i,{className:"p-4 hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:a.jsx(c,{className:"w-6 h-6 text-gray-500"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:xe(e.friend,e.friend_dogs)}),a.jsxs("p",{className:"text-sm text-gray-600",children:[e.dog_count,"頭のワンちゃんと一緒"]}),e.friend_dogs&&e.friend_dogs.length>0&&a.jsxs("div",{className:"flex items-center mt-1",children:[a.jsx(j,{className:"w-4 h-4 text-blue-600 mr-1"}),a.jsx("p",{className:"text-xs text-gray-500",children:e.friend_dogs.map((e=>`${e.name}${e.gender?me(e.gender):"ちゃん"}`)).join("、")})]})]})]}),a.jsxs(t,{size:"sm",onClick:()=>B(e),children:[a.jsx(o,{className:"w-4 h-4 mr-1"}),"メッセージ"]})]})},e.id)))})]}),"requests"===k&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"友達リクエスト"}),0===S.length?a.jsxs(i,{className:"text-center py-8",children:[a.jsx(m,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"リクエストはありません"}),a.jsx("p",{className:"text-gray-500",children:"同じドッグランで出会った人からのリクエストがここに表示されます"})]}):a.jsx("div",{className:"space-y-4",children:S.map((e=>a.jsx(i,{className:"p-4",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:a.jsx(c,{className:"w-6 h-6 text-gray-500"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold",children:[e.requester.name,"さんからのリクエスト"]}),a.jsx("p",{className:"text-sm text-gray-600",children:new Date(e.created_at).toLocaleDateString("ja-JP")}),e.message&&a.jsx("p",{className:"text-sm text-gray-700 mt-2 p-2 bg-gray-50 rounded",children:e.message})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs(t,{size:"sm",onClick:()=>ce(e.id,!0),children:[a.jsx(d,{className:"w-4 h-4 mr-1"}),"承認"]}),a.jsxs(t,{size:"sm",variant:"secondary",className:"text-red-600 hover:text-red-700",onClick:()=>ce(e.id,!1),children:[a.jsx(u,{className:"w-4 h-4 mr-1"}),"拒否"]})]})]})},e.id)))})]}),"blacklist"===k&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"ブラックリスト"}),0===X.length?a.jsxs(i,{className:"text-center py-8",children:[a.jsx(n,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"ブラックリストは空です"}),a.jsx("p",{className:"text-gray-500",children:"相性が悪いワンちゃんをブラックリストに登録すると、そのワンちゃんがドッグランに入った時に通知されます"})]}):a.jsx("div",{className:"space-y-4",children:X.map((e=>a.jsx(i,{className:"p-4 bg-red-50 border-red-200",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden",children:e.blacklisted_dog?.image_url?a.jsx("img",{src:e.blacklisted_dog.image_url,alt:e.blacklisted_dog.name,className:"w-full h-full object-cover"}):a.jsx(j,{className:"w-6 h-6 text-gray-500"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold text-red-900",children:[e.blacklisted_dog?.name,e.blacklisted_dog?.gender&&me(e.blacklisted_dog.gender)]}),a.jsxs("p",{className:"text-sm text-red-700",children:["飼い主: ",xe(e.blacklisted_dog?.owner,[e.blacklisted_dog])]}),a.jsxs("p",{className:"text-sm text-red-600 mt-1",children:["理由: ",e.reason]}),a.jsxs("p",{className:"text-xs text-red-500 mt-1",children:["登録日: ",new Date(e.created_at).toLocaleDateString("ja-JP")]})]})]}),a.jsxs(t,{size:"sm",variant:"secondary",className:"text-red-600 hover:text-red-700",onClick:()=>(async e=>{try{const{error:a}=await s.from("dog_blacklist").delete().eq("id",e);if(a)throw a;await ie(),W("ブラックリストから削除しました"),setTimeout((()=>W("")),3e3)}catch(a){U("ブラックリストからの削除に失敗しました"),setTimeout((()=>U("")),3e3)}})(e.id),children:[a.jsx(u,{className:"w-4 h-4 mr-1"}),"削除"]})]})},e.id)))})]}),"notifications"===k&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"通知"}),0===z.length?a.jsxs(i,{className:"text-center py-8",children:[a.jsx(x,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"通知はありません"}),a.jsx("p",{className:"text-gray-500",children:"友達リクエストや予約の通知がここに表示されます"})]}):a.jsx("div",{className:"space-y-4",children:z.map((e=>a.jsx(i,{className:`p-4 ${e.read?"":"border-l-4 border-blue-500"} ${de(e.type)}`,onClick:()=>!e.read&&(async e=>{try{const{error:a}=await s.from("notifications").update({read:!0}).eq("id",e);if(a)throw a;P((s=>s.map((s=>s.id===e?{...s,read:!0}:s))))}catch(a){}})(e.id),children:a.jsxs("div",{className:"flex items-start space-x-3",children:[ne(e.type),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold",children:e.title}),a.jsx("p",{className:"text-sm text-gray-700",children:e.message}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[new Date(e.created_at).toLocaleDateString("ja-JP")," ",new Date(e.created_at).toLocaleTimeString("ja-JP")]})]}),!e.read&&a.jsx("div",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:"新着"})]})},e.id)))})]}),"messages"===k&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"メッセージ"}),0===T.length?a.jsxs(i,{className:"text-center py-8",children:[a.jsx(o,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"メッセージはありません"}),a.jsx("p",{className:"text-gray-500",children:"友達とのメッセージがここに表示されます"})]}):a.jsx("div",{className:"space-y-4",children:T.map((e=>{const s=e.receiver_id===v?.id,t=s?e.sender:null;return a.jsx(i,{className:"p-4 "+(!e.read&&s?"border-l-4 border-blue-500":""),onClick:()=>B({id:e.id,friend_id:s?e.sender_id:e.receiver_id,friend:t||{id:"",name:"",user_type:"user",created_at:(new Date).toISOString()},dog_count:0,created_at:(new Date).toISOString()}),children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:a.jsx(c,{className:"w-5 h-5 text-gray-500"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("h3",{className:"font-semibold",children:[s?t?.name:"自分"," ","から"]}),a.jsx("p",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString("ja-JP")})]}),a.jsx("p",{className:"text-sm text-gray-700 mt-1",children:e.content})]}),!e.read&&s&&a.jsx("div",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:"未読"})]})},e.id)}))})]}),O&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsx("div",{className:"bg-white rounded-lg max-w-lg w-full",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h2",{className:"text-xl font-semibold",children:[O.friend.name,"さんとのメッセージ"]}),a.jsx("button",{onClick:()=>B(null),className:"text-gray-500 hover:text-gray-700",children:a.jsx(u,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"h-64 overflow-y-auto mb-4 p-3 bg-gray-50 rounded-lg",children:a.jsx("div",{className:"text-center text-gray-500 text-sm py-4",children:"メッセージ履歴はまだありません"})}),a.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[a.jsxs("h4",{className:"font-medium text-blue-900 mb-2 flex items-center",children:[a.jsx(g,{className:"w-4 h-4 mr-1"}),"施設貸し切り予約の共有"]}),a.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"施設貸し切り予約がある場合、友達にPINコードを共有できます"}),a.jsxs(t,{size:"sm",variant:"secondary",className:"w-full",onClick:()=>{alert("この機能は準備中です。施設貸し切り予約がある場合に利用できます。")},children:[a.jsx(f,{className:"w-3 h-3 mr-1"}),"予約を共有"]})]}),a.jsx("form",{onSubmit:async e=>{if(e.preventDefault(),O&&E.trim()){A(!0);try{const{error:e}=await s.from("messages").insert({sender_id:v?.id,receiver_id:O.friend_id,content:E.trim(),read:!1});if(e)throw e;await te(),K("")}catch(a){U("メッセージの送信に失敗しました"),setTimeout((()=>U("")),3e3)}finally{A(!1)}}},children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"text",value:E,onChange:e=>K(e.target.value),placeholder:"メッセージを入力...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),a.jsxs(t,{type:"submit",isLoading:Q,disabled:!E.trim(),children:[a.jsx(b,{className:"w-4 h-4 mr-1"}),"送信"]})]})})]})})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs(i,{className:"p-6",children:[a.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[a.jsx(j,{className:"w-5 h-5 text-blue-600 mr-2"}),"最近の出会い"]}),0===F.length?a.jsx("p",{className:"text-gray-600 text-sm",children:"まだ出会いの記録がありません"}):a.jsxs("div",{className:"space-y-4",children:[F.slice(0,5).map((e=>{const r=e.dog1.owner_id===v?.id?e.dog1:e.dog2,l=e.dog1.owner_id===v?.id?e.dog2:e.dog1,i=l.owner_id;return a.jsxs("div",{className:"flex items-start space-x-3 pb-3 border-b border-gray-100 last:border-b-0 last:pb-0",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden",children:l.image_url?a.jsx("img",{src:l.image_url,alt:l.name,className:"w-full h-full object-cover"}):a.jsx(j,{className:"w-5 h-5 text-gray-500"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"font-medium text-sm",children:[r.name,me(r.gender),"と",l.name,me(l.gender)]}),a.jsxs("div",{className:"flex space-x-1",children:[a.jsxs(t,{size:"sm",variant:"secondary",className:"text-xs px-2 py-1",onClick:()=>(async(e,a)=>{try{const{error:t}=await s.from("friend_requests").insert({requester_id:v?.id,requested_id:e,message:`${a}の飼い主さんと友達になりたいです！`});if(t)throw t;W("友達申請を送信しました"),setTimeout((()=>W("")),3e3)}catch(t){U("友達申請の送信に失敗しました"),setTimeout((()=>U("")),3e3)}})(i,l.name),children:[a.jsx(m,{className:"w-3 h-3 mr-1"}),"友達申請"]}),a.jsxs(t,{size:"sm",variant:"secondary",className:"text-xs px-2 py-1 text-red-600 hover:text-red-700",onClick:()=>{const e=prompt("ブラックリストに登録する理由を入力してください:");e&&(async(e,a)=>{try{const{error:t}=await s.from("dog_blacklist").insert({user_id:v?.id,dog_id:e,reason:a,notify_when_nearby:!0});if(t)throw t;await ie(),W("ブラックリストに追加しました"),setTimeout((()=>W("")),3e3)}catch(t){U("ブラックリストへの追加に失敗しました"),setTimeout((()=>U("")),3e3)}})(l.id,e)},children:[a.jsx(n,{className:"w-3 h-3 mr-1"}),"ブラックリスト"]})]})]}),a.jsxs("div",{className:"text-xs text-gray-500 space-y-1 mt-1",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(N,{className:"w-3 h-3 mr-1"}),a.jsx("span",{children:new Date(e.encounter_date).toLocaleDateString("ja-JP")})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(p,{className:"w-3 h-3 mr-1"}),a.jsx("span",{children:e.park.name})]})]})]})]},e.id)})),a.jsxs(t,{variant:"secondary",size:"sm",className:"w-full",children:["すべての出会いを見る",a.jsx(y,{className:"w-4 h-4 ml-1"})]})]})]}),a.jsxs(i,{className:"p-6",children:[a.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[a.jsx(w,{className:"w-5 h-5 text-pink-600 mr-2"}),"あなたのワンちゃん"]}),0===H.length?a.jsxs("div",{className:"text-center py-4",children:[a.jsx("p",{className:"text-gray-600 text-sm mb-3",children:"まだワンちゃんが登録されていません"}),a.jsx(l,{to:"/register-dog",children:a.jsx(t,{size:"sm",children:"ワンちゃんを登録"})})]}):a.jsxs("div",{className:"space-y-3",children:[H.map((e=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden",children:e.image_url?a.jsx("img",{src:e.image_url,alt:e.name,className:"w-full h-full object-cover"}):a.jsx(j,{className:"w-5 h-5 text-gray-500"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-medium text-sm",children:[e.name,me(e.gender)]}),a.jsx("p",{className:"text-xs text-gray-500",children:e.breed})]})]},e.id))),a.jsx(l,{to:"/register-dog",children:a.jsxs(t,{variant:"secondary",size:"sm",className:"w-full",children:[a.jsx(j,{className:"w-4 h-4 mr-1"}),"ワンちゃんを追加"]})})]})]}),a.jsxs(i,{className:"p-6 bg-blue-50 border-blue-200",children:[a.jsx("h2",{className:"text-lg font-semibold mb-3 text-blue-900",children:"コミュニティガイド"}),a.jsxs("div",{className:"space-y-3 text-sm text-blue-800",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"友達申請について:"}),a.jsx("br",{}),"同じドッグランで出会ったワンちゃんの飼い主さんとのみ友達になれます。"]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"メッセージ機能:"}),a.jsx("br",{}),"友達になった方とメッセージのやり取りができます。次回の予約を調整したり、ワンちゃんの情報を共有したりしましょう。"]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"通知機能:"}),a.jsx("br",{}),"友達リクエストや予約の通知が届きます。友達のワンちゃんが近くのドッグランにいる場合も通知されます。"]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"ブラックリスト機能:"}),a.jsx("br",{}),"相性が悪いワンちゃんをブラックリストに登録すると、そのワンちゃんがドッグランに入った時に通知されます。"]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"施設共有機能:"}),a.jsx("br",{}),"施設貸し切り予約をした場合、友達を誘ってPINコードを共有することができます。"]})]})]})]})]})]})}export{v as Community};
