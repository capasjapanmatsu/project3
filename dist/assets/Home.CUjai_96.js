/*! Build: 2025-07-17T07:59:15.523Z
Version: 0.0.0 */
import{r as e,j as s,n as a,M as t,o as n,p as r,s as i,aZ as l,ad as o,aq as c,a7 as d,R as m,i as x,aE as h,l as u,m as g,F as f,B as j,J as b,P as p}from"./vendor-react.D8SVeCGP.js";import{g as N}from"./hooks.CTtJlocA.js";import{B as y,C as w,u as v}from"./components-admin.GT3qRZg5.js";import{j as k,s as I}from"./utils.C9ZsMnW6.js";import"./vendor-misc.qnLj5toF.js";import"./vendor-stripe.B5MJ2ewd.js";import"./pages-dog.BrfoFXaJ.js";import"./vendor-supabase.RBPF72ft.js";const D=e.forwardRef((({children:e,animation:a="fadeIn",duration:t="normal",easing:n="ease-out",delay:r=0,repeat:i=!1,triggerOnce:l=!0,threshold:o=.1,as:c="div",respectReducedMotion:d=!0,fallbackAnimation:m="fadeIn",className:x="",...h},u)=>{const{prefersReducedMotion:g}=N(),f=d&&g,j=r>0?{animationDelay:`${r}ms`}:{},b=`${[{fadeIn:f?"opacity-100 transition-opacity":"opacity-0 animate-fade-in",slideUp:f?"transform-none transition-transform":"transform translate-y-4 animate-slide-up",slideDown:f?"transform-none transition-transform":"transform -translate-y-4 animate-slide-down",slideLeft:f?"transform-none transition-transform":"transform translate-x-4 animate-slide-left",slideRight:f?"transform-none transition-transform":"transform -translate-x-4 animate-slide-right",scale:f?"transform-none transition-transform":"transform scale-95 animate-scale-in",bounce:f?"transform-none":"animate-bounce",pulse:f?"opacity-100":"animate-pulse",spin:f?"transform-none":"animate-spin"}[f?m:a],{fast:"duration-200",normal:"duration-500",slow:"duration-1000"}[t],{linear:"ease-linear",ease:"ease","ease-in":"ease-in","ease-out":"ease-out","ease-in-out":"ease-in-out"}[n],!0===i?"animation-iteration-count-infinite":"number"==typeof i?`animation-iteration-count-${i}`:"","transition-all"].filter(Boolean).join(" ")} ${x}`.trim(),p=c;return s.jsx(p,{ref:u,className:b,style:{...j,...h.style},"aria-hidden":f?void 0:"false",...h,children:e})}));D.displayName="AnimatedElement";const M=e.forwardRef(((e,a)=>s.jsx(D,{ref:a,animation:"fadeIn",...e})));M.displayName="FadeIn";const R=e.forwardRef(((e,a)=>s.jsx(D,{ref:a,animation:"slideUp",...e})));R.displayName="SlideUp",e.forwardRef(((e,a)=>s.jsx(D,{ref:a,animation:"scale",...e}))).displayName="ScaleIn";const _=({isLoggedIn:e})=>{const l=[{icon:s.jsx(t,{className:"h-12 w-12 text-blue-600 mx-auto mb-4 group-hover:scale-110 transition-transform"}),title:"ç°¡å˜æ¤œç´¢",description:"ãŠè¿‘ãã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’ç°¡å˜ã«è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™",linkTo:"/parks",color:"text-blue-600"},{icon:s.jsx(n,{className:"h-12 w-12 text-purple-600 mx-auto mb-4 group-hover:scale-110 transition-transform"}),title:"ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£",description:"æ„›çŠ¬å®¶åŒå£«ã§äº¤æµã‚’æ·±ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™",linkTo:e?"/community":"/login",color:"text-purple-600"},{icon:s.jsx(r,{className:"h-12 w-12 text-orange-600 mx-auto mb-4 group-hover:scale-110 transition-transform"}),title:"äºˆç´„ç®¡ç†",description:"æ–½è¨­ã®äºˆç´„ã‚’ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§ç°¡å˜ã«ç®¡ç†",linkTo:e?"/dashboard":"/login",color:"text-orange-600"},{icon:s.jsx(i,{className:"h-12 w-12 text-green-600 mx-auto mb-4 group-hover:scale-110 transition-transform"}),title:"ãƒšãƒƒãƒˆã‚·ãƒ§ãƒƒãƒ—",description:"ãƒšãƒƒãƒˆç”¨å“ã‚’ãƒ¯ãƒ³ã‚¿ãƒƒãƒã§ç°¡å˜æ³¨æ–‡",linkTo:"/shop",color:"text-green-600"}];return s.jsx("section",{className:"grid md:grid-cols-4 gap-8 mt-12",children:l.map(((e,t)=>s.jsxs(a,{to:e.linkTo,className:"text-center p-6 hover:bg-gray-50 rounded-lg transition-colors cursor-pointer group",children:[e.icon,s.jsx("h3",{className:"text-xl font-semibold mb-2",children:e.title}),s.jsx("p",{className:"text-gray-600",children:e.description})]},t)))})},L=({isLoggedIn:e})=>e?s.jsxs("section",{className:"text-center py-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"ãŠã‹ãˆã‚Šãªã•ã„ï¼"}),s.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"ä»Šæ—¥ã‚‚æ„›çŠ¬ã¨ç´ æ•µãªæ™‚é–“ã‚’ãŠéã”ã—ãã ã•ã„"}),s.jsxs("div",{className:"flex justify-center space-x-4",children:[s.jsx(a,{to:"/parks",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’æ¢ã™"}),s.jsx(a,{to:"/dashboard",className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors font-medium",children:"ãƒã‚¤ãƒšãƒ¼ã‚¸"})]})]}):s.jsxs("section",{className:"text-center py-12",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"æ„›çŠ¬ã¨ã®ãŠæ•£æ­©ã‚’ã€ã‚‚ã£ã¨æ¥½ã—ã"}),s.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"è¿‘ãã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’è¦‹ã¤ã‘ã¦ã€æ–°ã—ã„å‡ºä¼šã„ã‚’è¦‹ã¤ã‘ã¾ã—ã‚‡ã†"}),s.jsxs("div",{className:"flex justify-center space-x-4",children:[s.jsx(a,{to:"/register",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"ç„¡æ–™ã§å§‹ã‚ã‚‹"}),s.jsx(a,{to:"/magic-link",className:"bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors font-medium",children:"Magic Linkã§ç°¡å˜ãƒ­ã‚°ã‚¤ãƒ³"})]})]}),S=l.memo((({recentDogs:a,isOffline:t,isLoading:n=!1})=>{const r=e.useMemo((()=>[...a,...a]),[a]),i=e.useMemo((()=>Array.isArray(a)&&a.length>0),[a]);return s.jsxs("section",{className:"bg-gray-50 p-6 rounded-lg",children:[s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[s.jsx(o,{className:"w-6 h-6 text-blue-600 mr-2"}),"æœ€è¿‘ä»²é–“å…¥ã‚Šã—ã¾ã—ãŸï¼"]}),s.jsx("div",{className:"absolute -top-10 -left-16",children:s.jsx("div",{className:"bg-yellow-100 rounded-full px-4 py-2 text-yellow-800 font-bold transform -rotate-12",children:"New"})})]})}),s.jsx("div",{className:"overflow-hidden w-full relative",style:{height:140},children:n?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"text-gray-600",children:"æ–°ã—ã„ä»²é–“ã‚’æ¢ã—ã¦ã„ã¾ã™..."})]})}):i?s.jsx("div",{className:"flex items-center whitespace-nowrap",style:{width:"max-content",animation:"marquee 45s linear infinite",willChange:"transform",transform:"translateZ(0)"},children:r.map(((e,a)=>s.jsx(C,{dog:e},`${e.id}-${a}`)))}):s.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 text-center",children:s.jsxs("div",{children:[s.jsx(o,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),s.jsx("p",{className:"text-lg font-medium",children:t?"ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ä¸­ã§ã™":"æ–°ã—ã„ä»²é–“ã‚’å‹Ÿé›†ä¸­ï¼"}),s.jsx("p",{className:"text-sm mt-1",children:t?"æ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„":"ãƒ¯ãƒ³ã¡ã‚ƒã‚“ã®ç™»éŒ²ã‚’ãŠå¾…ã¡ã—ã¦ã„ã¾ã™"}),!t&&s.jsx("p",{className:"text-xs mt-2 text-gray-400",children:"ç™»éŒ²ã•ã‚ŒãŸãƒ¯ãƒ³ã¡ã‚ƒã‚“ãŒã„ã¾ã›ã‚“"}),s.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["Debug: dogs=",(null==a?void 0:a.length)||0,", offline=",t?"true":"false",", loading=",n?"true":"false"]})]})})}),s.jsx("style",{children:"\n          @keyframes marquee {\n            0% {\n              transform: translateX(0) translateZ(0);\n            }\n            100% {\n              transform: translateX(-50%) translateZ(0);\n            }\n          }\n          \n          /* GPUã‚¢ã‚¯ã‚»ãƒ©ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã®æœ€é©åŒ– */\n          .marquee-container {\n            backface-visibility: hidden;\n            -webkit-backface-visibility: hidden;\n            -moz-backface-visibility: hidden;\n            -ms-backface-visibility: hidden;\n            -webkit-transform: translateZ(0);\n            -moz-transform: translateZ(0);\n            -ms-transform: translateZ(0);\n            transform: translateZ(0);\n          }\n        "})]})})),C=l.memo((({dog:a})=>{const[t,n]=e.useState(!1),[r,i]=e.useState(!1),l=e.useMemo((()=>a.image_url?a.image_url.includes("supabase")?`${a.image_url}?width=80&height=80&quality=80`:a.image_url:null),[a.image_url]);return e.useEffect((()=>{l&&((new Image).src=l)}),[l]),s.jsxs("div",{className:"inline-block mx-4 text-center",style:{width:100,flexShrink:0},children:[s.jsxs("div",{className:"relative w-20 h-20 mx-auto mb-2 bg-gray-200 rounded-full overflow-hidden",children:[!t&&!r&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:s.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})}),l&&!r?s.jsx("img",{src:l,alt:a.name,className:"w-full h-full object-cover transition-opacity duration-200 "+(t?"opacity-100":"opacity-0"),onLoad:()=>{n(!0)},onError:()=>{i(!0),n(!0)},loading:"eager",decoding:"sync",width:80,height:80}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-2xl",children:"ğŸ•"})]}),s.jsx("div",{className:"text-xs text-gray-600 truncate font-medium",children:a.name}),s.jsx("div",{className:"text-xs text-gray-500 truncate",children:a.breed})]})}));S.displayName="MarqueeDogsSection",C.displayName="DogCard";const E=({isOffline:e,networkError:a,onRetryConnection:t})=>a?s.jsx("div",{className:"border rounded-lg p-4 mb-6 "+(e?"bg-orange-50 border-orange-200":"bg-red-50 border-red-200"),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[e?s.jsx(c,{className:"w-6 h-6 text-orange-600"}):s.jsx(d,{className:"w-6 h-6 text-red-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium "+(e?"text-orange-800":"text-red-800"),children:e?"ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰":"æ¥ç¶šã‚¨ãƒ©ãƒ¼"}),s.jsx("p",{className:"text-sm whitespace-pre-line "+(e?"text-orange-700":"text-red-700"),children:a})]})]}),s.jsxs(y,{onClick:t,size:"sm",className:(e?"bg-orange-600 hover:bg-orange-700":"bg-red-600 hover:bg-red-700")+" text-white",children:[s.jsx(m,{className:"w-4 h-4 mr-2"}),"å†æ¥ç¶š"]})]})}):null,$=({news:e,isOffline:t,isLoading:n,onRetryConnection:r})=>{const i=e=>{switch(e){case"news":return s.jsx(f,{className:"w-4 h-4"});case"announcement":return s.jsx(g,{className:"w-4 h-4"});case"sale":return s.jsx(u,{className:"w-4 h-4"});default:return s.jsx(x,{className:"w-4 h-4"})}},l=e=>({news:"ãŠçŸ¥ã‚‰ã›",announcement:"é‡è¦ãªãŠçŸ¥ã‚‰ã›",sale:"ã‚»ãƒ¼ãƒ«æƒ…å ±"}[e]||e),o=({message:e})=>s.jsx(w,{className:"p-4",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx(c,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:e}),s.jsxs(y,{onClick:r,size:"sm",variant:"secondary",className:"mt-2",children:[s.jsx(m,{className:"w-4 h-4 mr-2"}),"å†æ¥ç¶š"]})]})}),d=()=>s.jsx(w,{className:"p-4",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),s.jsx("p",{children:"æ–°ç€æƒ…å ±ã‚’èª­ã¿è¾¼ã¿ä¸­..."})]})}),j=()=>s.jsx(w,{className:"p-4",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx(x,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"ç¾åœ¨ã€è¡¨ç¤ºã§ãã‚‹æ–°ç€æƒ…å ±ã¯ã‚ã‚Šã¾ã›ã‚“"}),s.jsxs(y,{onClick:r,size:"sm",variant:"secondary",className:"mt-2",children:[s.jsx(m,{className:"w-4 h-4 mr-2"}),"å†èª­ã¿è¾¼ã¿"]})]})});return s.jsxs("section",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center",children:[s.jsx(x,{className:"w-5 h-5 text-blue-600 mr-2"}),"æ–°ç€æƒ…å ±"]}),s.jsxs(a,{to:"/news",className:"text-blue-600 hover:text-blue-800 flex items-center text-sm",children:["ã™ã¹ã¦è¦‹ã‚‹",s.jsx(h,{className:"w-4 h-4 ml-1"})]})]}),s.jsx("div",{className:"space-y-3",children:t?s.jsx(o,{message:"ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ï¼šæ–°ç€æƒ…å ±ã‚’èª­ã¿è¾¼ã‚ã¾ã›ã‚“"}):n?s.jsx(d,{}):0===e.length?s.jsx(j,{}):e.slice(0,2).map((e=>{return s.jsx(a,{to:`/news/${e.id}`,children:s.jsx(w,{className:"p-3 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium flex items-center ${n=e.category,{news:"bg-blue-100 text-blue-800",announcement:"bg-red-100 text-red-800",sale:"bg-green-100 text-green-800"}[n]||"bg-gray-100 text-gray-800"}`,children:[i(e.category),s.jsx("span",{className:"ml-1",children:l(e.category)})]}),e.is_important&&s.jsx("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium",children:"é‡è¦"})]}),s.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:e.title}),e.content&&s.jsx("p",{className:"text-sm text-gray-600 line-clamp-1 mb-1",children:e.content}),s.jsx("p",{className:"text-xs text-gray-500",children:(t=e.created_at,new Date(t).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}))})]}),s.jsx(h,{className:"w-4 h-4 text-gray-400 ml-4"})]})})},e.id);var t,n}))}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx(a,{to:"/news",children:s.jsxs(y,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",children:["ã™ã¹ã¦ã®æ–°ç€æƒ…å ±ã‚’è¦‹ã‚‹",s.jsx(h,{className:"w-4 h-4 ml-2"})]})})})]})},O=()=>{const{user:e}=v();return s.jsx("section",{className:"relative overflow-hidden",children:s.jsxs("div",{className:"bg-gradient-to-r from-green-600 via-blue-600 to-purple-600 text-white p-8 rounded-xl shadow-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-white/20 p-3 rounded-full",children:s.jsx(j,{className:"w-8 h-8"})}),s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold mb-2 flex items-center",children:[s.jsx(b,{className:"w-6 h-6 mr-2"}),"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚ªãƒ¼ãƒŠãƒ¼å‹Ÿé›†ä¸­ï¼"]}),s.jsx("p",{className:"text-lg opacity-90",children:"ã‚ãªãŸã®åœŸåœ°ã‚’ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã¨ã—ã¦æ´»ç”¨ã—ã¾ã›ã‚“ã‹ï¼Ÿåç›ŠåŒ–ã®ãƒãƒ£ãƒ³ã‚¹ã§ã™"})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx(a,{to:e?"/park-registration-agreement":"/register",children:s.jsxs(y,{className:"bg-white hover:bg-gray-100 text-purple-700 font-bold px-6 py-3 text-lg shadow-md",children:[s.jsx(p,{className:"w-5 h-5 mr-2"}),e?"ã‚ªãƒ¼ãƒŠãƒ¼å¥‘ç´„ã«é€²ã‚€":"ã‚ªãƒ¼ãƒŠãƒ¼ç™»éŒ²"]})}),s.jsx("p",{className:"text-sm opacity-80 mt-2",children:"åˆæœŸè²»ç”¨ç„¡æ–™ãƒ»ã‚µãƒãƒ¼ãƒˆå……å®Ÿ"})]})]}),s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full -ml-12 -mb-12"})]})})},A=()=>s.jsxs(s.Fragment,{children:[s.jsx("section",{className:"bg-blue-50 p-6 rounded-lg",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-4",children:"ã”åˆ©ç”¨å‰ã«å¿…ãšãŠèª­ã¿ãã ã•ã„"}),s.jsx("p",{className:"text-blue-800 mb-4",children:"å®‰å…¨ã§æ¥½ã—ã„ãƒ‰ãƒƒã‚°ãƒ©ãƒ³åˆ©ç”¨ã®ãŸã‚ã€åˆ©ç”¨ãƒ«ãƒ¼ãƒ«ã‚’ã”ç¢ºèªãã ã•ã„"}),s.jsx(a,{to:"/parks/rules",children:s.jsxs(y,{className:"bg-blue-600 hover:bg-blue-700",children:[s.jsx(f,{className:"w-4 h-4 mr-2"}),"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³åˆ©ç”¨ãƒ«ãƒ¼ãƒ«ã‚’ç¢ºèª"]})})]})}),s.jsxs("section",{className:"bg-blue-50 p-6 rounded-lg",children:[s.jsx("h2",{className:"text-2xl font-bold text-center text-blue-900 mb-6",children:"æ–™é‡‘ä½“ç³»"}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"å˜ç™ºåˆ©ç”¨"}),s.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"Â¥800"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"1å›ã®åˆ©ç”¨æ–™é‡‘"}),s.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[s.jsx("li",{children:"â€¢ æœ€å¤§3æ™‚é–“ã¾ã§"}),s.jsx("li",{children:"â€¢ æ„›çŠ¬3é ­ã¾ã§"}),s.jsx("li",{children:"â€¢ å…¨å›½ã®ææºæ–½è¨­ã§åˆ©ç”¨å¯èƒ½"})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-blue-600 text-white p-6 rounded-lg shadow-lg transform scale-105",children:[s.jsx("h3",{className:"text-xl font-semibold mb-3",children:"ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³"}),s.jsxs("div",{className:"text-3xl font-bold mb-2",children:["Â¥3,800",s.jsx("span",{className:"text-lg",children:"/æœˆ"})]}),s.jsx("p",{className:"mb-4 opacity-90",children:"ä½¿ã„æ”¾é¡Œãƒ—ãƒ©ãƒ³"}),s.jsxs("ul",{className:"text-sm space-y-1 opacity-90",children:[s.jsx("li",{children:"â€¢ å…¨å›½ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ä½¿ã„æ”¾é¡Œ"}),s.jsx("li",{children:"â€¢ ãƒšãƒƒãƒˆã‚·ãƒ§ãƒƒãƒ—10%OFF"}),s.jsx("li",{children:"â€¢ å„ªå…ˆäºˆç´„æ¨©"}),s.jsx("li",{children:"â€¢ å°‚ç”¨ã‚µãƒãƒ¼ãƒˆ"})]}),s.jsx("div",{className:"mt-4",children:s.jsx("span",{className:"bg-white text-purple-600 px-3 py-1 rounded-full text-xs font-medium",children:"ãŠã™ã™ã‚"})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"æ–½è¨­è²¸ã—åˆ‡ã‚Š"}),s.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:"Â¥4,400"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"1æ™‚é–“ã®è²¸ã—åˆ‡ã‚Šæ–™é‡‘"}),s.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[s.jsx("li",{children:"â€¢ å®Œå…¨ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆç©ºé–“"}),s.jsx("li",{children:"â€¢ æ„›çŠ¬åˆ¶é™ãªã—"}),s.jsx("li",{children:"â€¢ ã‚¤ãƒ™ãƒ³ãƒˆãƒ»ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼ã«æœ€é©"})]})]})]}),s.jsx("div",{className:"text-center mt-8",children:s.jsx(a,{to:"/register",children:s.jsx(y,{className:"bg-blue-600 hover:bg-blue-700 text-lg px-8 py-3",children:"ä»Šã™ãå§‹ã‚ã‚‹"})})})]})]});function U(){const{user:a}=v(),[t,n]=e.useState([]),[r,i]=e.useState([]),[l,o]=e.useState(!1),[c,d]=e.useState(null),[m,x]=e.useState(!0),[h,u]=e.useState(!0),{isMobile:g,prefersReducedMotion:f}=N();e.useEffect((()=>{const e=()=>{o(!1),d(null)},s=()=>{o(!0),d("ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šãŒåˆ‡æ–­ã•ã‚Œã¾ã—ãŸã€‚\nã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰ã§è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚")};return window.addEventListener("online",e),window.addEventListener("offline",s),navigator.onLine||s(),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",s)}}),[]);const j=6e5,b=e.useMemo((()=>new Map),[]),p=e.useCallback((e=>{const s=b.get(e);return s&&Date.now()-s.timestamp<j?s.data:(s&&b.delete(e),null)}),[b,j]),y=e.useCallback(((e,s)=>{b.set(e,{data:s,timestamp:Date.now()});try{localStorage.setItem(`dogpark_cache_${e}`,JSON.stringify({data:s,timestamp:Date.now()}))}catch(a){}}),[b]);e.useEffect((()=>{try{const e=localStorage.getItem("dogpark_cache_recentDogs");if(e){const s=JSON.parse(e);Date.now()-s.timestamp<j&&(b.set("recentDogs",s),n(s.data),x(!1),k.info("âœ… ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å¾©å…ƒ:",s.data.length,"åŒ¹"))}}catch(e){}}),[b,j]);const w=e.useCallback((async()=>{try{k.info("ğŸ• æœ€è¿‘ä»²é–“å…¥ã‚Šã—ãŸãƒ¯ãƒ³ã¡ã‚ƒã‚“ã‚’å–å¾—ä¸­...");const e=p("recentDogs");if(e)return k.info("âœ… ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰æœ€è¿‘ä»²é–“å…¥ã‚Šã—ãŸãƒ¯ãƒ³ã¡ã‚ƒã‚“ã‚’å–å¾—:",e.length,"åŒ¹"),n(e),x(!1),e;x(!0),d(null),k.info("ğŸ” ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ç›´æ¥å–å¾—...");const{data:s,error:a}=await I.from("dogs").select("id, owner_id, name, breed, birth_date, gender, image_url, created_at").order("created_at",{ascending:!1}).limit(8);if(a)return k.warn("âŒ Database error:",a),n([]),x(!1),[];k.info("âœ… æœ€è¿‘ä»²é–“å…¥ã‚Šã—ãŸãƒ¯ãƒ³ã¡ã‚ƒã‚“å–å¾—æˆåŠŸ:",(null==s?void 0:s.length)||0,"åŒ¹");const t=s||[];return n(t),y("recentDogs",t),x(!1),t}catch(e){return k.warn("âŒ Error fetching recent dogs:",e),n([]),x(!1),[]}}),[p,y]),C=e.useCallback((async()=>{try{k.info("ğŸ“° æ–°ç€æƒ…å ±ã‚’å–å¾—ä¸­...");const e=p("news");if(e)return k.info("âœ… ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰æ–°ç€æƒ…å ±ã‚’å–å¾—:",e.length,"ä»¶"),i(e),e;u(!0);const{data:s,error:a}=await I.from("news_announcements").select("*").order("created_at",{ascending:!1}).limit(5);if(a)return k.error("âŒ æ–°ç€æƒ…å ±å–å¾—ã‚¨ãƒ©ãƒ¼:",a),i([]),[];k.info("âœ… æ–°ç€æƒ…å ±å–å¾—æˆåŠŸ:",(null==s?void 0:s.length)||0,"ä»¶");const t=s||[];return i(t),y("news",t),t}catch(e){return k.error("âŒ æ–°ç€æƒ…å ±å–å¾—ä¾‹å¤–:",e),i([]),[]}finally{u(!1),k.info("ğŸ“° æ–°ç€æƒ…å ±å–å¾—å‡¦ç†å®Œäº†")}}),[p,y]),U=e.useCallback((async()=>{k.info("ğŸš€ é«˜é€Ÿãƒ‡ãƒ¼ã‚¿å–å¾—ã‚’é–‹å§‹...");const e=Date.now();try{const s=new Promise(((e,s)=>{setTimeout((()=>s(new Error("Timeout"))),8e3)})),a=Promise.all([w(),C()]),[t,n]=await Promise.race([a,s]),r=Date.now();return k.info(`âœ… é«˜é€Ÿãƒ‡ãƒ¼ã‚¿å–å¾—å®Œäº†: ${r-e}ms`),{dogs:t,news:n}}catch(s){k.error("âŒ ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼:",s);const e={dogs:[],news:[]};try{const s=await w();e.dogs=s}catch(a){k.warn("çŠ¬ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—:",a)}try{const s=await C();e.news=s}catch(t){k.warn("ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—:",t)}return e}}),[w,C]);e.useEffect((()=>{0===t.length&&0===r.length&&U()}),[U,t.length,r.length]);const Z=e.useCallback((async()=>{b.clear(),await U()}),[U,b]),F=g?"fast":"normal",T=f?0:25,q=e.useMemo((()=>!!a),[a]);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"min-h-screen bg-gray-50",role:"main",children:[s.jsx(M,{duration:"fast",children:s.jsx(E,{isOffline:l,networkError:c,onRetryConnection:Z})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("section",{id:"hero-section","aria-label":"ãƒ¡ã‚¤ãƒ³ãƒ’ãƒ¼ãƒ­ãƒ¼",className:"focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-lg",tabIndex:-1,children:s.jsx(R,{duration:F,delay:0*T,children:s.jsx(L,{isLoggedIn:q})})}),s.jsx("section",{id:"news-section","aria-labelledby":"news-heading",className:"focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-lg",tabIndex:-1,children:s.jsxs(D,{animation:"slideUp",duration:F,delay:1*T,respectReducedMotion:!0,fallbackAnimation:"fadeIn",children:[s.jsx("h2",{id:"news-heading",className:"sr-only",children:"æ–°ç€æƒ…å ±ã¨ãŠçŸ¥ã‚‰ã›"}),s.jsx($,{isOffline:l,onRetryConnection:Z,news:r,isLoading:h})]})}),s.jsx("section",{"aria-label":"æœ€è¿‘ç™»éŒ²ã•ã‚ŒãŸæ„›çŠ¬ãŸã¡",className:"focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-lg",tabIndex:-1,children:s.jsx(D,{animation:"slideUp",duration:F,delay:2*T,respectReducedMotion:!0,fallbackAnimation:"fadeIn",children:s.jsx(S,{recentDogs:t,isOffline:l,isLoading:m})})}),s.jsxs("main",{id:"main-content",className:"space-y-12 py-8",children:[s.jsx("section",{id:"features-section","aria-labelledby":"features-heading",className:"focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-lg",tabIndex:-1,children:s.jsxs(D,{animation:"slideUp",duration:F,delay:3*T,respectReducedMotion:!0,fallbackAnimation:"fadeIn",children:[s.jsx("h2",{id:"features-heading",className:"sr-only",children:"ã‚¢ãƒ—ãƒªã®ä¸»ãªæ©Ÿèƒ½"}),s.jsx(_,{isLoggedIn:q})]})}),s.jsx(D,{animation:"slideUp",duration:F,delay:4*T,respectReducedMotion:!0,fallbackAnimation:"fadeIn",children:s.jsx(O,{})}),s.jsx("section",{id:"usage-rules","aria-labelledby":"usage-heading",className:"focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-lg",tabIndex:-1,children:s.jsxs(D,{animation:"slideUp",duration:F,delay:5*T,respectReducedMotion:!0,fallbackAnimation:"fadeIn",children:[s.jsx("h2",{id:"usage-heading",className:"sr-only",children:"åˆ©ç”¨æ–¹æ³•ã¨æ–™é‡‘ã«ã¤ã„ã¦"}),s.jsx(A,{})]})})]})]})]}),s.jsxs("div",{"aria-live":"polite","aria-atomic":"true",className:"sr-only",id:"status-region",children:[l&&"ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰ã§ã™ã€‚",c&&"ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã„ã¾ã™ã€‚",m&&"ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™ã€‚"]}),s.jsx("div",{"aria-live":"assertive","aria-atomic":"true",className:"sr-only",id:"announcement-region"})]})}export{U as Home};
