import{j as e,A as Le,v as le,F as L,p as oe,a4 as ce,aO as ie,aP as de,b as O,ah as me,i as xe,c as ge,U as ue,x as $e,t as Ae,a0 as he,X as _e}from"./ui-vendor-FlUr4cJt.js";import{u as De,r as m,L as Te}from"./react-vendor-_GyjDmDn.js";import{u as Me,C as j,B as N,s as c}from"./index-BSYT0262.js";import{I as pe}from"./Input-wBkmcJUR.js";import{S as $}from"./Select-BEASmsUK.js";import{a as Pe}from"./useAdminData-BwucJWVJ.js";import"./supabase-vendor-Df9iqQzW.js";function Ke(){const{isAdmin:B}=Me(),z=De(),[E,k]=m.useState("applications"),[p,S]=m.useState([]),[qe,fe]=m.useState([]),[A,ye]=m.useState([]),[D,V]=m.useState([]),[T,K]=m.useState([]),[ve,M]=m.useState(!0),[Q,f]=m.useState(""),[W,y]=m.useState(""),[d,X]=m.useState(""),[x,H]=m.useState("all"),[v,J]=m.useState("created_at"),[g,G]=m.useState("desc"),[w,I]=m.useState(null),_=Pe("parks"),we=async s=>{if(s.length===0)return new Map;try{const{data:l,error:t}=await c.from("dog_parks").select(`
          id,
          description,
          price,
          max_capacity,
          large_dog_area,
          small_dog_area,
          private_booths,
          facilities,
          facility_details,
          private_booth_count,
          image_url,
          cover_image_url,
          average_rating,
          review_count
        `).in("id",s);if(t)return console.error("âŒ ãƒ‘ãƒ¼ã‚¯è©³ç´°æƒ…å ±å–å¾—ã‚¨ãƒ©ãƒ¼:",t),new Map;const a=new Map;return(l||[]).forEach(r=>{a.set(r.id,r)}),a}catch(l){return console.error("âŒ ãƒ‘ãƒ¼ã‚¯è©³ç´°æƒ…å ±å–å¾—ã‚¨ãƒ©ãƒ¼:",l),new Map}},be=async s=>{if(s.length===0)return new Map;try{const{data:l,error:t}=await c.from("dog_park_facility_images").select(`
          id,
          park_id,
          image_type,
          image_url,
          is_approved,
          admin_notes,
          created_at
        `).in("park_id",s);if(t)return console.error("âŒ è¨­å‚™ç”»åƒå–å¾—ã‚¨ãƒ©ãƒ¼:",t),new Map;const a=new Map;return(l||[]).forEach(r=>{a.has(r.park_id)||a.set(r.park_id,[]),a.get(r.park_id).push(r)}),a}catch(l){return console.error("âŒ è¨­å‚™ç”»åƒå–å¾—ã‚¨ãƒ©ãƒ¼:",l),new Map}},Y=async()=>{try{const{data:s,error:l}=await c.from("dog_parks").select(`
          *,
          profiles:owner_id (
            name,
            address,
            phone_number,
            email,
            postal_code
          )
        `).eq("status","approved").order("created_at",{ascending:!1});return l?(console.error("âŒ æ‰¿èªæ¸ˆã¿ãƒ‘ãƒ¼ã‚¯å–å¾—ã‚¨ãƒ©ãƒ¼:",l),[]):s.map(a=>{const r=Array.isArray(a.profiles)?a.profiles[0]:a.profiles;return se({id:a.id,name:a.name,address:a.address,status:a.status,created_at:a.created_at,owner_id:a.owner_id,owner_name:r?.name||"Unknown",owner_email:r?.email||"Unknown",owner_phone_number:r?.phone_number||"",owner_address:r?.address||"",identity_document_url:"",identity_document_filename:"",identity_status:"approved",identity_created_at:""},a,[])})}catch(s){return console.error("âŒ æ‰¿èªæ¸ˆã¿ãƒ‘ãƒ¼ã‚¯å–å¾—ã‚¨ãƒ©ãƒ¼:",s),[]}},Z=(s,l,t)=>{I({url:s,type:l,parkName:t})},P=()=>{I(null)},je=s=>{s.key==="Escape"&&P()},q=s=>{y(s),f(""),setTimeout(()=>y(""),5e3)},o=s=>{f(s),y(""),setTimeout(()=>f(""),8e3)},ee=async s=>{if(window.confirm("ã“ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ç”³è«‹ã‚’å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚"))try{f(""),y(""),console.log("ðŸ—‘ï¸ é–¢é€£ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’å‰Šé™¤ä¸­...");try{const{error:t}=await c.from("news_announcements").delete().eq("park_id",s);if(t){console.error("âŒ ãƒ‹ãƒ¥ãƒ¼ã‚¹å‰Šé™¤ã‚¨ãƒ©ãƒ¼:",t),o(`ãƒ‹ãƒ¥ãƒ¼ã‚¹ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ: ${t.message}`);return}console.log("âœ… ãƒ‹ãƒ¥ãƒ¼ã‚¹å‰Šé™¤å®Œäº†")}catch(t){console.error("âŒ ãƒ‹ãƒ¥ãƒ¼ã‚¹å‰Šé™¤å‡¦ç†ã‚¨ãƒ©ãƒ¼:",t),o("ãƒ‹ãƒ¥ãƒ¼ã‚¹å‰Šé™¤å‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚");return}try{const{error:t}=await c.from("new_park_openings").delete().eq("park_id",s);if(t){console.error("âŒ æ–°è¦é–‹åœ’æƒ…å ±å‰Šé™¤ã‚¨ãƒ©ãƒ¼:",t),o(`æ–°è¦é–‹åœ’æƒ…å ±ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ: ${t.message}`);return}console.log("âœ… æ–°è¦é–‹åœ’æƒ…å ±å‰Šé™¤å®Œäº†")}catch(t){console.error("âŒ æ–°è¦é–‹åœ’æƒ…å ±å‰Šé™¤å‡¦ç†ã‚¨ãƒ©ãƒ¼:",t),o("æ–°è¦é–‹åœ’æƒ…å ±å‰Šé™¤å‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚");return}try{const{data:t}=await c.from("smart_locks").select("lock_id").eq("park_id",s);if(t&&t.length>0){const a=t.map(n=>n.lock_id),{error:r}=await c.from("lock_access_logs").delete().in("lock_id",a);if(r){console.error("âŒ ãƒ­ãƒƒã‚¯ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°å‰Šé™¤ã‚¨ãƒ©ãƒ¼:",r),o(`ãƒ­ãƒƒã‚¯ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ: ${r.message}`);return}}console.log("âœ… ãƒ­ãƒƒã‚¯ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°å‰Šé™¤å®Œäº†")}catch(t){console.error("âŒ ãƒ­ãƒƒã‚¯ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°å‰Šé™¤å‡¦ç†ã‚¨ãƒ©ãƒ¼:",t),o("ãƒ­ãƒƒã‚¯ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°å‰Šé™¤å‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚");return}try{const{error:t}=await c.from("smart_locks").delete().eq("park_id",s);if(t){console.error("âŒ ã‚¹ãƒžãƒ¼ãƒˆãƒ­ãƒƒã‚¯å‰Šé™¤ã‚¨ãƒ©ãƒ¼:",t),o(`ã‚¹ãƒžãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ: ${t.message}`);return}console.log("âœ… ã‚¹ãƒžãƒ¼ãƒˆãƒ­ãƒƒã‚¯å‰Šé™¤å®Œäº†")}catch(t){console.error("âŒ ã‚¹ãƒžãƒ¼ãƒˆãƒ­ãƒƒã‚¯å‰Šé™¤å‡¦ç†ã‚¨ãƒ©ãƒ¼:",t),o("ã‚¹ãƒžãƒ¼ãƒˆãƒ­ãƒƒã‚¯å‰Šé™¤å‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚");return}try{const{error:t}=await c.from("user_entry_status").delete().eq("park_id",s);if(t){console.error("âŒ ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å‰Šé™¤ã‚¨ãƒ©ãƒ¼:",t),o(`ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ: ${t.message}`);return}console.log("âœ… ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å‰Šé™¤å®Œäº†")}catch(t){console.error("âŒ ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å‰Šé™¤å‡¦ç†ã‚¨ãƒ©ãƒ¼:",t),o("ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å‰Šé™¤å‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚");return}try{const{error:t}=await c.from("reservations").delete().eq("park_id",s);if(t){console.error("âŒ äºˆç´„å‰Šé™¤ã‚¨ãƒ©ãƒ¼:",t),o(`äºˆç´„ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ: ${t.message}`);return}console.log("âœ… äºˆç´„å‰Šé™¤å®Œäº†")}catch(t){console.error("âŒ äºˆç´„å‰Šé™¤å‡¦ç†ã‚¨ãƒ©ãƒ¼:",t),o("äºˆç´„å‰Šé™¤å‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚");return}try{const{error:t}=await c.from("dog_encounters").delete().eq("park_id",s);if(t){console.error("âŒ å‡ºä¼šã„è¨˜éŒ²å‰Šé™¤ã‚¨ãƒ©ãƒ¼:",t),o(`å‡ºä¼šã„è¨˜éŒ²ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ: ${t.message}`);return}console.log("âœ… å‡ºä¼šã„è¨˜éŒ²å‰Šé™¤å®Œäº†")}catch(t){console.error("âŒ å‡ºä¼šã„è¨˜éŒ²å‰Šé™¤å‡¦ç†ã‚¨ãƒ©ãƒ¼:",t),o("å‡ºä¼šã„è¨˜éŒ²å‰Šé™¤å‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚");return}try{const{data:t}=await c.from("dog_park_reviews").select("id").eq("park_id",s);if(t&&t.length>0){const a=t.map(n=>n.id),{error:r}=await c.from("dog_park_review_images").delete().in("review_id",a);if(r){console.error("âŒ ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”»åƒå‰Šé™¤ã‚¨ãƒ©ãƒ¼:",r),o(`ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”»åƒã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ: ${r.message}`);return}}console.log("âœ… ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”»åƒå‰Šé™¤å®Œäº†")}catch(t){console.error("âŒ ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”»åƒå‰Šé™¤å‡¦ç†ã‚¨ãƒ©ãƒ¼:",t),o("ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”»åƒå‰Šé™¤å‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚");return}try{const{error:t}=await c.from("dog_park_reviews").delete().eq("park_id",s);if(t){console.error("âŒ ãƒ¬ãƒ“ãƒ¥ãƒ¼å‰Šé™¤ã‚¨ãƒ©ãƒ¼:",t),o(`ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ: ${t.message}`);return}console.log("âœ… ãƒ¬ãƒ“ãƒ¥ãƒ¼å‰Šé™¤å®Œäº†")}catch(t){console.error("âŒ ãƒ¬ãƒ“ãƒ¥ãƒ¼å‰Šé™¤å‡¦ç†ã‚¨ãƒ©ãƒ¼:",t),o("ãƒ¬ãƒ“ãƒ¥ãƒ¼å‰Šé™¤å‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚");return}try{const{error:t}=await c.from("dog_park_facility_images").delete().eq("park_id",s);if(t){console.error("âŒ æ–½è¨­ç”»åƒå‰Šé™¤ã‚¨ãƒ©ãƒ¼:",t),o(`æ–½è¨­ç”»åƒã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ: ${t.message}`);return}console.log("âœ… æ–½è¨­ç”»åƒå‰Šé™¤å®Œäº†")}catch(t){console.error("âŒ æ–½è¨­ç”»åƒå‰Šé™¤å‡¦ç†ã‚¨ãƒ©ãƒ¼:",t),o("æ–½è¨­ç”»åƒå‰Šé™¤å‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚");return}try{const{error:t}=await c.from("dog_park_images").delete().eq("park_id",s);if(t){console.error("âŒ ãƒ‘ãƒ¼ã‚¯ç”»åƒå‰Šé™¤ã‚¨ãƒ©ãƒ¼:",t),o(`ãƒ‘ãƒ¼ã‚¯ç”»åƒã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ: ${t.message}`);return}console.log("âœ… ãƒ‘ãƒ¼ã‚¯ç”»åƒå‰Šé™¤å®Œäº†")}catch(t){console.error("âŒ ãƒ‘ãƒ¼ã‚¯ç”»åƒå‰Šé™¤å‡¦ç†ã‚¨ãƒ©ãƒ¼:",t),o("ãƒ‘ãƒ¼ã‚¯ç”»åƒå‰Šé™¤å‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚");return}try{const{error:t}=await c.from("dog_park_review_stages").delete().eq("park_id",s);if(t){console.error("âŒ ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¸å‰Šé™¤ã‚¨ãƒ©ãƒ¼:",t),o(`ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¸ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ: ${t.message}`);return}console.log("âœ… ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¸å‰Šé™¤å®Œäº†")}catch(t){console.error("âŒ ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¸å‰Šé™¤å‡¦ç†ã‚¨ãƒ©ãƒ¼:",t),o("ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¸å‰Šé™¤å‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚");return}try{const{error:t}=await c.from("dog_parks").delete().eq("id",s);if(t){console.error("âŒ ãƒ‰ãƒƒã‚°ãƒ©ãƒ³å‰Šé™¤ã‚¨ãƒ©ãƒ¼:",t),o(`ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ: ${t.message}`);return}console.log("âœ… ãƒ‰ãƒƒã‚°ãƒ©ãƒ³æœ¬ä½“å‰Šé™¤å®Œäº†")}catch(t){console.error("âŒ ãƒ‰ãƒƒã‚°ãƒ©ãƒ³å‰Šé™¤å‡¦ç†ã‚¨ãƒ©ãƒ¼:",t),o("ãƒ‰ãƒƒã‚°ãƒ©ãƒ³å‰Šé™¤å‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚");return}console.log("âœ… ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã¨é–¢é€£ãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤å®Œäº†"),q("ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ç”³è«‹ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚"),S(t=>t.filter(a=>a.id!==s))}catch(t){console.error("âŒ ãƒ‰ãƒƒã‚°ãƒ©ãƒ³å‰Šé™¤ã‚¨ãƒ©ãƒ¼:",t),o("ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}},se=(s,l,t)=>{const a=l||{};return console.log("ðŸ” ç”³è«‹è€…æƒ…å ±ã®ãƒ‡ãƒãƒƒã‚°:",{parkName:s.name,owner_name:s.owner_name,owner_address:s.owner_address,owner_email:s.owner_email,owner_phone_number:s.owner_phone_number,identity_document_url:s.identity_document_url,identity_status:s.identity_status,rawPendingPark:s}),{id:s.id,name:s.name,description:a.description||"",address:s.address,price:a.price||0,status:s.status,owner_id:s.owner_id,created_at:s.created_at,max_capacity:a.max_capacity||0,large_dog_area:a.large_dog_area||!1,small_dog_area:a.small_dog_area||!1,private_booths:a.private_booths||!1,facilities:a.facilities||{parking:!1,shower:!1,restroom:!1,agility:!1,rest_area:!1,water_station:!1},average_rating:a.average_rating||0,review_count:a.review_count||0,facility_details:a.facility_details||"",private_booth_count:a.private_booth_count||0,image_url:a.image_url||"",cover_image_url:a.cover_image_url||"",owner_name:s.owner_name||"Unknown",owner_email:s.owner_email||"Unknown",owner_phone:s.owner_phone_number||"",owner_address:s.owner_address||"",facility_images:t||[],identity_document_url:s.identity_document_url||"",identity_document_filename:s.identity_document_filename||"",identity_status:s.identity_status||"not_submitted",identity_created_at:s.identity_created_at||""}};m.useEffect(()=>{if(!B){z("/admin-dashboard");return}console.log("âœ… ç®¡ç†è€…æ¨©é™ã‚’ç¢ºèªã—ã¾ã—ãŸã€‚ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚’é–‹å§‹ã—ã¾ã™ã€‚")},[B,z]),m.useEffect(()=>{!_.isLoading&&_.pendingParks.length>0?(async()=>{console.log("ðŸ”„ è©³ç´°æƒ…å ±ã‚’å–å¾—ä¸­...");const l=_.pendingParks.map(n=>n.id),[t,a]=await Promise.all([we(l),be(l)]),r=_.pendingParks.map(n=>{const h=t.get(n.id),i=a.get(n.id)||[];return se(n,h,i)});console.log("âœ… è©³ç´°æƒ…å ±ã‚’çµ±åˆã—ã¾ã—ãŸ:",r.length,"ãƒ‘ãƒ¼ã‚¯"),S(r),M(!1),F(),Y().then(n=>{V(n),U(n)})})():_.isLoading?M(!0):(console.log("ðŸ” å¯©æŸ»ä¸­ã®ãƒ‘ãƒ¼ã‚¯ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ"),S([]),M(!1),F(),Y().then(s=>{V(s),U(s)}))},[_.pendingParks,_.isLoading]);const U=s=>{let l=s.filter(t=>(!d||t.name.toLowerCase().includes(d.toLowerCase())||t.address.toLowerCase().includes(d.toLowerCase())||t.owner_name.toLowerCase().includes(d.toLowerCase()))&&(x==="all"||x==="approved"));l=l.sort((t,a)=>{let r,n;switch(v){case"name":r=t.name,n=a.name;break;case"average_rating":r=t.average_rating||0,n=a.average_rating||0;break;default:r=t.created_at,n=a.created_at;break}return g==="asc"?r>n?1:-1:r<n?1:-1}),ye(l)};m.useEffect(()=>{D.length>0&&U(D)},[d,x,v,g,D]),m.useEffect(()=>{p.length>0&&F()},[d,x,v,g,p]);const F=()=>{const s=["pending","first_stage_passed","second_stage_waiting","second_stage_review","smart_lock_testing"],l=["approved"];let t=p.filter(n=>{const h=!d||n.name.toLowerCase().includes(d.toLowerCase())||n.address.toLowerCase().includes(d.toLowerCase())||n.owner_name.toLowerCase().includes(d.toLowerCase()),i=x==="all"||n.status===x;return h&&i});t=t.sort((n,h)=>{let i,u;switch(v){case"name":i=n.name,u=h.name;break;case"average_rating":i=n.average_rating||0,u=h.average_rating||0;break;default:i=n.created_at,u=h.created_at;break}return g==="asc"?i>u?1:-1:i<u?1:-1}),fe(t);const a=t.filter(n=>s.includes(n.status)),r=t.filter(n=>l.includes(n.status));K(a),console.log("ðŸ”„ ãƒ‘ãƒ¼ã‚¯åˆ†é›¢å®Œäº†:",{total:t.length,pending:a.length,approved:r.length,filter:x,search:d})},Ne=async s=>{const l=p.find(i=>i.id===s);if(!l)return;const t=window.confirm(`âš ï¸ ä¸€æ™‚çš„ãªå›žé¿ç­–ã‚’ä½¿ç”¨ã—ã¾ã™ã‹ï¼Ÿ

ã€Œã¯ã„ã€ã‚’é¸æŠžã™ã‚‹ã¨ã€ç¬¬ä¸€å¯©æŸ»ã‹ã‚‰ç›´æŽ¥ã€Œæ‰¿èªæ¸ˆã¿ã€ã«å¤‰æ›´ã•ã‚Œã¾ã™ã€‚
ã€Œã„ã„ãˆã€ã‚’é¸æŠžã™ã‚‹ã¨ã€é€šå¸¸ã®æ‰¿èªå‡¦ç†ã‚’å®Ÿè¡Œã—ã¾ã™ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆ¶ç´„ã®ä¿®æ­£ãŒå¿…è¦ï¼‰ã€‚`);let a,r,n;if(t)a="second_stage_waiting",r=`âš ï¸ ä¸€æ™‚çš„ãªå›žé¿ç­–ã¨ã—ã¦ã€ã“ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’ã€Œç¬¬äºŒå¯©æŸ»æå‡ºå¾…ã¡ã€ã«ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ

â€» ç”³è«‹ã‚¿ãƒ–ã«æ®‹ã‚Šã€å¾Œã§å†åº¦æ‰¿èªå‡¦ç†ãŒã§ãã¾ã™ã€‚`,n="âš ï¸ ä¸€æ™‚çš„ãªå›žé¿ç­–ã«ã‚ˆã‚Šã€ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒã€Œç¬¬äºŒå¯©æŸ»æå‡ºå¾…ã¡ã€ã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸã€‚",`${l.name}`;else switch(l.status){case"pending":a="second_stage_waiting",r="ã“ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®ç¬¬ä¸€å¯©æŸ»ã‚’æ‰¿èªã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ",n="ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®ç¬¬ä¸€å¯©æŸ»ã‚’æ‰¿èªã—ã¾ã—ãŸã€‚",`${l.name}`;break;case"second_stage_waiting":a="second_stage_review",r="ã“ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’ç¬¬äºŒå¯©æŸ»ä¸­ã«å¤‰æ›´ã—ã¾ã™ã‹ï¼Ÿ",n="ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒç¬¬äºŒå¯©æŸ»ä¸­ã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸã€‚",`${l.name}`;break;case"second_stage_review":a="smart_lock_testing",r="ã“ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®ç¬¬äºŒå¯©æŸ»ã‚’æ‰¿èªã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ",n="ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®ç¬¬äºŒå¯©æŸ»ã‚’æ‰¿èªã—ã¾ã—ãŸã€‚",`${l.name}`;break;case"smart_lock_testing":a="approved",r="ã“ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®æ‰¿èªã‚’å®Œäº†ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ",n="ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒæ‰¿èªã•ã‚Œã¾ã—ãŸã€‚",`${l.name}`;break;default:o("ã“ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã§ã¯æ‰¿èªã§ãã¾ã›ã‚“ã€‚");return}if(window.confirm(r))try{f(""),y(""),console.log("ðŸ”„ æ‰¿èªå‡¦ç†é–‹å§‹:",{parkId:s,currentStatus:l.status,nextStatus:a});const{error:i}=await c.from("dog_parks").update({status:a}).eq("id",s);if(i){console.error("âŒ æ‰¿èªã‚¨ãƒ©ãƒ¼è©³ç´°:",i),i.code==="23514"?o(`æ‰¿èªå‡¦ç†ã«å¤±æ•—ã—ã¾ã—ãŸ: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ "${a}" ãŒè¨±å¯ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚

ðŸ“‹ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆ¶ç´„ã‚’æ›´æ–°ã—ã¦ãã ã•ã„ï¼š

1. https://app.supabase.com ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é¸æŠž
3. å·¦å´ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€ŒSQL Editorã€ã‚’é¸æŠž
4. ä»¥ä¸‹ã®SQLã‚’å®Ÿè¡Œï¼š

ALTER TABLE dog_parks DROP CONSTRAINT IF EXISTS dog_parks_status_check;
ALTER TABLE dog_parks ADD CONSTRAINT dog_parks_status_check CHECK (status IN ('pending', 'first_stage_passed', 'second_stage_waiting', 'second_stage_review', 'smart_lock_testing', 'approved', 'rejected'));

5. ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿`):o(`æ‰¿èªå‡¦ç†ã«å¤±æ•—ã—ã¾ã—ãŸ: ${i.message||"ä¸æ˜Žãªã‚¨ãƒ©ãƒ¼"}`);return}console.log("âœ… ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°æˆåŠŸ:",{parkId:s,nextStatus:a}),console.log("ðŸ”„ é€šçŸ¥é€ä¿¡ã‚’ã‚¹ã‚­ãƒƒãƒ—ï¼ˆä¸€æ™‚çš„ã«ç„¡åŠ¹åŒ–ï¼‰"),q(n);const u=p.map(C=>C.id===s?{...C,status:a}:C);S(u),setTimeout(()=>{const C=["pending","first_stage_passed","second_stage_waiting","second_stage_review","smart_lock_testing"],ne=u.filter(b=>{const Ce=!d||b.name.toLowerCase().includes(d.toLowerCase())||b.address.toLowerCase().includes(d.toLowerCase())||b.owner_name.toLowerCase().includes(d.toLowerCase()),Ee=x==="all"||b.status===x;return Ce&&Ee}).filter(b=>C.includes(b.status));K(ne),console.log("ðŸ”„ ãƒªã‚¹ãƒˆæ›´æ–°å®Œäº†:",{totalParks:u.length,pendingParks:ne.length,updatedStatus:a})},100),console.log("âœ… æ‰¿èªå‡¦ç†å®Œäº†")}catch(i){console.error("âŒ æ‰¿èªå‡¦ç†ã‚¨ãƒ©ãƒ¼:",i),o(`æ‰¿èªå‡¦ç†ã«å¤±æ•—ã—ã¾ã—ãŸ: ${i instanceof Error?i.message:"ä¸æ˜Žãªã‚¨ãƒ©ãƒ¼"}`)}},Se=async s=>{if(window.confirm("ã“ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ç”³è«‹ã‚’å´ä¸‹ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"))try{f(""),y("");const{error:t}=await c.from("dog_parks").update({status:"rejected"}).eq("id",s);if(t){console.error("âŒ å´ä¸‹ã‚¨ãƒ©ãƒ¼:",t),o("å´ä¸‹ã®å‡¦ç†ã«å¤±æ•—ã—ã¾ã—ãŸã€‚");return}const a=p.find(r=>r.id===s);a&&await c.from("notifications").insert([{user_id:a.owner_id,title:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ç”³è«‹å´ä¸‹",message:`${a.name}ã®ç”³è«‹ãŒå´ä¸‹ã•ã‚Œã¾ã—ãŸã€‚è©³ç´°ã«ã¤ã„ã¦ã¯ç®¡ç†è€…ã¾ã§ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚`,type:"park_rejected",created_at:new Date().toISOString(),read:!1}]),q("ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ç”³è«‹ã‚’å´ä¸‹ã—ã¾ã—ãŸã€‚"),S(r=>r.map(n=>n.id===s?{...n,status:"rejected"}:n))}catch(t){console.error("âŒ å´ä¸‹ã‚¨ãƒ©ãƒ¼:",t),o("å´ä¸‹ã®å‡¦ç†ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}},te=s=>{switch(s){case"pending":return"bg-yellow-100 text-yellow-800";case"first_stage_passed":return"bg-blue-100 text-blue-800";case"second_stage_waiting":return"bg-orange-100 text-orange-800";case"second_stage_review":return"bg-purple-100 text-purple-800";case"smart_lock_testing":return"bg-indigo-100 text-indigo-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},ae=s=>{switch(s){case"pending":return"ç¬¬ä¸€å¯©æŸ»ä¸­";case"first_stage_passed":return"ç¬¬ä¸€å¯©æŸ»é€šéŽï¼ˆæ—§ï¼‰";case"second_stage_waiting":return"ç¬¬äºŒå¯©æŸ»æå‡ºå¾…ã¡";case"second_stage_review":return"ç¬¬äºŒå¯©æŸ»ä¸­";case"smart_lock_testing":return"ã‚¹ãƒžãƒ¼ãƒˆãƒ­ãƒƒã‚¯èªè¨¼å¾…ã¡";case"approved":return"æ‰¿èªæ¸ˆã¿ãƒ»å…¬é–‹å¯èƒ½";case"rejected":return"å´ä¸‹";default:return"ä¸æ˜Ž"}},re=s=>`Â¥${s.toLocaleString()}`,R=s=>new Date(s).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"});return ve?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 py-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg mb-8",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ç®¡ç†"}),e.jsx("p",{className:"text-gray-600",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³æ–½è¨­ã®è©³ç´°æƒ…å ±ã¨ç”³è«‹ç®¡ç†"})]}),Q&&e.jsx("div",{className:"px-6 py-4 bg-red-50 border-l-4 border-red-400",children:e.jsxs("div",{className:"flex",children:[e.jsx(Le,{className:"h-5 w-5 text-red-400 mr-2"}),e.jsx("p",{className:"text-sm text-red-700",children:Q})]})}),W&&e.jsx("div",{className:"px-6 py-4 bg-green-50 border-l-4 border-green-400",children:e.jsxs("div",{className:"flex",children:[e.jsx(le,{className:"h-5 w-5 text-green-400 mr-2"}),e.jsx("p",{className:"text-sm text-green-700",children:W})]})}),e.jsx("div",{className:"px-6",children:e.jsxs("nav",{className:"flex space-x-8","aria-label":"Tabs",children:[e.jsxs("button",{onClick:()=>k("applications"),className:`whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ${E==="applications"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(L,{className:"w-5 h-5 inline mr-2"}),"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ç”³è«‹",e.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:T.length})]}),e.jsxs("button",{onClick:()=>k("parks"),className:`whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ${E==="parks"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(oe,{className:"w-5 h-5 inline mr-2"}),"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ä¸€è¦§",e.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:A.length})]})]})})]}),E==="parks"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(pe,{label:"",placeholder:"æ–½è¨­åã€ä½æ‰€ã€ã‚ªãƒ¼ãƒŠãƒ¼åã§æ¤œç´¢...",value:d,onChange:s=>X(s.target.value),className:"pl-10"})]}),e.jsx($,{label:"",options:[{value:"all",label:"å…¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹"},{value:"approved",label:"æ‰¿èªæ¸ˆã¿"}],value:x,onChange:s=>H(s.target.value)}),e.jsx($,{label:"",options:[{value:"created_at",label:"ä½œæˆæ—¥æ™‚"},{value:"name",label:"æ–½è¨­å"},{value:"average_rating",label:"å¹³å‡è©•ä¾¡"}],value:v,onChange:s=>J(s.target.value)}),e.jsxs(N,{variant:"secondary",onClick:()=>G(g==="asc"?"desc":"asc"),className:"flex items-center justify-center",children:[g==="asc"?e.jsx(ie,{className:"w-4 h-4 mr-2"}):e.jsx(de,{className:"w-4 h-4 mr-2"}),g==="asc"?"æ˜‡é †":"é™é †"]})]})}),A.length===0?e.jsxs(j,{className:"text-center py-12",children:[e.jsx(oe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:d||x!=="all"?"æ¡ä»¶ã«ä¸€è‡´ã™ã‚‹ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“":"æ‰¿èªæ¸ˆã¿ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒã‚ã‚Šã¾ã›ã‚“"})]}):e.jsx("div",{className:"grid grid-cols-1 gap-6",children:A.map(s=>e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${te(s.status)}`,children:ae(s.status)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-1",children:[e.jsx(O,{className:"w-4 h-4 mr-1"}),s.address]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-1",children:[e.jsx(me,{className:"w-4 h-4 mr-1"}),re(s.price)]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(xe,{className:"w-4 h-4 mr-1"}),R(s.created_at)]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-1",children:[e.jsx(ge,{className:"w-4 h-4 mr-1"}),s.owner_name]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-1",children:[e.jsx(ue,{className:"w-4 h-4 mr-1"}),"å®šå“¡: ",s.max_capacity,"é ­"]}),s.average_rating&&s.average_rating>0&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx($e,{className:"w-4 h-4 mr-1"}),s.average_rating.toFixed(1)," (",s.review_count||0,"ä»¶)"]})]})]}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:s.description}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.large_dog_area&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:"å¤§åž‹çŠ¬ã‚¨ãƒªã‚¢"}),s.small_dog_area&&e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded",children:"å°åž‹çŠ¬ã‚¨ãƒªã‚¢"}),s.private_booths&&e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded",children:"å€‹å®¤ã‚ã‚Š"}),s.facilities.parking&&e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded",children:"é§è»Šå ´"}),s.facilities.shower&&e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded",children:"ã‚·ãƒ£ãƒ¯ãƒ¼"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(Te,{to:`/parks/${s.id}`,className:"flex items-center px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded-md hover:bg-blue-200",children:[e.jsx(Ae,{className:"w-4 h-4 mr-1"}),"è©³ç´°"]}),e.jsxs(N,{size:"sm",variant:"secondary",onClick:()=>ee(s.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(he,{className:"w-4 h-4 mr-1"}),"å‰Šé™¤"]})]})]})},s.id))})]}),E==="applications"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(pe,{label:"",placeholder:"æ–½è¨­åã€ä½æ‰€ã€ã‚ªãƒ¼ãƒŠãƒ¼åã§æ¤œç´¢...",value:d,onChange:s=>X(s.target.value),className:"pl-10"})]}),e.jsx($,{label:"",options:[{value:"all",label:"å…¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹"},{value:"pending",label:"ç¬¬ä¸€å¯©æŸ»ä¸­"},{value:"first_stage_passed",label:"ç¬¬ä¸€å¯©æŸ»é€šéŽï¼ˆæ—§ï¼‰"},{value:"second_stage_waiting",label:"ç¬¬äºŒå¯©æŸ»æå‡ºå¾…ã¡"},{value:"second_stage_review",label:"ç¬¬äºŒå¯©æŸ»ä¸­"},{value:"smart_lock_testing",label:"ã‚¹ãƒžãƒ¼ãƒˆãƒ­ãƒƒã‚¯èªè¨¼å¾…ã¡"},{value:"rejected",label:"å´ä¸‹"}],value:x,onChange:s=>H(s.target.value)}),e.jsx($,{label:"",options:[{value:"created_at",label:"ä½œæˆæ—¥æ™‚"},{value:"name",label:"æ–½è¨­å"},{value:"average_rating",label:"å¹³å‡è©•ä¾¡"}],value:v,onChange:s=>J(s.target.value)}),e.jsxs(N,{variant:"secondary",onClick:()=>G(g==="asc"?"desc":"asc"),className:"flex items-center justify-center",children:[g==="asc"?e.jsx(ie,{className:"w-4 h-4 mr-2"}):e.jsx(de,{className:"w-4 h-4 mr-2"}),g==="asc"?"æ˜‡é †":"é™é †"]})]})}),T.length===0?e.jsxs(j,{className:"text-center py-12",children:[e.jsx(L,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:d||x!=="all"?"æ¡ä»¶ã«ä¸€è‡´ã™ã‚‹ç”³è«‹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“":"å¯©æŸ»ä¸­ã®ç”³è«‹ãŒã‚ã‚Šã¾ã›ã‚“"})]}):e.jsx("div",{className:"grid grid-cols-1 gap-6",children:T.map(s=>e.jsxs(j,{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${te(s.status)}`,children:ae(s.status)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"ç”³è«‹è€…æƒ…å ±"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),s.owner_name]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),s.owner_address||"ä½æ‰€æœªç™»éŒ²"]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"ç”³è«‹æ—¥: ",R(s.created_at)]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"æ–½è¨­æƒ…å ±"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),s.address]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),re(s.price)]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"å®šå“¡: ",s.max_capacity,"é ­"]})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"æœ¬äººç¢ºèªæ›¸é¡ž"]}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:s.identity_document_url&&s.identity_document_url!==""?e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"relative",children:e.jsx("img",{src:`${c.storage.from("vaccine-certs").getPublicUrl(s.identity_document_url||"").data.publicUrl}`,alt:"æœ¬äººç¢ºèªæ›¸é¡ž",className:"w-32 h-32 object-cover rounded border shadow-sm cursor-pointer hover:shadow-md transition-shadow",onClick:()=>Z(`${c.storage.from("vaccine-certs").getPublicUrl(s.identity_document_url||"").data.publicUrl}`,"æœ¬äººç¢ºèªæ›¸é¡ž",s.name)})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"ãƒ•ã‚¡ã‚¤ãƒ«å:"}),e.jsx("span",{className:"text-sm text-gray-600 ml-2",children:s.identity_document_filename||"identity_document"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"å¯©æŸ»çŠ¶æ³:"}),e.jsx("span",{className:`text-sm ml-2 px-2 py-1 rounded-full ${s.identity_status==="approved"?"bg-green-100 text-green-800":s.identity_status==="rejected"?"bg-red-100 text-red-800":s.identity_status==="submitted"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:s.identity_status==="approved"?"æ‰¿èªæ¸ˆã¿":s.identity_status==="rejected"?"å´ä¸‹":s.identity_status==="submitted"?"å¯©æŸ»ä¸­":"æœªæå‡º"})]}),s.identity_created_at&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"æå‡ºæ—¥:"}),e.jsx("span",{className:"text-sm text-gray-600 ml-2",children:R(s.identity_created_at)})]}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"ã‚¯ãƒªãƒƒã‚¯ã—ã¦æ‹¡å¤§è¡¨ç¤º"})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(L,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"æœ¬äººç¢ºèªæ›¸é¡žãŒæå‡ºã•ã‚Œã¦ã„ã¾ã›ã‚“"})]})})]}),s.description&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"æ–½è¨­èª¬æ˜Ž"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.description})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"è¨­å‚™ãƒ»ã‚µãƒ¼ãƒ“ã‚¹"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.large_dog_area&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:"å¤§åž‹çŠ¬ã‚¨ãƒªã‚¢"}),s.small_dog_area&&e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded",children:"å°åž‹çŠ¬ã‚¨ãƒªã‚¢"}),s.private_booths&&e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded",children:"å€‹å®¤ã‚ã‚Š"}),s.facilities.parking&&e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded",children:"é§è»Šå ´"}),s.facilities.shower&&e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded",children:"ã‚·ãƒ£ãƒ¯ãƒ¼"}),s.facilities.restroom&&e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded",children:"ãƒˆã‚¤ãƒ¬"}),s.facilities.agility&&e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded",children:"ã‚¢ã‚¸ãƒªãƒ†ã‚£"}),s.facilities.rest_area&&e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded",children:"ä¼‘æ†©ã‚¨ãƒªã‚¢"}),s.facilities.water_station&&e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded",children:"çµ¦æ°´è¨­å‚™"})]})]}),s.status==="second_stage_review"&&s.facility_images&&s.facility_images.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-2",children:["è¨­å‚™ç”»åƒ (",s.facility_images.length,"æžš)"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:s.facility_images.map((l,t)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:l.image_url,alt:`è¨­å‚™ç”»åƒ ${t+1}`,className:"w-full h-24 object-cover rounded-md border cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>Z(l.image_url,l.image_type,s.name)}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded-b-md",children:l.image_type})]},l.id))})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[(s.status==="pending"||s.status==="first_stage_passed"||s.status==="second_stage_review")&&e.jsxs(e.Fragment,{children:[e.jsxs(N,{size:"sm",onClick:()=>Ne(s.id),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(le,{className:"w-4 h-4 mr-1"}),s.status==="pending"?"ç¬¬ä¸€å¯©æŸ»æ‰¿èª":s.status==="second_stage_review"?"ç¬¬äºŒå¯©æŸ»æ‰¿èª":"æ‰¿èª"]}),e.jsxs(N,{size:"sm",variant:"secondary",onClick:()=>Se(s.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(_e,{className:"w-4 h-4 mr-1"}),"å´ä¸‹"]})]}),e.jsxs(N,{size:"sm",variant:"secondary",onClick:()=>ee(s.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(he,{className:"w-4 h-4 mr-1"}),"å‰Šé™¤"]})]})]},s.id))})]})]}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:P,onKeyDown:je,tabIndex:0,children:e.jsxs("div",{className:"relative max-w-4xl max-h-full",children:[e.jsx("img",{src:w.url,alt:`${w.parkName} - ${w.type}`,className:"max-w-full max-h-full object-contain rounded-lg",onClick:s=>s.stopPropagation()}),e.jsxs("div",{className:"absolute bottom-4 left-4 right-4 bg-black bg-opacity-50 text-white p-3 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-lg",children:w.parkName}),e.jsx("p",{className:"text-sm text-gray-300",children:w.type})]}),e.jsx("button",{onClick:P,className:"absolute top-4 right-4 text-white hover:text-gray-300 bg-black bg-opacity-50 rounded-full p-2",children:e.jsx(_e,{className:"w-6 h-6"})})]})})]})}export{Ke as AdminParkManagement};
