/*! Build: 2025-07-17T07:59:15.523Z
Version: 0.0.0 */
import{r as e,j as s,f as a,R as t,M as l,t as r,a5 as i,o as c,z as n,S as d,ag as o,ai as x,C as m,n as h,L as p,aj as u,ac as j,p as g,ak as b,k as N,P as f,$ as y,T as v,ad as w,ab as _,u as k,X as S,a8 as C,a9 as D,al as T,am as P,J as I,B as $,an as E,ao as O,ap as q,aq as L,ar as F,H as R,D as M,F as z,U as A,a7 as U,af as J,as as W,A as Q,a as B,c as G,at as V,au as H,K as Y,w as K,av as Z,ae as X,aw as ee,ax as se,O as ae,ay as te,az as le,aA as re,aB as ie,W as ce,a4 as ne}from"./vendor-react.D8SVeCGP.js";import{L as de}from"./vendor-maps.BrTP1vhu.js";import{C as oe,B as xe,u as me,S as he,I as pe}from"./components-admin.GT3qRZg5.js";import{s as ue}from"./utils.C9ZsMnW6.js";import{c as je,d as ge,e as be,f as Ne,r as fe}from"./hooks.CTtJlocA.js";import{V as ye,g as ve}from"./pages-dog.BrfoFXaJ.js";const we=Object.freeze(Object.defineProperty({__proto__:null,DogParkList:function(){const[p,u]=e.useState([]),[j,g]=e.useState({}),[b,N]=e.useState({}),[f,y]=e.useState(!0),[v,w]=e.useState(null),[_,k]=e.useState(""),[S,C]=e.useState(null),[D,T]=e.useState(new Date),[P,I]=e.useState(!1),[$,E]=e.useState({}),O=e.useRef(null),q=e.useRef(null),L=e.useRef([]),F=e.useRef(null),[R,M]=e.useState(!1);e.useEffect((()=>{navigator.geolocation.getCurrentPosition((e=>{C({lat:e.coords.latitude,lng:e.coords.longitude})}),(e=>{C({lat:35.6812,lng:139.7671})}))}),[]);const z=async()=>{try{I(!0);const{data:e,error:s}=await ue.from("dog_parks").select("id, current_occupancy, max_capacity").eq("status","approved");if(s)return;const a=new Date;T(a),u((s=>s.map((s=>{const t=null==e?void 0:e.find((e=>e.id===s.id));if(t&&e){const e=[...$[s.id]||[],{timestamp:a.toISOString(),occupancy:t.current_occupancy,maxCapacity:t.max_capacity}].slice(-20);return E((a=>({...a,[s.id]:e}))),{...s,...t}}return s}))))}catch(e){}finally{I(!1)}};e.useEffect((()=>{(async()=>{try{y(!0),w(null);const{data:e,error:s}=await ue.from("dog_parks").select("*").eq("status","approved").order("created_at",{ascending:!1});if(s)throw w(`ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼: ${s.message||"Unknown error"}`),s;S&&e&&e.sort(((e,s)=>U(S.lat,S.lng,e.latitude,e.longitude)-U(S.lat,S.lng,s.latitude,s.longitude))),u(e||[]),e&&0!==e.length||w("è¡¨ç¤ºã§ãã‚‹ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å†…å®¹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚");const a=(new Date).toISOString().split("T")[0],{data:t,error:l}=await ue.from("reservations").select("*").eq("reservation_type","whole_facility").eq("status","confirmed").eq("date",a),r={};(t||[]).forEach((e=>{if(e&&e.park_id){const s=e.park_id;r[s]||(r[s]=[]),r[s].push(e)}})),g(r);const{data:i,error:c}=await ue.from("park_maintenance").select("park_id, title, description, start_date, end_date, is_emergency, status").in("status",["scheduled","active"]).gte("end_date",(new Date).toISOString());if(c);else{const e={};(i||[]).forEach((s=>{const a=new Date,t=new Date(s.start_date),l=new Date(s.end_date);l>a&&(!e[s.park_id]||t<=a&&l>a)&&(e[s.park_id]={id:s.park_id,title:s.title,description:s.description,start_date:s.start_date,end_date:s.end_date,is_emergency:s.is_emergency})})),N(e)}}catch(e){w(`ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼: ${e.message||"Unknown error"}`)}finally{y(!1)}})();const e=ue.channel("dog_parks_changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"dog_parks"},(e=>{u((s=>s.map((s=>s.id===e.new.id?{...s,...e.new}:s))));const s=new Date;E((a=>{const t=[...a[e.new.id]||[],{timestamp:s.toISOString(),occupancy:e.new.current_occupancy,maxCapacity:e.new.max_capacity}].slice(-20);return{...a,[e.new.id]:t}}))})).subscribe();return F.current=setInterval(z,3e4),()=>{e.unsubscribe(),F.current&&clearInterval(F.current)}}),[S]);const A=(e,s)=>{const a=e/s*100;return a<25?{text:"ç©ºã„ã¦ã„ã¾ã™",color:"text-green-600 bg-green-100",barColor:"bg-green-500",description:"å¿«é©ã«åˆ©ç”¨ã§ãã¾ã™",emoji:"ğŸ˜Š"}:a<50?{text:"ã‚„ã‚„ç©ºã„ã¦ã„ã¾ã™",color:"text-blue-600 bg-blue-100",barColor:"bg-blue-500",description:"é©åº¦ãªæ··é›‘ã§ã™",emoji:"ğŸ™‚"}:a<75?{text:"ã‚„ã‚„æ··ã‚“ã§ã„ã¾ã™",color:"text-yellow-600 bg-yellow-100",barColor:"bg-yellow-500",description:"å°‘ã—æ··é›‘ã—ã¦ã„ã¾ã™",emoji:"ğŸ˜"}:{text:"æ··ã‚“ã§ã„ã¾ã™",color:"text-red-600 bg-red-100",barColor:"bg-red-500",description:"å¤§å¤‰æ··é›‘ã—ã¦ã„ã¾ã™",emoji:"ğŸ˜°"}};e.useEffect((()=>{S&&O.current&&(async()=>{try{const e=new de({apiKey:"AIzaSyC9sxGamDZmdKIz3vP1CWLJORl-QkoWgHg",version:"weekly",libraries:["places"]}),s=await e.load();if(!O.current)return;const a=new s.maps.Map(O.current,{center:S,zoom:13,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1,styles:[{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels.icon",stylers:[{visibility:"off"}]}]});q.current=a,L.current.forEach((e=>e.setMap(null))),L.current=[];const t=new s.maps.Marker({position:S,map:a,icon:{path:s.maps.SymbolPath.CIRCLE,scale:10,fillColor:"#4285F4",fillOpacity:1,strokeWeight:2,strokeColor:"#FFFFFF"},title:"ç¾åœ¨åœ°"});L.current.push(t),p.forEach((e=>{const t=A(e.current_occupancy,e.max_capacity);let l="red";t.color.includes("green")?l="green":t.color.includes("blue")?l="blue":t.color.includes("yellow")&&(l="yellow");const r=new s.maps.Marker({position:{lat:Number(e.latitude),lng:Number(e.longitude)},map:a,title:e.name,icon:{url:`https://maps.google.com/mapfiles/ms/icons/${l}-dot.png`}}),i=Array.from({length:5},((s,a)=>`<span style="color: ${a<Math.round(e.average_rating)?"#fbbf24":"#d1d5db"};">â˜…</span>`)).join(""),c=j[e.id]||[];let n="";if(c.length>0){const e=[];c.forEach((s=>{const a=parseInt(s.start_time),t=a+s.duration;e.push({start:`${a.toString().padStart(2,"0")}:00`,end:`${t.toString().padStart(2,"0")}:00`})})),n='\n              <div style="margin-top: 8px; padding: 8px; background-color: #fff7ed; border: 1px solid #fed7aa; border-radius: 4px;">\n                <p style="font-weight: 500; color: #9a3412; margin-bottom: 4px; font-size: 12px;">æœ¬æ—¥ã®è²¸ã—åˆ‡ã‚Šæ™‚é–“</p>\n            ',e.forEach((e=>{n+=`<p style="font-size: 11px; color: #9a3412; margin: 2px 0;">${e.start}ã€œ${e.end}</p>`})),n+="</div>"}const d=new s.maps.InfoWindow({content:`\n              <div style="padding: 12px; max-width: 300px;">\n                <h3 style="margin: 0 0 8px 0; font-size: 16px; font-weight: bold;">${e.name}</h3>\n                <div style="display: flex; align-items: center; margin-bottom: 4px;">\n                  ${i}\n                  <span style="margin-left: 4px; font-size: 12px; color: #666;">${e.average_rating.toFixed(1)} (${e.review_count}ä»¶)</span>\n                </div>\n                <p style="margin: 0 0 4px 0; font-size: 14px; color: #666;">${e.address}</p>\n                <p style="margin: 0 0 4px 0; font-size: 14px;">é€šå¸¸åˆ©ç”¨: Â¥800/æ—¥</p>\n                <p style="margin: 0 0 4px 0; font-size: 14px;">æ–½è¨­è²¸ã—åˆ‡ã‚Š: Â¥4,400/æ™‚é–“</p>\n                ${e.private_booths?'<p style="margin: 0 0 4px 0; font-size: 14px;">ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ¼ã‚¹: ã‚µãƒ–ã‚¹ã‚¯ä½¿ã„æ”¾é¡Œãƒ»1æ—¥åˆ¸ã§ã‚‚åˆ©ç”¨å¯èƒ½</p>':""}\n                <p style="margin: 0 0 8px 0; font-size: 14px;">${t.text} (${e.current_occupancy}/${e.max_capacity})</p>\n                ${n}\n                <a href="/parks/${e.id}" style="display: inline-block; padding: 8px 16px; background-color: #2563eb; color: white; text-decoration: none; border-radius: 6px; font-size: 14px; margin-top: 8px;">è©³ç´°ã‚’è¦‹ã‚‹</a>\n              </div>\n            `});r.addListener("click",(()=>{d.open(a,r)})),L.current.push(r)})),k("")}catch(e){k("Google Mapsã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚APIã‚­ãƒ¼ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚")}})()}),[S,p,j]);const U=(e,s,a,t)=>{const l=(a-e)*Math.PI/180,r=(t-s)*Math.PI/180,i=Math.sin(l/2)*Math.sin(l/2)+Math.cos(e*Math.PI/180)*Math.cos(a*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371};return e.useEffect((()=>{const e=setTimeout((()=>{f&&(M(!0),w("ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ: ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰å¿œç­”ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚„RLSè¨­å®šã‚’å†ç¢ºèªã—ã¦ãã ã•ã„ã€‚"),y(!1))}),1e4);return()=>clearTimeout(e)}),[f]),f&&!R?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³æƒ…å ±ã‚’èª­ã¿è¾¼ã¿ä¸­..."})]})}):v?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("h1",{className:"text-2xl font-bold",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ä¸€è¦§"})}),s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(a,{className:"w-6 h-6 text-red-500 mr-2"}),s.jsx("h2",{className:"text-lg font-semibold text-red-800",children:"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ"})]}),s.jsx("p",{className:"text-red-700 mb-4",children:v}),s.jsxs("div",{className:"space-y-2 text-sm text-red-600",children:[s.jsx("p",{children:s.jsx("strong",{children:"è€ƒãˆã‚‰ã‚Œã‚‹åŸå› :"})}),s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ¥ç¶šã‚¨ãƒ©ãƒ¼"}),s.jsx("li",{children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãƒ‡ãƒ¼ã‚¿ãŒç™»éŒ²ã•ã‚Œã¦ã„ãªã„"}),s.jsx("li",{children:"RLSï¼ˆRow Level Securityï¼‰ã®è¨­å®šå•é¡Œ"}),s.jsx("li",{children:"ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã®å•é¡Œ"})]})]}),s.jsxs("div",{className:"mt-4 flex space-x-2",children:[s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium",children:"å†èª­ã¿è¾¼ã¿"}),s.jsx("button",{onClick:()=>{w(null),y(!0)},className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg font-medium",children:"å†è©¦è¡Œ"})]})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ä¸€è¦§"}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:["æœ€çµ‚æ›´æ–°: ",D.toLocaleTimeString("ja-JP")]}),s.jsxs("button",{onClick:()=>{z()},disabled:P,className:"flex items-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors "+(P?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-100 text-blue-700 hover:bg-blue-200"),children:[s.jsx(t,{className:"w-4 h-4 "+(P?"animate-spin":"")}),s.jsx("span",{children:P?"æ›´æ–°ä¸­...":"æ›´æ–°"})]})]})]}),s.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full "+(P?"bg-yellow-500 animate-pulse":"bg-green-500")}),s.jsx("span",{className:"text-sm font-medium text-blue-900",children:P?"ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ä¸­...":"ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ä¸­"})]}),s.jsx("div",{className:"text-xs text-blue-700",children:"30ç§’ã”ã¨ã«è‡ªå‹•æ›´æ–°"})]})}),s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("h2",{className:"font-semibold text-blue-900 mb-2",children:"æ–™é‡‘ä½“ç³»"}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm text-blue-800",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:"é€šå¸¸åˆ©ç”¨"}),s.jsx("p",{children:"1æ—¥800å††ï¼ˆæ™‚é–“åˆ¶é™ãªã—ï¼‰"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:"ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³"}),s.jsx("p",{children:"æœˆé¡3,800å††ï¼ˆå…¨å›½å…±é€šï¼‰"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:"æ–½è¨­è²¸ã—åˆ‡ã‚Š"}),s.jsx("p",{children:"4,400å††/æ™‚é–“ï¼ˆäººæ•°åˆ¶é™ãªã—ï¼‰"}),s.jsx("p",{className:"text-xs text-blue-600",children:"â€»å‰æ—¥ã¾ã§ã®äºˆç´„ãŒå¿…è¦"})]})]})]}),s.jsx("div",{className:"relative",children:_?s.jsx("div",{className:"w-full h-[400px] bg-gray-100 rounded-lg shadow-md flex items-center justify-center",children:s.jsxs("div",{className:"text-center p-6",children:[s.jsx(l,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 mb-2",children:"åœ°å›³ã‚’è¡¨ç¤ºã§ãã¾ã›ã‚“"}),s.jsx("p",{className:"text-sm text-red-600",children:_}),s.jsx("div",{className:"mt-4 p-3 bg-yellow-50 rounded-lg text-left",children:s.jsxs("p",{className:"text-sm text-yellow-800",children:[s.jsx("strong",{children:"è§£æ±ºæ–¹æ³•:"}),s.jsx("br",{}),"1. .envãƒ•ã‚¡ã‚¤ãƒ«ã«VITE_GOOGLE_MAPS_API_KEY=your_api_keyã‚’è¿½åŠ ",s.jsx("br",{}),"2. Google Cloud Consoleã§Maps JavaScript APIã‚’æœ‰åŠ¹åŒ–",s.jsx("br",{}),"3. APIã‚­ãƒ¼ã®åˆ¶é™è¨­å®šã‚’ç¢ºèª"]})})]})}):s.jsx("div",{ref:O,className:"w-full h-[400px] rounded-lg shadow-md"})}),0===p.length?s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx(l,{className:"w-12 h-12 text-yellow-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"}),s.jsx("p",{className:"text-yellow-700 mb-4",children:"ç¾åœ¨è¡¨ç¤ºã§ãã‚‹ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒã‚ã‚Šã¾ã›ã‚“ã€‚"}),s.jsxs("div",{className:"space-y-2 text-sm text-yellow-600",children:[s.jsx("p",{children:s.jsx("strong",{children:"è€ƒãˆã‚‰ã‚Œã‚‹åŸå› :"})}),s.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-left inline-block",children:[s.jsx("li",{children:"ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãƒ‡ãƒ¼ã‚¿ãŒç™»éŒ²ã•ã‚Œã¦ã„ãªã„"}),s.jsx("li",{children:"æ‰¿èªæ¸ˆã¿ï¼ˆstatus='approved'ï¼‰ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒãªã„"}),s.jsx("li",{children:"RLSï¼ˆRow Level Securityï¼‰ã®è¨­å®šã«ã‚ˆã‚Šè¡¨ç¤ºã•ã‚Œãªã„"})]})]}),s.jsx("div",{className:"mt-4",children:s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg font-medium",children:"å†èª­ã¿è¾¼ã¿"})})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map((e=>{const t=A(e.current_occupancy,e.max_capacity),p=(e=>{const s=$[e]||[];if(s.length<2)return"stable";const a=s.slice(-3),t=s.slice(-6,-3);if(0===a.length||0===t.length)return"stable";const l=a.reduce(((e,s)=>e+s.occupancy),0)/a.length,r=t.reduce(((e,s)=>e+s.occupancy),0)/t.length;return l>r+1?"increasing":l<r-1?"decreasing":"stable"})(e.id),u=S?U(S.lat,S.lng,Number(e.latitude),Number(e.longitude)):null,g=(e=>{const s=j[e]||[];if(0===s.length)return null;const a=[];return s.forEach((e=>{const s=parseInt(e.start_time),t=s+e.duration;a.push({start:`${s.toString().padStart(2,"0")}:00`,end:`${t.toString().padStart(2,"0")}:00`})})),a})(e.id),N=g&&g.length>0,f=b[e.id];let y=null;if(f){const e=new Date,s=new Date(f.start_date),a=new Date(f.end_date);e>=s&&e<a?y="active":e<s&&(y="scheduled")}return s.jsxs(oe,{className:"overflow-hidden",children:[e.image_url&&s.jsxs("div",{className:"relative h-56 mb-4 -m-6 mb-4",children:[s.jsx("img",{src:e.image_url,alt:e.name,className:"w-full h-full object-cover",loading:"lazy",onError:e=>{e.currentTarget.src="https://images.pexels.com/photos/1108099/pexels-photo-1108099.jpeg"}}),s.jsx("div",{className:"absolute bottom-3 left-1/2 transform -translate-x-1/2",children:s.jsx("span",{className:`px-3 py-1.5 rounded-full text-sm font-semibold shadow-lg ${t.color}`,children:t.text})}),y&&f&&s.jsx("div",{className:"absolute top-2 left-2",children:s.jsx("span",{className:"px-3 py-1.5 rounded-full text-sm font-semibold text-white shadow-lg "+("active"===y?f.is_emergency?"bg-red-600":"bg-orange-600":"bg-blue-600"),children:"active"===y?f.is_emergency?"ç·Šæ€¥ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­":"ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­":"ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹äºˆå®š"})}),!y&&N&&s.jsx("div",{className:"absolute top-2 left-2",children:s.jsx("span",{className:"px-3 py-1.5 rounded-full text-sm font-semibold bg-orange-500 text-white shadow-lg",children:"æœ¬æ—¥è²¸ã—åˆ‡ã‚Šã‚ã‚Š"})})]}),s.jsxs("div",{className:e.image_url?"px-6 pb-6":"",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:e.name}),u&&s.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:[s.jsx(l,{className:"w-4 h-4 mr-1"}),s.jsxs("span",{children:[u.toFixed(1),"km"]})]}),p&&s.jsxs("div",{className:"flex items-center text-sm mb-3",children:["increasing"===p?s.jsx(r,{className:"w-4 h-4 mr-1 text-orange-500"}):"decreasing"===p?s.jsx(i,{className:"w-4 h-4 mr-1 text-green-500"}):null,s.jsx("span",{className:"text-gray-600",children:"increasing"===p?"æ··é›‘å‚¾å‘":"decreasing"===p?"ç©ºã„ã¦ãã¦ã„ã¾ã™":""})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(c,{className:"w-4 h-4 mr-1 text-blue-600"}),s.jsx("span",{className:"text-gray-600",children:"ç¾åœ¨ã®åˆ©ç”¨è€…æ•°"})]}),s.jsx("div",{className:"flex items-center",children:s.jsxs("span",{className:"font-semibold "+(e.current_occupancy/e.max_capacity>.8?"text-red-600":e.current_occupancy/e.max_capacity>.6?"text-orange-600":"text-green-600"),children:[e.current_occupancy,"/",e.max_capacity]})})]}),y&&f&&s.jsxs("div",{className:"bg-red-50 p-3 rounded-lg mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx(a,{className:"w-4 h-4 text-red-600"}),s.jsx("span",{className:"text-sm font-medium text-red-800",children:f.title})]}),f.description&&s.jsx("p",{className:"text-sm text-red-700 mb-2",children:f.description}),s.jsx("div",{className:"text-xs text-red-600",children:s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(n,{className:"w-3 h-3"}),s.jsxs("span",{children:[new Date(f.start_date).toLocaleDateString("ja-JP",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),"ã€œ",new Date(f.end_date).toLocaleDateString("ja-JP",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})}),s.jsx("p",{className:`text-xs ${"active"===y?f.is_emergency?"text-red-600":"text-orange-600":"text-blue-600"} mt-2`,children:"â€»ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æœŸé–“ä¸­ã¯åˆ©ç”¨ã§ãã¾ã›ã‚“"})]}),!y&&N&&s.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx(a,{className:"w-4 h-4 text-orange-600"}),s.jsx("span",{className:"text-sm font-medium text-orange-800",children:"æœ¬æ—¥ã®è²¸ã—åˆ‡ã‚Šæ™‚é–“"})]}),s.jsx("div",{className:"space-y-1",children:g.map(((e,a)=>s.jsxs("div",{className:"flex items-center text-xs text-orange-700",children:[s.jsx(n,{className:"w-3 h-3 mr-1 flex-shrink-0"}),s.jsxs("span",{children:[e.start,"ã€œ",e.end]})]},a)))}),s.jsx("p",{className:"text-xs text-orange-600 mt-2",children:"â€»è²¸ã—åˆ‡ã‚Šæ™‚é–“ä¸­ã¯é€šå¸¸åˆ©ç”¨ã§ãã¾ã›ã‚“"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[e.large_dog_area&&s.jsxs("div",{className:"flex items-center text-sm text-blue-600",children:[s.jsx(d,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:"å¤§å‹çŠ¬OK"})]}),e.small_dog_area&&s.jsxs("div",{className:"flex items-center text-sm text-pink-600",children:[s.jsx(o,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:"å°å‹çŠ¬OK"})]})]}),s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center text-gray-600",children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),s.jsx("span",{className:"text-sm font-medium",children:"Â¥800/æ—¥"})]})}),e.private_booths&&s.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-purple-800",children:"ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ¼ã‚¹"}),s.jsxs("span",{className:"text-sm text-purple-600",children:[e.private_booth_count,"å®¤"]})]}),s.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"ã‚µãƒ–ã‚¹ã‚¯ä½¿ã„æ”¾é¡Œãƒ»1æ—¥åˆ¸ã§ã‚‚åˆ©ç”¨å¯èƒ½ï¼ˆè¿½åŠ æ–™é‡‘ãªã—ï¼‰"})]})]}),s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries({parking:"é§è»Šå ´",shower:"ã‚·ãƒ£ãƒ¯ãƒ¼è¨­å‚™",restroom:"ãƒˆã‚¤ãƒ¬",agility:"ã‚¢ã‚¸ãƒªãƒ†ã‚£è¨­å‚™",rest_area:"ä¼‘æ†©ã‚¹ãƒšãƒ¼ã‚¹",water_station:"çµ¦æ°´è¨­å‚™"}).map((([a,t])=>e.facilities[a]&&s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(m,{className:"w-4 h-4 mr-1 text-green-600 flex-shrink-0"}),s.jsx("span",{children:t})]},a)))}),e.facility_details&&s.jsx("p",{className:"text-sm text-gray-600 border-t pt-3 line-clamp-2",children:e.facility_details}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx(h,{to:`/parks/${e.id}`,children:s.jsx(xe,{variant:"secondary",className:"w-full",style:{backgroundColor:"white",color:"#2563eb",borderColor:"#d1d5db"},children:"è©³ç´°ãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼"})}),"active"===y?s.jsx(xe,{className:"w-full bg-gray-400 cursor-not-allowed",disabled:!0,title:"ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­ã®ãŸã‚äºˆç´„ã§ãã¾ã›ã‚“",children:"äºˆç´„ä¸å¯"}):s.jsx(h,{to:`/parks/${e.id}/reserve`,children:s.jsx(xe,{className:"w-full",children:"äºˆç´„ã™ã‚‹"})})]})]})]},e.id)}))})]})}},Symbol.toStringTag,{value:"Module"}));function _e({lockId:t,className:l="",variant:r="primary",size:i="md",label:c="ãƒ‰ã‚¢ã‚’é–‹ã‘ã‚‹",showStatus:n=!0,onSuccess:d,onError:o,reservationId:x}){const{user:h}=me(),[b,N]=e.useState(!1),[f,y]=e.useState(null),[v,w]=e.useState(null),[_,k]=e.useState(!1),[S,C]=e.useState("");e.useEffect((()=>{if(v){const e=setTimeout((()=>{w(null)}),3e3);return()=>clearTimeout(e)}}),[v]),e.useEffect((()=>{if(f){const e=setTimeout((()=>{y(null)}),5e3);return()=>clearTimeout(e)}}),[f]);return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{onClick:()=>{(async()=>{if(h){N(!0),y(null),w(null);try{const{data:{session:e},error:s}=await ue.auth.getSession();if(s||!(null==e?void 0:e.access_token))throw new Error("èªè¨¼ãŒå¿…è¦ã§ã™");let a=5,l=null;if(x){const e=await(async e=>{try{const{data:s,error:a}=await ue.from("reservations").select("\n          *,\n          dog_park:dog_parks(*),\n          dog:dogs(*)\n        ").eq("id",e).single();return a?null:s}catch(s){return null}})(x);if(e&&"whole_facility"===e.reservation_type&&(l=(e=>{try{const s=new Date(e.date),a=e.start_time.split(":").map(Number),t=a[0]??0,l=a[1]??0;return s.setHours(t,l,0,0),new Date(s.getTime()+60*e.duration*60*1e3)}catch(s){return null}})(e),l)){const e=new Date,s=l.getTime()-e.getTime();a=Math.max(1,Math.ceil(s/6e4))}}const r=await fetch("/functions/v1/generate-pin",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.access_token}`},body:JSON.stringify({lock_id:t,purpose:"entry",expiry_minutes:a,reservation_id:x||void 0})});if(!r.ok){const e=await r.json();throw new Error(e.error||"PINã‚³ãƒ¼ãƒ‰ã®ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ")}const{pin:i}=await r.json();alert(`PINã‚³ãƒ¼ãƒ‰: ${i}\n\nã“ã®PINã‚³ãƒ¼ãƒ‰ã‚’ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã®ã‚­ãƒ¼ãƒ‘ãƒƒãƒ‰ã«å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚`),w(i),d&&d()}catch(e){if(e.message&&e.message.startsWith("PAYMENT_REQUIRED:")){const s=e.message.replace("PAYMENT_REQUIRED:","").trim();C(s),k(!0),y(null)}else y(e.message||"PINã‚³ãƒ¼ãƒ‰ã®ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ"),k(!1);o&&o(e.message||"PINã‚³ãƒ¼ãƒ‰ã®ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ")}finally{N(!1)}}})()},isLoading:b,variant:r,size:i,className:`flex items-center ${l}`,children:[b?s.jsx(p,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(u,{className:"w-4 h-4 mr-2"}),c]}),n&&s.jsxs(s.Fragment,{children:[v&&s.jsxs("div",{className:"flex items-center text-green-600 text-sm mt-1",children:[s.jsx(m,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:"PINã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¾ã—ãŸ"})]}),f&&s.jsxs("div",{className:"flex items-center text-red-600 text-sm mt-1",children:[s.jsx(a,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:f})]}),_&&s.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200 mt-2",children:[s.jsxs("div",{className:"flex items-start space-x-2 mb-3",children:[s.jsx(j,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"æ±ºæ¸ˆãŒå¿…è¦ã§ã™"}),s.jsx("p",{className:"text-sm text-blue-800",children:S})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{onClick:()=>window.location.href="/subscription",size:"sm",className:"w-full bg-purple-600 hover:bg-purple-700",children:[s.jsx(j,{className:"w-3 h-3 mr-1"}),"ã‚µãƒ–ã‚¹ã‚¯åŠ å…¥"]}),s.jsxs(xe,{onClick:()=>window.location.href="/parks",size:"sm",variant:"secondary",className:"w-full",children:[s.jsx(g,{className:"w-3 h-3 mr-1"}),"1æ—¥åˆ¸è³¼å…¥"]})]})]})]})]})}function ke({park:e,parkImages:a,todayRentals:t,onImageClick:l}){const r=function(e,s){const a=e/s*100;return a<25?{text:"ç©ºã„ã¦ã„ã¾ã™",color:"text-green-600 bg-green-100"}:a<50?{text:"ã‚„ã‚„ç©ºã„ã¦ã„ã¾ã™",color:"text-blue-600 bg-blue-100"}:a<75?{text:"ã‚„ã‚„æ··ã‚“ã§ã„ã¾ã™",color:"text-yellow-600 bg-yellow-100"}:{text:"æ··ã‚“ã§ã„ã¾ã™",color:"text-red-600 bg-red-100"}}(e.current_occupancy,e.max_capacity);return s.jsx(s.Fragment,{children:a.length>0&&s.jsxs("div",{className:"relative h-64 rounded-lg overflow-hidden",children:[s.jsx("img",{src:a[0].url,alt:e.name,className:"w-full h-full object-cover cursor-pointer",onClick:()=>l(0),onError:e=>{e.currentTarget.src="https://images.pexels.com/photos/1108099/pexels-photo-1108099.jpeg"}}),s.jsx("div",{className:"absolute top-4 right-4",children:s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${r.color}`,children:r.text})}),t.length>0&&s.jsx("div",{className:"absolute top-4 left-4",children:s.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-orange-500 text-white",children:"æœ¬æ—¥è²¸ã—åˆ‡ã‚Šã‚ã‚Š"})})]})})}function Se({parkImages:e,onImageClick:a}){return e.length<=1?null:s.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[e.slice(1,6).map(((e,t)=>s.jsx("div",{className:"h-20 rounded-lg overflow-hidden cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>a(t+1),children:s.jsx("img",{src:e.url,alt:e.caption||`ç”»åƒ ${t+2}`,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://images.pexels.com/photos/1108099/pexels-photo-1108099.jpeg"}})},e.id))),e.length>6&&s.jsxs("div",{className:"h-20 rounded-lg overflow-hidden cursor-pointer relative bg-gray-200 flex items-center justify-center",onClick:()=>a(6),children:[s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:s.jsxs("span",{className:"text-white font-medium",children:["+",e.length-6]})}),s.jsx("img",{src:e[6].url,alt:"ãã®ä»–ã®ç”»åƒ",className:"w-full h-full object-cover opacity-60"})]})]})}function Ce({park:e}){return s.jsxs(oe,{className:"p-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"è¨­å‚™ãƒ»ã‚µãƒ¼ãƒ“ã‚¹"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries({parking:"é§è»Šå ´",shower:"ã‚·ãƒ£ãƒ¯ãƒ¼è¨­å‚™",restroom:"ãƒˆã‚¤ãƒ¬",agility:"ã‚¢ã‚¸ãƒªãƒ†ã‚£è¨­å‚™",rest_area:"ä¼‘æ†©ã‚¹ãƒšãƒ¼ã‚¹",water_station:"çµ¦æ°´è¨­å‚™"}).map((([a,t])=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 rounded "+(e.facilities[a]?"bg-green-500":"bg-gray-300")}),s.jsx("span",{className:"text-sm",children:t})]},a)))}),e.facility_details&&s.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:s.jsx("p",{className:"text-sm text-gray-700",children:e.facility_details})})]})}function De({park:e,reviews:a,userReview:t,canReview:l,user:r,userDogs:i,showReviewForm:c,setShowReviewForm:n,reviewFormData:d,setReviewFormData:o,isSubmitting:x,handleReviewSubmit:m,handleDeleteReview:h}){return s.jsxs(oe,{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[s.jsx(b,{className:"w-6 h-6 mr-2"}),"ãƒ¬ãƒ“ãƒ¥ãƒ¼ (",e.review_count,")"]}),r&&l&&s.jsx(xe,{onClick:()=>n(!c),variant:t?"secondary":"primary",size:"sm",children:t?s.jsxs(s.Fragment,{children:[s.jsx(N,{className:"w-4 h-4 mr-2"}),"ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ç·¨é›†"]}):s.jsxs(s.Fragment,{children:[s.jsx(f,{className:"w-4 h-4 mr-2"}),"ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æ›¸ã"]})})]}),c&&s.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-blue-900 mb-4",children:t?"ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ç·¨é›†":"ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æŠ•ç¨¿"}),s.jsxs("form",{onSubmit:m,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"è©•ä¾¡ *"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[[1,2,3,4,5].map((e=>s.jsx("button",{type:"button",onClick:()=>o({...d,rating:e}),className:"focus:outline-none",children:s.jsx(y,{className:`w-8 h-8 ${e<=d.rating?"text-yellow-400 fill-current":"text-gray-300 hover:text-yellow-300"} transition-colors`})},e))),s.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:[d.rating,"ã¤æ˜Ÿ"]})]})]}),s.jsx(he,{label:"ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹ãƒ¯ãƒ³ã¡ã‚ƒã‚“ *",options:i.map((e=>({value:e.id,label:e.name}))),value:d.dog_id,onChange:e=>o({...d,dog_id:e.target.value}),required:!0}),s.jsx(pe,{label:"è¨ªå•æ—¥ *",type:"date",value:d.visit_date,onChange:e=>o({...d,visit_date:e.target.value}),max:(new Date).toISOString().split("T")[0],required:!0}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ãƒ¬ãƒ“ãƒ¥ãƒ¼å†…å®¹"}),s.jsx("textarea",{value:d.review_text,onChange:e=>o({...d,review_text:e.target.value}),placeholder:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®æ„Ÿæƒ³ã‚’ãŠèã‹ã›ãã ã•ã„...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(xe,{type:"button",variant:"secondary",onClick:()=>n(!1),children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"}),t&&s.jsxs(xe,{type:"button",onClick:h,className:"bg-red-600 hover:bg-red-700",children:[s.jsx(v,{className:"w-4 h-4 mr-2"}),"å‰Šé™¤"]})]}),s.jsx(xe,{type:"submit",isLoading:x,disabled:!d.dog_id||!d.visit_date,children:t?"æ›´æ–°ã™ã‚‹":"æŠ•ç¨¿ã™ã‚‹"})]})]})]}),0===a.length?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(b,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"ã¾ã ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒã‚ã‚Šã¾ã›ã‚“"}),r&&l&&s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"æœ€åˆã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æŠ•ç¨¿ã—ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ"})]}):s.jsx("div",{className:"space-y-6",children:a.map((e=>s.jsx("div",{className:"border-b border-gray-200 pb-6 last:border-b-0",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden",children:e.dog_image_url?s.jsx("img",{src:e.dog_image_url,alt:e.dog_name,className:"w-full h-full object-cover"}):s.jsx(w,{className:"w-6 h-6 text-gray-500"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:e.user_name}),s.jsx("span",{className:"text-sm text-gray-500",children:"ã¨"}),s.jsxs("span",{className:"font-medium text-blue-600",children:[e.dog_name,"ã¡ã‚ƒã‚“"]}),s.jsxs("span",{className:"text-xs text-gray-400",children:["(",e.dog_breed,")"]})]}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5].map((a=>s.jsx(y,{className:"w-4 h-4 "+(a<=e.rating?"text-yellow-400 fill-current":"text-gray-300")},a)))}),s.jsxs("span",{className:"text-sm text-gray-600",children:[new Date(e.visit_date).toLocaleDateString("ja-JP")," ã«è¨ªå•"]})]})]}),s.jsx("span",{className:"text-xs text-gray-400",children:new Date(e.created_at).toLocaleDateString("ja-JP")})]}),e.review_text&&s.jsx("p",{className:"text-gray-700 leading-relaxed mb-3",children:e.review_text}),e.review_images&&e.review_images.length>0&&s.jsx("div",{className:"mt-3",children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:e.review_images.map(((e,a)=>s.jsxs("div",{className:"relative group cursor-pointer",children:[s.jsx("img",{src:e.url,alt:e.caption||`ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”»åƒ ${a+1}`,className:"w-full h-24 object-cover rounded-lg border border-gray-200 hover:opacity-90 transition-opacity",onClick:()=>window.open(e.url,"_blank")}),e.caption&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 rounded-b-lg opacity-0 group-hover:opacity-100 transition-opacity",children:e.caption})]},a)))})}),e.main_image_url&&(!e.review_images||0===e.review_images.length)&&s.jsx("div",{className:"mt-3",children:s.jsx("img",{src:e.main_image_url,alt:"ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”»åƒ",className:"w-full max-w-md h-48 object-cover rounded-lg border border-gray-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(e.main_image_url,"_blank")})})]})]})},e.id)))}),r&&!l&&s.jsx("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsx("p",{className:"text-sm text-yellow-800",children:"ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æŠ•ç¨¿ã™ã‚‹ã«ã¯ã€ã“ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’å®Ÿéš›ã«åˆ©ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚"})})]})}function Te({rentalInfo:e}){return s.jsx(oe,{className:"p-6 bg-orange-50 border-orange-200",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(a,{className:"w-6 h-6 text-orange-600 mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-orange-900 mb-3",children:"æ–½è¨­è²¸ã—åˆ‡ã‚Šäºˆç´„ã‚ã‚Š"}),s.jsx("p",{className:"text-sm text-orange-800 mb-4",children:"ä»¥ä¸‹ã®æ—¥æ™‚ã¯æ–½è¨­è²¸ã—åˆ‡ã‚Šã®ãŸã‚ã€é€šå¸¸åˆ©ç”¨ï¼ˆ1æ—¥åˆ¸ãƒ»ã‚µãƒ–ã‚¹ã‚¯ï¼‰ã§ã®å…¥å ´ã¯ã§ãã¾ã›ã‚“ã€‚"}),s.jsx("div",{className:"space-y-4",children:e.map(((e,a)=>s.jsxs("div",{className:"bg-white p-3 rounded-lg border border-orange-200",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(g,{className:"w-5 h-5 text-orange-600"}),s.jsx("span",{className:"font-medium text-orange-900",children:new Date(e.date).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric",weekday:"long"})})]}),s.jsx("div",{className:"space-y-1",children:e.slots.map(((e,a)=>s.jsxs("div",{className:"flex items-center text-sm text-orange-800",children:[s.jsx(n,{className:"w-4 h-4 mr-2"}),s.jsxs("span",{children:[e.start," ã€œ ",e.end]})]},a)))})]},a)))})]})]})})}const Pe=(e,s)=>{const a=e/s*100;return a<25?{text:"ç©ºã„ã¦ã„ã¾ã™",color:"text-green-600 bg-green-100",barColor:"bg-green-500",description:"å¿«é©ã«åˆ©ç”¨ã§ãã¾ã™",emoji:"ğŸ˜Š"}:a<50?{text:"ã‚„ã‚„ç©ºã„ã¦ã„ã¾ã™",color:"text-blue-600 bg-blue-100",barColor:"bg-blue-500",description:"é©åº¦ãªæ··é›‘ã§ã™",emoji:"ğŸ™‚"}:a<75?{text:"ã‚„ã‚„æ··ã‚“ã§ã„ã¾ã™",color:"text-yellow-600 bg-yellow-100",barColor:"bg-yellow-500",description:"å°‘ã—æ··é›‘ã—ã¦ã„ã¾ã™",emoji:"ğŸ˜"}:{text:"æ··ã‚“ã§ã„ã¾ã™",color:"text-red-600 bg-red-100",barColor:"bg-red-500",description:"å¤§å¤‰æ··é›‘ã—ã¦ã„ã¾ã™",emoji:"ğŸ˜°"}},Ie=Object.freeze(Object.defineProperty({__proto__:null,DogParkDetail:function(){const{parkId:r}=_(),{user:i}=me(),p=k(),[j,g]=e.useState(null),[b,N]=e.useState([]),[f,v]=e.useState(null),[w,T]=e.useState([]),[P,I]=e.useState(!1),[$,E]=e.useState(!0),[O,q]=e.useState(!1),[L,F]=e.useState(!1),[R,M]=e.useState([]),[z,A]=e.useState([]),[U,J]=e.useState(null),[W,Q]=e.useState({rating:5,review_text:"",visit_date:"",dog_id:""}),[B,G]=e.useState([]),[V,H]=e.useState(!1),[Y,K]=e.useState(0),[Z,X]=e.useState([]),[ee,se]=e.useState(!1),[ae,te]=e.useState(!1),[le,re]=e.useState(new Date),[ie,ce]=e.useState(null),[ne,de]=e.useState([]),[he,pe]=e.useState(null);e.useEffect((()=>{r&&je()}),[r,i]);const je=async()=>{try{const{data:e,error:s}=await ue.from("dog_parks").select("*").eq("id",r).eq("status","approved").single();if(s)return void p("/parks");g(e);const{data:a,error:t}=await ue.from("dog_park_images").select("*").eq("park_id",r).order("display_order",{ascending:!0});if(!t&&a){const s=[];e.image_url&&s.push({id:"main",url:e.image_url,caption:`${e.name} - ãƒ¡ã‚¤ãƒ³ç”»åƒ`}),e.cover_image_url&&s.push({id:"cover",url:e.cover_image_url,caption:`${e.name} - ã‚«ãƒãƒ¼ç”»åƒ`}),a.forEach((a=>{s.push({id:a.id,url:a.image_url,caption:a.caption||`${e.name} - æ–½è¨­ç”»åƒ`})})),G(s)}const{data:l,error:c}=await ue.rpc("get_park_reviews",{park_id_param:r});c||N(l||[]);const{data:n,error:d}=await ue.from("reservations").select("*").eq("park_id",r).eq("reservation_type","whole_facility").eq("status","confirmed").gte("date",(new Date).toISOString().split("T")[0]);if(d);else{M(n||[]);const e=(new Date).toISOString().split("T")[0],s=(null==n?void 0:n.filter((s=>s.date===e)))||[];A(s)}const{data:o,error:x}=await ue.from("smart_locks").select("id, lock_id, lock_name, park_id").eq("park_id",r).eq("status","active");if(x||X(o||[]),i){const{data:e,error:s}=await ue.from("dogs").select("\n            *,\n            vaccine_certifications!inner(*)\n          ").eq("owner_id",i.id).eq("vaccine_certifications.status","approved");s||T(e||[]);const{data:a,error:t}=await ue.rpc("can_user_review_park",{user_id_param:i.id,park_id_param:r});t||I(a);const{data:l,error:c}=await ue.rpc("get_user_park_review",{user_id_param:i.id,park_id_param:r});if(!c&&l&&l.length>0&&(v(l[0]),Q({rating:l[0].rating,review_text:l[0].review_text||"",visit_date:l[0].visit_date,dog_id:l[0].dog_id})),Z.length>0){const{data:e,error:s}=await ue.rpc("check_user_park_access",{p_user_id:i.id,p_lock_id:Z[0].lock_id});!s&&e&&e.has_access&&se(!0)}const n=(new Date).toISOString().split("T")[0],{data:d,error:o}=await ue.from("reservations").select("\n            *,\n            dog_park:dog_parks(*),\n            dog:dogs(*)\n          ").eq("park_id",r).eq("user_id",i.id).eq("status","confirmed").eq("date",n).order("start_time",{ascending:!0}).limit(1).single();!o&&d&&J(d)}const{data:m,error:h}=await ue.from("park_maintenance").select("*").eq("park_id",r).in("status",["scheduled","active"]).gte("end_date",(new Date).toISOString()).order("start_date",{ascending:!0});if(!h&&m){de(m);const e=new Date,s=m.find((s=>{const a=new Date(s.start_date),t=new Date(s.end_date);return a<=e&&t>e}));pe(s||null)}}catch(e){ce(e.message||"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ"),p("/parks")}finally{E(!1)}},ge=e=>{K(e),H(!0)},be=()=>{alert("PINã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¾ã—ãŸï¼")},Ne=e=>{alert(`PINã‚³ãƒ¼ãƒ‰ã®ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ: ${e}`)};if($)return s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(!j)return s.jsxs("div",{className:"text-center py-12",children:[s.jsx("p",{className:"text-gray-600",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ"}),s.jsx(xe,{onClick:()=>p("/parks"),className:"mt-4",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ä¸€è¦§ã«æˆ»ã‚‹"})]});const fe=(()=>{if(0===R.length)return[];const e={};return R.forEach((s=>{const a=s.date;e[a]||(e[a]={date:a,slots:[]});const t=parseInt(s.start_time),l=t+s.duration;e[a].slots.push({start:`${t.toString().padStart(2,"0")}:00`,end:`${l.toString().padStart(2,"0")}:00`})})),Object.values(e).sort(((e,s)=>new Date(e.date).getTime()-new Date(s.date).getTime()))})();return s.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[ie&&s.jsx("div",{className:"mb-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:ie}),j&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between items-start mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:j.name}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[s.jsx("span",{children:j.address}),s.jsx("span",{children:"â€¢"}),s.jsxs("span",{children:["Â¥",j.price,"/æ—¥"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:["æœ€çµ‚æ›´æ–°: ",le.toLocaleTimeString("ja-JP")]}),s.jsxs("button",{onClick:()=>{(async()=>{if(r)try{te(!0);const{data:e,error:s}=await ue.from("dog_parks").select("*").eq("id",r).single();if(s)return;g(e),re(new Date)}catch(e){}finally{te(!1)}})()},disabled:ae,className:"flex items-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors "+(ae?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-100 text-blue-700 hover:bg-blue-200"),children:[s.jsx(t,{className:"w-4 h-4 "+(ae?"animate-spin":"")}),s.jsx("span",{children:ae?"æ›´æ–°ä¸­...":"æ›´æ–°"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsx(ke,{park:j,parkImages:B,todayRentals:z,onImageClick:ge}),s.jsx(Se,{parkImages:B,onImageClick:ge}),s.jsxs(oe,{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:j.name}),s.jsx("div",{className:"flex items-center space-x-4 mb-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5].map((e=>s.jsx(y,{className:"w-5 h-5 "+(e<=Math.round(j.average_rating)?"text-yellow-400 fill-current":"text-gray-300")},e)))}),s.jsx("span",{className:"text-lg font-semibold text-gray-900",children:j.average_rating.toFixed(1)}),s.jsxs("span",{className:"text-sm text-gray-600",children:["(",j.review_count,"ä»¶ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼)"]})]})})]}),he?s.jsx(xe,{className:"bg-gray-400 cursor-not-allowed",disabled:!0,title:"ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­ã®ãŸã‚äºˆç´„ã§ãã¾ã›ã‚“",children:"äºˆç´„ä¸å¯"}):s.jsx(h,{to:`/parks/${j.id}/reserve`,children:s.jsx(xe,{className:"bg-blue-600 hover:bg-blue-700",children:"äºˆç´„ã™ã‚‹"})})]}),s.jsx("p",{className:"text-gray-700 mb-6",children:j.description}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center text-gray-600",children:[s.jsx(l,{className:"w-5 h-5 mr-3"}),s.jsx("span",{children:j.address})]}),s.jsxs("div",{className:"flex items-center text-gray-600",children:[s.jsx(c,{className:"w-5 h-5 mr-3"}),s.jsxs("span",{children:["ç¾åœ¨ã®åˆ©ç”¨è€…: ",j.current_occupancy,"/",j.max_capacity,"äºº"]})]}),s.jsxs("div",{className:"flex items-center text-gray-600",children:[s.jsx(x,{className:"w-5 h-5 mr-3"}),s.jsxs("span",{children:["æ–™é‡‘: Â¥",j.price,"/æ—¥"]})]})]}),s.jsxs("div",{className:"space-y-3",children:[j.large_dog_area&&s.jsxs("div",{className:"flex items-center text-blue-600",children:[s.jsx(d,{className:"w-5 h-5 mr-3"}),s.jsx("span",{children:"å¤§å‹çŠ¬OK"})]}),j.small_dog_area&&s.jsxs("div",{className:"flex items-center text-pink-600",children:[s.jsx(o,{className:"w-5 h-5 mr-3"}),s.jsx("span",{children:"å°å‹çŠ¬OK"})]}),j.private_booths&&s.jsxs("div",{className:"flex items-center text-purple-600",children:[s.jsx(m,{className:"w-5 h-5 mr-3"}),s.jsxs("span",{children:["ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ¼ã‚¹ ",j.private_booth_count,"å®¤"]})]})]})]})]}),(he||ne.length>0)&&s.jsxs(oe,{className:"p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(a,{className:"w-6 h-6 text-yellow-600 mr-2"}),"ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æƒ…å ±"]}),he&&s.jsxs("div",{className:`mb-4 p-4 rounded-lg ${he.is_emergency?"bg-red-50 border-red-200":"bg-yellow-50 border-yellow-200"} border`,children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(a,{className:"w-5 h-5 "+(he.is_emergency?"text-red-600":"text-yellow-600")}),s.jsx("span",{className:"text-lg font-semibold "+(he.is_emergency?"text-red-800":"text-yellow-800"),children:he.is_emergency?"ç·Šæ€¥ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­":"ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­"})]}),s.jsx("p",{className:`text-lg font-medium ${he.is_emergency?"text-red-700":"text-yellow-700"} mb-2`,children:he.title}),he.description&&s.jsx("p",{className:`text-sm ${he.is_emergency?"text-red-600":"text-yellow-600"} mb-3`,children:he.description}),s.jsx("div",{className:"flex items-center space-x-4 text-sm",children:s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(n,{className:"w-4 h-4 "+(he.is_emergency?"text-red-600":"text-yellow-600")}),s.jsxs("span",{className:"font-medium "+(he.is_emergency?"text-red-700":"text-yellow-700"),children:[new Date(he.start_date).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"})," ",new Date(he.start_date).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}),"ã€œ",new Date(he.end_date).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"})," ",new Date(he.end_date).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})]})]})}),s.jsx("p",{className:`text-sm ${he.is_emergency?"text-red-600":"text-yellow-600"} mt-3 font-medium`,children:"â€»ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æœŸé–“ä¸­ã¯ä¼‘æ¥­ã¨ãªã‚Šã¾ã™"})]}),ne.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"ä»Šå¾Œã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹äºˆå®š"}),s.jsx("div",{className:"space-y-3",children:ne.filter((e=>"scheduled"===e.status&&new Date(e.start_date)>new Date)).slice(0,3).map(((e,a)=>s.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx(n,{className:"w-4 h-4 text-gray-600"}),s.jsx("span",{className:"font-medium text-gray-900",children:e.title}),e.is_emergency&&s.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:"ç·Šæ€¥"})]}),s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[new Date(e.start_date).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"})," ",new Date(e.start_date).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}),"ã€œ",new Date(e.end_date).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"})," ",new Date(e.end_date).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})]}),e.description&&s.jsx("p",{className:"text-sm text-gray-500",children:e.description})]})})},a)))})]})]}),Z.length>0&&ee&&s.jsxs(oe,{className:"p-6 bg-blue-50 border-blue-200",children:[s.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[s.jsx(u,{className:"w-6 h-6 text-blue-600 mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-blue-900 mb-2",children:"å…¥å£ãƒ‰ã‚¢ã®é–‹éŒ "}),s.jsx("p",{className:"text-sm text-blue-800 mb-4",children:"PINã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¦å…¥å£ã®ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã‚’é–‹éŒ ã§ãã¾ã™ã€‚"})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Z.map((e=>s.jsx(_e,{lockId:e.lock_id,label:`${e.lock_name}ã®PINã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆ`,className:"w-full",onSuccess:be,onError:Ne,reservationId:null==U?void 0:U.id},e.id)))})]}),z.length>0&&s.jsx(oe,{className:"p-6 bg-orange-50 border-orange-200",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(a,{className:"w-6 h-6 text-orange-600 mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-orange-900 mb-3",children:"æœ¬æ—¥ã®è²¸ã—åˆ‡ã‚Šæ™‚é–“"}),s.jsx("p",{className:"text-sm text-orange-800 mb-4",children:"ä»¥ä¸‹ã®æ™‚é–“å¸¯ã¯æ–½è¨­è²¸ã—åˆ‡ã‚Šã®ãŸã‚ã€é€šå¸¸åˆ©ç”¨ï¼ˆ1æ—¥åˆ¸ãƒ»ã‚µãƒ–ã‚¹ã‚¯ï¼‰ã§ã®å…¥å ´ã¯ã§ãã¾ã›ã‚“ã€‚"}),s.jsx("div",{className:"space-y-3",children:z.map(((e,a)=>{const t=parseInt(e.start_time),l=t+e.duration;return s.jsx("div",{className:"bg-white p-3 rounded-lg border border-orange-200",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(n,{className:"w-5 h-5 text-orange-600"}),s.jsxs("span",{className:"font-medium text-orange-900",children:[t,":00 ã€œ ",l,":00"]})]})},a)}))})]})]})}),fe.length>0&&s.jsx(Te,{rentalInfo:fe}),s.jsx(Ce,{park:j}),s.jsx(De,{park:j,reviews:b,userReview:f,canReview:P,user:i,userDogs:w,showReviewForm:O,setShowReviewForm:q,reviewFormData:W,setReviewFormData:Q,isSubmitting:L,handleReviewSubmit:async e=>{if(e.preventDefault(),i&&j){F(!0);try{if(f){const{error:e}=await ue.from("dog_park_reviews").update({rating:W.rating,review_text:W.review_text,visit_date:W.visit_date,dog_id:W.dog_id,updated_at:(new Date).toISOString()}).eq("id",f.id);if(e)throw e}else{const{error:e}=await ue.from("dog_park_reviews").insert([{park_id:r,user_id:i.id,dog_id:W.dog_id,rating:W.rating,review_text:W.review_text,visit_date:W.visit_date}]);if(e)throw e}await je(),q(!1),alert(f?"ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æ›´æ–°ã—ã¾ã—ãŸï¼":"ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æŠ•ç¨¿ã—ã¾ã—ãŸï¼")}catch(s){alert("ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®æŠ•ç¨¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚")}finally{F(!1)}}},handleDeleteReview:async()=>{if(f&&confirm("ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ"))try{const{error:e}=await ue.from("dog_park_reviews").delete().eq("id",f.id);if(e)throw e;await je(),v(null),Q({rating:5,review_text:"",visit_date:"",dog_id:""}),alert("ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚")}catch(e){alert("ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}}})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(oe,{className:"p-4",children:s.jsx(h,{to:`/parks/${j.id}/reserve`,children:s.jsx(xe,{className:"w-full bg-blue-600 hover:bg-blue-700 text-lg py-3",children:"äºˆç´„ã™ã‚‹"})})}),Z.length>0&&ee&&s.jsxs(oe,{className:"p-4 bg-blue-50 border-blue-200",children:[s.jsxs("h3",{className:"font-semibold text-blue-900 mb-3 flex items-center",children:[s.jsx(u,{className:"w-5 h-5 text-blue-600 mr-2"}),"å…¥å£ãƒ‰ã‚¢ã‚’é–‹ã‘ã‚‹"]}),s.jsx("div",{className:"space-y-3",children:Z.map((e=>s.jsx(_e,{lockId:e.lock_id,label:`${e.lock_name}ã®PINã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆ`,className:"w-full",onSuccess:be,onError:Ne,reservationId:null==U?void 0:U.id},e.id)))})]}),s.jsxs(oe,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"æ–™é‡‘æƒ…å ±"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"é€šå¸¸åˆ©ç”¨"}),s.jsxs("span",{className:"font-medium",children:["Â¥",j.price,"/æ—¥"]})]}),j.private_booths&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ¼ã‚¹"}),s.jsx("span",{className:"font-medium text-green-600",children:"è¿½åŠ æ–™é‡‘ãªã—"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"æ–½è¨­è²¸ã—åˆ‡ã‚Š"}),s.jsx("span",{className:"font-medium",children:"Â¥4,400/æ™‚é–“"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³"}),s.jsx("span",{className:"font-medium",children:"Â¥3,800/æœˆ"})]})]})]}),s.jsxs(oe,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"ç¾åœ¨ã®çŠ¶æ³"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm",children:"åˆ©ç”¨è€…æ•°"}),s.jsxs("span",{className:"font-medium",children:[j.current_occupancy,"/",j.max_capacity,"äºº"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[s.jsxs("span",{children:[j.current_occupancy,"äºº"]}),s.jsxs("span",{children:[Math.round(j.current_occupancy/j.max_capacity*100),"%"]}),s.jsxs("span",{children:[j.max_capacity,"äºº"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:s.jsx("div",{className:`h-3 rounded-full transition-all duration-300 ${Pe(j.current_occupancy,j.max_capacity).barColor}`,style:{width:j.current_occupancy/j.max_capacity*100+"%"}})})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center justify-center space-x-1 ${Pe(j.current_occupancy,j.max_capacity).color}`,children:[s.jsx("span",{children:Pe(j.current_occupancy,j.max_capacity).emoji}),s.jsx("span",{children:Pe(j.current_occupancy,j.max_capacity).text})]}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:Pe(j.current_occupancy,j.max_capacity).description})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-2 text-xs text-gray-500",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),s.jsx("span",{children:"ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ä¸­"})]})]})]}),s.jsxs(oe,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"è©•ä¾¡"}),s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:j.average_rating.toFixed(1)}),s.jsx("div",{className:"flex items-center justify-center space-x-1",children:[1,2,3,4,5].map((e=>s.jsx(y,{className:"w-6 h-6 "+(e<=Math.round(j.average_rating)?"text-yellow-400 fill-current":"text-gray-300")},e)))}),s.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[j.review_count,"ä»¶ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼"]})]}),j.review_count>0&&s.jsx("div",{className:"space-y-2",children:[5,4,3,2,1].map((e=>{const a=b.filter((s=>s.rating===e)).length,t=j.review_count>0?a/j.review_count*100:0;return s.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[s.jsx("span",{className:"w-3",children:e}),s.jsx(y,{className:"w-3 h-3 text-yellow-400 fill-current"}),s.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:`${t}%`}})}),s.jsx("span",{className:"w-8 text-right",children:a})]},e)}))})]}),s.jsxs(oe,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"ã‚¢ã‚¯ã‚»ã‚¹"}),s.jsxs("div",{className:"text-sm text-gray-700 space-y-2",children:[s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(l,{className:"w-4 h-4 text-gray-500 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:j.address})]}),s.jsx("div",{className:"mt-3",children:s.jsx(xe,{variant:"secondary",size:"sm",className:"w-full",onClick:()=>{const e=encodeURIComponent(j.address);window.open(`https://maps.google.com/maps?q=${e}`,"_blank")},children:"Google Mapsã§é–‹ã"})})]})]})]})]}),V&&B.length>0&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"relative w-full max-w-4xl",children:[s.jsx("button",{onClick:()=>{H(!1)},className:"absolute top-4 right-4 text-gray-800 bg-white bg-opacity-90 shadow-lg rounded-full p-2 hover:bg-opacity-100 transition-all z-10",children:s.jsx(S,{className:"w-6 h-6"})}),s.jsx("button",{onClick:()=>{K((e=>(e-1+B.length)%B.length))},className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-800 bg-white bg-opacity-90 shadow-lg rounded-full p-2 hover:bg-opacity-100 transition-all z-10",children:s.jsx(C,{className:"w-6 h-6"})}),s.jsx("button",{onClick:()=>{K((e=>(e+1)%B.length))},className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-800 bg-white bg-opacity-90 shadow-lg rounded-full p-2 hover:bg-opacity-100 transition-all z-10",children:s.jsx(D,{className:"w-6 h-6"})}),s.jsx("div",{className:"flex items-center justify-center h-[80vh]",children:s.jsx("img",{src:B[Y].url,alt:B[Y].caption||`${j.name} - ç”»åƒ ${Y+1}`,className:"max-h-full max-w-full object-contain"})}),s.jsxs("div",{className:"absolute bottom-4 left-0 right-0 text-center text-white",children:[s.jsx("p",{className:"text-sm mb-2",children:B[Y].caption}),s.jsxs("p",{className:"text-xs",children:[Y+1," / ",B.length]})]})]})})]})]})}},Symbol.toStringTag,{value:"Module"})),$e=[{id:"prod_STbyLoouD9odGI",priceId:"price_1RZpDjAHWLDQ7ynZP7zD3TQB",name:"ãƒ‰ãƒƒã‚°ãƒ‘ãƒ¼ã‚¯JPã‚µãƒ–ã‚¹ã‚¯",description:"æœˆé¡3,800å††ã§å…¨å›½ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ä½¿ã„æ”¾é¡Œ + ãƒšãƒƒãƒˆã‚·ãƒ§ãƒƒãƒ—10%OFF",mode:"subscription"},{id:"prod_SUPYdaPibyt70U",priceId:"price_1Ra8ZvAHWLDQ7ynZQnuailVL",name:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³1æ—¥åˆ¸",description:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³æ–½è¨­åˆ©ç”¨1æ—¥åˆ¸ã§ã™",mode:"payment"},{id:"prod_facility_rental",priceId:"price_1Ra8awAHWLDQ7ynZvp1jAlPT",name:"æ–½è¨­è²¸ã—åˆ‡ã‚Š",description:"æ–½è¨­è²¸ã—åˆ‡ã‚Š1æ™‚é–“",mode:"payment"},{id:"prod_shop_item",priceId:"price_1RcGbaAHWLDQ7ynZA0PmtKbS",name:"ãƒšãƒƒãƒˆã‚·ãƒ§ãƒƒãƒ—è³¼å…¥å“",description:"ãƒšãƒƒãƒˆã‚·ãƒ§ãƒƒãƒ—å•†å“",mode:"payment"}];function Ee({park:e,error:t,formData:r,setFormData:i,timeSlots:c,isDateTooSoon:n,selectedDogs:d,dogs:o,handleDogSelection:x,handleTimeSlotSelect:h,getEndTime:p,getSlotStatus:u,getSelectedDogNames:g,calculateDayPassPrice:b,calculateTotalPrice:N,hasSubscription:f,handleSubmit:y,isLoading:v,checkoutLoading:_,MAX_DOGS:k}){return s.jsxs(oe,{children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[s.jsx(l,{className:"w-5 h-5 text-gray-500"}),s.jsx("p",{className:"text-gray-600",children:e.address})]}),s.jsx("p",{className:"text-gray-600 mb-4",children:e.description}),s.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(T,{className:"w-5 h-5 text-blue-600"}),s.jsx("h3",{className:"font-semibold text-blue-900",children:"æ–™é‡‘ä½“ç³»"})]}),s.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[s.jsx("p",{children:"â€¢ 1æ—¥åˆ¸: Â¥800ï¼ˆ24æ™‚é–“æœ‰åŠ¹ï¼‰"}),s.jsx("p",{children:"â€¢ 2é ­ç›®ä»¥é™: +Â¥400/é ­ï¼ˆåŠé¡ï¼‰"}),s.jsx("p",{children:"â€¢ ã‚µãƒ–ã‚¹ã‚¯: æœˆé¡Â¥3,800ï¼ˆ3é ­ã¾ã§ä½¿ã„æ”¾é¡Œï¼‰"}),s.jsx("p",{children:"â€¢ æ–½è¨­è²¸ã—åˆ‡ã‚Š: Â¥4,400/æ™‚é–“ï¼ˆã‚µãƒ–ã‚¹ã‚¯ä¼šå“¡20%OFFï¼‰"})]})]}),s.jsxs("div",{className:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(P,{className:"w-5 h-5 text-yellow-600"}),s.jsx("h3",{className:"font-semibold text-yellow-900",children:"æ–½è¨­è²¸ã—åˆ‡ã‚Šã®æ³¨æ„äº‹é …"})]}),s.jsxs("div",{className:"text-sm text-yellow-800 space-y-1",children:[s.jsx("p",{children:"â€¢ æ–½è¨­è²¸ã—åˆ‡ã‚Šã¯1æ™‚é–“å˜ä½ã§äºˆç´„å¯èƒ½ã§ã™"}),s.jsxs("p",{children:["â€¢ ",s.jsx("strong",{children:"2æ—¥å‰ã¾ã§ã®äºˆç´„ãŒå¿…è¦ã§ã™"}),"ï¼ˆå½“æ—¥ãƒ»ç¿Œæ—¥ã®äºˆç´„ä¸å¯ï¼‰"]}),s.jsx("p",{children:"â€¢ è²¸ã—åˆ‡ã‚Šä¸­ã¯ä»–ã®ãŠå®¢æ§˜ã¯å…¥å ´ã§ãã¾ã›ã‚“"}),s.jsx("p",{children:"â€¢ å‹é”ã«PINã‚³ãƒ¼ãƒ‰ã‚’å…±æœ‰ã—ã¦ä¸€ç·’ã«åˆ©ç”¨ã§ãã¾ã™"})]})]})]}),s.jsxs("form",{onSubmit:y,children:[t&&s.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:t}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["å…¥å ´ã™ã‚‹ãƒ¯ãƒ³ã¡ã‚ƒã‚“ã‚’é¸æŠï¼ˆæœ€å¤§",k,"é ­ï¼‰"]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[d.length,"/",k,"é ­é¸æŠä¸­"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map((e=>{const a=d.includes(e.id),t=!a&&d.length>=k;return s.jsxs("div",{className:"p-4 border-2 rounded-lg cursor-pointer transition-colors relative "+(a?"border-green-500 bg-green-50":t?"border-gray-200 bg-gray-50 opacity-50 cursor-not-allowed":"border-gray-200 hover:border-gray-300"),onClick:()=>!t&&x(e.id),children:[a&&s.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center",children:s.jsx(m,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden",children:e.image_url?s.jsx("img",{src:e.image_url,alt:e.name,className:"w-full h-full object-cover"}):s.jsx(w,{className:"w-6 h-6 text-gray-500"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:[e.name,"ã¡ã‚ƒã‚“"]}),s.jsx(ye,{status:ve(e),size:"sm"})]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[e.breed," â€¢ ",e.gender]})]})]})]},e.id)}))}),d.length>0&&s.jsxs("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-green-900 mb-1",children:"é¸æŠä¸­ã®ãƒ¯ãƒ³ã¡ã‚ƒã‚“"}),s.jsx("p",{className:"text-sm text-green-800",children:g()}),s.jsxs("p",{className:"text-xs text-green-700 mt-1",children:[d.length,"é ­ãŒåŒæ™‚å…¥å ´ã§ãã¾ã™"]})]})]}),s.jsx(pe,{label:"æ—¥ä»˜",type:"date",value:r.date,onChange:e=>i({date:e.target.value,selectedTimeSlot:""}),min:(new Date).toISOString().split("T")[0],required:!0}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"æ”¯æ‰•ã„æ–¹æ³•"}),s.jsxs("div",{className:"space-y-4",children:[!f&&s.jsxs("label",{className:"flex items-center space-x-3 p-4 border-2 rounded-lg cursor-pointer transition-colors "+("single"===r.paymentType?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[s.jsx("input",{type:"radio",value:"single",checked:"single"===r.paymentType,onChange:e=>i({paymentType:e.target.value}),className:"form-radio text-blue-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(T,{className:"w-5 h-5 text-blue-600"}),s.jsx("span",{className:"font-medium",children:"1æ—¥åˆ¸ï¼ˆæ®µéšçš„æ–™é‡‘åˆ¶ï¼‰"})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"1é ­ç›®Â¥800 + 2é ­ç›®ä»¥é™Â¥400/é ­ãƒ»24æ™‚é–“æœ‰åŠ¹"}),d.length>0&&s.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:[d.length,"é ­é¸æŠä¸­: Â¥",b().toLocaleString()]})]})]}),s.jsxs("label",{className:"flex items-center space-x-3 p-4 border-2 rounded-lg cursor-pointer transition-colors "+("subscription"===r.paymentType?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"),children:[s.jsx("input",{type:"radio",value:"subscription",checked:"subscription"===r.paymentType,onChange:e=>i({paymentType:e.target.value}),className:"form-radio text-purple-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(I,{className:"w-5 h-5 text-purple-600"}),s.jsx("span",{className:"font-medium",children:"ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆæœˆé¡Â¥3,800ï¼‰"}),f?s.jsx("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs",children:"ã”åˆ©ç”¨ä¸­"}):s.jsx("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs",children:"æœªåŠ å…¥"})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"3é ­ã¾ã§ä½¿ã„æ”¾é¡Œãƒ»æ–½è¨­è²¸ã—åˆ‡ã‚Š20%OFF"}),!f&&s.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"â€» ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã«åŠ å…¥ã—ã¦ã„ã¾ã›ã‚“"})]})]}),s.jsxs("label",{className:"flex items-center space-x-3 p-4 border-2 rounded-lg cursor-pointer transition-colors "+("facility_rental"===r.paymentType?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-gray-300"),children:[s.jsx("input",{type:"radio",value:"facility_rental",checked:"facility_rental"===r.paymentType,onChange:e=>i({paymentType:e.target.value,duration:"1"}),className:"form-radio text-orange-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($,{className:"w-5 h-5 text-orange-600"}),s.jsx("span",{className:"font-medium",children:"æ–½è¨­è²¸ã—åˆ‡ã‚Š"}),s.jsxs("span",{className:"bg-orange-200 text-orange-800 px-2 py-1 rounded-full text-xs",children:["1æ™‚é–“Â¥",f?"3,520":"4,400"]})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"æ–½è¨­å…¨ä½“ã‚’ç‹¬å åˆ©ç”¨ãƒ»äººæ•°åˆ¶é™ãªã—ãƒ»å‹é”ã«PINã‚³ãƒ¼ãƒ‰å…±æœ‰å¯èƒ½"}),f&&s.jsx("p",{className:"text-sm text-purple-700 font-medium mt-1",children:"ã‚µãƒ–ã‚¹ã‚¯ä¼šå“¡20%OFFé©ç”¨æ¸ˆã¿ï¼"})]})]})]})]}),"facility_rental"===r.paymentType&&r.date&&s.jsx(s.Fragment,{children:s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"åˆ©ç”¨é–‹å§‹æ™‚é–“ã‚’é¸æŠã—ã¦ãã ã•ã„"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("label",{className:"text-sm text-gray-700",children:"åˆ©ç”¨æ™‚é–“:"}),s.jsx("select",{value:r.duration,onChange:e=>i({duration:e.target.value}),className:"px-2 py-1 border border-gray-300 rounded text-sm",children:[1,2,3,4].map((e=>s.jsxs("option",{value:e.toString(),children:[e,"æ™‚é–“"]},e)))})]})]}),n&&s.jsxs("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg flex items-start",children:[s.jsx(a,{className:"w-5 h-5 mt-0.5 mr-2 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"æ–½è¨­è²¸ã—åˆ‡ã‚Šã¯2æ—¥å‰ã¾ã§ã®äºˆç´„ãŒå¿…è¦ã§ã™"}),s.jsx("p",{className:"text-sm",children:"2æ—¥å¾Œä»¥é™ã®æ—¥ä»˜ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚"})]})]}),s.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-3",children:c.map((e=>{const a=u(e),t=a.icon,l=r.selectedTimeSlot===e.time,i=e.isWholeFacilityAvailable&&!n,d=parseInt(r.duration);let o=!0;if(i&&d>1){const s=parseInt(e.time.split(":")[0]);for(let e=1;e<d;e++){const a=s+e,t=c.find((e=>parseInt(e.time.split(":")[0])===a));if(!t||!t.isWholeFacilityAvailable){o=!1;break}}}const x=i&&o;return s.jsx("button",{type:"button",onClick:()=>{x&&h(e.time)},disabled:!x,className:"p-3 rounded-lg border-2 transition-all "+(l?"border-orange-500 bg-orange-50":x?"border-gray-200 hover:border-gray-300":"border-gray-200 opacity-50 cursor-not-allowed"),children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-medium text-gray-900",children:e.time}),s.jsxs("div",{className:`inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs mt-1 ${x?a.color:"bg-red-500 text-white"}`,children:[s.jsx(t,{className:"w-3 h-3"}),s.jsx("span",{children:x?a.label:"åˆ©ç”¨ä¸å¯"})]}),!x&&i&&!o&&s.jsxs("div",{className:"text-xs text-red-600 mt-1",children:["é€£ç¶š",d,"æ™‚é–“äºˆç´„ä¸å¯"]})]})},e.time)}))}),r.selectedTimeSlot&&s.jsxs("div",{className:"text-sm mt-3 p-3 rounded-lg bg-orange-50 text-orange-800 border border-orange-200",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($,{className:"w-4 h-4"}),s.jsxs("span",{className:"font-medium",children:["é¸æŠæ™‚é–“: ",r.selectedTimeSlot," ï½ ",p(r.selectedTimeSlot,r.duration)]})]}),s.jsx("p",{className:"text-xs mt-1 flex items-center",children:"æ–½è¨­è²¸ã—åˆ‡ã‚Šã¯1æ™‚é–“å˜ä½ã§ã®åˆ©ç”¨ã¨ãªã‚Šã¾ã™ã€‚"})]})]})}),s.jsxs("div",{className:"mt-4 p-3 rounded-lg bg-blue-50 text-blue-700 border border-blue-200",children:[s.jsx("p",{className:"font-medium",children:"äºˆç´„å†…å®¹"}),s.jsxs("div",{className:"mt-1 space-y-1",children:[s.jsxs("p",{children:["é¸æŠãƒ¯ãƒ³ã¡ã‚ƒã‚“: ",d.length,"é ­"]}),"single"===r.paymentType&&s.jsxs("div",{children:[s.jsxs("p",{children:["1æ—¥åˆ¸æ–™é‡‘: Â¥",b().toLocaleString(),"ï¼ˆ",d.length,"é ­ãƒ»æ®µéšçš„æ–™é‡‘ï¼‰"]}),s.jsx("p",{className:"text-xs",children:"24æ™‚é–“æœ‰åŠ¹ãƒ»å…¨å›½ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã§åˆ©ç”¨å¯èƒ½"})]}),"subscription"===r.paymentType&&s.jsx("div",{children:f?s.jsxs("div",{children:[s.jsx("p",{className:"text-purple-700 font-medium",children:"ã‚µãƒ–ã‚¹ã‚¯ä¼šå“¡: 3é ­ã¾ã§ä½¿ã„æ”¾é¡Œ"}),s.jsx("p",{className:"text-xs",children:"è¿½åŠ æ–™é‡‘ãªã—ãƒ»å…¨å›½ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã§åˆ©ç”¨å¯èƒ½"})]}):s.jsxs("div",{children:[s.jsx("p",{className:"text-orange-700 font-medium",children:"ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ç”³ã—è¾¼ã¿: æœˆé¡Â¥3,800"}),s.jsx("p",{className:"text-xs",children:"ç”³ã—è¾¼ã¿å¾Œã€3é ­ã¾ã§ä½¿ã„æ”¾é¡Œãƒ»å…¨å›½ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã§åˆ©ç”¨å¯èƒ½"})]})}),"facility_rental"===r.paymentType&&s.jsxs("div",{children:[s.jsxs("p",{children:["æ–½è¨­è²¸ã—åˆ‡ã‚Šæ–™é‡‘: Â¥",N().toLocaleString()]}),s.jsxs("p",{className:"text-xs",children:[r.duration,"æ™‚é–“åˆ©ç”¨ãƒ»æ–½è¨­å…¨ä½“ç‹¬å ãƒ»å‹é”ã«PINã‚³ãƒ¼ãƒ‰å…±æœ‰å¯èƒ½"]}),f&&s.jsx("p",{className:"text-purple-700 font-medium text-xs",children:"ã‚µãƒ–ã‚¹ã‚¯ä¼šå“¡20%OFFé©ç”¨æ¸ˆã¿"})]}),s.jsx("div",{className:"border-t border-blue-300 pt-2 mt-2",children:s.jsxs("p",{className:"font-bold",children:["åˆè¨ˆæ–™é‡‘: Â¥",N().toLocaleString()]})})]}),s.jsxs("p",{className:"text-sm mt-2 flex items-center",children:[s.jsx(j,{className:"w-3 h-3 mr-1"}),"æ±ºæ¸ˆå®Œäº†å¾Œã€å…¥å ´ç”¨PINã‚³ãƒ¼ãƒ‰ãŒç™ºè¡Œã•ã‚Œã¾ã™"]})]}),s.jsxs(xe,{type:"submit",isLoading:v||_,className:"w-full mt-4 bg-blue-600 hover:bg-blue-700",disabled:0===d.length||"facility_rental"===r.paymentType&&(!r.selectedTimeSlot||n),children:["subscription"!==r.paymentType||f?s.jsxs(s.Fragment,{children:[s.jsx(j,{className:"w-4 h-4 mr-2"}),f&&"subscription"===r.paymentType?"PINã‚³ãƒ¼ãƒ‰ã‚’ç™ºè¡Œã™ã‚‹":"æ±ºæ¸ˆã«é€²ã‚€"]}):s.jsxs(s.Fragment,{children:[s.jsx(I,{className:"w-4 h-4 mr-2"}),"ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã«åŠ å…¥ã™ã‚‹"]}),d.length>0&&s.jsxs("span",{className:"ml-2 bg-blue-500 text-white px-2 py-1 rounded-full text-sm",children:[d.length,"é ­ãƒ»Â¥",N().toLocaleString()]})]})]})]})}function Oe({hasSubscription:e}){return s.jsxs("div",{className:"space-y-6",children:[e?s.jsxs(oe,{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white p-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(I,{className:"w-5 h-5"}),s.jsx("span",{className:"font-semibold",children:"ã‚µãƒ–ã‚¹ã‚¯ä¼šå“¡ç‰¹å…¸"})]}),s.jsxs("div",{className:"text-sm space-y-1",children:[s.jsx("p",{children:"â€¢ 3é ­ã¾ã§ä½¿ã„æ”¾é¡Œ"}),s.jsx("p",{children:"â€¢ æ–½è¨­è²¸ã—åˆ‡ã‚Š20%OFF"}),s.jsx("p",{children:"â€¢ ãƒšãƒƒãƒˆã‚·ãƒ§ãƒƒãƒ—10%OFF"})]})]}):s.jsxs(oe,{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white p-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(I,{className:"w-5 h-5"}),s.jsx("span",{className:"font-semibold",children:"ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãŒãŠå¾—ï¼"})]}),s.jsxs("div",{className:"text-sm space-y-1 mb-3",children:[s.jsx("p",{children:"â€¢ æœˆé¡Â¥3,800ã§3é ­ã¾ã§ä½¿ã„æ”¾é¡Œ"}),s.jsx("p",{children:"â€¢ æ–½è¨­è²¸ã—åˆ‡ã‚Š20%OFF"}),s.jsx("p",{children:"â€¢ ãƒšãƒƒãƒˆã‚·ãƒ§ãƒƒãƒ—10%OFF"}),s.jsx("p",{children:"â€¢ å…¨å›½ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã§åˆ©ç”¨å¯èƒ½"})]}),s.jsx("p",{className:"text-xs",children:"ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã‚’é¸æŠã—ã¦æ±ºæ¸ˆãƒšãƒ¼ã‚¸ã§ç”³ã—è¾¼ã¿ã§ãã¾ã™"})]}),s.jsxs(oe,{className:"p-4 bg-blue-50 border-blue-200",children:[s.jsxs("h3",{className:"font-semibold text-blue-900 mb-2 flex items-center",children:[s.jsx(T,{className:"w-4 h-4 mr-2"}),"æ–™é‡‘ä½“ç³»"]}),s.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"1æ—¥åˆ¸ï¼ˆæ®µéšçš„æ–™é‡‘åˆ¶ï¼‰"}),s.jsxs("div",{className:"ml-2 space-y-1",children:[s.jsx("p",{children:"â€¢ 1é ­ç›®: Â¥800"}),s.jsx("p",{children:"â€¢ 2é ­ç›®: +Â¥400"}),s.jsx("p",{children:"â€¢ 3é ­ç›®: +Â¥400"}),s.jsx("p",{className:"font-medium",children:"3é ­åˆè¨ˆ: Â¥1,600"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"ã‚µãƒ–ã‚¹ã‚¯: æœˆé¡Â¥3,800"}),s.jsx("p",{className:"ml-2",children:"3é ­ã¾ã§ä½¿ã„æ”¾é¡Œ"})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium flex items-center",children:[s.jsx($,{className:"w-3 h-3 mr-1"}),"æ–½è¨­è²¸ã—åˆ‡ã‚Š"]}),s.jsxs("div",{className:"ml-2 space-y-1",children:[s.jsx("p",{children:"â€¢ é€šå¸¸: Â¥4,400/1æ™‚é–“"}),s.jsx("p",{className:"text-purple-700 font-medium",children:"â€¢ ã‚µãƒ–ã‚¹ã‚¯: Â¥3,520/1æ™‚é–“ï¼ˆ20%OFFï¼‰"}),s.jsx("p",{children:"â€¢ 1æ™‚é–“å˜ä½ã§äºˆç´„å¯èƒ½"}),s.jsxs("p",{children:["â€¢ ",s.jsx("strong",{children:"2æ—¥å‰ã¾ã§ã®äºˆç´„ãŒå¿…è¦"})]})]})]})]})]}),s.jsxs(oe,{className:"p-4 bg-green-50 border-green-200",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(j,{className:"w-5 h-5 text-green-600"}),s.jsx("h3",{className:"font-semibold text-green-900",children:"æ±ºæ¸ˆã«ã¤ã„ã¦"})]}),s.jsxs("div",{className:"space-y-1 text-sm text-green-800",children:[s.jsx("p",{children:"â€¢ å®‰å…¨ãªã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰æ±ºæ¸ˆ"}),s.jsx("p",{children:"â€¢ æ±ºæ¸ˆå®Œäº†å¾Œã€å³åº§ã«PINã‚³ãƒ¼ãƒ‰ç™ºè¡Œ"}),s.jsx("p",{children:"â€¢ 24æ™‚é–“æœ‰åŠ¹ï¼ˆ1æ—¥åˆ¸ã®å ´åˆï¼‰"}),s.jsx("p",{children:"â€¢ å…¨å›½ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã§åˆ©ç”¨å¯èƒ½"}),s.jsx("p",{children:"â€¢ æœ€å¤§3é ­ã¾ã§åŒæ™‚å…¥å ´"})]})]}),s.jsxs(oe,{className:"p-4 bg-green-50 border-green-200",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(T,{className:"w-5 h-5 text-green-600"}),s.jsx("h3",{className:"font-semibold text-green-900",children:"1æ—¥åˆ¸ã®ç‰¹å¾´"})]}),s.jsxs("div",{className:"space-y-1 text-sm text-green-800",children:[s.jsx("p",{children:"â€¢ 24æ™‚é–“æœ‰åŠ¹ï¼ˆç™ºè¡Œã‹ã‚‰24æ™‚é–“å¾Œã«å¤±åŠ¹ï¼‰"}),s.jsx("p",{children:"â€¢ æœ€å¤§3é ­ã¾ã§åŒæ™‚å…¥å ´å¯èƒ½"}),s.jsx("p",{children:"â€¢ æ®µéšçš„æ–™é‡‘åˆ¶ã§ãŠå¾—"}),s.jsx("p",{children:"â€¢ å…¨å›½ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã§åˆ©ç”¨å¯èƒ½"}),s.jsx("p",{className:"text-red-600 font-medium",children:"â€¢ æ–½è¨­è²¸ã—åˆ‡ã‚Šä¸­ã¯å…¥å ´ã§ãã¾ã›ã‚“"})]})]}),s.jsxs(oe,{className:"p-4 bg-orange-50 border-orange-200",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx($,{className:"w-5 h-5 text-orange-600"}),s.jsx("h3",{className:"font-semibold text-orange-900",children:"æ–½è¨­è²¸ã—åˆ‡ã‚Šç‰¹å…¸"})]}),s.jsxs("div",{className:"space-y-1 text-sm text-orange-800",children:[s.jsx("p",{children:"â€¢ æ–½è¨­å…¨ä½“ã‚’ç‹¬å åˆ©ç”¨"}),s.jsx("p",{children:"â€¢ äººæ•°åˆ¶é™ãªã—"}),s.jsx("p",{children:"â€¢ 1æ™‚é–“å˜ä½ã§ã®åˆ©ç”¨"}),s.jsx("p",{children:"â€¢ æœ€å¤§3é ­ã¾ã§åŒæ™‚å…¥å ´"}),s.jsx("p",{children:"â€¢ å‹é”ã«PINã‚³ãƒ¼ãƒ‰å…±æœ‰å¯èƒ½"}),s.jsx("p",{children:"â€¢ ä»–ã®åˆ©ç”¨è€…ã‚’ä¸€åˆ‡æ°—ã«ã›ãšè‡ªç”±ã«éŠã¹ã¾ã™"}),s.jsx("p",{children:"â€¢ å¤§å‹çŠ¬ãƒ»å°å‹çŠ¬ã‚¨ãƒªã‚¢ä¸¡æ–¹åˆ©ç”¨å¯èƒ½"}),s.jsx("p",{className:"text-purple-700 font-medium",children:"â€¢ ã‚µãƒ–ã‚¹ã‚¯ä¼šå“¡ã¯20%OFFï¼"}),s.jsxs("p",{className:"text-red-600 font-medium",children:["â€¢ ",s.jsx("strong",{children:"2æ—¥å‰ã¾ã§ã®äºˆç´„ãŒå¿…è¦"})]})]})]}),s.jsxs(oe,{className:"p-4 bg-yellow-50 border-yellow-200",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(w,{className:"w-5 h-5 text-yellow-600"}),s.jsx("h3",{className:"font-semibold text-yellow-900",children:"å…¥å ´æ™‚ã®çŠ¬é¸æŠ"})]}),s.jsxs("div",{className:"space-y-1 text-sm text-yellow-800",children:[s.jsx("p",{children:"â€¢ æœ€å¤§3é ­ã¾ã§é¸æŠå¯èƒ½"}),s.jsx("p",{children:"â€¢ é¸æŠã—ãŸçŠ¬ã®ã¿å…¥å ´å¯èƒ½"}),s.jsx("p",{children:"â€¢ å…¨ã¦ã®çŠ¬ã®ãƒ¯ã‚¯ãƒãƒ³è¨¼æ˜æ›¸ãŒå¿…è¦"}),s.jsx("p",{children:"â€¢ å¾Œã‹ã‚‰çŠ¬ã®å¤‰æ›´ã¯ã§ãã¾ã›ã‚“"})]})]}),s.jsxs(oe,{className:"p-4 bg-green-50 border-green-200",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(u,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"text-sm font-medium text-green-900",children:"æ±ºæ¸ˆå®Œäº†å¾Œã®æµã‚Œ"})]}),s.jsxs("div",{className:"text-xs text-green-800 space-y-1",children:[s.jsx("p",{children:"1. æ±ºæ¸ˆå®Œäº†ã¨åŒæ™‚ã«å…¥å ´ç”¨PINã‚³ãƒ¼ãƒ‰ãŒç™ºè¡Œã•ã‚Œã¾ã™"}),s.jsx("p",{children:"2. ãƒã‚¤ãƒšãƒ¼ã‚¸ã®ã€Œå…¥é€€å ´ã€ã‹ã‚‰PINã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª"}),s.jsx("p",{children:"3. äºˆç´„æ—¥æ™‚ã«ãƒ‰ãƒƒã‚°ãƒ©ãƒ³å…¥å£ã§PINã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›"}),s.jsx("p",{children:"4. é¸æŠã—ãŸå…¨ã¦ã®çŠ¬ã¨ä¸€ç·’ã«å…¥å ´ã§ãã¾ã™"}),s.jsx("p",{className:"text-orange-700 font-medium",children:"5. æ–½è¨­è²¸ã—åˆ‡ã‚Šã®å ´åˆã€å‹é”ã«PINã‚³ãƒ¼ãƒ‰ã‚’å…±æœ‰å¯èƒ½ï¼"})]})]})]})}const qe=Object.freeze(Object.defineProperty({__proto__:null,ParkReservation:function(){const{parkId:a}=_(),t=k(),{user:l}=me(),{isActive:r}=je(),{createCheckoutSession:i,loading:c}=ge(),[n,d]=e.useState(!1),[o,x]=e.useState(""),[m,h]=e.useState([]),[p,u]=e.useState(null),[j,g]=e.useState([]),[b,N]=e.useState([]),[f,y]=e.useState([]),[v,w]=e.useState({date:"",selectedTimeSlot:"",duration:"1",reservationType:"whole_facility",paymentType:"single"}),C=e=>{w((s=>({...s,...e})))},[D,T]=e.useState(!1),P=e.useMemo((()=>{const e=[];for(let s=6;s<=21;s++){const a=`${s.toString().padStart(2,"0")}:00`;e.push({time:a,available:!0,reservationCount:0,maxCapacity:(null==p?void 0:p.max_capacity)||10,isPrivateBoothAvailable:!0,isWholeFacilityAvailable:!0})}return e}),[null==p?void 0:p.max_capacity]);e.useEffect((()=>{l?async function(){if(l)try{const[e,s]=await Promise.all([ue.from("dogs").select("\n              *,\n              vaccine_certifications(*)\n            ").eq("owner_id",l.id),ue.from("dog_parks").select("*").eq("id",a).single()]);if(e.error)throw e.error;if(s.error)throw s.error;const t=(e.data||[]).filter((e=>e.vaccine_certifications&&e.vaccine_certifications.some((e=>"approved"===e.status))));h(t),u(s.data)}catch(e){}}():t("/login")}),[l,a,t]),e.useEffect((()=>{r&&"single"===v.paymentType&&C({paymentType:"subscription"})}),[r]),e.useEffect((()=>{v.date&&p&&I()}),[v.date,p]),e.useEffect((()=>{if(v.date){const e=new Date(v.date),s=new Date;s.setHours(0,0,0,0);const a=new Date(s);a.setDate(s.getDate()+2);const t="facility_rental"===v.paymentType&&e<a;T(t),x(t?"æ–½è¨­è²¸ã—åˆ‡ã‚Šã¯2æ—¥å‰ã¾ã§ã®äºˆç´„ãŒå¿…è¦ã§ã™ã€‚":"")}}),[v.date,v.paymentType]);const I=async()=>{if(v.date&&p)try{const{data:e,error:s}=await ue.from("reservations").select("*").eq("park_id",a).eq("date",v.date).eq("status","confirmed");if(s)throw s;N(e||[]),E(e||[])}catch(e){}},E=e=>{const s=[...P];s.forEach((s=>{const a=parseInt(s.time.split(":")[0]);let t=0,l=0,r=0;e.forEach((e=>{const s=parseInt(e.start_time.split(":")[0]),i=s+e.duration;a>=s&&a<i&&("whole_facility"===e.reservation_type||e.total_amount>=4400?r++:"private_booth"===e.reservation_type||5e3===e.total_amount?l++:t++)})),s.reservationCount=t,s.available=t<s.maxCapacity&&0===r,s.isPrivateBoothAvailable=l<((null==p?void 0:p.private_booth_count)||0)&&0===r,s.isWholeFacilityAvailable=0===t&&0===l&&0===r})),g(s)},O=()=>{const e=parseInt(v.duration);if(r){const s=4400*e;return Math.round(.8*s)}return 4400*e},q=()=>{const e=f.length;return 0===e?0:1===e?800:800+400*(e-1)},L=()=>"subscription"===v.paymentType?r?0:3800:"facility_rental"===v.paymentType?O():q(),F=()=>f.map((e=>{const s=m.find((s=>s.id===e));return(null==s?void 0:s.name)||""})).filter((e=>e)).join("ã€");return p?0===m.length?s.jsxs(oe,{className:"max-w-2xl mx-auto text-center py-8",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"ãƒ¯ã‚¯ãƒãƒ³æ¥ç¨®è¨¼æ˜æ›¸ãŒå¿…è¦ã§ã™"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’åˆ©ç”¨ã™ã‚‹ã«ã¯ã€ãƒ¯ã‚¯ãƒãƒ³æ¥ç¨®è¨¼æ˜æ›¸ã®æ‰¿èªãŒå¿…è¦ã§ã™ã€‚ ã¾ã è¨¼æ˜æ›¸ã‚’æå‡ºã—ã¦ã„ãªã„å ´åˆã¯ã€ãƒ¯ãƒ³ã¡ã‚ƒã‚“ã®ç™»éŒ²æ™‚ã«æå‡ºã—ã¦ãã ã•ã„ã€‚"}),s.jsx(xe,{onClick:()=>t("/register-dog"),children:"ãƒ¯ãƒ³ã¡ã‚ƒã‚“ã‚’ç™»éŒ²ã™ã‚‹"})]}):s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("h1",{className:"text-2xl font-bold text-center mb-8",children:[p.name,"ã®äºˆç´„"]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsx(Ee,{park:p,error:o,formData:v,setFormData:C,timeSlots:j,isDateTooSoon:D,selectedDogs:f,dogs:m,handleDogSelection:e=>{y((s=>s.includes(e)?s.filter((s=>s!==e)):s.length>=3?(x("æœ€å¤§3é ­ã¾ã§é¸æŠå¯èƒ½ã§ã™ã€‚"),s):(x(""),[...s,e])))},handleTimeSlotSelect:e=>{w((s=>({...s,selectedTimeSlot:e})))},getEndTime:(e,s)=>`${(parseInt(e.split(":")[0])+parseInt(s)).toString().padStart(2,"0")}:00`,getSlotStatus:e=>e.isWholeFacilityAvailable?{label:"æ–½è¨­è²¸ã—åˆ‡ã‚Šå¯èƒ½",color:"bg-orange-500 text-white hover:bg-orange-600",icon:$}:{label:"åˆ©ç”¨ä¸å¯",color:"bg-red-500 text-white cursor-not-allowed",icon:S},getSelectedDogNames:F,calculateDayPassPrice:q,calculateTotalPrice:L,hasSubscription:r,handleSubmit:async e=>{if(e.preventDefault(),l&&p){d(!0),x("");try{if("facility_rental"===v.paymentType&&!v.selectedTimeSlot)return x("æ–½è¨­è²¸ã—åˆ‡ã‚Šã®å ´åˆã¯æ™‚é–“ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚"),void d(!1);if(0===f.length)return x("ãƒ¯ãƒ³ã¡ã‚ƒã‚“ã‚’1é ­ä»¥ä¸Šé¸æŠã—ã¦ãã ã•ã„ã€‚"),void d(!1);if("facility_rental"===v.paymentType){const e=j.find((e=>e.time===v.selectedTimeSlot));if(!e||!e.isWholeFacilityAvailable)return x("é¸æŠã•ã‚ŒãŸæ™‚é–“ã¯æ–½è¨­è²¸ã—åˆ‡ã‚Šã§ãã¾ã›ã‚“ã€‚ä»–ã®äºˆç´„ãŒå…¥ã£ã¦ã„ã¾ã™ã€‚"),void d(!1);const s=new Date(v.date),a=new Date;a.setHours(0,0,0,0);const t=new Date(a);if(t.setDate(a.getDate()+2),s<t)return x("æ–½è¨­è²¸ã—åˆ‡ã‚Šã¯2æ—¥å‰ã¾ã§ã®äºˆç´„ãŒå¿…è¦ã§ã™ã€‚"),void d(!1)}const e={parkId:a,parkName:p.name,selectedDogs:f,dogNames:F(),date:v.date,selectedTimeSlot:v.selectedTimeSlot,duration:parseInt(v.duration),paymentType:v.paymentType,totalPrice:L(),reservationType:"facility_rental"===v.paymentType?"whole_facility":"regular"},s=`DP${Date.now()}${Math.floor(1e3*Math.random())}`;if("single"===v.paymentType){const t=$e.find((e=>"payment"===e.mode));return t?void(await i({priceId:t.priceId,mode:"payment",successUrl:`${window.location.origin}/payment-confirmation?success=true&type=day_pass&order_number=${s}`,cancelUrl:`${window.location.origin}/parks/${a}/reserve?canceled=true`,customParams:{reservation_data:JSON.stringify(e),order_number:s}})):(x("1æ—¥åˆ¸å•†å“ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚"),void d(!1))}if("subscription"===v.paymentType&&!r){const e=$e.find((e=>"subscription"===e.mode));return e?void(await i({priceId:e.priceId,mode:"subscription",successUrl:`${window.location.origin}/payment-confirmation?success=true&type=subscription`,cancelUrl:`${window.location.origin}/parks/${a}/reserve?canceled=true`})):(x("ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³å•†å“ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚"),void d(!1))}if("subscription"===v.paymentType&&r)return void t("/access-control");if("facility_rental"===v.paymentType)return void(await i({priceId:"price_placeholder",mode:"payment",successUrl:`${window.location.origin}/payment-confirmation?success=true&order_number=${s}`,cancelUrl:`${window.location.origin}/parks/${a}/reserve`,customAmount:O(),customName:`${p.name} æ–½è¨­è²¸ã—åˆ‡ã‚Š ${v.date} ${v.selectedTimeSlot}ã€œ${parseInt(v.selectedTimeSlot)+parseInt(v.duration)}:00`,customParams:{reservation_data:JSON.stringify(e),order_number:s}}));t("/checkout",{state:{reservationData:e}})}catch(s){x(`äºˆç´„ãƒ‡ãƒ¼ã‚¿ã®æº–å‚™ã«å¤±æ•—ã—ã¾ã—ãŸ: ${s.message}`)}finally{d(!1)}}},isLoading:n,checkoutLoading:c,MAX_DOGS:3})}),s.jsx(Oe,{hasSubscription:r})]})]}):s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}},Symbol.toStringTag,{value:"Module"})),Le=({type:e,className:t="w-6 h-6"})=>{switch(e){case"network":return s.jsx(L,{className:`${t} text-orange-600`});case"authentication":return s.jsx(d,{className:`${t} text-red-600`});case"authorization":return s.jsx(q,{className:`${t} text-red-600`});case"validation":return s.jsx(a,{className:`${t} text-yellow-600`});case"timeout":return s.jsx(n,{className:`${t} text-blue-600`});case"server":return s.jsx(O,{className:`${t} text-red-600`});case"not_found":return s.jsx(E,{className:`${t} text-gray-600`});case"storage":return s.jsx(E,{className:`${t} text-orange-600`});case"payment":return s.jsx(j,{className:`${t} text-purple-600`});default:return s.jsx(a,{className:`${t} text-gray-600`})}},Fe=({error:a,onClear:l,onRetry:r,className:i="",showAsModal:c=!1})=>{if(e.useEffect((()=>{if(a&&"low"===a.severity&&"validation"===a.type){const e=setTimeout((()=>{l()}),5e3);return()=>clearTimeout(e)}}),[a,l]),!a)return null;const n=(e=>{switch(e){case"low":return{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-800",button:"bg-yellow-600 hover:bg-yellow-700"};case"medium":return{bg:"bg-orange-50",border:"border-orange-200",text:"text-orange-800",button:"bg-orange-600 hover:bg-orange-700"};case"high":return{bg:"bg-red-50",border:"border-red-200",text:"text-red-800",button:"bg-red-600 hover:bg-red-700"};case"critical":return{bg:"bg-red-100",border:"border-red-300",text:"text-red-900",button:"bg-red-700 hover:bg-red-800"};default:return{bg:"bg-gray-50",border:"border-gray-200",text:"text-gray-800",button:"bg-gray-600 hover:bg-gray-700"}}})(a.severity),d=s.jsx("div",{className:`${n.bg} ${n.border} border rounded-lg p-4 ${i}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Le,{type:a.type,className:"flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:`text-sm font-medium ${n.text} mb-1`,children:"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ"}),s.jsx("p",{className:`text-sm ${n.text} mb-3`,children:a.userMessage}),!1]}),!c&&s.jsx("button",{onClick:l,className:`ml-2 ${n.text} hover:opacity-75`,"aria-label":"ã‚¨ãƒ©ãƒ¼ã‚’é–‰ã˜ã‚‹",children:s.jsx(S,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:(()=>{const e=[];return a.retryable&&r&&e.push(s.jsxs(xe,{size:"sm",onClick:()=>{r()},className:n.button,children:[s.jsx(t,{className:"w-4 h-4 mr-1"}),"å†è©¦è¡Œ"]},"retry")),"authentication"===a.type&&e.push(s.jsxs(xe,{size:"sm",onClick:()=>window.location.href="/login",className:"bg-blue-600 hover:bg-blue-700",children:[s.jsx(F,{className:"w-4 h-4 mr-1"}),"ãƒ­ã‚°ã‚¤ãƒ³"]},"login")),"high"!==a.severity&&"critical"!==a.severity||e.push(s.jsxs(xe,{size:"sm",variant:"secondary",onClick:()=>window.location.href="/",children:[s.jsx(R,{className:"w-4 h-4 mr-1"}),"ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹"]},"home")),e.push(s.jsxs(xe,{size:"sm",variant:"secondary",onClick:l,children:[s.jsx(S,{className:"w-4 h-4 mr-1"}),"é–‰ã˜ã‚‹"]},"close")),e})()})]})]})});return c?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsx(oe,{className:"max-w-md w-full",children:d})}):d};function Re({formData:t,onFormDataChange:l,onSubmit:r,error:i,isLoading:c}){const[n,d]=e.useState(""),[o,x]=e.useState(!1),p=e=>{l(e)};return e.useEffect((()=>{const e=setTimeout((()=>{t.name.trim()?(async e=>{if(e.trim()){x(!0);try{const{data:s,error:a}=await ue.from("dog_parks").select("id, name").eq("name",e.trim()).limit(1);if(a)return void d("");s&&s.length>0?d("ã“ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³åã¯æ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚åˆ¥ã®åå‰ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚"):d("")}catch(s){d("")}finally{x(!1)}}else d("")})(t.name):d("")}),500);return()=>clearTimeout(e)}),[t.name]),s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx(m,{className:"w-6 h-6 text-green-600"}),s.jsx("span",{className:"text-green-800 font-medium",children:"ç¬¬ä¸€æ¬¡å¯©æŸ»/æœ¬äººç¢ºèªç”³è«‹ä¸­"})]}),s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ç™»éŒ² - è©³ç´°æƒ…å ±å…¥åŠ›"}),s.jsx("p",{className:"text-gray-600",children:"ç¬¬ä¸€æ¬¡å¯©æŸ»/æœ¬äººç¢ºèªç”³è«‹ä¸­ã§ã™ã€‚è©³ç´°ãªæ–½è¨­æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚"})]}),s.jsx(oe,{className:"mb-6 bg-green-50 border-green-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(m,{className:"w-6 h-6 text-green-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-green-900",children:"ç¬¬ä¸€æ¬¡å¯©æŸ»/æœ¬äººç¢ºèªç”³è«‹ä¸­"}),s.jsx("p",{className:"text-sm text-green-800",children:"åŸºæœ¬æ¡ä»¶ã¨æœ¬äººç¢ºèªã‚’ç”³è«‹ä¸­ã§ã™"})]})]}),s.jsx("div",{className:"text-right text-sm text-green-700",children:s.jsx("p",{children:"æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—: ç¬¬äºŒå¯©æŸ»ï¼ˆæ›¸é¡å¯©æŸ»ï¼‰"})})]})}),i&&s.jsx("div",{className:"mb-6 p-4 bg-red-50 rounded-lg",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(a,{className:"w-5 h-5 text-red-600 mt-0.5"}),s.jsx("p",{className:"text-sm text-red-800",children:i})]})}),s.jsx(oe,{className:"p-6",children:s.jsxs("form",{onSubmit:r,className:"space-y-6",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx(pe,{label:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³å *",value:t.name,onChange:e=>p({name:e.target.value}),placeholder:"ä¾‹: æ¸‹è°·ä¸­å¤®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³",required:!0}),o&&s.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"åå‰ã®é‡è¤‡ã‚’ç¢ºèªä¸­..."}),n&&s.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-start space-x-1",children:[s.jsx(a,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:n})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"èª¬æ˜"}),s.jsx("textarea",{value:t.description,onChange:e=>p({description:e.target.value}),placeholder:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®ç‰¹å¾´ã‚„é­…åŠ›ã‚’ã”ç´¹ä»‹ãã ã•ã„",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),s.jsx("div",{className:"mb-4",children:s.jsx(pe,{label:"ä½æ‰€ *",value:t.address,onChange:e=>p({address:e.target.value}),placeholder:"ä¾‹: æ±äº¬éƒ½æ¸‹è°·åŒºé“ç„å‚1-1-1",required:!0})}),s.jsxs("div",{className:"mb-4",children:[s.jsx(pe,{label:"æœ€å¤§åå®¹é ­æ•° *",type:"number",min:"1",value:t.maxCapacity,onChange:e=>p({maxCapacity:e.target.value}),placeholder:"ä¾‹: 15",required:!0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"åŒæ™‚ã«åˆ©ç”¨ã§ãã‚‹çŠ¬ã®æœ€å¤§é ­æ•°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"å¯¾å¿œçŠ¬ç¨® *"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:t.largeDogArea,onChange:e=>p({largeDogArea:e.target.checked}),className:"rounded text-blue-600"}),s.jsx("span",{children:"å¤§å‹çŠ¬ã‚¨ãƒªã‚¢"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:t.smallDogArea,onChange:e=>p({smallDogArea:e.target.checked}),className:"rounded text-blue-600"}),s.jsx("span",{children:"å°å‹çŠ¬ã‚¨ãƒªã‚¢"})]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("input",{type:"checkbox",checked:t.privateBooths,onChange:e=>p({privateBooths:e.target.checked}),className:"rounded text-blue-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"è²¸ã—åˆ‡ã‚Šãƒ–ãƒ¼ã‚¹"})]}),t.privateBooths&&s.jsx("div",{className:"ml-6",children:s.jsx(pe,{label:"è²¸ã—åˆ‡ã‚Šãƒ–ãƒ¼ã‚¹æ•°",type:"number",min:"1",value:t.privateBoothCount,onChange:e=>p({privateBoothCount:e.target.value}),placeholder:"ä¾‹: 2"})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"è¨­å‚™ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆç¬¬ä¸€å¯©æŸ»ã§é¸æŠã—ãŸå†…å®¹ã‚’ç¢ºèªãƒ»ä¿®æ­£ã§ãã¾ã™ï¼‰"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries({parking:"é§è»Šå ´",shower:"ã‚·ãƒ£ãƒ¯ãƒ¼è¨­å‚™",restroom:"ãƒˆã‚¤ãƒ¬",agility:"ã‚¢ã‚¸ãƒªãƒ†ã‚£è¨­å‚™",rest_area:"ä¼‘æ†©ã‚¹ãƒšãƒ¼ã‚¹",water_station:"çµ¦æ°´è¨­å‚™"}).map((([e,a])=>s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:t.facilities[e],onChange:s=>p({facilities:{...t.facilities,[e]:s.target.checked}}),className:"rounded text-blue-600"}),s.jsx("span",{children:a})]},e)))})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"è¨­å‚™ã®è©³ç´°æƒ…å ±"}),s.jsx("textarea",{value:t.facilityDetails,onChange:e=>p({facilityDetails:e.target.value}),placeholder:"è¨­å‚™ã‚„ã‚µãƒ¼ãƒ“ã‚¹ã«ã¤ã„ã¦ã®è©³ç´°ãªæƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),s.jsx(oe,{className:"bg-blue-50 border-blue-200",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx($,{className:"w-5 h-5 text-blue-600 mt-0.5"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"ç¬¬äºŒå¯©æŸ»ã«ã¤ã„ã¦"}),s.jsxs("ul",{className:"space-y-1 text-xs",children:[s.jsx("li",{children:"â€¢ è©³ç´°ãªæ–½è¨­æƒ…å ±ã¨å¿…è¦æ›¸é¡ã®å¯©æŸ»ã‚’è¡Œã„ã¾ã™"}),s.jsx("li",{children:"â€¢ å¯©æŸ»æœŸé–“ã¯é€šå¸¸3-5å–¶æ¥­æ—¥ã§ã™"}),s.jsx("li",{children:"â€¢ é€šéå¾Œã€QRã‚³ãƒ¼ãƒ‰å®Ÿè¨¼æ¤œæŸ»ã®æ—¥ç¨‹èª¿æ•´ã‚’è¡Œã„ã¾ã™"}),s.jsx("li",{children:"â€¢ å®Ÿè¨¼æ¤œæŸ»å®Œäº†å¾Œã€ä¸€èˆ¬å…¬é–‹ã¨ãªã‚Šã¾ã™"})]})]})]})}),s.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[s.jsxs(h,{to:"/owner-payment-system",className:"text-blue-600 hover:text-blue-800 flex items-center",children:[s.jsx(M,{className:"w-4 h-4 mr-1"}),s.jsx("span",{className:"text-sm",children:"åç›Šã‚·ã‚¹ãƒ†ãƒ ã«ã¤ã„ã¦"})]}),s.jsx(xe,{type:"submit",isLoading:c,disabled:c||!!n||o,className:"bg-blue-600 hover:bg-blue-700",children:"ç¬¬äºŒå¯©æŸ»ã«ç”³ã—è¾¼ã‚€"})]}),n&&s.jsx("div",{className:"mt-2 p-3 bg-red-50 rounded-lg",children:s.jsxs("p",{className:"text-sm text-red-800 flex items-start space-x-2",children:[s.jsx(a,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³åã«å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚åå‰ã‚’å¤‰æ›´ã—ã¦ã‹ã‚‰å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚"})]})})]})})]})}function Me({formData:t,onFormDataChange:l,onSubmit:r,error:i,profileData:c,profileLoading:n,onProfileUpdate:o}){const[x,m]=e.useState(!1),[p,u]=e.useState(!1),[j,g]=e.useState(c),b=e=>{l(e)};return s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsx("h1",{className:"text-2xl font-bold text-center mb-8",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ç™»éŒ² - ç¬¬ä¸€å¯©æŸ»ãƒ»æœ¬äººç¢ºèª"}),s.jsx(oe,{className:"mb-6 bg-blue-50 border-blue-200",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(z,{className:"w-6 h-6 text-blue-600 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"æ–°ã—ã„å¯©æŸ»ãƒ—ãƒ­ã‚»ã‚¹ã«ã¤ã„ã¦"}),s.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"ç¬¬ä¸€å¯©æŸ»ãƒ»æœ¬äººç¢ºèª:"})," åŸºæœ¬çš„ãªæ¡ä»¶ã®ç¢ºèªã¨æœ¬äººç¢ºèªæ›¸é¡ã®å¯©æŸ»"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"ç¬¬äºŒå¯©æŸ»:"})," è©³ç´°ãªæ–½è¨­æƒ…å ±"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯å®Ÿè¨¼æ¤œæŸ»:"})," å®Ÿéš›ã®æ–½è¨­ã§ã®å‹•ä½œç¢ºèª"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"æ²è¼‰ãƒ»é‹å–¶é–‹å§‹:"})," ä¸€èˆ¬å…¬é–‹ã¨äºˆç´„å—ä»˜é–‹å§‹"]})]}),s.jsx("div",{className:"mt-3 flex items-center",children:s.jsxs(h,{to:"/owner-payment-system",className:"text-blue-600 hover:text-blue-800 flex items-center",children:[s.jsx(M,{className:"w-4 h-4 mr-1"}),s.jsx("span",{className:"text-sm font-medium",children:"æ–™é‡‘ä½“ç³»ã¨åç›Šã‚·ã‚¹ãƒ†ãƒ ã«ã¤ã„ã¦è©³ã—ãè¦‹ã‚‹"})]})})]})]})}),s.jsx(oe,{className:"mb-6 bg-yellow-50 border-yellow-200",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(A,{className:"w-6 h-6 text-yellow-600 mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-yellow-900 mb-2",children:"ç™»éŒ²æƒ…å ±ã®ç¢ºèª"}),s.jsxs("div",{className:"text-sm text-yellow-800 mb-4",children:[s.jsx("p",{children:"æœ¬äººç¢ºèªæ›¸é¡ã«è¨˜è¼‰ã•ã‚ŒãŸæƒ…å ±ã¨ä¸€è‡´ã™ã‚‹ã‹ã”ç¢ºèªãã ã•ã„ã€‚"}),s.jsx("p",{children:"é–“é•ã„ãŒã‚ã‚‹å ´åˆã¯ä¿®æ­£ã—ã¦ã‹ã‚‰æœ¬äººç¢ºèªæ›¸é¡ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚"})]}),n?s.jsxs("div",{className:"flex items-center justify-center py-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-yellow-600"}),s.jsx("span",{className:"ml-2 text-yellow-800",children:"ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã‚’èª­ã¿è¾¼ã¿ä¸­..."})]}):s.jsxs("div",{className:"bg-white p-4 rounded-lg border border-yellow-200",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"æ°å"}),s.jsx("p",{className:"font-medium text-gray-900",children:c.name||"æœªè¨­å®š"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"éƒµä¾¿ç•ªå·"}),s.jsx("p",{className:"font-medium text-gray-900",children:c.postal_code||"æœªè¨­å®š"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"ä½æ‰€"}),s.jsx("p",{className:"font-medium text-gray-900",children:c.address||"æœªè¨­å®š"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"é›»è©±ç•ªå·"}),s.jsx("p",{className:"font-medium text-gray-900",children:c.phone_number||"æœªè¨­å®š"})]})]}),s.jsx("div",{className:"mt-4 flex justify-end",children:s.jsxs(xe,{variant:"secondary",onClick:()=>{g(c),u(!0)},className:"flex items-center",children:[s.jsx(N,{className:"w-4 h-4 mr-1"}),"æƒ…å ±ã‚’ä¿®æ­£"]})})]})]})]})}),s.jsx(oe,{className:"mb-6 bg-green-50 border-green-200",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(d,{className:"w-6 h-6 text-green-600 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:"æœ¬äººç¢ºèªæ›¸é¡ã«ã¤ã„ã¦"}),s.jsxs("div",{className:"text-sm text-green-800 space-y-1",children:[s.jsx("p",{children:"å®‰å…¨ãªãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ é‹å–¶ã®ãŸã‚ã€ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚ªãƒ¼ãƒŠãƒ¼ã«ã¯æœ¬äººç¢ºèªãŒå¿…è¦ã§ã™ã€‚"}),s.jsx("p",{children:"é‹è»¢å…è¨±è¨¼ã€ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰ã€ãƒ‘ã‚¹ãƒãƒ¼ãƒˆãªã©ã®æœ¬äººç¢ºèªæ›¸é¡ã®ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚"}),s.jsx("p",{children:"ä½æ‰€ã¨æ°åãŒç™»éŒ²æƒ…å ±ã¨ä¸€è‡´ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚"})]})]})]})}),s.jsx(oe,{className:"mb-6 bg-orange-50 border-orange-200",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(U,{className:"w-6 h-6 text-orange-600 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-orange-900 mb-2",children:"é‡è¦ãªæ³¨æ„äº‹é …"}),s.jsxs("div",{className:"text-sm text-orange-800 space-y-1",children:[s.jsx("p",{children:s.jsx("strong",{children:"æœ¬äººç¢ºèªæ›¸é¡ã®ä½æ‰€ãƒ»æ°åã¨ä¸Šè¨˜ã®ç™»éŒ²æƒ…å ±ãŒä¸€è‡´ã—ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚"})}),s.jsx("p",{children:"ä¸€è‡´ã—ãªã„å ´åˆã¯å¯©æŸ»ãŒé€šã‚‰ãªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚"}),s.jsx("p",{children:"å¼•ã£è¶Šã—ãªã©ã§ä½æ‰€ãŒå¤‰ã‚ã£ãŸå ´åˆã¯ã€å¿…ãšä¸Šè¨˜ã®ã€Œæƒ…å ±ã‚’ä¿®æ­£ã€ã‹ã‚‰æœ€æ–°ã®æƒ…å ±ã«æ›´æ–°ã—ã¦ãã ã•ã„ã€‚"})]})]})]})}),p&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-md w-full mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ç™»éŒ²æƒ…å ±ã®ä¿®æ­£"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(pe,{label:"æ°å",value:j.name,onChange:e=>g({...j,name:e.target.value}),placeholder:"å±±ç”°å¤ªéƒ"}),s.jsx(pe,{label:"éƒµä¾¿ç•ªå·",value:j.postal_code,onChange:e=>g({...j,postal_code:e.target.value}),placeholder:"123-4567"}),s.jsx(pe,{label:"ä½æ‰€",value:j.address,onChange:e=>g({...j,address:e.target.value}),placeholder:"æ±äº¬éƒ½æ–°å®¿åŒºè¥¿æ–°å®¿1-1-1"}),s.jsx(pe,{label:"é›»è©±ç•ªå·",value:j.phone_number,onChange:e=>g({...j,phone_number:e.target.value}),placeholder:"090-1234-5678"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx(xe,{variant:"secondary",onClick:()=>u(!1),children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"}),s.jsx(xe,{onClick:()=>{o(j),u(!1)},disabled:n,children:"ä¿å­˜"})]})]})}),i&&s.jsx("div",{className:"mb-6 p-4 bg-red-50 rounded-lg",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(a,{className:"w-5 h-5 text-red-600 mt-0.5"}),s.jsx("p",{className:"text-sm text-red-800",children:i})]})}),s.jsx(oe,{className:"p-6",children:s.jsxs("form",{onSubmit:r,className:"space-y-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-lg font-bold text-gray-800 mb-3",children:"ç¾åœ¨ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’é‹å–¶ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ *"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",name:"isCurrentlyOperating",value:"yes",checked:"yes"===t.isCurrentlyOperating,onChange:e=>b({isCurrentlyOperating:e.target.value}),className:"text-blue-600"}),s.jsx("span",{children:"ã¯ã„ï¼ˆã™ã§ã«é‹å–¶ä¸­ï¼‰"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",name:"isCurrentlyOperating",value:"no",checked:"no"===t.isCurrentlyOperating,onChange:e=>b({isCurrentlyOperating:e.target.value}),className:"text-blue-600"}),s.jsx("span",{children:"ã„ã„ãˆï¼ˆæ–°è¦é–‹è¨­äºˆå®šï¼‰"})]})]}),"no"===t.isCurrentlyOperating&&s.jsx(s.Fragment,{children:s.jsxs("div",{className:"mt-4 pl-4 border-l-4 border-blue-200",children:[s.jsx("label",{className:"block text-lg font-bold text-gray-800 mb-3",children:"äºˆå®šåœ°ã¯ã‚ãªãŸã®æ‰€æœ‰åœ°ã§ã™ã‹ï¼Ÿ *"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",name:"isOwnedLand",value:"yes",checked:"yes"===t.isOwnedLand,onChange:e=>b({isOwnedLand:e.target.value}),className:"text-blue-600"}),s.jsx("span",{children:"ã¯ã„ï¼ˆæ‰€æœ‰åœ°ï¼‰"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",name:"isOwnedLand",value:"no",checked:"no"===t.isOwnedLand,onChange:e=>b({isOwnedLand:e.target.value}),className:"text-blue-600"}),s.jsx("span",{children:"ã„ã„ãˆï¼ˆå€Ÿç”¨åœ°ï¼‰"})]})]}),"no"===t.isOwnedLand&&s.jsxs("div",{className:"mt-4 pl-4 border-l-4 border-yellow-200",children:[s.jsx("label",{className:"block text-lg font-bold text-gray-800 mb-3",children:"åœŸåœ°æ‰€æœ‰è€…ã®è¨±å¯ã¯å¾—ã¦ã„ã¾ã™ã‹ï¼Ÿ *"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",name:"hasOwnerPermission",value:"yes",checked:"yes"===t.hasOwnerPermission,onChange:e=>b({hasOwnerPermission:e.target.value}),className:"text-blue-600"}),s.jsx("span",{children:"ã¯ã„"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",name:"hasOwnerPermission",value:"no",checked:"no"===t.hasOwnerPermission,onChange:e=>b({hasOwnerPermission:e.target.value}),className:"text-blue-600"}),s.jsx("span",{children:"ã„ã„ãˆ"})]})]})]}),s.jsxs("div",{className:"mt-4 pl-4 border-l-4 border-green-200",children:[s.jsx("label",{className:"block text-lg font-bold text-gray-800 mb-3",children:"è¿‘éš£ä½æ°‘ã®ç†è§£ã¯å¾—ã¦ã„ã¾ã™ã‹ï¼Ÿ *"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",name:"hasNeighborConsent",value:"yes",checked:"yes"===t.hasNeighborConsent,onChange:e=>b({hasNeighborConsent:e.target.value}),className:"text-blue-600"}),s.jsx("span",{children:"ã¯ã„"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",name:"hasNeighborConsent",value:"no",checked:"no"===t.hasNeighborConsent,onChange:e=>b({hasNeighborConsent:e.target.value}),className:"text-blue-600"}),s.jsx("span",{children:"ã„ã„ãˆ"})]})]})]})]})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx(pe,{label:s.jsx("span",{className:"text-lg font-bold text-gray-800",children:"åºƒã•ï¼ˆã¡ï¼‰ *"}),type:"number",min:"1",value:t.landArea,onChange:e=>b({landArea:e.target.value}),placeholder:"ä¾‹: 500",required:!0}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®é‹å–¶ã«ã¯æœ€ä½100ã¡ä»¥ä¸Šã®åºƒã•ãŒå¿…è¦ã§ã™"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-lg font-bold text-gray-800 mb-3",children:"æ–½è¨­ã¾ã§ã¯é€±ã«1åº¦ç¨‹åº¦ã€çŠ¶æ³ã®ç¢ºèªã‚„ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã«è¡Œãã“ã¨ãŒã§ãã¾ã™ã‹ï¼Ÿ *"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",name:"canVisitWeekly",value:"yes",checked:"yes"===t.canVisitWeekly,onChange:e=>b({canVisitWeekly:e.target.value}),className:"text-blue-600"}),s.jsx("span",{children:"ã¯ã„"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",name:"canVisitWeekly",value:"no",checked:"no"===t.canVisitWeekly,onChange:e=>b({canVisitWeekly:e.target.value}),className:"text-blue-600"}),s.jsx("span",{children:"ã„ã„ãˆ"})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-lg font-bold text-gray-800 mb-3",children:"ç·Šæ€¥æ™‚ï¼ˆæ€ªæˆ‘ã‚„äº‹æ•…ãªã©ï¼‰ã«1æ™‚é–“ä»¥å†…ã«æ–½è¨­ã«åˆ°ç€ã§ãã¾ã™ã‹ï¼Ÿ *"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",name:"canReachQuickly",value:"yes",checked:"yes"===t.canReachQuickly,onChange:e=>b({canReachQuickly:e.target.value}),className:"text-blue-600"}),s.jsx("span",{children:"ã¯ã„"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",name:"canReachQuickly",value:"no",checked:"no"===t.canReachQuickly,onChange:e=>b({canReachQuickly:e.target.value}),className:"text-blue-600"}),s.jsx("span",{children:"ã„ã„ãˆ"})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-lg font-bold text-gray-800 mb-3",children:"åç¤¾ä¼šçš„å‹¢åŠ›ã¨ã®é–¢ä¿‚ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ *"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",name:"isAntiSocialForces",value:"no",checked:"no"===t.isAntiSocialForces,onChange:e=>b({isAntiSocialForces:e.target.value}),className:"text-blue-600"}),s.jsx("span",{children:"ã„ã„ãˆï¼ˆé–¢ä¿‚ãªã—ï¼‰"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",name:"isAntiSocialForces",value:"yes",checked:"yes"===t.isAntiSocialForces,onChange:e=>b({isAntiSocialForces:e.target.value}),className:"text-blue-600"}),s.jsx("span",{children:"ã¯ã„ï¼ˆé–¢ä¿‚ã‚ã‚Šï¼‰"})]})]}),"yes"===t.isAntiSocialForces&&s.jsx("div",{className:"mt-2 p-3 bg-red-50 rounded-lg",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(q,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),s.jsx("p",{className:"text-sm text-red-800",children:"åç¤¾ä¼šçš„å‹¢åŠ›ã¨ã®é–¢ä¿‚ãŒã‚ã‚‹å ´åˆã€ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®ç™»éŒ²ã¯ã§ãã¾ã›ã‚“ã€‚å½“ç¤¾ã¯åç¤¾ä¼šçš„å‹¢åŠ›ã¨ã®é–¢ä¿‚ã‚’ä¸€åˆ‡èªã‚ã¦ãŠã‚Šã¾ã›ã‚“ã€‚"})]})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-lg font-bold text-gray-800 mb-3",children:"æœ¬äººç¢ºèªæ›¸é¡ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ *"}),s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[s.jsx(J,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("input",{type:"file",accept:"image/*,application/pdf",onChange:e=>{e.target.files&&e.target.files[0]&&b({identityDocument:e.target.files[0]})},className:"hidden",id:"identity-upload",required:!0}),s.jsx("label",{htmlFor:"identity-upload",className:"cursor-pointer text-blue-600 hover:text-blue-800 font-medium",children:"ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ"}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"é‹è»¢å…è¨±è¨¼ãƒ»ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰ãƒ»ãƒ‘ã‚¹ãƒãƒ¼ãƒˆç­‰ã®ç”»åƒã¾ãŸã¯PDF"}),s.jsx("p",{className:"text-sm text-gray-500",children:"æœ€å¤§ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º: 10MB"}),t.identityDocument&&s.jsxs("p",{className:"text-sm text-green-600 mt-2",children:["é¸æŠã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«: ",t.identityDocument.name]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-lg font-bold text-gray-800 mb-3",children:"äºˆå®šè¨­å‚™ *"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries({parking:"é§è»Šå ´",shower:"ã‚·ãƒ£ãƒ¯ãƒ¼è¨­å‚™",restroom:"ãƒˆã‚¤ãƒ¬",agility:"ã‚¢ã‚¸ãƒªãƒ†ã‚£è¨­å‚™",rest_area:"ä¼‘æ†©ã‚¹ãƒšãƒ¼ã‚¹",water_station:"çµ¦æ°´è¨­å‚™"}).map((([e,a])=>s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:t.facilities[e],onChange:s=>b({facilities:{...t.facilities,[e]:s.target.checked}}),className:"rounded text-blue-600"}),s.jsx("span",{className:"text-sm",children:a})]},e)))})]}),s.jsx(oe,{className:"bg-yellow-50 border-yellow-200",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(a,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),s.jsxs("div",{className:"text-sm text-yellow-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"ç¬¬ä¸€å¯©æŸ»ãƒ»æœ¬äººç¢ºèªã«ã¤ã„ã¦"}),s.jsxs("ul",{className:"space-y-1 text-xs",children:[s.jsx("li",{children:"â€¢ åŸºæœ¬çš„ãªé–‹è¨­æ¡ä»¶ã‚’æº€ãŸã—ã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã—ã¾ã™"}),s.jsx("li",{children:"â€¢ æœ¬äººç¢ºèªæ›¸é¡ã®ä½æ‰€ãƒ»æ°åãŒç™»éŒ²æƒ…å ±ã¨ä¸€è‡´ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™"}),s.jsx("li",{children:"â€¢ é€šéå¾Œã€è©³ç´°ãªæ–½è¨­æƒ…å ±ã®å…¥åŠ›ã«é€²ã¿ã¾ã™"}),s.jsx("li",{children:"â€¢ ç¬¬äºŒå¯©æŸ»ã§ã¯æ›¸é¡å¯©æŸ»ã‚’è¡Œã„ã¾ã™"}),s.jsx("li",{children:"â€¢ æœ€çµ‚çš„ã«QRã‚³ãƒ¼ãƒ‰å®Ÿè¨¼æ¤œæŸ»ã‚’çµŒã¦æ²è¼‰é–‹å§‹ã¨ãªã‚Šã¾ã™"})]})]})]})}),s.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[s.jsxs(h,{to:"/owner-payment-system",className:"text-blue-600 hover:text-blue-800 flex items-center",children:[s.jsx(M,{className:"w-4 h-4 mr-1"}),s.jsx("span",{className:"text-sm",children:"åç›Šã‚·ã‚¹ãƒ†ãƒ ã«ã¤ã„ã¦"})]}),s.jsxs(xe,{type:"submit",className:"w-1/2 bg-blue-600 hover:bg-blue-700",disabled:!t.identityDocument||x,isLoading:x,children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"ç¬¬ä¸€å¯©æŸ»ãƒ»æœ¬äººç¢ºèªã‚’ç”³ã—è¾¼ã‚€"]})]})]})})]})}function ze({rejectedParks:l,onUpdateRejectedParks:r,onResubmit:i,onError:c}){const[n,d]=e.useState(!1),[o,x]=e.useState(null);return 0===l.length?null:s.jsxs(s.Fragment,{children:[s.jsx(oe,{className:"mb-6 bg-red-50 border-red-200",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(a,{className:"w-6 h-6 text-red-600 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-red-900 mb-2",children:"å´ä¸‹ã•ã‚ŒãŸç”³è«‹"}),s.jsx("p",{className:"text-sm text-red-800 mb-4",children:"ä»¥ä¸‹ã®ç”³è«‹ã¯å¯©æŸ»ã®çµæœã€å´ä¸‹ã•ã‚Œã¾ã—ãŸã€‚ç”³è«‹å†…å®¹ã‚’è¦‹ç›´ã—ã¦å†æå‡ºã™ã‚‹ã‹ã€å‰Šé™¤ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚"}),s.jsx("div",{className:"space-y-4",children:l.map((e=>s.jsx("div",{className:"bg-white p-4 rounded-lg border border-red-200",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:e.name}),s.jsx("p",{className:"text-sm text-gray-600",children:e.address}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["ç”³è«‹æ—¥: ",new Date(e.created_at).toLocaleDateString("ja-JP")]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(xe,{size:"sm",variant:"secondary",onClick:()=>i(e),children:[s.jsx(t,{className:"w-4 h-4 mr-1"}),"å†ç”³è«‹"]}),s.jsxs(xe,{size:"sm",variant:"secondary",className:"text-red-600 hover:text-red-700",onClick:()=>x(e.id),children:[s.jsx(v,{className:"w-4 h-4 mr-1"}),"å‰Šé™¤"]})]})]})},e.id)))})]})]})}),o&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"ç”³è«‹ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚ç”³è«‹ã‚’å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(xe,{variant:"secondary",onClick:()=>x(null),children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"}),s.jsxs(xe,{className:"bg-red-600 hover:bg-red-700",isLoading:n,onClick:()=>(async e=>{try{d(!0);const{error:s}=await ue.from("dog_parks").delete().eq("id",e);if(s)throw s;const a=l.filter((s=>s.id!==e));r(a),x(null)}catch(s){c(s.message||"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ")}finally{d(!1)}})(o),children:[s.jsx(v,{className:"w-4 h-4 mr-2"}),"å‰Šé™¤ã™ã‚‹"]})]})]})})]})}const Ae=Object.freeze(Object.defineProperty({__proto__:null,ParkRegistration:function(){const a=k(),{user:t}=me(),[l,r]=e.useState(!1),[i,c]=e.useState(1),[n,d]=e.useState([]),[o,x]=e.useState(null),[m,h]=e.useState({name:"",postal_code:"",address:"",phone_number:"",email:""}),[p,u]=e.useState(!1),[j,g]=e.useState(!1),{error:b,clearError:N,handleError:f,executeWithErrorHandling:y}=be(),v=Ne(fe.api),[w,_]=e.useState({isCurrentlyOperating:"",isOwnedLand:"",hasOwnerPermission:"",hasNeighborConsent:"",landArea:"",isAntiSocialForces:"",canVisitWeekly:"",canReachQuickly:"",identityDocument:null,name:"",description:"",address:"",maxCapacity:"10",largeDogArea:!0,smallDogArea:!0,privateBooths:!1,privateBoothCount:"0",facilities:{parking:!1,shower:!1,restroom:!1,agility:!1,rest_area:!1,water_station:!1},facilityDetails:""});e.useEffect((()=>{t?(S(),C(),D()):a("/login")}),[t,a]);const S=async()=>{await y((async()=>{const{data:e,error:s}=await ue.from("dog_parks").select("*").eq("owner_id",null==t?void 0:t.id).eq("status","rejected");if(s)throw s;d(e||[])}),{operation:"fetch_rejected_parks"})},C=async()=>{await y((async()=>{const{data:e,error:s}=await ue.from("owner_verifications").select("status").eq("user_id",null==t?void 0:t.id).single();if(s&&"PGRST116"!==s.code)throw s;x((null==e?void 0:e.status)||null)}),{operation:"check_identity_verification"})},D=async()=>{await y((async()=>{u(!0);const{data:e,error:s}=await ue.from("profiles").select("name, postal_code, address, phone_number, email").eq("id",null==t?void 0:t.id).single();if(s)throw s;h(e||{name:"",postal_code:"",address:"",phone_number:"",email:""})}),{operation:"fetch_profile_data"}),u(!1)},T=e=>{_((s=>({...s,...e})))};return 1===i?s.jsxs("div",{children:[s.jsx(Fe,{error:b,onClear:N,className:"mb-6"}),s.jsx(ze,{rejectedParks:n,onUpdateRejectedParks:e=>{d(e)},onResubmit:e=>{_((s=>{var a,t;return{...s,name:e.name,description:e.description||"",address:e.address,maxCapacity:(null==(a=e.max_capacity)?void 0:a.toString())||"10",largeDogArea:e.large_dog_area||!0,smallDogArea:e.small_dog_area||!0,privateBooths:e.private_booths||!1,privateBoothCount:(null==(t=e.private_booth_count)?void 0:t.toString())||"0",facilities:e.facilities||{parking:!1,shower:!1,restroom:!1,agility:!1,rest_area:!1,water_station:!1},facilityDetails:e.facility_details||""}})),c(2)},onError:f}),s.jsx(Me,{formData:w,onFormDataChange:T,onSubmit:async e=>{e.preventDefault(),await y((async()=>{if((e=>{if(!e.isCurrentlyOperating)throw new Error("ç¾åœ¨ã®é‹å–¶çŠ¶æ³ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚");if("no"===e.isCurrentlyOperating){if(!e.isOwnedLand)throw new Error("äºˆå®šåœ°ã®æ‰€æœ‰çŠ¶æ³ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚");if("no"===e.isOwnedLand&&!e.hasOwnerPermission)throw new Error("åœŸåœ°æ‰€æœ‰è€…ã®è¨±å¯ã«ã¤ã„ã¦é¸æŠã—ã¦ãã ã•ã„ã€‚");if(!e.hasNeighborConsent)throw new Error("è¿‘éš£ä½æ°‘ã®ç†è§£ã«ã¤ã„ã¦é¸æŠã—ã¦ãã ã•ã„ã€‚")}if(!e.landArea||parseInt(e.landArea)<=0)throw new Error("åºƒã•ã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");if(!e.isAntiSocialForces)throw new Error("åç¤¾ä¼šçš„å‹¢åŠ›ã¨ã®é–¢ä¿‚ã«ã¤ã„ã¦é¸æŠã—ã¦ãã ã•ã„ã€‚");if("yes"===e.isAntiSocialForces)throw new Error("åç¤¾ä¼šçš„å‹¢åŠ›ã¨ã®é–¢ä¿‚ãŒã‚ã‚‹å ´åˆã€ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®ç™»éŒ²ã¯ã§ãã¾ã›ã‚“ã€‚");if(!e.canVisitWeekly)throw new Error("é€±1å›ã®è¨ªå•å¯å¦ã«ã¤ã„ã¦é¸æŠã—ã¦ãã ã•ã„ã€‚");if(!e.canReachQuickly)throw new Error("ç·Šæ€¥æ™‚ã®åˆ°ç€å¯å¦ã«ã¤ã„ã¦é¸æŠã—ã¦ãã ã•ã„ã€‚");if(!e.identityDocument)throw new Error("æœ¬äººç¢ºèªæ›¸é¡ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚");if("no"===e.isCurrentlyOperating){if("no"===e.isOwnedLand&&"no"===e.hasOwnerPermission)throw new Error("åœŸåœ°æ‰€æœ‰è€…ã®è¨±å¯ã‚’å¾—ã¦ã‹ã‚‰ãŠç”³ã—è¾¼ã¿ãã ã•ã„ã€‚å€Ÿç”¨åœ°ã§ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³é‹å–¶ã«ã¯æ‰€æœ‰è€…ã®åŒæ„ãŒå¿…è¦ã§ã™ã€‚");if("no"===e.hasNeighborConsent)throw new Error("è¿‘éš£ä½æ°‘ã®ç†è§£ã‚’å¾—ã¦ã‹ã‚‰ãŠç”³ã—è¾¼ã¿ãã ã•ã„ã€‚åœ°åŸŸã¨ã®è‰¯å¥½ãªé–¢ä¿‚ã¯é‹å–¶ã«ãŠã„ã¦é‡è¦ã§ã™ã€‚")}if(parseInt(e.landArea)<100)throw new Error("ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®é‹å–¶ã«ã¯æœ€ä½100ã¡ä»¥ä¸Šã®åºƒã•ãŒå¿…è¦ã§ã™ã€‚");if("no"===e.canVisitWeekly)throw new Error("é€±ã«1åº¦ç¨‹åº¦ã®è¨ªå•ãŒå¿…è¦ã§ã™ã€‚æ–½è¨­ã®çŠ¶æ³ç¢ºèªã‚„ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã®ãŸã‚ã€å®šæœŸçš„ãªè¨ªå•ãŒã§ãã‚‹æ–¹ã®ã¿ãŠç”³ã—è¾¼ã¿ãã ã•ã„ã€‚");if("no"===e.canReachQuickly)throw new Error("ç·Šæ€¥æ™‚ã«1æ™‚é–“ä»¥å†…ã«æ–½è¨­ã«åˆ°ç€ã§ãã‚‹ã“ã¨ãŒå¿…è¦ã§ã™ã€‚è¿…é€Ÿãªå¯¾å¿œãŒã§ãã‚‹æ–¹ã®ã¿ãŠç”³ã—è¾¼ã¿ãã ã•ã„ã€‚")})(w),!t)throw new Error("ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãŒå–å¾—ã§ãã¾ã›ã‚“ã€‚å†åº¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„ã€‚");r(!0);try{if(w.identityDocument){const e=`identity_${t.id}_${Date.now()}_${w.identityDocument.name}`,{data:s,error:a}=await ue.storage.from("vaccine-certs").upload(e,w.identityDocument,{upsert:!0});if(a)throw new Error(`ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ: ${a.message}`);const l={user_id:t.id,verification_id:s.path,status:"pending",verification_data:{document_url:s.path,uploaded_at:(new Date).toISOString(),file_name:w.identityDocument.name,file_size:w.identityDocument.size,file_type:w.identityDocument.type,application_stage:"first_stage"}},{error:r}=await ue.from("owner_verifications").upsert(l,{onConflict:"user_id"});if(r)throw new Error(`ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ: ${r.message}`)}c(2),window.scrollTo({top:0,behavior:"smooth"})}catch(e){const s=e instanceof Error?e.message:"ç”³è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚";throw new Error(s)}finally{r(!1)}}),{operation:"first_stage_submission"})},error:(null==b?void 0:b.userMessage)||"",profileData:m,profileLoading:p,onProfileUpdate:async e=>{await y((async()=>{u(!0);const{error:s}=await ue.from("profiles").update(e).eq("id",null==t?void 0:t.id);if(s)throw s;h(e),g(!1)}),{operation:"update_profile_data"}),u(!1)}})]}):s.jsxs("div",{children:[s.jsx(Fe,{error:b,onClear:N,...v.state.isRetrying?{}:{onRetry:()=>v.execute((()=>Promise.resolve()))},className:"mb-6"}),v.state.isRetrying&&s.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-blue-800 font-medium",children:"è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤ä¸­..."}),s.jsxs("p",{className:"text-blue-600 text-sm",children:["è©¦è¡Œå›æ•°: ",v.state.attempts+1,"/",fe.api.maxAttempts,v.state.nextRetryIn>0&&` | æ¬¡ã®è©¦è¡Œã¾ã§: ${v.state.nextRetryIn}ç§’`]})]}),s.jsx("button",{onClick:v.cancelRetry,className:"text-blue-600 hover:text-blue-800 text-sm underline",children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"})]})}),2===i&&s.jsx(Re,{formData:w,onFormDataChange:T,onSubmit:async e=>{e.preventDefault(),r(!0),N();try{await y((async()=>{const{data:{user:e},error:s}=await ue.auth.getUser();if(s||!e)throw new Error("ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚å†åº¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„ã€‚");const{error:t}=await ue.from("profiles").update({user_type:"owner"}).eq("id",e.id);if(t)throw new Error("ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸã€‚");const l={owner_id:e.id,name:w.name,description:w.description,address:w.address,price:800,max_capacity:parseInt(w.maxCapacity,10),large_dog_area:w.largeDogArea,small_dog_area:w.smallDogArea,private_booths:w.privateBooths,private_booth_count:parseInt(w.privateBoothCount,10),private_booth_price:0,facilities:w.facilities,facility_details:w.facilityDetails,status:"pending"},{error:r}=await ue.from("dog_parks").insert([l]);if(r)throw r;setTimeout((()=>{a("/owner-dashboard")}),100)}))}catch(s){f(s instanceof Error?s:new Error("ä¸æ˜ãªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚"))}finally{r(!1)}},error:(null==b?void 0:b.userMessage)||"",isLoading:l})]})}},Symbol.toStringTag,{value:"Module"}));function Ue({lockId:l,parkName:r="ãƒ‰ãƒƒã‚°ãƒ‘ãƒ¼ã‚¯",purpose:i="entry",className:c="",onSuccess:d,onError:o,reservationId:x}){const{user:h}=me(),[p,b]=e.useState(null),[N,f]=e.useState(null),[y,v]=e.useState(null),[w,_]=e.useState(!1),[k,S]=e.useState(null),[C,D]=e.useState(!1),[T,P]=e.useState(!1),[I,$]=e.useState(!1),[E,O]=e.useState("");e.useEffect((()=>{if(p&&N){const e=setInterval((()=>{const s=new Date,a=N.getTime()-s.getTime();if(a<=0)v("æœŸé™åˆ‡ã‚Œ"),b(null),f(null),clearInterval(e);else{const e=Math.floor(a/6e4),s=Math.floor(a%6e4/1e3);v(`${e}:${s.toString().padStart(2,"0")}`)}}),1e3);return()=>clearInterval(e)}}),[p,N]);const q=async()=>{if(h){_(!0),S(null);try{const{data:{session:e}}=await ue.auth.getSession();if(!(null==e?void 0:e.access_token))throw new Error("èªè¨¼ãŒå¿…è¦ã§ã™");let s=5,a=null;if(x){const e=await(async e=>{try{const{data:s,error:a}=await ue.from("reservations").select("\n          *,\n          dog_park:dog_parks(*),\n          dog:dogs(*)\n        ").eq("id",e).single();return a?null:s}catch(s){return null}})(x);if(e&&"whole_facility"===e.reservation_type&&(a=(e=>{try{const s=new Date(e.date),a=e.start_time.split(":").map(Number),t=a[0]??0,l=a[1]??0;return s.setHours(t,l,0,0),new Date(s.getTime()+60*e.duration*60*1e3)}catch(s){return null}})(e),a)){const e=new Date,t=a.getTime()-e.getTime();s=Math.max(1,Math.ceil(t/6e4))}}const t=await fetch("/functions/v1/generate-pin",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.access_token}`},body:JSON.stringify({lock_id:l,purpose:i,expiry_minutes:s,reservation_id:x||void 0})});if(!t.ok){const e=await t.json();throw new Error(e.error||"PINã‚³ãƒ¼ãƒ‰ã®ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ")}const{pin:r,expires_at:c}=await t.json();b(r),f(new Date(c)),P(!0),d&&d(r),setTimeout((()=>{P(!1)}),3e3)}catch(e){const s=e instanceof Error?e.message:"PINã‚³ãƒ¼ãƒ‰ã®ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ";if(s.startsWith("PAYMENT_REQUIRED:")){const e=s.replace("PAYMENT_REQUIRED:","").trim();O(e),$(!0),S(null)}else S(s),$(!1);o&&o(s)}finally{_(!1)}}};return s.jsx(oe,{className:`p-4 ${c}`,children:s.jsxs("div",{className:"text-center",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center justify-center",children:[s.jsx(u,{className:"w-5 h-5 text-blue-600 mr-2"}),r,"ã®","entry"===i?"å…¥å£":"å‡ºå£"]}),p?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border-2 border-blue-200 mx-auto",children:[s.jsx("p",{className:"text-sm text-blue-800 mb-1",children:"PINã‚³ãƒ¼ãƒ‰:"}),s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("p",{className:"text-3xl font-bold tracking-widest text-blue-700",children:p}),s.jsx("button",{onClick:()=>{p&&navigator.clipboard.writeText(p).then((()=>{D(!0),setTimeout((()=>D(!1)),2e3)})).catch((()=>{}))},className:"p-1 text-blue-600 hover:text-blue-800 transition-colors",title:"ã‚³ãƒ”ãƒ¼",children:C?s.jsx(m,{className:"w-5 h-5"}):s.jsx(W,{className:"w-5 h-5"})})]})]}),s.jsx("div",{className:"bg-yellow-50 p-2 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2 text-yellow-800",children:[s.jsx(n,{className:"w-4 h-4"}),s.jsxs("span",{className:"font-medium",children:["æœ‰åŠ¹æœŸé™: ",y]})]})}),s.jsx("div",{className:"flex justify-center space-x-3",children:s.jsxs(xe,{onClick:()=>{q()},variant:"secondary",size:"sm",isLoading:w,children:[s.jsx(t,{className:"w-4 h-4 mr-1"}),"å†ç”Ÿæˆ"]})}),s.jsxs("p",{className:"text-xs text-gray-500",children:["entry"===i?"å…¥å ´":"é€€å ´","æ™‚ã«ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã®ã‚­ãƒ¼ãƒ‘ãƒƒãƒ‰ã«ä¸Šè¨˜ã®PINã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-gray-600 mb-4",children:["entry"===i?"å…¥å ´":"é€€å ´","ç”¨ã®PINã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¾ã™ã€‚",s.jsx("br",{}),"ç”Ÿæˆã•ã‚ŒãŸPINã‚³ãƒ¼ãƒ‰ã¯5åˆ†é–“æœ‰åŠ¹ã§ã™ã€‚"]}),k&&s.jsxs("div",{className:"bg-red-50 p-3 rounded-lg flex items-center justify-center text-red-600",children:[s.jsx(a,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:k})]}),I&&s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[s.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[s.jsx(j,{className:"w-6 h-6 text-blue-600 mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"æ±ºæ¸ˆãŒå¿…è¦ã§ã™"}),s.jsx("p",{className:"text-sm text-blue-800 mb-4",children:E})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs(xe,{onClick:()=>window.location.href="/subscription",className:"w-full bg-purple-600 hover:bg-purple-700",children:[s.jsx(j,{className:"w-4 h-4 mr-2"}),"ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã«åŠ å…¥ï¼ˆÂ¥3,800/æœˆï¼‰"]}),s.jsxs(xe,{onClick:()=>window.location.href="/parks",variant:"secondary",className:"w-full",children:[s.jsx(g,{className:"w-4 h-4 mr-2"}),"1æ—¥åˆ¸ã‚’è³¼å…¥ï¼ˆÂ¥800ï¼‰"]})]}),s.jsxs("p",{className:"text-xs text-blue-700 mt-3",children:["â€¢ ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ï¼šå…¨å›½ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒä½¿ã„æ”¾é¡Œ",s.jsx("br",{}),"â€¢ 1æ—¥åˆ¸ï¼šé¸æŠã—ãŸãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã§24æ™‚é–“åˆ©ç”¨å¯èƒ½"]})]}),T&&s.jsxs("div",{className:"bg-green-50 p-3 rounded-lg flex items-center justify-center text-green-600",children:[s.jsx(m,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:"PINã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¾ã—ãŸ"})]}),s.jsxs(xe,{onClick:()=>{q()},isLoading:w,className:"w-full",children:[s.jsx(u,{className:"w-4 h-4 mr-2"}),"entry"===i?"å…¥å ´":"é€€å ´","ç”¨PINã‚’ç”Ÿæˆ"]})]})]})})}const Je=e=>e?new Date(e).toISOString():null,We=Object.freeze(Object.defineProperty({__proto__:null,ParkManagement:function(){const{parkId:t}=_(),{user:r}=me(),i=k(),[d,o]=e.useState(null),[x,p]=e.useState(!0),[j,b]=e.useState(""),[v,w]=e.useState(""),[C,D]=e.useState("overview"),[T,P]=e.useState([]),[I,E]=e.useState(null),[O,q]=e.useState("entry"),[L,F]=e.useState([]),[R,A]=e.useState([]),[U,J]=e.useState([]),[W,Y]=e.useState(!1),[K,Z]=e.useState({title:"",description:"",start_date:"",end_date:"",is_emergency:!1,notify_users:!0}),[X,ee]=e.useState(!1),[se,ae]=e.useState(!1),[te,le]=e.useState(!1),[re,ie]=e.useState({max_capacity:0,facilities:{parking:!1,shower:!1,restroom:!1,agility:!1,rest_area:!1,water_station:!1},large_dog_area:!1,small_dog_area:!1,private_booths:!1,private_booth_count:0,facility_details:"",description:""});e.useEffect((()=>{r&&t?ce():i("/owner-dashboard")}),[r,t,i]),e.useEffect((()=>{(async()=>{if(r)try{const{data:e,error:s}=await ue.from("dogs").select("\n            *,\n            vaccine_certifications (\n              id,\n              status,\n              rabies_expiry_date,\n              combo_expiry_date,\n              approved_at\n            )\n          ").eq("owner_id",r.id);if(s)throw s;const a=(e||[]).filter((e=>"approved"===ve(e)));F(a)}catch(e){}})()}),[r]);const ce=async()=>{try{p(!0);const{data:e,error:s}=await ue.from("dog_parks").select("*").eq("id",t).eq("owner_id",null==r?void 0:r.id).single();if(s)throw s;if(!e)return void i("/owner-dashboard");o(e),ie({max_capacity:e.max_capacity||0,facilities:e.facilities||{parking:!1,shower:!1,restroom:!1,agility:!1,rest_area:!1,water_station:!1},large_dog_area:e.large_dog_area||!1,small_dog_area:e.small_dog_area||!1,private_booths:e.private_booths||!1,private_booth_count:e.private_booth_count||0,facility_details:e.facility_details||"",description:e.description||""});const{data:a,error:l}=await ue.from("smart_locks").select("*").eq("park_id",t);if(l)throw l;P(a||[]),a&&a.length>0&&E(a[0]);const{data:c,error:n}=await ue.from("dogs").select("\n          *,\n          vaccine_certifications!inner(*)\n        ").eq("owner_id",null==r?void 0:r.id).eq("vaccine_certifications.status","approved");if(n)throw n;F(c||[]),await ne()}catch(e){b("ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}finally{p(!1)}},ne=async()=>{try{const{data:e,error:s}=await ue.from("park_maintenance").select("*").eq("park_id",t).order("start_date",{ascending:!1});if(s)throw s;J(e||[])}catch(e){}},de=e=>"ã‚ªã‚¹"===e?"ãã‚“":"ã¡ã‚ƒã‚“",he=e=>e?new Date(e).toLocaleString("ja-JP",{year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Asia/Tokyo"}):"æœªè¨­å®š";return x?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):d?s.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[s.jsx("div",{className:"flex items-center space-x-4 mb-6",children:s.jsxs(h,{to:"/owner-dashboard",className:"flex items-center text-blue-600 hover:text-blue-800",children:[s.jsx(Q,{className:"w-4 h-4 mr-2"}),"ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚‹"]})}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-2 flex items-center",children:[s.jsx($,{className:"w-8 h-8 text-blue-600 mr-3"}),d.name,"ã®ç®¡ç†"]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(l,{className:"w-4 h-4 text-gray-500"}),s.jsx("p",{className:"text-gray-600",children:d.address})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx(h,{to:`/parks/${d.id}`,children:s.jsxs(xe,{variant:"secondary",children:[s.jsx(B,{className:"w-4 h-4 mr-2"}),"å…¬é–‹ãƒšãƒ¼ã‚¸ã‚’è¦‹ã‚‹"]})}),s.jsxs(xe,{onClick:()=>ae(!0),children:[s.jsx(N,{className:"w-4 h-4 mr-2"}),"è¨­å®šã‚’ç·¨é›†"]})]})]}),j&&s.jsxs("div",{className:"bg-red-100 border border-red-300 text-red-800 rounded-lg p-4 flex items-start",children:[s.jsx(a,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsx("p",{children:j})]}),v&&s.jsxs("div",{className:"bg-green-100 border border-green-300 text-green-800 rounded-lg p-4 flex items-start",children:[s.jsx(m,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsx("p",{children:v})]}),s.jsxs("div",{className:"flex space-x-4 border-b",children:[s.jsxs("button",{className:"px-4 py-2 font-medium "+("overview"===C?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>D("overview"),children:[s.jsx($,{className:"w-4 h-4 inline mr-2"}),"æ¦‚è¦"]}),s.jsxs("button",{className:"px-4 py-2 font-medium "+("stats"===C?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>D("stats"),children:[s.jsx(y,{className:"w-4 h-4 inline mr-2"}),"çµ±è¨ˆãƒ»åç›Š"]}),s.jsxs("button",{className:"px-4 py-2 font-medium "+("pins"===C?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>D("pins"),children:[s.jsx(u,{className:"w-4 h-4 inline mr-2"}),"PINã‚³ãƒ¼ãƒ‰ç®¡ç†"]}),s.jsxs("button",{className:"px-4 py-2 font-medium "+("settings"===C?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>D("settings"),children:[s.jsx(G,{className:"w-4 h-4 inline mr-2"}),"è¨­å®š"]})]}),"overview"===C&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs(oe,{className:"p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[s.jsx(z,{className:"w-6 h-6 text-blue-600 mr-2"}),"åŸºæœ¬æƒ…å ±"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-3",children:"æ–½è¨­æƒ…å ±"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"ä½æ‰€:"})," ",d.address]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:"})," ","approved"===d.status?"é‹å–¶ä¸­":"å¯©æŸ»ä¸­"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"æ–™é‡‘:"})," Â¥",d.price,"/æ—¥"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"æœ€å¤§åå®¹äººæ•°:"})," ",d.max_capacity,"äºº"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"ç¾åœ¨ã®åˆ©ç”¨è€…æ•°:"})," ",d.current_occupancy,"äºº"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"è©•ä¾¡:"})," â˜…",d.average_rating.toFixed(1)," (",d.review_count,"ä»¶)"]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-3",children:"è¨­å‚™æƒ…å ±"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries({parking:"é§è»Šå ´",shower:"ã‚·ãƒ£ãƒ¯ãƒ¼è¨­å‚™",restroom:"ãƒˆã‚¤ãƒ¬",agility:"ã‚¢ã‚¸ãƒªãƒ†ã‚£è¨­å‚™",rest_area:"ä¼‘æ†©ã‚¹ãƒšãƒ¼ã‚¹",water_station:"çµ¦æ°´è¨­å‚™"}).map((([e,a])=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 rounded "+(d.facilities[e]?"bg-green-500":"bg-gray-300")}),s.jsx("span",{className:"text-sm",children:a})]},e)))}),s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"å¤§å‹çŠ¬ã‚¨ãƒªã‚¢:"})," ",d.large_dog_area?"ã‚ã‚Š":"ãªã—"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"å°å‹çŠ¬ã‚¨ãƒªã‚¢:"})," ",d.small_dog_area?"ã‚ã‚Š":"ãªã—"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ¼ã‚¹:"})," ",d.private_booths?`${d.private_booth_count}å®¤`:"ãªã—"]})]})]})]})]}),s.jsxs(oe,{className:"p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[s.jsx(g,{className:"w-6 h-6 text-blue-600 mr-2"}),"ä»Šæ—¥ã®çµ±è¨ˆ"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(g,{className:"w-5 h-5 text-blue-600"}),s.jsx("h4",{className:"font-medium text-blue-900",children:"ä»Šæ—¥ã®äºˆç´„"})]}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"5ä»¶"}),s.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"å‰æ—¥æ¯” +2ä»¶"})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(M,{className:"w-5 h-5 text-green-600"}),s.jsx("h4",{className:"font-medium text-green-900",children:"ä»Šæ—¥ã®åç›Š"})]}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:"Â¥4,000"}),s.jsx("p",{className:"text-xs text-green-700 mt-1",children:"å‰æ—¥æ¯” +Â¥1,600"})]}),s.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(c,{className:"w-5 h-5 text-purple-600"}),s.jsx("h4",{className:"font-medium text-purple-900",children:"åˆ©ç”¨è€…æ•°"})]}),s.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[d.current_occupancy,"äºº"]}),s.jsxs("p",{className:"text-xs text-purple-700 mt-1",children:["æœ€å¤§: ",d.max_capacity,"äºº"]})]})]})]}),s.jsxs(oe,{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[s.jsx(V,{className:"w-6 h-6 text-blue-600 mr-2"}),"æ–½è¨­ç”»åƒ"]}),s.jsx(h,{to:`/parks/${d.id}/second-stage`,children:s.jsxs(xe,{size:"sm",children:[s.jsx(N,{className:"w-4 h-4 mr-2"}),"ç”»åƒã‚’ç®¡ç†"]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.image_url?s.jsx("div",{className:"h-48 rounded-lg overflow-hidden",children:s.jsx("img",{src:d.image_url,alt:`${d.name} - ãƒ¡ã‚¤ãƒ³ç”»åƒ`,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://via.placeholder.com/400x300?text=No+Image"}})}):s.jsx("div",{className:"h-48 bg-gray-100 rounded-lg flex items-center justify-center",children:s.jsx("p",{className:"text-gray-500",children:"ãƒ¡ã‚¤ãƒ³ç”»åƒãªã—"})}),d.cover_image_url?s.jsx("div",{className:"h-48 rounded-lg overflow-hidden",children:s.jsx("img",{src:d.cover_image_url,alt:`${d.name} - ã‚«ãƒãƒ¼ç”»åƒ`,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://via.placeholder.com/400x300?text=No+Image"}})}):s.jsx("div",{className:"h-48 bg-gray-100 rounded-lg flex items-center justify-center",children:s.jsx("p",{className:"text-gray-500",children:"ã‚«ãƒãƒ¼ç”»åƒãªã—"})}),s.jsx("div",{className:"h-48 bg-gray-100 rounded-lg flex items-center justify-center",children:s.jsxs(h,{to:`/parks/${d.id}/second-stage`,className:"text-blue-600 hover:text-blue-800 flex flex-col items-center",children:[s.jsx(V,{className:"w-8 h-8 mb-2"}),s.jsx("p",{children:"ãã®ä»–ã®ç”»åƒã‚’ç®¡ç†"})]})})]})]})]}),"stats"===C&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs(oe,{className:"p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[s.jsx(y,{className:"w-6 h-6 text-blue-600 mr-2"}),"åˆ©ç”¨çµ±è¨ˆ"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(g,{className:"w-5 h-5 text-blue-600"}),s.jsx("h4",{className:"font-medium text-blue-900",children:"ä»Šæœˆã®äºˆç´„"})]}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"32ä»¶"}),s.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"å‰æœˆæ¯” +12%"})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(M,{className:"w-5 h-5 text-green-600"}),s.jsx("h4",{className:"font-medium text-green-900",children:"ä»Šæœˆã®åç›Š"})]}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:"Â¥25,600"}),s.jsx("p",{className:"text-xs text-green-700 mt-1",children:"å‰æœˆæ¯” +8%"})]}),s.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(c,{className:"w-5 h-5 text-purple-600"}),s.jsx("h4",{className:"font-medium text-purple-900",children:"åˆ©ç”¨è€…æ•°"})]}),s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"128äºº"}),s.jsx("p",{className:"text-xs text-purple-700 mt-1",children:"å‰æœˆæ¯” +15%"})]})]}),s.jsx("div",{className:"h-64 bg-gray-100 rounded-lg flex items-center justify-center",children:s.jsx("p",{className:"text-gray-500",children:"åˆ©ç”¨çµ±è¨ˆã‚°ãƒ©ãƒ•ï¼ˆå®Ÿè£…äºˆå®šï¼‰"})})]}),s.jsxs(oe,{className:"p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[s.jsx(M,{className:"w-6 h-6 text-blue-600 mr-2"}),"åç›Šæƒ…å ±"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:"åç›Šé…åˆ†"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-blue-800 mb-1",children:"ã‚ªãƒ¼ãƒŠãƒ¼å–ã‚Šåˆ†ï¼ˆ80%ï¼‰"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"Â¥20,480"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-blue-800 mb-1",children:"ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æ‰‹æ•°æ–™ï¼ˆ20%ï¼‰"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"Â¥5,120"})]})]})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-green-900 mb-3",children:"åç›Šå†…è¨³"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-green-800 mb-1",children:"é€šå¸¸åˆ©ç”¨"}),s.jsx("p",{className:"text-xl font-bold text-green-600",children:"Â¥12,800"}),s.jsx("p",{className:"text-xs text-green-700",children:"16ä»¶"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-green-800 mb-1",children:"æ–½è¨­è²¸ã—åˆ‡ã‚Š"}),s.jsx("p",{className:"text-xl font-bold text-green-600",children:"Â¥8,800"}),s.jsx("p",{className:"text-xs text-green-700",children:"2ä»¶"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-green-800 mb-1",children:"ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ¼ã‚¹"}),s.jsx("p",{className:"text-xl font-bold text-green-600",children:"Â¥4,000"}),s.jsx("p",{className:"text-xs text-green-700",children:"2ä»¶"})]})]})]}),s.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-purple-900 mb-3",children:"æŒ¯è¾¼æƒ…å ±"}),s.jsx("p",{className:"text-sm text-purple-800 mb-2",children:"æŒ¯è¾¼ã¯æ¯æœˆ15æ—¥ã«å‰æœˆåˆ†ã‚’ä¸€æ‹¬ã§è¡Œã„ã¾ã™ã€‚æŒ¯è¾¼æ‰‹æ•°æ–™ã¯å½“ç¤¾è² æ‹…ã§ã™ã€‚"}),s.jsx(h,{to:"/owner-payment-system",children:s.jsxs(xe,{size:"sm",className:"bg-purple-600 hover:bg-purple-700",children:[s.jsx(M,{className:"w-4 h-4 mr-2"}),"æŒ¯è¾¼æƒ…å ±ã‚’ç¢ºèª"]})})]})]})]})]}),"pins"===C&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs(oe,{className:"p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[s.jsx(u,{className:"w-6 h-6 text-blue-600 mr-2"}),"ã‚ªãƒ¼ãƒŠãƒ¼ç”¨PINã‚³ãƒ¼ãƒ‰ç™ºè¡Œ"]}),s.jsx("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(m,{className:"w-5 h-5 text-blue-600 mt-1 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"ã‚ªãƒ¼ãƒŠãƒ¼ç‰¹æ¨©"}),s.jsx("p",{children:"ã‚ªãƒ¼ãƒŠãƒ¼ã¯æ±ºæ¸ˆä¸è¦ã§PINã‚³ãƒ¼ãƒ‰ã‚’ç™ºè¡Œã§ãã¾ã™ã€‚æ–½è¨­ã®ç®¡ç†ã‚„ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã«ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚"}),s.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[s.jsx("li",{children:"PINã‚³ãƒ¼ãƒ‰ã¯5åˆ†é–“æœ‰åŠ¹ã§ã™"}),s.jsx("li",{children:"å…¥å ´ãƒ»é€€å ´ãã‚Œãã‚Œã§PINã‚³ãƒ¼ãƒ‰ãŒå¿…è¦ã§ã™"}),s.jsx("li",{children:"ã‚¹ã‚¿ãƒƒãƒ•ã¨å…±æœ‰ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™"}),s.jsx("li",{children:"å…¥å ´ã™ã‚‹çŠ¬ã‚’é¸æŠã—ã¦ãã ã•ã„"})]})]})]})}),s.jsxs("div",{className:"flex justify-center space-x-4 mb-4",children:[s.jsxs("button",{className:"px-6 py-3 rounded-lg flex items-center space-x-2 "+("entry"===O?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),onClick:()=>q("entry"),children:[s.jsx(Q,{className:"w-5 h-5"}),s.jsx("span",{children:"å…¥å ´"})]}),s.jsxs("button",{className:"px-6 py-3 rounded-lg flex items-center space-x-2 "+("exit"===O?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),onClick:()=>q("exit"),children:[s.jsx(Q,{className:"w-5 h-5 rotate-180"}),s.jsx("span",{children:"é€€å ´"})]})]}),T.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã‚’é¸æŠ"}),s.jsx("select",{value:(null==I?void 0:I.id)||"",onChange:e=>{const s=T.find((s=>s.id===e.target.value));E(s||null)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:T.map((e=>s.jsx("option",{value:e.id,children:e.lock_name},e.id)))})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["å…¥å ´ã™ã‚‹ãƒ¯ãƒ³ã¡ã‚ƒã‚“ã‚’é¸æŠï¼ˆæœ€å¤§",3,"é ­ï¼‰"]}),0===L.length?s.jsx("div",{className:"p-4 bg-yellow-50 rounded-lg",children:s.jsxs("p",{className:"text-yellow-800",children:["ãƒ¯ã‚¯ãƒãƒ³æ¥ç¨®è¨¼æ˜æ›¸ãŒæ‰¿èªã•ã‚ŒãŸãƒ¯ãƒ³ã¡ã‚ƒã‚“ãŒã„ã¾ã›ã‚“ã€‚",s.jsx(h,{to:"/register-dog",className:"text-blue-600 hover:underline ml-1",children:"ãƒ¯ãƒ³ã¡ã‚ƒã‚“ã‚’ç™»éŒ²ã™ã‚‹"})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:L.map((e=>{const a=R.includes(e.id),t=!a&&R.length>=3;return s.jsxs("div",{className:"p-4 border-2 rounded-lg cursor-pointer transition-colors relative "+(a?"border-green-500 bg-green-50":t?"border-gray-200 bg-gray-50 opacity-50 cursor-not-allowed":"border-gray-200 hover:border-gray-300"),onClick:()=>{return!t&&(s=e.id,void A((e=>e.includes(s)?e.filter((e=>e!==s)):e.length>=3?(b("æœ€å¤§3é ­ã¾ã§é¸æŠå¯èƒ½ã§ã™ã€‚"),e):(b(""),[...e,s]))));var s},children:[a&&s.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center",children:s.jsx(m,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden",children:e.image_url?s.jsx("img",{src:e.image_url,alt:e.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-6 h-6 text-gray-500",children:"ğŸ¾"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:[e.name,de(e.gender)]}),s.jsx(ye,{status:ve(e),size:"sm"})]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[e.breed," â€¢ ",e.gender]})]})]})]},e.id)}))}),R.length>0&&s.jsxs("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-green-900 mb-1",children:"é¸æŠä¸­ã®ãƒ¯ãƒ³ã¡ã‚ƒã‚“"}),s.jsx("p",{className:"text-sm text-green-800",children:R.map((e=>{const s=L.find((s=>s.id===e));return s?`${s.name}${de(s.gender)}`:""})).filter((e=>e)).join("ã€")}),s.jsxs("p",{className:"text-xs text-green-700 mt-1",children:[R.length,"é ­ãŒåŒæ™‚å…¥å ´ã§ãã¾ã™"]})]})]}),I?s.jsx("div",{className:"mt-6",children:R.length>0?s.jsx(Ue,{lockId:I.lock_id,parkName:d.name,purpose:O,onSuccess:e=>{w(`PINã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¾ã—ãŸ: ${e}`),setTimeout((()=>{w("")}),3e3)},onError:e=>{b(e),setTimeout((()=>{b("")}),5e3)}}):s.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg text-center",children:[s.jsx(a,{className:"w-6 h-6 text-yellow-600 mx-auto mb-2"}),s.jsx("p",{className:"text-yellow-800 font-medium",children:"ãƒ¯ãƒ³ã¡ã‚ƒã‚“ã‚’1é ­ä»¥ä¸Šé¸æŠã—ã¦ãã ã•ã„"}),s.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"PINã‚³ãƒ¼ãƒ‰ã‚’ç™ºè¡Œã™ã‚‹ã«ã¯ã€å…¥å ´ã™ã‚‹ãƒ¯ãƒ³ã¡ã‚ƒã‚“ã‚’é¸æŠã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™"})]})}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(u,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“"}),s.jsx(xe,{onClick:()=>D("settings"),children:"ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã‚’è¨­å®šã™ã‚‹"})]})]}),s.jsx(oe,{className:"p-6 bg-blue-50 border-blue-200",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(u,{className:"w-6 h-6 text-blue-600 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"PINã‚³ãƒ¼ãƒ‰ã«ã¤ã„ã¦"}),s.jsxs("div",{className:"text-sm text-blue-800 space-y-2",children:[s.jsx("p",{children:"â€¢ åˆ©ç”¨è€…ã¯PINã‚³ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¦å…¥é€€å ´ã—ã¾ã™"}),s.jsx("p",{children:"â€¢ PINã‚³ãƒ¼ãƒ‰ã¯5åˆ†é–“æœ‰åŠ¹ã§ã€åˆ©ç”¨è€…ãŒæ”¯æ‰•ã„å¾Œã«ç™ºè¡Œã•ã‚Œã¾ã™"}),s.jsx("p",{children:"â€¢ ã‚ªãƒ¼ãƒŠãƒ¼ã¯æ±ºæ¸ˆä¸è¦ã§PINã‚³ãƒ¼ãƒ‰ã‚’ç™ºè¡Œã§ãã¾ã™"}),s.jsx("p",{children:"â€¢ æ–½è¨­è²¸ã—åˆ‡ã‚Šã®å ´åˆã€åˆ©ç”¨è€…ã¯å‹é”ã«PINã‚³ãƒ¼ãƒ‰ã‚’å…±æœ‰ã§ãã¾ã™"})]})]})]})})]}),"settings"===C&&s.jsxs("div",{className:"space-y-6",children:[se&&s.jsxs(oe,{className:"p-6 bg-blue-50 border-blue-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-900",children:"æ–½è¨­æƒ…å ±ã®ç·¨é›†"}),s.jsx("button",{onClick:()=>ae(!1),className:"text-blue-600 hover:text-blue-800",children:s.jsx(S,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),d&&r){le(!0);try{if(re.max_capacity<1)throw new Error("åå®¹äººæ•°ã¯1äººä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");if(re.private_booths&&re.private_booth_count<1)throw new Error("ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ¼ã‚¹ãŒã‚ã‚‹å ´åˆã¯ã€éƒ¨å±‹æ•°ã‚’1ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");const{error:e}=await ue.from("dog_parks").update({max_capacity:re.max_capacity,facilities:re.facilities,large_dog_area:re.large_dog_area,small_dog_area:re.small_dog_area,private_booths:re.private_booths,private_booth_count:re.private_booths?re.private_booth_count:0,facility_details:re.facility_details,description:re.description,updated_at:(new Date).toISOString()}).eq("id",d.id);if(e)throw e;w("æ–½è¨­æƒ…å ±ã‚’æ›´æ–°ã—ã¾ã—ãŸã€‚"),ae(!1),await ce(),setTimeout((()=>{w("")}),3e3)}catch(s){b(s instanceof Error?s.message:"æ–½è¨­æƒ…å ±ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸã€‚"),setTimeout((()=>{b("")}),5e3)}finally{le(!1)}}},className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"å¤‰æ›´ä¸å¯é …ç›®"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"ä½æ‰€:"})," ",d.address]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"æ–™é‡‘:"})," Â¥",d.price,"/æ—¥ï¼ˆå…¨å›½çµ±ä¸€æ–™é‡‘ï¼‰"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"æœ€å¤§åå®¹äººæ•° *"}),s.jsx("input",{type:"number",min:"1",max:"100",value:re.max_capacity,onChange:e=>ie((s=>({...s,max_capacity:parseInt(e.target.value)||0}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"èª¬æ˜æ–‡"}),s.jsx("textarea",{value:re.description,onChange:e=>ie((s=>({...s,description:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"æ–½è¨­ã®ç‰¹å¾´ã‚„åˆ©ç”¨æ¡ˆå†…ãªã©"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"ã‚¨ãƒªã‚¢è¨­å®š"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:re.large_dog_area,onChange:e=>ie((s=>({...s,large_dog_area:e.target.checked}))),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"å¤§å‹çŠ¬ã‚¨ãƒªã‚¢"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:re.small_dog_area,onChange:e=>ie((s=>({...s,small_dog_area:e.target.checked}))),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"å°å‹çŠ¬ã‚¨ãƒªã‚¢"})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ¼ã‚¹"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:re.private_booths,onChange:e=>ie((s=>({...s,private_booths:e.target.checked}))),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ¼ã‚¹ã‚ã‚Š"})]}),re.private_booths&&s.jsxs("div",{className:"ml-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"éƒ¨å±‹æ•°"}),s.jsx("input",{type:"number",min:"1",max:"10",value:re.private_booth_count,onChange:e=>ie((s=>({...s,private_booth_count:parseInt(e.target.value)||0}))),className:"w-24 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"è¨­å‚™æƒ…å ±"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries({parking:"é§è»Šå ´",shower:"ã‚·ãƒ£ãƒ¯ãƒ¼è¨­å‚™",restroom:"ãƒˆã‚¤ãƒ¬",agility:"ã‚¢ã‚¸ãƒªãƒ†ã‚£è¨­å‚™",rest_area:"ä¼‘æ†©ã‚¹ãƒšãƒ¼ã‚¹",water_station:"çµ¦æ°´è¨­å‚™"}).map((([e,a])=>s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:re.facilities[e],onChange:s=>ie((a=>({...a,facilities:{...a.facilities,[e]:s.target.checked}}))),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:a})]},e)))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"è¨­å‚™è©³ç´°èª¬æ˜"}),s.jsx("textarea",{value:re.facility_details,onChange:e=>ie((s=>({...s,facility_details:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"è¨­å‚™ã®è©³ç´°èª¬æ˜ã‚„åˆ©ç”¨æ¡ˆå†…ãªã©"})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(xe,{type:"button",variant:"secondary",onClick:()=>ae(!1),children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"}),s.jsx(xe,{type:"submit",isLoading:te,className:"bg-blue-600 hover:bg-blue-700",children:"æ›´æ–°"})]})]})]}),s.jsxs(oe,{className:"p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[s.jsx(G,{className:"w-6 h-6 text-blue-600 mr-2"}),"æ–½è¨­è¨­å®š"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:"åŸºæœ¬è¨­å®š"}),s.jsx("p",{className:"text-sm text-blue-800 mb-3",children:"æ–½è¨­ã®åŸºæœ¬æƒ…å ±ã‚„è¨­å‚™æƒ…å ±ã‚’ç·¨é›†ã§ãã¾ã™ã€‚ä½æ‰€ã¨æ–™é‡‘ã¯å¤‰æ›´ã§ãã¾ã›ã‚“ã€‚"}),s.jsxs(xe,{size:"sm",onClick:()=>ae(!0),children:[s.jsx(N,{className:"w-4 h-4 mr-2"}),"åŸºæœ¬æƒ…å ±ã‚’ç·¨é›†"]})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-green-900 mb-3",children:"æ–™é‡‘è¨­å®š"}),s.jsx("p",{className:"text-sm text-green-800 mb-3",children:"æ–™é‡‘ä½“ç³»ã¯å…¨å›½çµ±ä¸€ã§ã™ã€‚å¤‰æ›´ã¯ã§ãã¾ã›ã‚“ã€‚"}),s.jsxs("ul",{className:"text-sm text-green-800 space-y-1",children:[s.jsx("li",{children:"â€¢ é€šå¸¸åˆ©ç”¨: Â¥800/æ—¥ï¼ˆå›ºå®šï¼‰"}),s.jsx("li",{children:"â€¢ æ–½è¨­è²¸ã—åˆ‡ã‚Š: Â¥4,400/æ™‚é–“ï¼ˆå›ºå®šï¼‰"}),s.jsx("li",{children:"â€¢ ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ¼ã‚¹: ã‚µãƒ–ã‚¹ã‚¯ä½¿ã„æ”¾é¡Œãƒ»1æ—¥åˆ¸ã§ã‚‚åˆ©ç”¨å¯èƒ½ï¼ˆè¿½åŠ æ–™é‡‘ãªã—ï¼‰"})]})]}),s.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-purple-900 mb-3",children:"ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯è¨­å®š"}),s.jsx("p",{className:"text-sm text-purple-800 mb-3",children:"ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã®è¨­å®šã‚’ç®¡ç†ã—ã¾ã™ã€‚"}),s.jsxs(xe,{size:"sm",className:"bg-purple-600 hover:bg-purple-700",children:[s.jsx(u,{className:"w-4 h-4 mr-2"}),"ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã‚’ç®¡ç†"]})]}),s.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-orange-900 mb-3",children:"å–¶æ¥­æ™‚é–“è¨­å®š"}),s.jsx("p",{className:"text-sm text-orange-800 mb-3",children:"å–¶æ¥­æ™‚é–“ã¯24æ™‚é–“ã§ã™ã€‚å¤‰æ›´ã¯ã§ãã¾ã›ã‚“ã€‚"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(n,{className:"w-5 h-5 text-orange-600"}),s.jsx("span",{className:"font-medium",children:"24æ™‚é–“å–¶æ¥­"})]})]})]})]}),s.jsxs(oe,{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[s.jsx(H,{className:"w-6 h-6 text-blue-600 mr-2"}),"ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ç®¡ç†"]}),s.jsxs(xe,{onClick:()=>Y(!0),className:"bg-blue-600 hover:bg-blue-700",children:[s.jsx(f,{className:"w-4 h-4 mr-2"}),"ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹äºˆå®šã‚’è¿½åŠ "]})]}),W&&s.jsxs(oe,{className:"p-4 mb-6 bg-blue-50 border-blue-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"æ–°ã—ã„ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹äºˆå®š"}),s.jsx("button",{onClick:()=>Y(!1),className:"text-blue-600 hover:text-blue-800",children:s.jsx(S,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),r&&t){ee(!0);try{if(!K.title||!K.start_date||!K.end_date)throw new Error("å¿…é ˆé …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");const e=new Date(K.start_date);if(new Date(K.end_date)<=e)throw new Error("çµ‚äº†æ—¥æ™‚ã¯é–‹å§‹æ—¥æ™‚ã‚ˆã‚Šå¾Œã«è¨­å®šã—ã¦ãã ã•ã„ã€‚");if(e<new Date)throw new Error("é–‹å§‹æ—¥æ™‚ã¯ç¾åœ¨æ™‚åˆ»ã‚ˆã‚Šå¾Œã«è¨­å®šã—ã¦ãã ã•ã„ã€‚");const{error:s}=await ue.from("park_maintenance").insert({park_id:t,title:K.title,description:K.description,start_date:Je(K.start_date),end_date:Je(K.end_date),is_emergency:K.is_emergency,notify_users:K.notify_users,created_by:r.id});if(s)throw s;w("ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œæˆã—ã¾ã—ãŸã€‚"),Y(!1),Z({title:"",description:"",start_date:"",end_date:"",is_emergency:!1,notify_users:!0}),await ne()}catch(s){b(s instanceof Error?s.message:"ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}finally{ee(!1)}}},className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹å†…å®¹ *"}),s.jsx("input",{type:"text",value:K.title,onChange:e=>Z((s=>({...s,title:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"ä¾‹ï¼šè¨­å‚™ç‚¹æ¤œãƒ»æ¸…æƒä½œæ¥­",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"é–‹å§‹æ—¥æ™‚ * (æ—¥æœ¬æ™‚é–“)"}),s.jsx("input",{type:"datetime-local",value:K.start_date,onChange:e=>Z((s=>({...s,start_date:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"æ—¥æœ¬æ™‚é–“ã§å…¥åŠ›ã—ã¦ãã ã•ã„"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"çµ‚äº†æ—¥æ™‚ * (æ—¥æœ¬æ™‚é–“)"}),s.jsx("input",{type:"datetime-local",value:K.end_date,onChange:e=>Z((s=>({...s,end_date:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"æ—¥æœ¬æ™‚é–“ã§å…¥åŠ›ã—ã¦ãã ã•ã„"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"è©³ç´°èª¬æ˜"}),s.jsx("textarea",{value:K.description,onChange:e=>Z((s=>({...s,description:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹å†…å®¹ã®è©³ç´°èª¬æ˜ï¼ˆä»»æ„ï¼‰"})]}),s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:K.is_emergency,onChange:e=>Z((s=>({...s,is_emergency:e.target.checked}))),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"ç·Šæ€¥ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:K.notify_users,onChange:e=>Z((s=>({...s,notify_users:e.target.checked}))),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é€šçŸ¥"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(xe,{type:"button",variant:"secondary",onClick:()=>Y(!1),children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"}),s.jsx(xe,{type:"submit",isLoading:X,className:"bg-blue-600 hover:bg-blue-700",children:"ä½œæˆ"})]})]})]}),s.jsx("div",{className:"space-y-4",children:0===U.length?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(H,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-lg font-medium mb-2",children:"ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹äºˆå®šãŒã‚ã‚Šã¾ã›ã‚“"}),s.jsx("p",{className:"text-sm",children:"æ–½è¨­ã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹äºˆå®šã‚’è¿½åŠ ã—ã¦ãã ã•ã„"})]}):U.map((e=>{const a=(e=>{const s=new Date,a=new Date(e.start_date),t=new Date(e.end_date);return"cancelled"===e.status?{status:"cancelled",label:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ¸ˆã¿",color:"bg-gray-500"}:"completed"===e.status?{status:"completed",label:"å®Œäº†",color:"bg-gray-500"}:s>=a&&s<t?{status:"active",label:"ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­",color:"bg-red-500"}:s<a?{status:"scheduled",label:"äºˆå®š",color:"bg-yellow-500"}:{status:"completed",label:"å®Œäº†",color:"bg-gray-500"}})(e);return s.jsx(oe,{className:"p-4",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx("h3",{className:"font-semibold text-lg",children:e.title}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium text-white ${a.color}`,children:a.label}),e.is_emergency&&s.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"ç·Šæ€¥"})]}),e.description&&s.jsx("p",{className:"text-gray-600 mb-3",children:e.description}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"é–‹å§‹:"})," ",he(e.start_date)]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"çµ‚äº†:"})," ",he(e.end_date)]})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:"scheduled"===e.status&&s.jsx(xe,{size:"sm",variant:"secondary",onClick:()=>(async e=>{if(window.confirm("ã“ã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ"))try{const{error:s}=await ue.from("park_maintenance").delete().eq("id",e);if(s)throw s;w("ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚"),await ne()}catch(s){b("ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}})(e.id),className:"text-red-600 hover:text-red-800",children:s.jsx(S,{className:"w-4 h-4"})})})]})},e.id)}))}),s.jsx("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(a,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),s.jsxs("div",{className:"text-sm text-yellow-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ©Ÿèƒ½ã«ã¤ã„ã¦"}),s.jsxs("ul",{className:"space-y-1",children:[s.jsx("li",{children:"â€¢ ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­ã¯æ–°è¦äºˆç´„ã‚’å—ã‘ä»˜ã‘ã¾ã›ã‚“"}),s.jsx("li",{children:"â€¢ æ—¢å­˜ã®äºˆç´„ãŒã‚ã‚‹å ´åˆã¯äº‹å‰ã«åˆ©ç”¨è€…ã«é€£çµ¡ã—ã¦ãã ã•ã„"}),s.jsx("li",{children:"â€¢ ç·Šæ€¥ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã®å ´åˆã¯å³åº§ã«æ–½è¨­ãŒåˆ©ç”¨åœæ­¢ã«ãªã‚Šã¾ã™"}),s.jsx("li",{children:"â€¢ ãƒ¦ãƒ¼ã‚¶ãƒ¼é€šçŸ¥ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã¨ã€åˆ©ç”¨è€…ã«ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ãŒé€ä¿¡ã•ã‚Œã¾ã™"})]})]})]})})]}),s.jsx(oe,{className:"p-6 bg-gray-50",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(z,{className:"w-6 h-6 text-gray-600 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"é‹å–¶ã‚µãƒãƒ¼ãƒˆ"}),s.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[s.jsx("p",{children:"â€¢ è¨­å®šã«é–¢ã™ã‚‹ã”è³ªå•ã¯é‹å–¶äº‹å‹™å±€ã¾ã§ãŠå•ã„åˆã‚ã›ãã ã•ã„"}),s.jsx("p",{children:"â€¢ QRã‚³ãƒ¼ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã®è¨­ç½®ãƒ»è¨­å®šã‚µãƒãƒ¼ãƒˆã‚’æä¾›ã—ã¦ã„ã¾ã™"}),s.jsx("p",{children:"â€¢ é‹å–¶é–‹å§‹å¾Œã‚‚ç¶™ç¶šçš„ãªã‚µãƒãƒ¼ãƒˆã‚’è¡Œã„ã¾ã™"}),s.jsx("p",{children:"â€¢ ğŸ“§ ã‚µãƒãƒ¼ãƒˆçª“å£: info@dogparkjp.com"})]})]})]})})]})]}):s.jsxs("div",{className:"max-w-4xl mx-auto text-center py-12",children:[s.jsx(a,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"æŒ‡å®šã•ã‚ŒãŸãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒè¦‹ã¤ã‹ã‚‰ãªã„ã‹ã€ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚"}),s.jsx(h,{to:"/owner-dashboard",children:s.jsx(xe,{children:"ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚‹"})})]})}},Symbol.toStringTag,{value:"Module"})),Qe=Object.freeze(Object.defineProperty({__proto__:null,DogParkHistory:function(){const{user:t}=me(),r=k(),[i,d]=e.useState([]),[x,p]=e.useState(!0),[u,j]=e.useState(""),[b,N]=e.useState("all"),[f,v]=e.useState((new Date).getFullYear().toString()),[_,C]=e.useState("all"),[D,T]=e.useState([]),[P,I]=e.useState(0),[E,O]=e.useState(0),[q,L]=e.useState(""),[F,R]=e.useState([]),[M,z]=e.useState(null),[A,U]=e.useState(null),[J,W]=e.useState(null),[B,G]=e.useState(null);e.useEffect((()=>{t?V():r("/login")}),[t,r]);const V=async()=>{try{p(!0);const{data:e,error:s}=await ue.from("reservations").select("\n          *,\n          dog_park:dog_parks(*),\n          dog:dogs(*)\n        ").eq("user_id",null==t?void 0:t.id).order("date",{ascending:!1}).limit(50);if(s)throw s;const{data:a,error:l}=await ue.from("dogs").select("*").eq("owner_id",null==t?void 0:t.id);if(l)throw l;if(d(e||[]),T(a||[]),e){I(e.length);const s=new Set(e.map((e=>e.park_id)));O(s.size);const a={};e.forEach((e=>{const s=e.park_id;a[s]||(a[s]={count:0,name:e.dog_park.name,id:s}),a[s].count++}));const t=Object.values(a).sort(((e,s)=>s.count-e.count)).slice(0,3).map((e=>({id:e.id,name:e.name,visits:e.count})));R(t),t.length>0&&L(t[0].name)}}catch(e){}finally{p(!1)}},H=e=>["1æœˆ","2æœˆ","3æœˆ","4æœˆ","5æœˆ","6æœˆ","7æœˆ","8æœˆ","9æœˆ","10æœˆ","11æœˆ","12æœˆ"][e-1],Z=e.useMemo((()=>i.filter((e=>{const s=e.dog_park.name.toLowerCase().includes(u.toLowerCase())||e.dog_park.address.toLowerCase().includes(u.toLowerCase())||e.dog.name.toLowerCase().includes(u.toLowerCase()),a="all"===b||e.dog_id===b,t=new Date(e.date),l="all"===f||t.getFullYear().toString()===f,r="all"===_||(t.getMonth()+1).toString()===_;return s&&a&&l&&r}))),[i,u,b,f,_]);return x?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[s.jsx("div",{className:"flex items-center space-x-4 mb-6",children:s.jsxs(h,{to:"/dashboard",className:"flex items-center text-gray-600 hover:text-gray-800 transition-colors",children:[s.jsx(Q,{className:"w-4 h-4 mr-2"}),"ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚‹"]})}),s.jsxs("div",{className:"text-center mb-8",children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-4 flex items-center justify-center",children:[s.jsx(g,{className:"w-8 h-8 text-blue-600 mr-3"}),"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³åˆ©ç”¨å±¥æ­´"]}),s.jsx("p",{className:"text-lg text-gray-600",children:"ã“ã‚Œã¾ã§ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³åˆ©ç”¨è¨˜éŒ²ã‚’ç¢ºèªã§ãã¾ã™"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs(oe,{className:"p-6 text-center",children:[s.jsx(g,{className:"w-12 h-12 text-blue-600 mx-auto mb-2"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:P}),s.jsx("p",{className:"text-gray-600",children:"ç·åˆ©ç”¨å›æ•°"})]}),s.jsxs(oe,{className:"p-6 text-center",children:[s.jsx($,{className:"w-12 h-12 text-green-600 mx-auto mb-2"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:E}),s.jsx("p",{className:"text-gray-600",children:"è¨ªå•ã—ãŸãƒ‰ãƒƒã‚°ãƒ©ãƒ³æ•°"})]}),s.jsxs(oe,{className:"p-6 text-center",children:[s.jsx(l,{className:"w-12 h-12 text-purple-600 mx-auto mb-2"}),s.jsx("p",{className:"text-xl font-bold text-gray-900 mb-1",children:q||"-"}),s.jsx("p",{className:"text-gray-600",children:"æœ€ã‚‚è¨ªå•ã—ãŸãƒ‰ãƒƒã‚°ãƒ©ãƒ³"})]})]}),F.length>0&&s.jsxs(oe,{className:"p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[s.jsx(o,{className:"w-6 h-6 text-pink-600 mr-2"}),"ã‚ˆãè¡Œããƒ‰ãƒƒã‚°ãƒ©ãƒ³"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:F.map(((e,a)=>s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 bg-pink-100 rounded-full flex items-center justify-center text-pink-600 font-bold",children:a+1}),s.jsx("h3",{className:"font-semibold",children:e.name})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(g,{className:"w-4 h-4 text-gray-500 mr-1"}),s.jsxs("span",{className:"text-sm text-gray-600",children:[e.visits,"å›åˆ©ç”¨"]})]}),s.jsx(h,{to:`/parks/${e.id}`,children:s.jsx(xe,{size:"sm",variant:"secondary",children:"è©³ç´°"})})]})]},e.id)))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"md:col-span-2",children:s.jsx(pe,{label:"",value:u,onChange:e=>j(e.target.value),placeholder:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³åã€ä½æ‰€ã§æ¤œç´¢...",icon:s.jsx(Y,{className:"w-4 h-4 text-gray-500"})})}),s.jsx("div",{children:s.jsxs("select",{value:b,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"all",children:"ã™ã¹ã¦ã®ãƒ¯ãƒ³ã¡ã‚ƒã‚“"}),D.map((e=>s.jsxs("option",{value:e.id,children:[e.name,"ã¡ã‚ƒã‚“"]},e.id)))]})}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("select",{value:f,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"all",children:"ã™ã¹ã¦ã®å¹´"}),(()=>{const e=(new Date).getFullYear(),s=[];for(let a=e;a>=e-2;a--)s.push({value:a.toString(),label:`${a}å¹´`});return s})().map((e=>s.jsx("option",{value:e.value,children:e.label},e.value)))]}),s.jsx("select",{value:_,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:(()=>{const e=[{value:"all",label:"ã™ã¹ã¦ã®æœˆ"}];for(let s=1;s<=12;s++)e.push({value:s.toString(),label:H(s)});return e})().map((e=>s.jsx("option",{value:e.value,children:e.label},e.value)))})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs(xe,{variant:"secondary",size:"sm",onClick:()=>{if(0===Z.length)return;const e="\ufeff"+[["æ—¥ä»˜","æ™‚é–“","ãƒ‰ãƒƒã‚°ãƒ©ãƒ³å","ä½æ‰€","ãƒ¯ãƒ³ã¡ã‚ƒã‚“","æ–™é‡‘","äºˆç´„ã‚¿ã‚¤ãƒ—"].join(","),...Z.map((e=>[new Date(e.date).toLocaleDateString("ja-JP"),`${e.start_time}ã€œ${parseInt(e.start_time)+e.duration}:00`,`"${e.dog_park.name.replace(/"/g,'""')}"`,`"${e.dog_park.address.replace(/"/g,'""')}"`,`"${e.dog.name.replace(/"/g,'""')}"`,`Â¥${e.total_amount}`,"regular"===e.reservation_type?"é€šå¸¸åˆ©ç”¨":"private_booth"===e.reservation_type?"ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ¼ã‚¹":"æ–½è¨­è²¸ã—åˆ‡ã‚Š"].join(",")))].join("\n"),s=new Blob([e],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(s),t=document.createElement("a");t.setAttribute("href",a),t.setAttribute("download",`dogpark_history_${(new Date).toISOString().split("T")[0]}.csv`),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t)},children:[s.jsx(K,{className:"w-4 h-4 mr-2"}),"CSVå‡ºåŠ›"]})}),0===Z.length?s.jsxs(oe,{className:"text-center py-12",children:[s.jsx(g,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"åˆ©ç”¨å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"ã¾ã ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’åˆ©ç”¨ã—ã¦ã„ãªã„ã‚ˆã†ã§ã™"}),s.jsx(h,{to:"/parks",children:s.jsx(xe,{children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’äºˆç´„ã™ã‚‹"})})]}):s.jsx("div",{className:"space-y-6",children:Z.map((e=>{const a=new Date(e.date),t=a.toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric",weekday:"long"}),r=e.start_time,i=`${parseInt(r)+e.duration}:00`,c="regular"===e.reservation_type?"é€šå¸¸åˆ©ç”¨":"private_booth"===e.reservation_type?"ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ¼ã‚¹":"æ–½è¨­è²¸ã—åˆ‡ã‚Š";return s.jsxs(oe,{className:"p-6 hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-4",children:[s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsxs("div",{className:"bg-blue-100 rounded-lg p-3 text-center min-w-[80px]",children:[s.jsx("p",{className:"text-sm text-blue-800",children:a.getFullYear()}),s.jsx("p",{className:"text-xl font-bold text-blue-600",children:a.getDate()}),s.jsx("p",{className:"text-sm text-blue-800",children:H(a.getMonth()+1)})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold",children:e.dog_park.name}),s.jsxs("div",{className:"flex items-center text-gray-600 mt-1",children:[s.jsx(l,{className:"w-4 h-4 mr-1 flex-shrink-0"}),s.jsx("span",{className:"text-sm",children:e.dog_park.address})]}),s.jsxs("div",{className:"flex items-center text-gray-600 mt-1",children:[s.jsx(n,{className:"w-4 h-4 mr-1 flex-shrink-0"}),s.jsxs("span",{className:"text-sm",children:[r," ã€œ ",i]})]}),s.jsxs("div",{className:"flex items-center text-gray-600 mt-1",children:[s.jsx(w,{className:"w-4 h-4 mr-1 flex-shrink-0"}),s.jsxs("span",{className:"text-sm",children:[e.dog.name,"ã¡ã‚ƒã‚“ï¼ˆ",e.dog.breed,"ï¼‰"]})]}),Math.random()>.5&&s.jsx("div",{className:"flex items-center mt-2",children:[1,2,3,4,5].map((e=>s.jsx(y,{className:"w-4 h-4 "+(e<=Math.floor(3+2*Math.random())?"text-yellow-400 fill-current":"text-gray-300")},e)))})]})]}),s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsx("div",{className:"text-right",children:s.jsxs("span",{className:"text-lg font-bold text-green-600",children:["Â¥",e.total_amount.toLocaleString()]})}),s.jsx("div",{className:"mt-2",children:s.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium "+("regular"===e.reservation_type?"bg-blue-100 text-blue-800":"private_booth"===e.reservation_type?"bg-purple-100 text-purple-800":"bg-orange-100 text-orange-800"),children:c})}),s.jsx("div",{className:"mt-2",children:s.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium "+("confirmed"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"confirmed"===e.status?"åˆ©ç”¨æ¸ˆã¿":"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"})})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 flex justify-between items-center",children:[s.jsx("div",{className:"text-sm text-gray-500",children:t}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(h,{to:`/parks/${e.park_id}`,children:s.jsxs(xe,{size:"sm",variant:"secondary",children:[s.jsx($,{className:"w-4 h-4 mr-1"}),"æ–½è¨­è©³ç´°"]})}),s.jsx(h,{to:`/parks/${e.park_id}/reserve`,children:s.jsxs(xe,{size:"sm",children:[s.jsx(g,{className:"w-4 h-4 mr-1"}),"å†äºˆç´„"]})}),"confirmed"===e.status&&s.jsxs(xe,{size:"sm",variant:"secondary",className:"text-red-600 hover:text-red-700",isLoading:M===e.id,onClick:async()=>{const s=await(async e=>{const s="whole_facility"===e.reservation_type,a=new Date,t=new Date(e.date),l=new Date(t);if(l.setDate(t.getDate()-1),s)return a<l;{const{data:s}=await ue.from("user_entry_exit_logs").select("*").eq("user_id",e.user_id).eq("park_id",e.park_id).eq("action","entry").gte("timestamp",e.date);return!s||0===s.length}})(e);s?U(e.id):W("ã“ã®äºˆç´„ã¯ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã§ãã¾ã›ã‚“ï¼ˆè²¸ã—åˆ‡ã‚Šã¯1æ—¥å‰ã¾ã§ã€é€šå¸¸äºˆç´„ã¯PINæœªä½¿ç”¨æ™‚ã®ã¿ï¼‰")},children:[s.jsx(S,{className:"w-4 h-4 mr-1"}),"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"]})]})]})]},e.id)}))}),Z.length>0&&s.jsx(oe,{className:"p-6 bg-blue-50 border-blue-200",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(c,{className:"w-6 h-6 text-blue-600 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£æ©Ÿèƒ½"}),s.jsx("p",{className:"text-sm text-blue-800 mb-3",children:"åŒã˜ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’åˆ©ç”¨ã—ãŸä»–ã®ãƒ¯ãƒ³ã¡ã‚ƒã‚“ã¨ã®å‡ºä¼šã„ã‚’ã€Œã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã€ãƒšãƒ¼ã‚¸ã§ç¢ºèªã§ãã¾ã™ã€‚ å‹é”ç”³è«‹ã‚’é€ã£ãŸã‚Šã€æ¬¡å›ã®äºˆç´„ã‚’èª¿æ•´ã—ãŸã‚Šã—ã¦ã€ãƒ¯ãƒ³ã¡ã‚ƒã‚“åŒå£«ã®äº¤æµã‚’æ·±ã‚ã¾ã—ã‚‡ã†ã€‚"}),s.jsx(h,{to:"/community",children:s.jsxs(xe,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[s.jsx(c,{className:"w-4 h-4 mr-2"}),"ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚’è¦‹ã‚‹"]})})]})]})}),A&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx(a,{className:"w-12 h-12 text-red-600 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"äºˆç´„ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ã¾ã™ã‹ï¼Ÿ"}),s.jsx("p",{className:"text-gray-600",children:"ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚æœ¬å½“ã«ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ã¾ã™ã‹ï¼Ÿ"})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(xe,{variant:"secondary",onClick:()=>U(null),children:"æˆ»ã‚‹"}),s.jsx(xe,{className:"bg-red-600 hover:bg-red-700",isLoading:M===A,onClick:()=>{const e=Z.find((e=>e.id===A));e&&(async e=>{z(e.id),W(null),G(null);try{const{data:s,error:a}=await ue.rpc("cancel_reservation",{p_reservation_id:e.id,p_user_id:e.user_id});if(a||!(null==s?void 0:s.success))return void W(s&&s.message||(null==a?void 0:a.message)||"ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã«å¤±æ•—ã—ã¾ã—ãŸ");G("äºˆç´„ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ã¾ã—ãŸ"),U(null),await V(),setTimeout((()=>G(null)),3e3)}catch(s){W(s.message||"ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã«å¤±æ•—ã—ã¾ã—ãŸ")}finally{z(null)}})(e)},children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã™ã‚‹"})]})]})}),B&&s.jsx("div",{className:"mb-6 p-4 bg-green-100 border border-green-300 rounded-lg",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(m,{className:"w-5 h-5 text-green-600"}),s.jsx("span",{className:"font-semibold text-green-800",children:B})]})}),J&&s.jsxs("div",{className:"mb-6 p-4 bg-red-100 border border-red-300 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(a,{className:"w-5 h-5 text-red-600"}),s.jsx("span",{className:"font-semibold text-red-800",children:"ã‚¨ãƒ©ãƒ¼"})]}),s.jsx("p",{className:"text-red-700 mt-1",children:J})]})]})}},Symbol.toStringTag,{value:"Module"})),Be=Object.freeze(Object.defineProperty({__proto__:null,DogParkRules:function(){return s.jsxs("div",{className:"max-w-4xl mx-auto px-4 space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mb-4",children:s.jsxs(h,{to:"/",className:"inline-flex items-center text-blue-600 hover:text-blue-700 transition-colors",children:[s.jsx(Q,{className:"w-4 h-4 mr-2"}),"ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹"]})}),s.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-4",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³åˆ©ç”¨ãƒ«ãƒ¼ãƒ«"}),s.jsx("p",{className:"text-base md:text-lg text-gray-600",children:"ã™ã¹ã¦ã®åˆ©ç”¨è€…ã¨æ„›çŠ¬ãŒå®‰å…¨ã§æ¥½ã—ãéã”ã™ãŸã‚ã®ãƒ«ãƒ¼ãƒ«ã§ã™"})]}),s.jsx(oe,{className:"bg-red-50 border-red-200 p-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:space-x-3",children:[s.jsx(a,{className:"w-6 h-6 text-red-600 mb-2 md:mb-0 md:mt-1 md:flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-red-900 mb-3",children:"é‡è¦ãªæ³¨æ„äº‹é …"}),s.jsxs("div",{className:"space-y-2 text-red-800",children:[s.jsxs("p",{className:"flex items-start",children:[s.jsx("span",{className:"w-2 h-2 bg-red-600 rounded-full mt-2 mr-3 flex-shrink-0"}),s.jsx("span",{children:"ãƒ¯ã‚¯ãƒãƒ³æ¥ç¨®è¨¼æ˜æ›¸ãŒæ‰¿èªã•ã‚Œã¦ã„ãªã„çŠ¬ã¯å…¥å ´ã§ãã¾ã›ã‚“"})]}),s.jsxs("p",{className:"flex items-start",children:[s.jsx("span",{className:"w-2 h-2 bg-red-600 rounded-full mt-2 mr-3 flex-shrink-0"}),s.jsx("span",{children:"ç™ºæƒ…ä¸­ã®ãƒ¡ã‚¹çŠ¬ã€ç—…æ°—ã‚„æ€ªæˆ‘ã‚’ã—ã¦ã„ã‚‹çŠ¬ã®å…¥å ´ã¯ãŠæ–­ã‚Šã—ã¾ã™"})]}),s.jsxs("p",{className:"flex items-start",children:[s.jsx("span",{className:"w-2 h-2 bg-red-600 rounded-full mt-2 mr-3 flex-shrink-0"}),s.jsx("span",{children:"æ”»æ’ƒçš„ãªè¡Œå‹•ã‚’ç¤ºã™çŠ¬ã¯å³åº§ã«é€€å ´ã—ã¦ã„ãŸã ãã¾ã™"})]}),s.jsxs("p",{className:"flex items-start",children:[s.jsx("span",{className:"w-2 h-2 bg-red-600 rounded-full mt-2 mr-3 flex-shrink-0"}),s.jsx("span",{children:"äº‹æ•…ã‚„ãƒˆãƒ©ãƒ–ãƒ«ã«ã¤ã„ã¦ã€æ–½è¨­ã¯ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“"})]})]})]})]})}),s.jsxs(oe,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx(d,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"åŸºæœ¬ãƒ«ãƒ¼ãƒ«"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(m,{className:"w-5 h-5 text-green-600 mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"å…¥å ´å‰ã®æº–å‚™"}),s.jsx("p",{className:"text-sm text-gray-600",children:"å¿…ãšãƒªãƒ¼ãƒ‰ã‚’è£…ç€ã—ã€æ’æ³„ã‚’æ¸ˆã¾ã›ã¦ã‹ã‚‰å…¥å ´ã—ã¦ãã ã•ã„"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(m,{className:"w-5 h-5 text-green-600 mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"é£¼ã„ä¸»ã®è²¬ä»»"}),s.jsx("p",{className:"text-sm text-gray-600",children:"æ„›çŠ¬ã‹ã‚‰ç›®ã‚’é›¢ã•ãšã€å¸¸ã«ç›£è¦–ãƒ»ç®¡ç†ã—ã¦ãã ã•ã„"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(m,{className:"w-5 h-5 text-green-600 mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"æ¸…æ½”ã®ç¶­æŒ"}),s.jsx("p",{className:"text-sm text-gray-600",children:"æ’æ³„ç‰©ã¯å¿…ãšé£¼ã„ä¸»ãŒè²¬ä»»ã‚’æŒã£ã¦å‡¦ç†ã—ã¦ãã ã•ã„"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(m,{className:"w-5 h-5 text-green-600 mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"ä»–ã®åˆ©ç”¨è€…ã¸ã®é…æ…®"}),s.jsx("p",{className:"text-sm text-gray-600",children:"å¤§ããªå£°ã§ã®ä¼šè©±ã‚„é¨’éŸ³ã¯æ§ãˆã‚ã«ã—ã¦ãã ã•ã„"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(m,{className:"w-5 h-5 text-green-600 mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"æ–½è¨­ã®ä¿è­·"}),s.jsx("p",{className:"text-sm text-gray-600",children:"è¨­å‚™ã‚„å‚™å“ã‚’å¤§åˆ‡ã«æ‰±ã„ã€ç ´æã•ã›ãªã„ã‚ˆã†æ³¨æ„ã—ã¦ãã ã•ã„"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(m,{className:"w-5 h-5 text-green-600 mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"ç·Šæ€¥æ™‚ã®å¯¾å¿œ"}),s.jsx("p",{className:"text-sm text-gray-600",children:"äº‹æ•…ã‚„æ€ªæˆ‘ãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã€ã™ãã«ç®¡ç†è€…ã«é€£çµ¡ã—ã¦ãã ã•ã„"})]})]})]})]})]}),s.jsxs(oe,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx(w,{className:"w-6 h-6 text-purple-600"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"æ„›çŠ¬ã«é–¢ã™ã‚‹ãƒ«ãƒ¼ãƒ«"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center",children:[s.jsx(o,{className:"w-5 h-5 text-red-500 mr-2"}),"å…¥å ´æ¡ä»¶"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"âœ… å…¥å ´å¯èƒ½"}),s.jsxs("ul",{className:"text-sm text-green-800 space-y-1",children:[s.jsx("li",{children:"â€¢ ãƒ¯ã‚¯ãƒãƒ³æ¥ç¨®è¨¼æ˜æ›¸ãŒæ‰¿èªæ¸ˆã¿ã®çŠ¬"}),s.jsx("li",{children:"â€¢ å¥åº·ã§å…ƒæ°—ãªçŠ¬"}),s.jsx("li",{children:"â€¢ ç¤¾ä¼šåŒ–ãŒã§ãã¦ã„ã‚‹çŠ¬"}),s.jsx("li",{children:"â€¢ é£¼ã„ä¸»ã®æŒ‡ç¤ºã«å¾“ãˆã‚‹çŠ¬"})]})]}),s.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"âŒ å…¥å ´ä¸å¯"}),s.jsxs("ul",{className:"text-sm text-red-800 space-y-1",children:[s.jsx("li",{children:"â€¢ ç™ºæƒ…ä¸­ã®ãƒ¡ã‚¹çŠ¬"}),s.jsx("li",{children:"â€¢ ç—…æ°—ã‚„æ€ªæˆ‘ã‚’ã—ã¦ã„ã‚‹çŠ¬"}),s.jsx("li",{children:"â€¢ æ”»æ’ƒçš„ãªè¡Œå‹•ã‚’ç¤ºã™çŠ¬"}),s.jsx("li",{children:"â€¢ ãƒ¯ã‚¯ãƒãƒ³æœªæ¥ç¨®ãƒ»è¨¼æ˜æ›¸æœªæ‰¿èªã®çŠ¬"})]})]})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center",children:[s.jsx(c,{className:"w-5 h-5 text-blue-500 mr-2"}),"ã‚µã‚¤ã‚ºåˆ¥ã‚¨ãƒªã‚¢ã®åˆ©ç”¨"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"border border-blue-200 p-4 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"ğŸ• å¤§å‹çŠ¬ã‚¨ãƒªã‚¢"}),s.jsx("p",{className:"text-sm text-blue-800",children:"ä½“é‡20kgä»¥ä¸Šã®çŠ¬ãŒå¯¾è±¡ã§ã™ã€‚å°å‹çŠ¬ã®å…¥å ´ã¯ã”é æ…®ãã ã•ã„ã€‚"})]}),s.jsxs("div",{className:"border border-pink-200 p-4 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-pink-900 mb-2",children:"ğŸ•â€ğŸ¦º å°å‹çŠ¬ã‚¨ãƒªã‚¢"}),s.jsx("p",{className:"text-sm text-pink-800",children:"ä½“é‡20kgæœªæº€ã®çŠ¬ãŒå¯¾è±¡ã§ã™ã€‚å¤§å‹çŠ¬ã¨ã®äº‹æ•…é˜²æ­¢ã®ãŸã‚ã€ã‚µã‚¤ã‚ºã‚’å®ˆã£ã¦ãã ã•ã„ã€‚"})]})]})]})]})]}),s.jsxs(oe,{className:"bg-yellow-50 border-yellow-200 p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx(a,{className:"w-6 h-6 text-yellow-600"}),s.jsx("h2",{className:"text-xl font-semibold text-yellow-900",children:"ç¦æ­¢äº‹é …"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Z,{className:"w-5 h-5 text-red-500 mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"å¤§å£°ãƒ»é¨’éŸ³"}),s.jsx("p",{className:"text-sm text-gray-600",children:"å¤§å£°ã§ã®ä¼šè©±ã€éŸ³æ¥½ã®å†ç”Ÿã€çŠ¬ã®éåº¦ãªé³´ãå£°"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(X,{className:"w-5 h-5 text-red-500 mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"ç„¡æ–­æ’®å½±"}),s.jsx("p",{className:"text-sm text-gray-600",children:"ä»–ã®åˆ©ç”¨è€…ã‚„çŠ¬ã®ç„¡æ–­æ’®å½±ãƒ»SNSæŠ•ç¨¿"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(v,{className:"w-5 h-5 text-red-500 mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"ã‚´ãƒŸã®æ”¾ç½®"}),s.jsx("p",{className:"text-sm text-gray-600",children:"æ’æ³„ç‰©ã‚„ã‚´ãƒŸã®æ”¾ç½®ã€æ–½è¨­ã®æ±šæ"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(o,{className:"w-5 h-5 text-red-500 mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"é£Ÿã¹ç‰©ã®æŒã¡è¾¼ã¿"}),s.jsx("p",{className:"text-sm text-gray-600",children:"çŠ¬ç”¨ãƒ»äººç”¨å•ã‚ãšã€é£Ÿã¹ç‰©ã®æŒã¡è¾¼ã¿ãƒ»çµ¦é¤Œ"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(ee,{className:"w-5 h-5 text-red-500 mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"æŒ‡å®šå¤–é§è»Š"}),s.jsx("p",{className:"text-sm text-gray-600",children:"æŒ‡å®šã•ã‚ŒãŸé§è»Šå ´ä»¥å¤–ã¸ã®é§è»Š"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(c,{className:"w-5 h-5 text-red-500 mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"çŠ¬ä»¥å¤–ã®å‹•ç‰©"}),s.jsx("p",{className:"text-sm text-gray-600",children:"çŠ¬ä»¥å¤–ã®ãƒšãƒƒãƒˆã®åŒä¼´å…¥å ´"})]})]})]})]})]}),s.jsxs(oe,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx(n,{className:"w-6 h-6 text-green-600"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"åˆ©ç”¨æ™‚é–“ãƒ»æ–™é‡‘"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"å–¶æ¥­æ™‚é–“"}),s.jsx("p",{className:"text-xl md:text-2xl font-bold text-blue-600 mb-2",children:"6:00 - 22:00"}),s.jsx("p",{className:"text-sm text-blue-700",children:"å¹´ä¸­ç„¡ä¼‘ãƒ»24æ™‚é–“ç„¡äººå–¶æ¥­"})]}),s.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"é€šå¸¸åˆ©ç”¨"}),s.jsx("p",{className:"text-xl md:text-2xl font-bold text-green-600 mb-2",children:"Â¥800"}),s.jsx("p",{className:"text-sm text-green-700",children:"1æ—¥åˆ©ç”¨ï¼ˆæ™‚é–“åˆ¶é™ãªã—ï¼‰"})]}),s.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-purple-800 mb-2",children:"ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³"}),s.jsx("p",{className:"text-xl md:text-2xl font-bold text-purple-600 mb-2",children:"Â¥3,800"}),s.jsx("p",{className:"text-sm text-purple-700",children:"æœˆé¡ï¼ˆã©ã“ã§ã‚‚ä½¿ã„æ”¾é¡Œï¼‰"})]})]}),s.jsxs("div",{className:"mt-4 p-4 bg-orange-50 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-orange-800 mb-2 text-center",children:"æ–½è¨­è²¸ã—åˆ‡ã‚Š"}),s.jsx("p",{className:"text-xl md:text-2xl font-bold text-orange-600 mb-2 text-center",children:"Â¥4,400/æ™‚é–“"}),s.jsxs("div",{className:"text-sm text-orange-700 text-center space-y-1",children:[s.jsx("p",{children:"1æ™‚é–“å˜ä½ã§äºˆç´„å¯èƒ½"}),s.jsx("p",{children:"äººæ•°åˆ¶é™ãªã—ãƒ»å‹é”ã¨ä¸€ç·’ã«åˆ©ç”¨å¯èƒ½"}),s.jsx("p",{children:"å‰æ—¥ã¾ã§ã®äºˆç´„ãŒå¿…è¦"}),s.jsx("p",{children:"ã‚µãƒ–ã‚¹ã‚¯ä¼šå“¡ã¯20%OFFï¼ˆÂ¥3,520/æ™‚é–“ï¼‰"})]})]})]}),s.jsxs(oe,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx(se,{className:"w-6 h-6 text-cyan-600"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"è¨­å‚™ãƒ»ã‚µãƒ¼ãƒ“ã‚¹"})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{icon:se,label:"çµ¦æ°´è¨­å‚™",desc:"æ¸…æ½”ãªé£²ã¿æ°´"},{icon:ee,label:"é§è»Šå ´",desc:"ç„¡æ–™é§è»Šå ´å®Œå‚™"},{icon:se,label:"ã‚·ãƒ£ãƒ¯ãƒ¼è¨­å‚™",desc:"çŠ¬ç”¨æ´—ã„å ´"},{icon:c,label:"ä¼‘æ†©ã‚¹ãƒšãƒ¼ã‚¹",desc:"é£¼ã„ä¸»ç”¨ãƒ™ãƒ³ãƒ"},{icon:v,label:"ã‚´ãƒŸç®±",desc:"åˆ†åˆ¥ã‚´ãƒŸç®±è¨­ç½®"},{icon:d,label:"ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£",desc:"é˜²çŠ¯ã‚«ãƒ¡ãƒ©è¨­ç½®"},{icon:ae,label:"ç·Šæ€¥é€£çµ¡",desc:"24æ™‚é–“å¯¾å¿œ"},{icon:o,label:"ã‚¢ã‚¸ãƒªãƒ†ã‚£",desc:"é‹å‹•å™¨å…·å®Œå‚™"}].map(((e,a)=>{const t=e.icon;return s.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[s.jsx(t,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),s.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:e.label}),s.jsx("p",{className:"text-xs text-gray-600",children:e.desc})]},a)}))})]}),s.jsxs(oe,{className:"bg-orange-50 border-orange-200 p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx(ae,{className:"w-6 h-6 text-orange-600"}),s.jsx("h2",{className:"text-xl font-semibold text-orange-900",children:"ç·Šæ€¥æ™‚ã®å¯¾å¿œ"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-orange-900 mb-2",children:"äº‹æ•…ãƒ»æ€ªæˆ‘ãŒç™ºç”Ÿã—ãŸå ´åˆ"}),s.jsxs("ol",{className:"text-sm text-orange-800 space-y-1",children:[s.jsx("li",{children:"1. ã¾ãšå®‰å…¨ã‚’ç¢ºä¿ã—ã€ä»–ã®çŠ¬ã‚’é ã–ã‘ã‚‹"}),s.jsx("li",{children:"2. æ€ªæˆ‘ã®ç¨‹åº¦ã‚’ç¢ºèªã—ã€å¿…è¦ã«å¿œã˜ã¦å¿œæ€¥å‡¦ç½®"}),s.jsx("li",{children:"3. é‡å‚·ã®å ´åˆã¯æ•‘æ€¥è»Šãƒ»å‹•ç‰©ç—…é™¢ã«é€£çµ¡"}),s.jsx("li",{children:"4. ç®¡ç†è€…ã«é€Ÿã‚„ã‹ã«å ±å‘Š"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-orange-900 mb-2",children:"ãƒˆãƒ©ãƒ–ãƒ«ãŒç™ºç”Ÿã—ãŸå ´åˆ"}),s.jsxs("ol",{className:"text-sm text-orange-800 space-y-1",children:[s.jsx("li",{children:"1. å†·é™ã«å¯¾å¿œã—ã€æ„Ÿæƒ…çš„ã«ãªã‚‰ãªã„"}),s.jsx("li",{children:"2. å½“äº‹è€…åŒå£«ã§è©±ã—åˆã„ã‚’è©¦ã¿ã‚‹"}),s.jsx("li",{children:"3. è§£æ±ºã—ãªã„å ´åˆã¯ç®¡ç†è€…ã«ç›¸è«‡"}),s.jsx("li",{children:"4. å¿…è¦ã«å¿œã˜ã¦è­¦å¯Ÿã«é€šå ±"})]})]})]}),s.jsxs("div",{className:"bg-orange-100 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-orange-900 mb-2",children:"ç·Šæ€¥é€£çµ¡å…ˆ"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-orange-800",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"ç®¡ç†è€…"}),s.jsx("p",{children:"å„ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã«æ²ç¤ºã—ã¦ã„ã¾ã™"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"æ•‘æ€¥è»Š"}),s.jsx("p",{children:"ğŸ“ 119"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"è­¦å¯Ÿ"}),s.jsx("p",{children:"ğŸ“ 110"})]})]})]})]})]}),s.jsx(oe,{className:"bg-gray-50 border-gray-200 p-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"åˆ©ç”¨è¦ç´„ã¸ã®åŒæ„"}),s.jsxs("p",{className:"text-gray-700 mb-6",children:["ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’ã”åˆ©ç”¨ã„ãŸã ãéš›ã¯ã€ä¸Šè¨˜ã®ãƒ«ãƒ¼ãƒ«ã‚’ã™ã¹ã¦ç†è§£ã—ã€éµå®ˆã—ã¦ã„ãŸã ãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚",s.jsx("br",{}),"ãƒ«ãƒ¼ãƒ«ã«é•åã—ãŸå ´åˆã€é€€å ´ã—ã¦ã„ãŸã ãå ´åˆãŒã‚ã‚Šã¾ã™ã€‚"]}),s.jsxs("div",{className:"flex flex-col md:flex-row justify-center space-y-3 md:space-y-0 md:space-x-4",children:[s.jsx(h,{to:"/parks",children:s.jsx(xe,{className:"w-full md:w-auto bg-blue-600 hover:bg-blue-700",children:"ãƒ«ãƒ¼ãƒ«ã‚’ç†è§£ã—ã¦ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’äºˆç´„ã™ã‚‹"})}),s.jsx(h,{to:"/",children:s.jsx(xe,{variant:"secondary",className:"w-full md:w-auto",children:"ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹"})})]})]})})]})}},Symbol.toStringTag,{value:"Module"})),Ge=Object.freeze(Object.defineProperty({__proto__:null,ParkRegistrationAgreement:function(){const t=k(),{user:l}=me(),[r,i]=e.useState(!1),[c,d]=e.useState(""),[o,x]=e.useState(!1);return s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsx("div",{className:"flex items-center space-x-4 mb-6",children:s.jsxs(h,{to:"/dashboard",className:"flex items-center text-gray-600 hover:text-gray-800 transition-colors",children:[s.jsx(Q,{className:"w-4 h-4 mr-2"}),"ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚‹"]})}),s.jsxs("div",{className:"text-center mb-8",children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-4 flex items-center justify-center",children:[s.jsx($,{className:"w-8 h-8 text-blue-600 mr-3"}),"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚ªãƒ¼ãƒŠãƒ¼å¥‘ç´„"]}),s.jsx("p",{className:"text-lg text-gray-600",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚ªãƒ¼ãƒŠãƒ¼ã¨ã—ã¦ç™»éŒ²ã™ã‚‹å‰ã«ã€å¥‘ç´„å†…å®¹ã‚’ã”ç¢ºèªãã ã•ã„"})]}),c&&s.jsxs("div",{className:"bg-red-100 border border-red-300 text-red-800 rounded-lg p-4 flex items-start",children:[s.jsx(a,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsx("p",{children:c})]}),s.jsxs(oe,{className:"p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[s.jsx(z,{className:"w-6 h-6 text-blue-600 mr-2"}),"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚ªãƒ¼ãƒŠãƒ¼å¥‘ç´„å†…å®¹"]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsxs("h3",{className:"font-semibold text-blue-900 mb-2 flex items-center",children:[s.jsx($,{className:"w-5 h-5 text-blue-600 mr-2"}),"æ–½è¨­é‹å–¶ã«ã¤ã„ã¦"]}),s.jsxs("div",{className:"text-sm text-blue-800 space-y-2",children:[s.jsx("p",{children:"1. ã‚ªãƒ¼ãƒŠãƒ¼ã¯ã€ãƒ‰ãƒƒã‚°ãƒ©ãƒ³æ–½è¨­ã®å®‰å…¨æ€§ã¨æ¸…æ½”ã•ã‚’ç¶­æŒã™ã‚‹è²¬ä»»ãŒã‚ã‚Šã¾ã™ã€‚"}),s.jsx("p",{children:"2. æ–½è¨­ã¯24æ™‚é–“å–¶æ¥­ã‚’åŸºæœ¬ã¨ã—ã€ç„¡äººé‹å–¶ã‚·ã‚¹ãƒ†ãƒ ã‚’å°å…¥ã—ã¾ã™ã€‚"}),s.jsx("p",{children:"3. é€±ã«1å›ä»¥ä¸Šã®å®šæœŸçš„ãªæ–½è¨­ç‚¹æ¤œãƒ»æ¸…æƒãŒå¿…è¦ã§ã™ã€‚"}),s.jsx("p",{children:"4. ç·Šæ€¥æ™‚ã«ã¯1æ™‚é–“ä»¥å†…ã«æ–½è¨­ã«åˆ°ç€ã§ãã‚‹ä½“åˆ¶ã‚’æ•´ãˆã¦ãã ã•ã„ã€‚"}),s.jsx("p",{children:"5. æ–½è¨­å†…ã§ã®ãƒˆãƒ©ãƒ–ãƒ«ã‚„äº‹æ•…ã«é–¢ã—ã¦ã¯ã€å½“ç¤¾ã¯ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚"})]})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsxs("h3",{className:"font-semibold text-green-900 mb-2 flex items-center",children:[s.jsx(M,{className:"w-5 h-5 text-green-600 mr-2"}),"æ–™é‡‘ã¨åç›Šé…åˆ†"]}),s.jsxs("div",{className:"text-sm text-green-800 space-y-2",children:[s.jsx("p",{children:"1. åˆ©ç”¨æ–™é‡‘ã¯å…¨å›½çµ±ä¸€ã§ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š"}),s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"é€šå¸¸åˆ©ç”¨ï¼š800å††/æ—¥ï¼ˆæ™‚é–“åˆ¶é™ãªã—ï¼‰"}),s.jsx("li",{children:"ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ï¼š3,800å††/æœˆï¼ˆå…¨å›½å…±é€šï¼‰"}),s.jsx("li",{children:"æ–½è¨­è²¸ã—åˆ‡ã‚Šï¼š4,400å††/æ™‚é–“"})]}),s.jsxs("p",{children:["2. å£²ä¸Šã®",s.jsx("span",{className:"font-bold",children:"80%"}),"ãŒã‚ªãƒ¼ãƒŠãƒ¼ã«æ”¯æ‰•ã‚ã‚Œã¾ã™ã€‚"]}),s.jsxs("p",{children:["3. æ®‹ã‚Šã®",s.jsx("span",{className:"font-bold",children:"20%"}),"ã¯å½“ç¤¾ã®æ‰‹æ•°æ–™ã¨ãªã‚Šã¾ã™ã€‚"]}),s.jsx("p",{children:"4. æŒ¯è¾¼ã¯æ¯æœˆ15æ—¥ã«å‰æœˆåˆ†ã‚’ä¸€æ‹¬ã§è¡Œã„ã¾ã™ã€‚"}),s.jsx("p",{children:"5. æŒ¯è¾¼æ‰‹æ•°æ–™ã¯å½“ç¤¾ãŒè² æ‹…ã—ã¾ã™ã€‚"})]})]}),s.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[s.jsxs("h3",{className:"font-semibold text-yellow-900 mb-2 flex items-center",children:[s.jsx(te,{className:"w-5 h-5 text-yellow-600 mr-2"}),"ç¨é‡‘ã¨æ³•çš„è²¬ä»»"]}),s.jsxs("div",{className:"text-sm text-yellow-800 space-y-2",children:[s.jsx("p",{children:"1. ã‚ªãƒ¼ãƒŠãƒ¼ã¯åç›Šã«å¯¾ã™ã‚‹ç¨é‡‘ã®ç”³å‘Šãƒ»ç´ç¨ç¾©å‹™ãŒã‚ã‚Šã¾ã™ã€‚"}),s.jsx("p",{children:"2. æ–½è¨­é‹å–¶ã«å¿…è¦ãªè¨±èªå¯ã®å–å¾—ã¯ã‚ªãƒ¼ãƒŠãƒ¼ã®è²¬ä»»ã§è¡Œã£ã¦ãã ã•ã„ã€‚"}),s.jsx("p",{children:"3. æ–½è¨­å†…ã§ã®äº‹æ•…ãƒ»ãƒˆãƒ©ãƒ–ãƒ«ã«é–¢ã™ã‚‹æ³•çš„è²¬ä»»ã¯ã‚ªãƒ¼ãƒŠãƒ¼ãŒè² ã†ã‚‚ã®ã¨ã—ã¾ã™ã€‚"}),s.jsx("p",{children:"4. æ–½è¨­è³ å„Ÿè²¬ä»»ä¿é™ºã¸ã®åŠ å…¥ã‚’å¼·ãæ¨å¥¨ã—ã¾ã™ã€‚"})]})]}),s.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[s.jsxs("h3",{className:"font-semibold text-purple-900 mb-2 flex items-center",children:[s.jsx(n,{className:"w-5 h-5 text-purple-600 mr-2"}),"å¥‘ç´„æœŸé–“ã¨è§£ç´„"]}),s.jsxs("div",{className:"text-sm text-purple-800 space-y-2",children:[s.jsx("p",{children:"1. å¥‘ç´„æœŸé–“ã¯1å¹´é–“ã¨ã—ã€è‡ªå‹•æ›´æ–°ã•ã‚Œã¾ã™ã€‚"}),s.jsx("p",{children:"2. è§£ç´„ã‚’å¸Œæœ›ã™ã‚‹å ´åˆã¯ã€30æ—¥å‰ã¾ã§ã«æ›¸é¢ã§é€šçŸ¥ãŒå¿…è¦ã§ã™ã€‚"}),s.jsx("p",{children:"3. ä»¥ä¸‹ã®å ´åˆã€å½“ç¤¾ã¯å³æ™‚å¥‘ç´„è§£é™¤ã§ãã‚‹ã‚‚ã®ã¨ã—ã¾ã™ï¼š"}),s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"æœ¬å¥‘ç´„ã«é•åã—ãŸå ´åˆ"}),s.jsx("li",{children:"æ–½è¨­ã®å®‰å…¨æ€§ãŒç¢ºä¿ã§ããªã„å ´åˆ"}),s.jsx("li",{children:"åˆ©ç”¨è€…ã‹ã‚‰ã®è‹¦æƒ…ãŒè‘—ã—ãå¤šã„å ´åˆ"}),s.jsx("li",{children:"å½“ç¤¾ã®ä¿¡ç”¨ã‚’è‘—ã—ãæ¯€æã™ã‚‹è¡Œç‚ºãŒã‚ã£ãŸå ´åˆ"})]})]})]}),s.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[s.jsxs("h3",{className:"font-semibold text-red-900 mb-2 flex items-center",children:[s.jsx(a,{className:"w-5 h-5 text-red-600 mr-2"}),"ç¦æ­¢äº‹é …"]}),s.jsxs("div",{className:"text-sm text-red-800 space-y-2",children:[s.jsx("p",{children:"1. å½“ç¤¾ã®è¨±å¯ãªãæ–™é‡‘ä½“ç³»ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨"}),s.jsx("p",{children:"2. å½“ç¤¾ã®ã‚·ã‚¹ãƒ†ãƒ ã‚’è¿‚å›ã—ã¦äºˆç´„ãƒ»æ±ºæ¸ˆã‚’å—ã‘ã‚‹ã“ã¨"}),s.jsx("p",{children:"3. åˆ©ç”¨è€…ã®å€‹äººæƒ…å ±ã‚’ä¸æ­£ã«åé›†ãƒ»åˆ©ç”¨ã™ã‚‹ã“ã¨"}),s.jsx("p",{children:"4. å½“ç¤¾ã‚„ä»–ã®ã‚ªãƒ¼ãƒŠãƒ¼ã®ä¿¡ç”¨ã‚’æ¯€æã™ã‚‹è¡Œç‚º"}),s.jsx("p",{children:"5. åç¤¾ä¼šçš„å‹¢åŠ›ã¨ã®é–¢ä¿‚ã‚’æŒã¤ã“ã¨"})]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center",children:[s.jsx(le,{className:"w-5 h-5 text-gray-600 mr-2"}),"å€‹äººæƒ…å ±ã¨æ©Ÿå¯†ä¿æŒ"]}),s.jsxs("div",{className:"text-sm text-gray-800 space-y-2",children:[s.jsx("p",{children:"1. ã‚ªãƒ¼ãƒŠãƒ¼ã¯åˆ©ç”¨è€…ã®å€‹äººæƒ…å ±ã‚’é©åˆ‡ã«ç®¡ç†ã—ã€æ¼æ´©é˜²æ­¢ã«åŠªã‚ã‚‹ã“ã¨"}),s.jsx("p",{children:"2. å¥‘ç´„æœŸé–“ä¸­ãŠã‚ˆã³çµ‚äº†å¾Œã‚‚ã€å½“ç¤¾ã®æ©Ÿå¯†æƒ…å ±ã‚’ç¬¬ä¸‰è€…ã«é–‹ç¤ºã—ãªã„ã“ã¨"}),s.jsx("p",{children:"3. å½“ç¤¾ã¯æ³•ä»¤ã«åŸºã¥ãã€ã‚ªãƒ¼ãƒŠãƒ¼ã®å€‹äººæƒ…å ±ã‚’é©åˆ‡ã«ç®¡ç†ã—ã¾ã™"})]})]}),s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),o)try{i(!0),d("");const{error:e}=await ue.from("owner_agreements").upsert([{user_id:null==l?void 0:l.id,agreed_at:(new Date).toISOString(),agreement_version:"1.0",agreement_type:"park_owner"}]);if(e)throw e;t("/register-park")}catch(s){d(s.message||"å¥‘ç´„åŒæ„ã®å‡¦ç†ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}finally{i(!1)}else d("å¥‘ç´„å†…å®¹ã«åŒæ„ã—ã¦ãã ã•ã„ã€‚")},children:[s.jsx("div",{className:"border-t pt-6 mt-6",children:s.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:o,onChange:e=>x(e.target.checked),className:"mt-1 rounded text-blue-600"}),s.jsx("span",{className:"text-gray-700",children:"ä¸Šè¨˜ã®å¥‘ç´„å†…å®¹ã‚’ã™ã¹ã¦èª­ã¿ã€ç†è§£ã—ã€åŒæ„ã—ã¾ã™ã€‚ã“ã®å¥‘ç´„ã¯æ³•çš„æ‹˜æŸåŠ›ã‚’æŒã¡ã¾ã™ã€‚"})]})}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsx(xe,{type:"submit",isLoading:r,disabled:!o,children:"åŒæ„ã—ã¦æœ¬äººç¢ºèªã«é€²ã‚€"})})]})]})]}),s.jsx(oe,{className:"bg-gray-50",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(z,{className:"w-6 h-6 text-gray-600 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"å¯©æŸ»ãƒ—ãƒ­ã‚»ã‚¹ã«ã¤ã„ã¦"}),s.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"å¥‘ç´„åŒæ„:"})," ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚ªãƒ¼ãƒŠãƒ¼å¥‘ç´„ã¸ã®åŒæ„"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"æœ¬äººç¢ºèª:"})," å®‰å…¨ãªãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ é‹å–¶ã®ãŸã‚ã®æœ¬äººç¢ºèª"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"ç¬¬ä¸€å¯©æŸ»:"})," åŸºæœ¬çš„ãªæ¡ä»¶ã®ç¢ºèª"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"ç¬¬äºŒå¯©æŸ»:"})," è©³ç´°ãªæ–½è¨­æƒ…å ±ã¨æ›¸é¡å¯©æŸ»"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"QRã‚³ãƒ¼ãƒ‰å®Ÿè¨¼æ¤œæŸ»:"})," å®Ÿéš›ã®æ–½è¨­ã§ã®å‹•ä½œç¢ºèª"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"æ²è¼‰ãƒ»é‹å–¶é–‹å§‹:"})," ä¸€èˆ¬å…¬é–‹ã¨äºˆç´„å—ä»˜é–‹å§‹"]})]}),s.jsx("div",{className:"mt-3 flex items-center",children:s.jsxs(h,{to:"/owner-payment-system",className:"text-blue-600 hover:text-blue-800 flex items-center",children:[s.jsx(M,{className:"w-4 h-4 mr-1"}),s.jsx("span",{className:"text-sm font-medium",children:"æ–™é‡‘ä½“ç³»ã¨åç›Šã‚·ã‚¹ãƒ†ãƒ ã«ã¤ã„ã¦è©³ã—ãè¦‹ã‚‹"})]})})]})]})})]})}},Symbol.toStringTag,{value:"Module"})),Ve={overview:{label:"æ–½è¨­å…¨æ™¯",description:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®å…¨ä½“ãŒè¦‹æ¸¡ã›ã‚‹å†™çœŸ",icon:$,required:!0},entrance:{label:"å…¥å£",description:"å…¥å£ã®æ§˜å­ãŒã‚ã‹ã‚‹å†™çœŸ",icon:l,required:!0},gate:{label:"ã‚²ãƒ¼ãƒˆ",description:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³å…¥å£ã®ã‚²ãƒ¼ãƒˆã®å†™çœŸ",icon:$,required:!0},fence:{label:"ãƒ•ã‚§ãƒ³ã‚¹",description:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³å‘¨å›²ã®ãƒ•ã‚§ãƒ³ã‚¹ã®å†™çœŸ",icon:$,required:!0},large_dog_area:{label:"å¤§å‹çŠ¬ã‚¨ãƒªã‚¢",description:"å¤§å‹çŠ¬ç”¨ã®ã‚¨ãƒªã‚¢ã®å†™çœŸ",icon:$,required:!1,conditionalOn:"large_dog_area"},small_dog_area:{label:"å°å‹çŠ¬ã‚¨ãƒªã‚¢",description:"å°å‹çŠ¬ç”¨ã®ã‚¨ãƒªã‚¢ã®å†™çœŸ",icon:$,required:!1,conditionalOn:"small_dog_area"},private_booth:{label:"ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ¼ã‚¹",description:"ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ¼ã‚¹ã®å†…éƒ¨ã¨å¤–è¦³",icon:$,required:!1,conditionalOn:"private_booths"},parking:{label:"é§è»Šå ´",description:"é§è»Šå ´ã®æ§˜å­ãŒã‚ã‹ã‚‹å†™çœŸ",icon:ie,required:!1,conditionalOn:"facilities.parking"},shower:{label:"ã‚·ãƒ£ãƒ¯ãƒ¼è¨­å‚™",description:"ã‚·ãƒ£ãƒ¯ãƒ¼è¨­å‚™ã®å†™çœŸ",icon:re,required:!1,conditionalOn:"facilities.shower"},restroom:{label:"ãƒˆã‚¤ãƒ¬",description:"ãƒˆã‚¤ãƒ¬è¨­å‚™ã®å†™çœŸ",icon:z,required:!1,conditionalOn:"facilities.restroom"},agility:{label:"ã‚¢ã‚¸ãƒªãƒ†ã‚£è¨­å‚™",description:"ã‚¢ã‚¸ãƒªãƒ†ã‚£è¨­å‚™ã®å†™çœŸ",icon:$,required:!1,conditionalOn:"facilities.agility"},rest_area:{label:"ä¼‘æ†©ã‚¹ãƒšãƒ¼ã‚¹",description:"ä¼‘æ†©ã‚¹ãƒšãƒ¼ã‚¹ã®å†™çœŸ",icon:$,required:!1,conditionalOn:"facilities.rest_area"},water_station:{label:"çµ¦æ°´è¨­å‚™",description:"çµ¦æ°´è¨­å‚™ã®å†™çœŸ",icon:$,required:!1,conditionalOn:"facilities.water_station"}};function He({className:e}){return s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[s.jsx("path",{d:"M3 21h18"}),s.jsx("path",{d:"M3 10h18"}),s.jsx("path",{d:"M5 6l7-3 7 3"}),s.jsx("path",{d:"M4 10v11"}),s.jsx("path",{d:"M20 10v11"}),s.jsx("path",{d:"M8 14v3"}),s.jsx("path",{d:"M12 14v3"}),s.jsx("path",{d:"M16 14v3"})]})}function Ye({className:e}){return s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("polyline",{points:"12 6 12 12 16 14"})]})}const Ke=Object.freeze(Object.defineProperty({__proto__:null,ParkRegistrationSecondStage:function(){const{parkId:t}=_(),{user:l}=me(),r=k(),[i,c]=e.useState(null),[n,d]=e.useState([]),[o,x]=e.useState(!0),[p,u]=e.useState(!1),[g,b]=e.useState(""),[N,f]=e.useState(""),[y,w]=e.useState(null),[C,D]=e.useState("images"),[T,P]=e.useState({bank_name:"",bank_code:"",branch_name:"",branch_code:"",account_type:"ordinary",account_number:"",account_holder_name:""}),[I,E]=e.useState(!1),[O,q]=e.useState(""),[L,F]=e.useState("");e.useEffect((()=>{l&&t?R():r("/owner-dashboard")}),[l,t,r]);const R=async()=>{try{x(!0);const{data:e,error:s}=await ue.from("dog_parks").select("*").eq("id",t).eq("owner_id",null==l?void 0:l.id).single();if(s)throw s;if(!e)return void r("/owner-dashboard");c(e);const{data:a,error:i}=await ue.from("dog_park_facility_images").select("*").eq("park_id",t),n=Object.entries(Ve).filter((([,s])=>{if(s.required)return!0;if(s.conditionalOn&&e){const a=s.conditionalOn.split(".");if(1===a.length)return e[a[0]]??!1;if(2===a.length){const s=e[a[0]];if(s&&"object"==typeof s)return s[a[1]]??!1}}return!1})).map((([e])=>e)).map((e=>{const s=(a||[]).find((s=>s.image_type===e));return{id:null==s?void 0:s.id,image_type:e,image_url:null==s?void 0:s.image_url,is_approved:(null==s?void 0:s.is_approved)??null,admin_notes:null==s?void 0:s.admin_notes}}));d(n);const{data:o,error:m}=await ue.rpc("get_owner_bank_account");!m&&o&&o.length>0&&P({id:o[0].id,bank_name:o[0].bank_name,bank_code:o[0].bank_code,branch_name:o[0].branch_name,branch_code:o[0].branch_code,account_type:o[0].account_type,account_number:o[0].account_number,account_holder_name:o[0].account_holder_name})}catch(e){b(e.message||"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ")}finally{x(!1)}};return o?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):y?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"relative max-w-4xl w-full",children:[s.jsx("button",{onClick:()=>w(null),className:"absolute top-2 right-2 p-2 bg-white bg-opacity-90 shadow-lg rounded-full text-gray-800 hover:bg-opacity-100 transition-all",children:s.jsx(S,{className:"w-6 h-6"})}),s.jsx("img",{src:y,alt:"ç”»åƒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼",className:"max-h-[80vh] max-w-full mx-auto rounded-lg",onError:e=>{e.currentTarget.src="https://via.placeholder.com/800x600?text=Image+Not+Available"}})]})}):i?"first_stage_passed"!==i.status&&"second_stage_review"!==i.status?s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"mb-6",children:s.jsxs(h,{to:"/owner-dashboard",className:"flex items-center text-blue-600 hover:text-blue-800",children:[s.jsx(Q,{className:"w-4 h-4 mr-2"}),"ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚‹"]})}),s.jsxs(oe,{className:"text-center py-8",children:[s.jsx(a,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"ã“ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã¯ç¾åœ¨ç¬¬äºŒå¯©æŸ»ã®å¯¾è±¡ã§ã¯ã‚ã‚Šã¾ã›ã‚“"}),s.jsxs("p",{className:"text-gray-600 mb-4",children:["pending"===i.status&&"ç¬¬ä¸€å¯©æŸ»ãŒå®Œäº†ã™ã‚‹ã¾ã§ãŠå¾…ã¡ãã ã•ã„ã€‚","qr_testing"===i.status&&"QRã‚³ãƒ¼ãƒ‰å®Ÿè¨¼æ¤œæŸ»ä¸­ã§ã™ã€‚ç®¡ç†è€…ã‹ã‚‰ã®é€£çµ¡ã‚’ãŠå¾…ã¡ãã ã•ã„ã€‚","approved"===i.status&&"ã“ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã¯æ—¢ã«æ‰¿èªã•ã‚Œã¦ã„ã¾ã™ã€‚","rejected"===i.status&&"å¯©æŸ»ãŒå´ä¸‹ã•ã‚Œã¾ã—ãŸã€‚è©³ç´°ã¯ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã”ç¢ºèªãã ã•ã„ã€‚"]}),s.jsx(h,{to:"/owner-dashboard",children:s.jsx(xe,{children:"ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚‹"})})]})]}):s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsx("div",{className:"flex items-center space-x-4 mb-6",children:s.jsxs(h,{to:"/owner-dashboard",className:"flex items-center text-blue-600 hover:text-blue-800",children:[s.jsx(Q,{className:"w-4 h-4 mr-2"}),"ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚‹"]})}),s.jsxs("div",{className:"text-center mb-8",children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-4 flex items-center justify-center",children:[s.jsx($,{className:"w-8 h-8 text-blue-600 mr-3"}),i.name,"ã®ç¬¬äºŒå¯©æŸ»"]}),s.jsx("p",{className:"text-lg text-gray-600",children:"æ–½è¨­ã®è©³ç´°ç”»åƒã¨æŒ¯è¾¼å…ˆæƒ…å ±ã‚’ç™»éŒ²ã—ã¦å¯©æŸ»ã‚’å®Œäº†ã•ã›ã¾ã—ã‚‡ã†"})]}),s.jsx(oe,{className:"bg-blue-50 border-blue-200",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(z,{className:"w-6 h-6 text-blue-600 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"å¯©æŸ»ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm text-blue-800",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-6 h-6 bg-green-600 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"1"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"ç¬¬ä¸€å¯©æŸ»"}),s.jsx("p",{className:"text-xs text-green-600",children:"å®Œäº†"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:`w-6 h-6 ${"second_stage_review"===i.status?"bg-green-600":"bg-blue-600"} text-white rounded-full flex items-center justify-center text-xs font-bold`,children:"2"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"ç¬¬äºŒå¯©æŸ»"}),s.jsx("p",{className:"text-xs text-blue-600",children:"first_stage_passed"===i.status?"ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä¸­":"å¯©æŸ»ä¸­"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-6 h-6 bg-gray-400 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"3"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"QRå®Ÿè¨¼æ¤œæŸ»"}),s.jsx("p",{className:"text-xs text-gray-600",children:"æœªå®Ÿæ–½"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-6 h-6 bg-gray-400 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"4"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"é‹å–¶é–‹å§‹"}),s.jsx("p",{className:"text-xs text-gray-600",children:"æœªå®Œäº†"})]})]})]})]})]})}),g&&s.jsxs("div",{className:"bg-red-100 border border-red-300 text-red-800 rounded-lg p-4 flex items-start",children:[s.jsx(a,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsx("p",{children:g})]}),N&&s.jsxs("div",{className:"bg-green-100 border border-green-300 text-green-800 rounded-lg p-4 flex items-start",children:[s.jsx(m,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsx("p",{children:N})]}),s.jsxs("div",{className:"flex space-x-4 border-b",children:[s.jsxs("button",{className:"px-4 py-2 font-medium "+("images"===C?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>D("images"),children:[s.jsx(X,{className:"w-4 h-4 inline mr-2"}),"æ–½è¨­ç”»åƒ"]}),s.jsxs("button",{className:"px-4 py-2 font-medium "+("bank"===C?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>D("bank"),children:[s.jsx(He,{className:"w-4 h-4 inline mr-2"}),"æŒ¯è¾¼å…ˆæƒ…å ±"]})]}),"images"===C&&s.jsxs(oe,{children:[s.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[s.jsx(X,{className:"w-6 h-6 text-blue-600 mr-2"}),"æ–½è¨­ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰"]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(a,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),s.jsxs("div",{className:"text-sm text-yellow-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³"}),s.jsxs("ul",{className:"space-y-1",children:[s.jsx("li",{children:"â€¢ é®®æ˜ã§æ˜ã‚‹ã„ç”»åƒã‚’é¸ã‚“ã§ãã ã•ã„"}),s.jsx("li",{children:"â€¢ æ–½è¨­ã®ç‰¹å¾´ãŒã‚ˆãã‚ã‹ã‚‹è§’åº¦ã‹ã‚‰æ’®å½±ã—ã¦ãã ã•ã„"}),s.jsx("li",{children:"â€¢ ç”»åƒã‚µã‚¤ã‚ºã¯10MBä»¥ä¸‹ã«ã—ã¦ãã ã•ã„"}),s.jsx("li",{children:"â€¢ JPGã€PNGã€GIFå½¢å¼ã®ã¿å¯¾å¿œã—ã¦ã„ã¾ã™"}),s.jsx("li",{children:"â€¢ å¿…é ˆé …ç›®ï¼ˆ*ï¼‰ã¯å¿…ãšã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„"})]})]})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.map((e=>{const a=Ve[e.image_type],l=(null==a?void 0:a.icon)||$,r=(null==a?void 0:a.required)||!1;let i=null;if(null!==(e.is_approved??null)&&e.image_url){const a=!0===(c=e.is_approved??null)?{icon:m,color:"text-green-600",label:"æ‰¿èªæ¸ˆã¿"}:!1===c?{icon:S,color:"text-red-600",label:"å´ä¸‹"}:{icon:Ye,color:"text-yellow-600",label:"å¯©æŸ»ä¸­"},t=a.icon;i=s.jsxs("div",{className:`flex items-center space-x-1 ${a.color}`,children:[s.jsx(t,{className:"w-4 h-4"}),s.jsx("span",{className:"text-xs",children:a.label})]})}var c;return s.jsxs("div",{className:"border rounded-lg p-4 relative",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(l,{className:"w-5 h-5 text-blue-600"}),s.jsxs("h3",{className:"font-medium",children:[(null==a?void 0:a.label)||e.image_type,r&&s.jsx("span",{className:"text-red-600 ml-1",children:"*"})]})]}),i]}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:(null==a?void 0:a.description)||"ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„"}),e.image_url?s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"h-40 bg-gray-100 rounded-lg overflow-hidden cursor-pointer",onClick:()=>w(e.image_url||null),children:s.jsx("img",{src:e.image_url,alt:(null==a?void 0:a.label)||e.image_type,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://via.placeholder.com/400x300?text=Image+Not+Available"}})}),s.jsxs("div",{className:"absolute top-2 right-2 flex space-x-2",children:[s.jsx("button",{onClick:()=>w(e.image_url||null),className:"p-1 bg-white rounded-full shadow hover:bg-gray-100",children:s.jsx(V,{className:"w-4 h-4 text-blue-600"})}),s.jsx("button",{onClick:()=>(async e=>{if(e)try{const{error:s}=await ue.from("dog_park_facility_images").delete().eq("id",e);if(s)throw s;await R(),f("ç”»åƒã‚’å‰Šé™¤ã—ã¾ã—ãŸ"),setTimeout((()=>f("")),3e3)}catch(s){b("ç”»åƒã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ"),setTimeout((()=>b("")),3e3)}})(e.id),className:"p-1 bg-white rounded-full shadow hover:bg-gray-100",disabled:!0===(e.is_approved??null),children:s.jsx(v,{className:"w-4 h-4 "+(!0===(e.is_approved??null)?"text-gray-400":"text-red-600")})})]}),!1===e.is_approved&&e.admin_notes&&s.jsxs("div",{className:"mt-2 p-2 bg-red-50 rounded text-sm text-red-800",children:[s.jsx("p",{className:"font-medium",children:"å´ä¸‹ç†ç”±:"}),s.jsx("p",{children:e.admin_notes})]})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-blue-500 transition-colors",children:[s.jsx("input",{type:"file",id:`image-${e.image_type}`,accept:"image/*",className:"hidden",onChange:s=>{var a;const t=null==(a=s.target.files)?void 0:a[0];t&&((e,s)=>{d((a=>a.map((a=>a.image_type===e?{...a,file:s,error:void 0}:a))))})(e.image_type,t)}}),s.jsxs("label",{htmlFor:`image-${e.image_type}`,className:"cursor-pointer flex flex-col items-center",children:[s.jsx(J,{className:"w-8 h-8 text-gray-400 mb-2"}),s.jsx("span",{className:"text-sm text-gray-600",children:"ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç”»åƒã‚’é¸æŠ"})]})]}),e.file&&s.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[s.jsx("span",{className:"text-sm truncate",children:e.file.name}),s.jsx(xe,{size:"sm",onClick:()=>(async e=>{const s=n.find((s=>s.image_type===e));if(s&&s.file)try{d((s=>s.map((s=>s.image_type===e?{...s,uploading:!0,error:void 0}:s))));const a=s.file.name.split(".").pop(),l=`${t}/${e}_${Date.now()}.${a}`,{error:r}=await ue.storage.from("dog-park-images").upload(l,s.file);if(r)throw r;const{data:{publicUrl:i}}=ue.storage.from("dog-park-images").getPublicUrl(l);if(s.id){const{error:e}=await ue.from("dog_park_facility_images").update({image_url:i,is_approved:null,updated_at:(new Date).toISOString()}).eq("id",s.id);if(e)throw e}else{const{error:s}=await ue.from("dog_park_facility_images").insert({park_id:t,image_type:e,image_url:i});if(s)throw s}await R();const c=Ve[e],n=(null==c?void 0:c.label)||e;f(`${n}ã®ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸ`),setTimeout((()=>f("")),3e3)}catch(a){d((s=>s.map((s=>s.image_type===e?{...s,uploading:!1,error:"ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ"}:s))))}})(e.image_type),isLoading:!!e.uploading,children:"ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰"})]}),e.error&&s.jsx("p",{className:"text-sm text-red-600",children:e.error})]})]},e.image_type)}))})]})]}),"bank"===C&&s.jsxs(oe,{children:[s.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[s.jsx(He,{className:"w-6 h-6 text-blue-600 mr-2"}),"æŒ¯è¾¼å…ˆæƒ…å ±"]}),O&&s.jsxs("div",{className:"mb-6 p-4 bg-red-50 rounded-lg flex items-start",children:[s.jsx(a,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsx("p",{className:"text-red-800",children:O})]}),L&&s.jsxs("div",{className:"mb-6 p-4 bg-green-50 rounded-lg flex items-start",children:[s.jsx(m,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsx("p",{className:"text-green-800",children:L})]}),s.jsx("form",{onSubmit:async e=>{e.preventDefault(),E(!0),q(""),F("");try{if(!T.bank_name)throw new Error("éŠ€è¡Œåã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");if(!T.bank_code)throw new Error("éŠ€è¡Œã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");if(!T.branch_name)throw new Error("æ”¯åº—åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");if(!T.branch_code)throw new Error("æ”¯åº—ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");if(!T.account_number)throw new Error("å£åº§ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");if(!T.account_holder_name)throw new Error("å£åº§åç¾©ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");if(!/^\d{4}$/.test(T.bank_code))throw new Error("éŠ€è¡Œã‚³ãƒ¼ãƒ‰ã¯4æ¡ã®æ•°å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„");if(!/^\d{3}$/.test(T.branch_code))throw new Error("æ”¯åº—ã‚³ãƒ¼ãƒ‰ã¯3æ¡ã®æ•°å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„");if(!/^\d{7}$/.test(T.account_number))throw new Error("å£åº§ç•ªå·ã¯7æ¡ã®æ•°å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„");const{error:e}=await ue.rpc("update_owner_bank_account",{bank_name_param:T.bank_name,bank_code_param:T.bank_code,branch_name_param:T.branch_name,branch_code_param:T.branch_code,account_type_param:T.account_type,account_number_param:T.account_number,account_holder_name_param:T.account_holder_name});if(e)throw e;F("æŒ¯è¾¼å…ˆæƒ…å ±ã‚’ä¿å­˜ã—ã¾ã—ãŸ"),setTimeout((()=>{F("")}),3e3)}catch(s){q(s.message||"æŒ¯è¾¼å…ˆæƒ…å ±ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ")}finally{E(!1)}},children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg mb-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(a,{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-yellow-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"æŒ¯è¾¼å…ˆæƒ…å ±ã«ã¤ã„ã¦"}),s.jsxs("ul",{className:"space-y-1",children:[s.jsx("li",{children:"â€¢ å£²ä¸Šé‡‘ã®æŒ¯è¾¼å…ˆã¨ãªã‚‹éŠ€è¡Œå£åº§æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"}),s.jsx("li",{children:"â€¢ æŒ¯è¾¼ã¯æ¯æœˆ15æ—¥ã«å‰æœˆåˆ†ã‚’ä¸€æ‹¬ã§è¡Œã„ã¾ã™"}),s.jsx("li",{children:"â€¢ æŒ¯è¾¼æ‰‹æ•°æ–™ã¯å½“ç¤¾è² æ‹…ã§ã™"}),s.jsx("li",{children:"â€¢ æŒ¯è¾¼é‡‘é¡ãŒ5,000å††æœªæº€ã®å ´åˆã¯ç¿Œæœˆã«ç¹°ã‚Šè¶Šã•ã‚Œã¾ã™"}),s.jsx("li",{children:"â€¢ å£åº§åç¾©ã¯æ­£ç¢ºã«å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä¾‹ï¼šãƒ¤ãƒãƒ€ ã‚¿ãƒ­ã‚¦ï¼‰"})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx(pe,{label:"éŠ€è¡Œå *",value:T.bank_name,onChange:e=>P({...T,bank_name:e.target.value}),placeholder:"ä¾‹ï¼šä¸‰è±UFJéŠ€è¡Œ",required:!0,icon:s.jsx(He,{className:"w-4 h-4 text-gray-500"})}),s.jsx(pe,{label:"éŠ€è¡Œã‚³ãƒ¼ãƒ‰ï¼ˆ4æ¡ï¼‰ *",value:T.bank_code,onChange:e=>{const s=e.target.value.replace(/\D/g,"");P({...T,bank_code:s})},placeholder:"ä¾‹ï¼š0005",maxLength:4,required:!0,helperText:"4æ¡ã®æ•°å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„"}),s.jsx(pe,{label:"æ”¯åº—å *",value:T.branch_name,onChange:e=>P({...T,branch_name:e.target.value}),placeholder:"ä¾‹ï¼šæ¸‹è°·æ”¯åº—",required:!0}),s.jsx(pe,{label:"æ”¯åº—ã‚³ãƒ¼ãƒ‰ï¼ˆ3æ¡ï¼‰ *",value:T.branch_code,onChange:e=>{const s=e.target.value.replace(/\D/g,"");P({...T,branch_code:s})},placeholder:"ä¾‹ï¼š135",maxLength:3,required:!0,helperText:"3æ¡ã®æ•°å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"å£åº§ç¨®åˆ¥ *"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",checked:"ordinary"===T.account_type,onChange:()=>P({...T,account_type:"ordinary"}),className:"form-radio text-blue-600"}),s.jsx("span",{children:"æ™®é€š"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",checked:"checking"===T.account_type,onChange:()=>P({...T,account_type:"checking"}),className:"form-radio text-blue-600"}),s.jsx("span",{children:"å½“åº§"})]})]})]}),s.jsx(pe,{label:"å£åº§ç•ªå·ï¼ˆ7æ¡ï¼‰ *",value:T.account_number,onChange:e=>{const s=e.target.value.replace(/\D/g,"");P({...T,account_number:s})},placeholder:"ä¾‹ï¼š1234567",maxLength:7,required:!0,helperText:"7æ¡ã®æ•°å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„",icon:s.jsx(j,{className:"w-4 h-4 text-gray-500"})}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(pe,{label:"å£åº§åç¾©ï¼ˆã‚«ã‚¿ã‚«ãƒŠï¼‰ *",value:T.account_holder_name,onChange:e=>P({...T,account_holder_name:e.target.value}),placeholder:"ä¾‹ï¼šãƒ¤ãƒãƒ€ ã‚¿ãƒ­ã‚¦",required:!0,helperText:"ã‚«ã‚¿ã‚«ãƒŠã§å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆå§“ã¨åã®é–“ã«ã‚¹ãƒšãƒ¼ã‚¹ï¼‰"})})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(xe,{type:"submit",isLoading:I,children:"æŒ¯è¾¼å…ˆæƒ…å ±ã‚’ä¿å­˜"})})]})})]}),s.jsx("div",{className:"mt-8 flex justify-end",children:s.jsx(xe,{onClick:async()=>{var e,s,a,l,c,d;try{u(!0),b("");const o=["overview","entrance","gate","fence"];i&&(i.large_dog_area&&o.push("large_dog_area"),i.small_dog_area&&o.push("small_dog_area"),i.private_booths&&o.push("private_booth"),(null==(e=i.facilities)?void 0:e.parking)&&o.push("parking"),(null==(s=i.facilities)?void 0:s.shower)&&o.push("shower"),(null==(a=i.facilities)?void 0:a.restroom)&&o.push("restroom"),(null==(l=i.facilities)?void 0:l.agility)&&o.push("agility"),(null==(c=i.facilities)?void 0:c.rest_area)&&o.push("rest_area"),(null==(d=i.facilities)?void 0:d.water_station)&&o.push("water_station"));const x=o.filter((e=>!n.some((s=>s.image_type===e&&s.image_url))));if(x.length>0){const e=x.map((e=>{const s=Ve[e];return(null==s?void 0:s.label)||e})).join("ã€");return b(`ä»¥ä¸‹ã®å¿…è¦ãªç”»åƒãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã¾ã›ã‚“: ${e}`),void u(!1)}const{error:m}=await ue.rpc("submit_second_stage_review",{park_id_param:t});if(m)throw new Error(m.message);f("ç¬¬äºŒå¯©æŸ»ã®ç”³è«‹ãŒå®Œäº†ã—ã¾ã—ãŸï¼ç®¡ç†è€…ã«ã‚ˆã‚‹å¯©æŸ»ã‚’ãŠå¾…ã¡ãã ã•ã„ã€‚"),setTimeout((()=>{r("/owner-dashboard")}),2e3)}catch(o){b("å¯©æŸ»ç”³è«‹ã«å¤±æ•—ã—ã¾ã—ãŸ: "+o.message)}finally{u(!1)}},isLoading:p,disabled:"second_stage_review"===i.status,className:"bg-blue-600 hover:bg-blue-700",children:"second_stage_review"===i.status?"å¯©æŸ»ä¸­ã§ã™":"ç¬¬äºŒå¯©æŸ»ã‚’ç”³è«‹ã™ã‚‹"})}),s.jsx(oe,{className:"bg-gray-50",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(z,{className:"w-6 h-6 text-gray-600 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"å¯©æŸ»ãƒ—ãƒ­ã‚»ã‚¹ã«ã¤ã„ã¦"}),s.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[s.jsx("p",{children:"â€¢ ç¬¬äºŒå¯©æŸ»ã§ã¯ã€æ–½è¨­ã®è©³ç´°ç”»åƒã¨æŒ¯è¾¼å…ˆæƒ…å ±ã‚’ç¢ºèªã—ã¾ã™"}),s.jsx("p",{children:"â€¢ å¯©æŸ»æœŸé–“ã¯é€šå¸¸3-5å–¶æ¥­æ—¥ã§ã™"}),s.jsx("p",{children:"â€¢ ç”»åƒã«å•é¡ŒãŒã‚ã‚‹å ´åˆã¯å†æå‡ºã‚’æ±‚ã‚ã‚‰ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™"}),s.jsx("p",{children:"â€¢ å¯©æŸ»é€šéå¾Œã€QRã‚³ãƒ¼ãƒ‰å®Ÿè¨¼æ¤œæŸ»ã®æ—¥ç¨‹èª¿æ•´ã‚’è¡Œã„ã¾ã™"}),s.jsx("p",{children:"â€¢ å®Ÿè¨¼æ¤œæŸ»å®Œäº†å¾Œã€ä¸€èˆ¬å…¬é–‹ã¨ãªã‚Šã¾ã™"})]})]})]})})]}):s.jsxs("div",{className:"max-w-4xl mx-auto text-center py-12",children:[s.jsx(a,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"æŒ‡å®šã•ã‚ŒãŸãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒè¦‹ã¤ã‹ã‚‰ãªã„ã‹ã€ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚"}),s.jsx(h,{to:"/owner-dashboard",children:s.jsx(xe,{children:"ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚‹"})})]})}},Symbol.toStringTag,{value:"Module"})),Ze=Object.freeze(Object.defineProperty({__proto__:null,ParkPublishingSetup:function(){const{parkId:t}=_(),l=k(),{user:r}=me(),[i,c]=e.useState(null),[n,o]=e.useState([]),[x,h]=e.useState(!0),[p,j]=e.useState(""),[g,b]=e.useState(""),[f,y]=e.useState({smartLockTest:!1,pageEditing:!1,readyToPublish:!1}),[v,w]=e.useState(!1),[C,D]=e.useState({name:"",description:"",facility_details:"",price:0}),[T,P]=e.useState([]),[I,$]=e.useState([]),[E,O]=e.useState(!1),[q,L]=e.useState(!1);e.useEffect((()=>{r&&t?F():l("/owner-dashboard")}),[r,t,l]);const F=async()=>{try{h(!0);const{data:e,error:s}=await ue.from("dog_parks").select("*").eq("id",t).eq("owner_id",null==r?void 0:r.id).single();if(s)throw s;if(!e)return void j("ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚");if("qr_testing_ready"!==e.status&&"editing"!==e.status&&"ready_to_publish"!==e.status)return void j("ã“ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã¯å…¬é–‹æº–å‚™ã®æ®µéšã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚");c(e),D({name:e.name||"",description:e.description||"",facility_details:e.facility_details||"",price:e.price||0});const{data:a,error:l}=await ue.from("smart_locks").select("*").eq("park_id",t);if(l)throw l;o(a||[]),R(e)}catch(e){j("ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}finally{h(!1)}},R=e=>{const s={smartLockTest:"qr_testing_ready"!==e.status,pageEditing:"ready_to_publish"===e.status,readyToPublish:"ready_to_publish"===e.status};y(s)},M=async()=>{try{const{error:e}=await ue.from("dog_parks").update({status:"editing"}).eq("id",t);if(e)throw e;y((e=>({...e,smartLockTest:!0}))),b("ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆãŒå®Œäº†ã—ã¾ã—ãŸã€‚"),await F()}catch(e){j("ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ãƒ†ã‚¹ãƒˆã®å®Œäº†è¨˜éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}};return x?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):i?s.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{children:[s.jsxs(xe,{variant:"secondary",onClick:()=>l("/owner-dashboard"),className:"mb-4",children:[s.jsx(Q,{className:"w-4 h-4 mr-2"}),"ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚‹"]}),s.jsxs("h1",{className:"text-2xl font-bold",children:[i.name," - å…¬é–‹æº–å‚™"]}),s.jsx("p",{className:"text-gray-600",children:"äºŒæ¬¡å¯©æŸ»ãŒæ‰¿èªã•ã‚Œã¾ã—ãŸã€‚å…¬é–‹å‰ã«ä»¥ä¸‹ã®ä½œæ¥­ã‚’å®Œäº†ã—ã¦ãã ã•ã„ã€‚"})]})}),p&&s.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-400 text-red-700",children:s.jsxs("div",{className:"flex",children:[s.jsx(a,{className:"w-5 h-5 mr-2 mt-0.5"}),p]})}),g&&s.jsx("div",{className:"mb-6 p-4 bg-green-50 border-l-4 border-green-400 text-green-700",children:s.jsxs("div",{className:"flex",children:[s.jsx(m,{className:"w-5 h-5 mr-2 mt-0.5"}),g]})}),s.jsxs(oe,{className:"mb-6 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"å…¬é–‹æº–å‚™ã®é€²æ—"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center p-4 rounded-lg "+(f.smartLockTest?"bg-green-50":"bg-yellow-50"),children:[s.jsx("div",{className:"w-6 h-6 rounded-full mr-4 flex items-center justify-center "+(f.smartLockTest?"bg-green-500":"bg-yellow-500"),children:f.smartLockTest?s.jsx(ce,{className:"w-4 h-4 text-white"}):s.jsx("span",{className:"text-white text-sm",children:"1"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-medium",children:"ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã®å‹•ä½œç¢ºèª"}),s.jsx("p",{className:"text-sm text-gray-600",children:f.smartLockTest?"å‹•ä½œç¢ºèªãŒå®Œäº†ã—ã¾ã—ãŸ":"ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã®å‹•ä½œã‚’ç¢ºèªã—ã¦ãã ã•ã„"})]})]}),s.jsxs("div",{className:"flex items-center p-4 rounded-lg "+(f.pageEditing?"bg-green-50":"bg-yellow-50"),children:[s.jsx("div",{className:"w-6 h-6 rounded-full mr-4 flex items-center justify-center "+(f.pageEditing?"bg-green-500":"bg-yellow-500"),children:f.pageEditing?s.jsx(ce,{className:"w-4 h-4 text-white"}):s.jsx("span",{className:"text-white text-sm",children:"2"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-medium",children:"æ²è¼‰ãƒšãƒ¼ã‚¸ã®ç·¨é›†"}),s.jsx("p",{className:"text-sm text-gray-600",children:f.pageEditing?"æ²è¼‰ãƒšãƒ¼ã‚¸ã®ç·¨é›†ãŒå®Œäº†ã—ã¾ã—ãŸ":"æ²è¼‰ãƒšãƒ¼ã‚¸ã®å†…å®¹ã‚’ç·¨é›†ã—ã¦ãã ã•ã„"})]})]}),s.jsxs("div",{className:"flex items-center p-4 rounded-lg "+(f.readyToPublish?"bg-green-50":"bg-gray-50"),children:[s.jsx("div",{className:"w-6 h-6 rounded-full mr-4 flex items-center justify-center "+(f.readyToPublish?"bg-green-500":"bg-gray-400"),children:f.readyToPublish?s.jsx(ce,{className:"w-4 h-4 text-white"}):s.jsx("span",{className:"text-white text-sm",children:"3"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-medium",children:"å…¬é–‹æº–å‚™å®Œäº†"}),s.jsx("p",{className:"text-sm text-gray-600",children:f.readyToPublish?"å…¬é–‹æº–å‚™ãŒå®Œäº†ã—ã¾ã—ãŸ":"ä¸Šè¨˜ã®ä½œæ¥­ã‚’å®Œäº†ã—ã¦ã‹ã‚‰å…¬é–‹ã—ã¦ãã ã•ã„"})]})]})]})]}),!f.smartLockTest&&s.jsxs(oe,{className:"mb-6 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[s.jsx(u,{className:"w-5 h-5 mr-2"}),"1. ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã®å‹•ä½œç¢ºèª"]}),s.jsx("p",{className:"text-gray-600 mb-4",children:"å®Ÿéš›ã«ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã‚’é–‹éŒ ã—ã¦å‹•ä½œã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚"}),n.length>0?s.jsx("div",{className:"space-y-4",children:n.map((e=>s.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[s.jsx("h3",{className:"font-medium mb-2",children:e.lock_name}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:e.location}),s.jsx(_e,{lockId:e.lock_id,label:"PINã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¦ãƒ†ã‚¹ãƒˆ",onSuccess:()=>{b(`${e.lock_name}ã®ãƒ†ã‚¹ãƒˆãŒå®Œäº†ã—ã¾ã—ãŸã€‚`),setTimeout((()=>{M()}),1e3)},onError:e=>j(`ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸ: ${e}`)})]},e.id)))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(le,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"ã“ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã«ã¯ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚"}),s.jsx(xe,{onClick:M,className:"mt-4",children:"ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚’å®Œäº†ã¨ã—ã¦é€²ã‚€"})]})]}),f.smartLockTest&&!f.pageEditing&&s.jsxs(oe,{className:"mb-6 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[s.jsx(N,{className:"w-5 h-5 mr-2"}),"2. æ²è¼‰ãƒšãƒ¼ã‚¸ã®ç·¨é›†"]}),s.jsx("p",{className:"text-gray-600 mb-4",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®æ²è¼‰ãƒšãƒ¼ã‚¸ã‚’ç·¨é›†ã—ã¦ãã ã•ã„ã€‚"}),v?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(pe,{label:"æ–½è¨­å",value:C.name,onChange:e=>D((s=>({...s,name:e.target.value}))),required:!0}),s.jsx(pe,{label:"æ–™é‡‘ï¼ˆå††ï¼‰",type:"number",value:C.price,onChange:e=>D((s=>({...s,price:Number(e.target.value)}))),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"æ–½è¨­ã®èª¬æ˜"}),s.jsx("textarea",{value:C.description,onChange:e=>D((s=>({...s,description:e.target.value}))),rows:4,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ãŠå®¢æ§˜ã«å‘ã‘ãŸæ–½è¨­ã®é­…åŠ›ã‚’èª¬æ˜ã—ã¦ãã ã•ã„..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"æ–½è¨­è©³ç´°ãƒ»åˆ©ç”¨è¦ç´„"}),s.jsx("textarea",{value:C.facility_details,onChange:e=>D((s=>({...s,facility_details:e.target.value}))),rows:6,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"æ–½è¨­ã®è©³ç´°æƒ…å ±ã‚„åˆ©ç”¨è¦ç´„ã‚’è¨˜å…¥ã—ã¦ãã ã•ã„..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"æ–½è¨­ç”»åƒã‚’è¿½åŠ "}),s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{const s=Array.from(e.target.files||[]);P(s);const a=s.map((e=>URL.createObjectURL(e)));$(a)},className:"hidden",id:"park-images"}),s.jsxs("label",{htmlFor:"park-images",className:"cursor-pointer",children:[s.jsx(X,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),s.jsx("span",{className:"text-sm text-gray-600",children:"ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç”»åƒã‚’é¸æŠ"})]})]}),I.length>0&&s.jsx("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-3 gap-4",children:I.map(((e,a)=>s.jsx("img",{src:e,alt:`ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ ${a+1}`,className:"w-full h-24 object-cover rounded-lg border"},a)))})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs(xe,{onClick:async()=>{try{O(!0);const{error:e}=await ue.from("dog_parks").update({name:C.name,description:C.description,facility_details:C.facility_details,price:C.price,status:"ready_to_publish"}).eq("id",t);if(e)throw e;T.length>0&&await(async()=>{for(const e of T){const s=`${Date.now()}_${e.name}`,a=`${t}/${s}`,{error:l}=await ue.storage.from("dog-park-images").upload(a,e);if(l)throw l;const r=ue.storage.from("dog-park-images").getPublicUrl(a).data.publicUrl;await ue.from("dog_parks").update({image_url:r}).eq("id",t)}})(),y((e=>({...e,pageEditing:!0,readyToPublish:!0}))),b("æ²è¼‰ãƒšãƒ¼ã‚¸ã®ç·¨é›†ãŒå®Œäº†ã—ã¾ã—ãŸã€‚"),w(!1),await F()}catch(e){j("æ²è¼‰ãƒšãƒ¼ã‚¸ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}finally{O(!1)}},disabled:E,className:"flex-1",children:[s.jsx(ne,{className:"w-4 h-4 mr-2"}),E?"ä¿å­˜ä¸­...":"ç·¨é›†ã‚’ä¿å­˜"]}),s.jsxs(xe,{variant:"secondary",onClick:()=>{w(!1),P([]),$([])},children:[s.jsx(S,{className:"w-4 h-4 mr-2"}),"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[s.jsx("h3",{className:"font-medium mb-2",children:"ç¾åœ¨ã®æ²è¼‰å†…å®¹"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"æ–½è¨­å:"})," ",i.name]}),s.jsxs("p",{children:[s.jsx("strong",{children:"èª¬æ˜:"})," ",i.description||"æœªè¨­å®š"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"æ–½è¨­è©³ç´°:"})," ",i.facility_details||"æœªè¨­å®š"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"æ–™é‡‘:"})," Â¥",i.price]})]})]}),s.jsxs(xe,{onClick:()=>w(!0),children:[s.jsx(N,{className:"w-4 h-4 mr-2"}),"ç·¨é›†ã‚’é–‹å§‹"]})]})]}),f.readyToPublish&&s.jsxs(oe,{className:"mb-6 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[s.jsx(B,{className:"w-5 h-5 mr-2"}),"3. ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’å…¬é–‹"]}),s.jsx("p",{className:"text-gray-600 mb-4",children:"ã™ã¹ã¦ã®æº–å‚™ãŒå®Œäº†ã—ã¾ã—ãŸã€‚ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’ä¸€èˆ¬å…¬é–‹ã—ã¦ãã ã•ã„ã€‚"}),s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[s.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"å…¬é–‹å¾Œã®æµã‚Œ"}),s.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[s.jsx("li",{children:"â€¢ ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒä¸€èˆ¬ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å…¬é–‹ã•ã‚Œã¾ã™"}),s.jsx("li",{children:"â€¢ äºˆç´„ã®å—ä»˜ãŒé–‹å§‹ã•ã‚Œã¾ã™"}),s.jsx("li",{children:"â€¢ åç›Šã®ç™ºç”ŸãŒé–‹å§‹ã•ã‚Œã¾ã™"}),s.jsx("li",{children:"â€¢ ç®¡ç†ç”»é¢ã§äºˆç´„çŠ¶æ³ã‚„åç›Šã‚’ç¢ºèªã§ãã¾ã™"})]})]}),s.jsxs(xe,{onClick:async()=>{if(f.smartLockTest&&f.pageEditing)try{L(!0);const{error:e}=await ue.from("dog_parks").update({status:"approved"}).eq("id",t);if(e)throw e;await ue.from("admin_notifications").insert([{type:"park_published",title:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³å…¬é–‹",message:`${null==i?void 0:i.name}ãŒå…¬é–‹ã•ã‚Œã¾ã—ãŸã€‚`,data:{park_id:t}}]),b("ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒå…¬é–‹ã•ã‚Œã¾ã—ãŸï¼"),setTimeout((()=>{l(`/parks/${t}/manage`)}),2e3)}catch(e){j("ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã®å…¬é–‹ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}finally{L(!1)}else j("ã™ã¹ã¦ã®ã‚¿ã‚¹ã‚¯ã‚’å®Œäº†ã—ã¦ã‹ã‚‰å…¬é–‹ã—ã¦ãã ã•ã„ã€‚")},disabled:q,className:"w-full bg-green-600 hover:bg-green-700",children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),q?"å…¬é–‹ä¸­...":"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’å…¬é–‹ã™ã‚‹"]})]})]}):s.jsx("div",{className:"max-w-4xl mx-auto p-6",children:s.jsxs(oe,{className:"p-8 text-center",children:[s.jsx(a,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-bold mb-2",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"æŒ‡å®šã•ã‚ŒãŸãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒè¦‹ã¤ã‹ã‚‰ãªã„ã‹ã€ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚"}),s.jsx(xe,{onClick:()=>l("/owner-dashboard"),children:"ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚‹"})]})})}},Symbol.toStringTag,{value:"Module"}));export{we as D,qe as P,Ie as a,Ae as b,We as c,Qe as d,Be as e,Ge as f,Ke as g,Ze as h,$e as p};
