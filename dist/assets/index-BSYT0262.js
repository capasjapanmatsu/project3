const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PWADebugPanel-DytBq4f-.js","assets/ui-vendor-FlUr4cJt.js","assets/react-vendor-_GyjDmDn.js","assets/supabase-vendor-Df9iqQzW.js","assets/index-D39EfaCZ.js","assets/index-BMs0DYbL.js","assets/Home-ziciQR0E.js","assets/logger-C8dD4C56.js","assets/Login-CBEd-8d5.js","assets/Input-wBkmcJUR.js","assets/Register-Dtnn-GvF.js","assets/postalCodeLookup-Dgm8Gdim.js","assets/UserDashboard-CLFsVNGu.js","assets/DogCard-r50InAfs.js","assets/Select-BEASmsUK.js","assets/dogBreeds-CaddeN4P.js","assets/VaccineBadge-Cj0fQWh5.js","assets/vaccineUploadFixed-mws0h5s7.js","assets/ProfileSettings-1Bo_79mk.js","assets/Dashboard-DBIT3svN.js","assets/DogManagement-BJ67yHUL.js","assets/DogRegistration-YFygCAb2.js","assets/DogProfile-CISNAXLi.js","assets/LikedDogs-CLR5qs9n.js","assets/DogParkDetail-D7AErzaj.js","assets/DogParkRules-DypzN_CR.js","assets/DogParkHistory-BPHvmKav.js","assets/NewParkDetail-D35Me-Da.js","assets/ParkReservation-DzgJ5JoT.js","assets/useStripe-CyE4J3Un.js","assets/stripe-config-03sBkt-B.js","assets/ParkRegistration-SO0mPOUh.js","assets/ParkRegistrationAgreement-BqQK-WW6.js","assets/ParkRegistrationSecondStage-BtWUD5jQ.js","assets/ParkManagement-BgYXYaZo.js","assets/PetShop-CJ4bbLL6.js","assets/ProductDetail-iU9n6XCs.js","assets/Cart-BlxEWzwC.js","assets/Checkout-D8xzyt_K.js","assets/OrderHistory-BA07o4iQ.js","assets/Community-C9INYN6U.js","assets/News-Kf05B7ot.js","assets/NewsDetail-DZ3IRuYj.js","assets/DogInfo-BzL3SmM9.js","assets/DogInfoBreeds-DHRB8FCl.js","assets/DogInfoVaccine-yGrgn3ew.js","assets/DogInfoFoods-14njHlwo.js","assets/DogInfoSnack-6qDIf9mr.js","assets/DogInfoParasite-CSrKNIbC.js","assets/DogInfoShow-CB2Sv1nj.js","assets/PaymentSetup-BkCYQ9_Q.js","assets/PaymentMethodSettings-C9mbGkJt.js","assets/PaymentConfirmation-lH_mlNeg.js","assets/Subscription-o8bN5Wmt.js","assets/OwnerDashboard-CFOiEMTR.js","assets/OwnerPaymentSystem-B_AmmrKe.js","assets/AdminDashboard-Dseyk76T.js","assets/AdminManagement-Ci9CGvGR.js","assets/useAdminData-BwucJWVJ.js","assets/AdminTasks-CS20FZHW.js","assets/AdminUserManagement-DCZf3DAE.js","assets/AdminUserDetail-Dc9ZSrSZ.js","assets/AdminParkManagement-BpUjD9uR.js","assets/AdminReservationManagement-DSlTpiCu.js","assets/AdminShopManagement-gLbAHkGq.js","assets/csvExport-Dyv5iYoT.js","assets/AdminSalesManagement-Wl1gGT9P.js","assets/AdminVaccineApproval-BkC_NuXJ.js","assets/AdminFacilityApproval-CWnXrJvA.js","assets/AdminRevenueReport-DxFM6yv1.js","assets/AdminNewsManagement-Br1ze0eh.js","assets/TwoFactorSetup-By4YW618.js","assets/TwoFactorVerify-C45m_MsY.js","assets/MagicLink-DjIj4St_.js","assets/AccessControl-ee2wZLjz.js","assets/FacilityRegistration-BDnvL5yq.js","assets/TermsOfService-CcIW_dkF.js","assets/PrivacyPolicy-fNr4ulyC.js","assets/Contact-Ci1vdvgp.js","assets/BusinessInformation-D8vX3y7p.js","assets/Deploy-CweYl02l.js","assets/deploymentStatus-qDAtNDWl.js","assets/DeploymentHistory-D0o52ISQ.js","assets/NetlifySetupGuide-36j779_s.js","assets/PWASetupGuide-CiEcfE5D.js","assets/PWAImplementationGuide-2HdC3Nmv.js","assets/PWADocumentation-Bj-a0VwM.js","assets/PWATestingSuite-BJasLg0h.js","assets/PWALighthouseAudit-CRRf2nyN.js","assets/PWADeploymentGuide-CVM3TjEf.js"])))=>i.map(i=>d[i]);
var ps=Object.defineProperty;var bt=e=>{throw TypeError(e)};var ys=(e,t,r)=>t in e?ps(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var H=(e,t,r)=>ys(e,typeof t!="symbol"?t+"":t,r),Be=(e,t,r)=>t.has(e)||bt("Cannot "+r);var c=(e,t,r)=>(Be(e,t,"read from private field"),r?r.call(e):t.get(e)),I=(e,t,r)=>t.has(e)?bt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),j=(e,t,r,n)=>(Be(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),M=(e,t,r)=>(Be(e,t,"access private method"),r);var Me=(e,t,r,n)=>({set _(i){j(e,t,i,r)},get _(){return c(e,t,n)}});import{j as s,P as rt,B as Wt,S as gs,D as nt,a as xs,L as vs,M as ws,b as Qt,H as bs,K as js,U as _s,c as Ps,m as oe,d as Es,A as Kt,e as As,C as jt,R as Gt,X as it,I as Ss,f as Is,g as Ve,h as Ts}from"./ui-vendor-FlUr4cJt.js";import{r as o,a as Ns,b as mt,R as Z,u as Bt,L as N,d as Jt,e as Os,f,N as at,B as Cs}from"./react-vendor-_GyjDmDn.js";import{c as Ds,_ as m}from"./supabase-vendor-Df9iqQzW.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var We=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Qe=typeof window>"u"||"Deno"in globalThis;function $(){}function ks(e,t){return typeof e=="function"?e(t):e}function Rs(e){return typeof e=="number"&&e>=0&&e!==1/0}function Ls(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ot(e,t){return typeof e=="function"?e(t):e}function Ms(e,t){return typeof e=="function"?e(t):e}function _t(e,t){const{type:r="all",exact:n,fetchStatus:i,predicate:a,queryKey:u,stale:l}=e;if(u){if(n){if(t.queryHash!==pt(u,t.options))return!1}else if(!De(t.queryKey,u))return!1}if(r!=="all"){const h=t.isActive();if(r==="active"&&!h||r==="inactive"&&h)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||i&&i!==t.state.fetchStatus||a&&!a(t))}function Pt(e,t){const{exact:r,status:n,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(r){if(Ce(t.options.mutationKey)!==Ce(a))return!1}else if(!De(t.options.mutationKey,a))return!1}return!(n&&t.state.status!==n||i&&!i(t))}function pt(e,t){return(t?.queryKeyHashFn||Ce)(e)}function Ce(e){return JSON.stringify(e,(t,r)=>lt(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function De(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>De(e[r],t[r])):!1}function Yt(e,t){if(e===t)return e;const r=Et(e)&&Et(t);if(r||lt(e)&&lt(t)){const n=r?e:Object.keys(e),i=n.length,a=r?t:Object.keys(t),u=a.length,l=r?[]:{},h=new Set(n);let d=0;for(let p=0;p<u;p++){const x=r?p:a[p];(!r&&h.has(x)||r)&&e[x]===void 0&&t[x]===void 0?(l[x]=void 0,d++):(l[x]=Yt(e[x],t[x]),l[x]===e[x]&&e[x]!==void 0&&d++)}return i===u&&d===i?e:l}return t}function Et(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function lt(e){if(!At(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!At(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function At(e){return Object.prototype.toString.call(e)==="[object Object]"}function Fs(e){return new Promise(t=>{setTimeout(t,e)})}function zs(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Yt(e,t):t}function Vs(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function Hs(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var yt=Symbol();function Xt(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===yt?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var ce,te,ve,Mt,Us=(Mt=class extends We{constructor(){super();I(this,ce);I(this,te);I(this,ve);j(this,ve,t=>{if(!Qe&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){c(this,te)||this.setEventListener(c(this,ve))}onUnsubscribe(){var t;this.hasListeners()||((t=c(this,te))==null||t.call(this),j(this,te,void 0))}setEventListener(t){var r;j(this,ve,t),(r=c(this,te))==null||r.call(this),j(this,te,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){c(this,ce)!==t&&(j(this,ce,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){return typeof c(this,ce)=="boolean"?c(this,ce):globalThis.document?.visibilityState!=="hidden"}},ce=new WeakMap,te=new WeakMap,ve=new WeakMap,Mt),Zt=new Us,we,se,be,Ft,qs=(Ft=class extends We{constructor(){super();I(this,we,!0);I(this,se);I(this,be);j(this,be,t=>{if(!Qe&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){c(this,se)||this.setEventListener(c(this,be))}onUnsubscribe(){var t;this.hasListeners()||((t=c(this,se))==null||t.call(this),j(this,se,void 0))}setEventListener(t){var r;j(this,be,t),(r=c(this,se))==null||r.call(this),j(this,se,t(this.setOnline.bind(this)))}setOnline(t){c(this,we)!==t&&(j(this,we,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return c(this,we)}},we=new WeakMap,se=new WeakMap,be=new WeakMap,Ft),qe=new qs;function $s(){let e,t;const r=new Promise((i,a)=>{e=i,t=a});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),e(i)},r.reject=i=>{n({status:"rejected",reason:i}),t(i)},r}function Ws(e){return Math.min(1e3*2**e,3e4)}function es(e){return(e??"online")==="online"?qe.isOnline():!0}var ts=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Je(e){return e instanceof ts}function ss(e){let t=!1,r=0,n=!1,i;const a=$s(),u=E=>{n||(g(new ts(E)),e.abort?.())},l=()=>{t=!0},h=()=>{t=!1},d=()=>Zt.isFocused()&&(e.networkMode==="always"||qe.isOnline())&&e.canRun(),p=()=>es(e.networkMode)&&e.canRun(),x=E=>{n||(n=!0,e.onSuccess?.(E),i?.(),a.resolve(E))},g=E=>{n||(n=!0,e.onError?.(E),i?.(),a.reject(E))},w=()=>new Promise(E=>{i=S=>{(n||d())&&E(S)},e.onPause?.()}).then(()=>{i=void 0,n||e.onContinue?.()}),b=()=>{if(n)return;let E;const S=r===0?e.initialPromise:void 0;try{E=S??e.fn()}catch(T){E=Promise.reject(T)}Promise.resolve(E).then(x).catch(T=>{if(n)return;const O=e.retry??(Qe?0:3),C=e.retryDelay??Ws,k=typeof C=="function"?C(r,T):C,_=O===!0||typeof O=="number"&&r<O||typeof O=="function"&&O(r,T);if(t||!_){g(T);return}r++,e.onFail?.(r,T),Fs(k).then(()=>d()?void 0:w()).then(()=>{t?g(T):b()})})};return{promise:a,cancel:u,continue:()=>(i?.(),a),cancelRetry:l,continueRetry:h,canStart:p,start:()=>(p()?b():w().then(b),a)}}var Qs=e=>setTimeout(e,0);function Ks(){let e=[],t=0,r=l=>{l()},n=l=>{l()},i=Qs;const a=l=>{t?e.push(l):i(()=>{r(l)})},u=()=>{const l=e;e=[],l.length&&i(()=>{n(()=>{l.forEach(h=>{r(h)})})})};return{batch:l=>{let h;t++;try{h=l()}finally{t--,t||u()}return h},batchCalls:l=>(...h)=>{a(()=>{l(...h)})},schedule:a,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{i=l}}}var V=Ks(),ue,zt,rs=(zt=class{constructor(){I(this,ue)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Rs(this.gcTime)&&j(this,ue,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Qe?1/0:5*60*1e3))}clearGcTimeout(){c(this,ue)&&(clearTimeout(c(this,ue)),j(this,ue,void 0))}},ue=new WeakMap,zt),je,de,q,he,F,ke,fe,W,Y,Vt,Gs=(Vt=class extends rs{constructor(t){super();I(this,W);I(this,je);I(this,de);I(this,q);I(this,he);I(this,F);I(this,ke);I(this,fe);j(this,fe,!1),j(this,ke,t.defaultOptions),this.setOptions(t.options),this.observers=[],j(this,he,t.client),j(this,q,c(this,he).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,j(this,je,Js(this.options)),this.state=t.state??c(this,je),this.scheduleGc()}get meta(){return this.options.meta}get promise(){return c(this,F)?.promise}setOptions(t){this.options={...c(this,ke),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&c(this,q).remove(this)}setData(t,r){const n=zs(this.state.data,t,this.options);return M(this,W,Y).call(this,{data:n,type:"success",dataUpdatedAt:r?.updatedAt,manual:r?.manual}),n}setState(t,r){M(this,W,Y).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){const r=c(this,F)?.promise;return c(this,F)?.cancel(t),r?r.then($).catch($):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(c(this,je))}isActive(){return this.observers.some(t=>Ms(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===yt||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ot(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Ls(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(r=>r.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),c(this,F)?.continue()}onOnline(){this.observers.find(r=>r.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),c(this,F)?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),c(this,q).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(c(this,F)&&(c(this,fe)?c(this,F).cancel({revert:!0}):c(this,F).cancelRetry()),this.scheduleGc()),c(this,q).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||M(this,W,Y).call(this,{type:"invalidate"})}fetch(t,r){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&r?.cancelRefetch)this.cancel({silent:!0});else if(c(this,F))return c(this,F).continueRetry(),c(this,F).promise}if(t&&this.setOptions(t),!this.options.queryFn){const d=this.observers.find(p=>p.options.queryFn);d&&this.setOptions(d.options)}const n=new AbortController,i=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(j(this,fe,!0),n.signal)})},a=()=>{const d=Xt(this.options,r),x=(()=>{const g={client:c(this,he),queryKey:this.queryKey,meta:this.meta};return i(g),g})();return j(this,fe,!1),this.options.persister?this.options.persister(d,x,this):d(x)},l=(()=>{const d={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:c(this,he),state:this.state,fetchFn:a};return i(d),d})();this.options.behavior?.onFetch(l,this),j(this,de,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&M(this,W,Y).call(this,{type:"fetch",meta:l.fetchOptions?.meta});const h=d=>{Je(d)&&d.silent||M(this,W,Y).call(this,{type:"error",error:d}),Je(d)||(c(this,q).config.onError?.(d,this),c(this,q).config.onSettled?.(this.state.data,d,this)),this.scheduleGc()};return j(this,F,ss({initialPromise:r?.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:d=>{if(d===void 0){h(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(p){h(p);return}c(this,q).config.onSuccess?.(d,this),c(this,q).config.onSettled?.(d,this.state.error,this),this.scheduleGc()},onError:h,onFail:(d,p)=>{M(this,W,Y).call(this,{type:"failed",failureCount:d,error:p})},onPause:()=>{M(this,W,Y).call(this,{type:"pause"})},onContinue:()=>{M(this,W,Y).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),c(this,F).start()}},je=new WeakMap,de=new WeakMap,q=new WeakMap,he=new WeakMap,F=new WeakMap,ke=new WeakMap,fe=new WeakMap,W=new WeakSet,Y=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Bs(n.data,this.options),fetchMeta:t.meta??null};case"success":return j(this,de,void 0),{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return Je(i)&&i.revert&&c(this,de)?{...c(this,de),fetchStatus:"idle"}:{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),V.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),c(this,q).notify({query:this,type:"updated",action:t})})},Vt);function Bs(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:es(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Js(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var G,Ht,Ys=(Ht=class extends We{constructor(t={}){super();I(this,G);this.config=t,j(this,G,new Map)}build(t,r,n){const i=r.queryKey,a=r.queryHash??pt(i,r);let u=this.get(a);return u||(u=new Gs({client:t,queryKey:i,queryHash:a,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(i)}),this.add(u)),u}add(t){c(this,G).has(t.queryHash)||(c(this,G).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=c(this,G).get(t.queryHash);r&&(t.destroy(),r===t&&c(this,G).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){V.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return c(this,G).get(t)}getAll(){return[...c(this,G).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>_t(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>_t(t,n)):r}notify(t){V.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){V.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){V.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},G=new WeakMap,Ht),B,z,me,J,ee,Ut,Xs=(Ut=class extends rs{constructor(t){super();I(this,J);I(this,B);I(this,z);I(this,me);this.mutationId=t.mutationId,j(this,z,t.mutationCache),j(this,B,[]),this.state=t.state||Zs(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){c(this,B).includes(t)||(c(this,B).push(t),this.clearGcTimeout(),c(this,z).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){j(this,B,c(this,B).filter(r=>r!==t)),this.scheduleGc(),c(this,z).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){c(this,B).length||(this.state.status==="pending"?this.scheduleGc():c(this,z).remove(this))}continue(){return c(this,me)?.continue()??this.execute(this.state.variables)}async execute(t){const r=()=>{M(this,J,ee).call(this,{type:"continue"})};j(this,me,ss({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(a,u)=>{M(this,J,ee).call(this,{type:"failed",failureCount:a,error:u})},onPause:()=>{M(this,J,ee).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>c(this,z).canRun(this)}));const n=this.state.status==="pending",i=!c(this,me).canStart();try{if(n)r();else{M(this,J,ee).call(this,{type:"pending",variables:t,isPaused:i}),await c(this,z).config.onMutate?.(t,this);const u=await this.options.onMutate?.(t);u!==this.state.context&&M(this,J,ee).call(this,{type:"pending",context:u,variables:t,isPaused:i})}const a=await c(this,me).start();return await c(this,z).config.onSuccess?.(a,t,this.state.context,this),await this.options.onSuccess?.(a,t,this.state.context),await c(this,z).config.onSettled?.(a,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(a,null,t,this.state.context),M(this,J,ee).call(this,{type:"success",data:a}),a}catch(a){try{throw await c(this,z).config.onError?.(a,t,this.state.context,this),await this.options.onError?.(a,t,this.state.context),await c(this,z).config.onSettled?.(void 0,a,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,a,t,this.state.context),a}finally{M(this,J,ee).call(this,{type:"error",error:a})}}finally{c(this,z).runNext(this)}}},B=new WeakMap,z=new WeakMap,me=new WeakMap,J=new WeakSet,ee=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),V.batch(()=>{c(this,B).forEach(n=>{n.onMutationUpdate(t)}),c(this,z).notify({mutation:this,type:"updated",action:t})})},Ut);function Zs(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var X,Q,Re,qt,er=(qt=class extends We{constructor(t={}){super();I(this,X);I(this,Q);I(this,Re);this.config=t,j(this,X,new Set),j(this,Q,new Map),j(this,Re,0)}build(t,r,n){const i=new Xs({mutationCache:this,mutationId:++Me(this,Re)._,options:t.defaultMutationOptions(r),state:n});return this.add(i),i}add(t){c(this,X).add(t);const r=Fe(t);if(typeof r=="string"){const n=c(this,Q).get(r);n?n.push(t):c(this,Q).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(c(this,X).delete(t)){const r=Fe(t);if(typeof r=="string"){const n=c(this,Q).get(r);if(n)if(n.length>1){const i=n.indexOf(t);i!==-1&&n.splice(i,1)}else n[0]===t&&c(this,Q).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Fe(t);if(typeof r=="string"){const i=c(this,Q).get(r)?.find(a=>a.state.status==="pending");return!i||i===t}else return!0}runNext(t){const r=Fe(t);return typeof r=="string"?c(this,Q).get(r)?.find(i=>i!==t&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){V.batch(()=>{c(this,X).forEach(t=>{this.notify({type:"removed",mutation:t})}),c(this,X).clear(),c(this,Q).clear()})}getAll(){return Array.from(c(this,X))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Pt(r,n))}findAll(t={}){return this.getAll().filter(r=>Pt(t,r))}notify(t){V.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return V.batch(()=>Promise.all(t.map(r=>r.continue().catch($))))}},X=new WeakMap,Q=new WeakMap,Re=new WeakMap,qt);function Fe(e){return e.options.scope?.id}function St(e){return{onFetch:(t,r)=>{const n=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,a=t.state.data?.pages||[],u=t.state.data?.pageParams||[];let l={pages:[],pageParams:[]},h=0;const d=async()=>{let p=!1;const x=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?p=!0:t.signal.addEventListener("abort",()=>{p=!0}),t.signal)})},g=Xt(t.options,t.fetchOptions),w=async(b,E,S)=>{if(p)return Promise.reject();if(E==null&&b.pages.length)return Promise.resolve(b);const O=(()=>{const y={client:t.client,queryKey:t.queryKey,pageParam:E,direction:S?"backward":"forward",meta:t.options.meta};return x(y),y})(),C=await g(O),{maxPages:k}=t.options,_=S?Hs:Vs;return{pages:_(b.pages,C,k),pageParams:_(b.pageParams,E,k)}};if(i&&a.length){const b=i==="backward",E=b?tr:It,S={pages:a,pageParams:u},T=E(n,S);l=await w(S,T,b)}else{const b=e??a.length;do{const E=h===0?u[0]??n.initialPageParam:It(n,l);if(h>0&&E==null)break;l=await w(l,E),h++}while(h<b)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=d}}}function It(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function tr(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var D,re,ne,_e,Pe,ie,Ee,Ae,$t,sr=($t=class{constructor(e={}){I(this,D);I(this,re);I(this,ne);I(this,_e);I(this,Pe);I(this,ie);I(this,Ee);I(this,Ae);j(this,D,e.queryCache||new Ys),j(this,re,e.mutationCache||new er),j(this,ne,e.defaultOptions||{}),j(this,_e,new Map),j(this,Pe,new Map),j(this,ie,0)}mount(){Me(this,ie)._++,c(this,ie)===1&&(j(this,Ee,Zt.subscribe(async e=>{e&&(await this.resumePausedMutations(),c(this,D).onFocus())})),j(this,Ae,qe.subscribe(async e=>{e&&(await this.resumePausedMutations(),c(this,D).onOnline())})))}unmount(){var e,t;Me(this,ie)._--,c(this,ie)===0&&((e=c(this,Ee))==null||e.call(this),j(this,Ee,void 0),(t=c(this,Ae))==null||t.call(this),j(this,Ae,void 0))}isFetching(e){return c(this,D).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return c(this,re).findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return c(this,D).get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=c(this,D).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(ot(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return c(this,D).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=c(this,D).get(n.queryHash)?.state.data,u=ks(t,a);if(u!==void 0)return c(this,D).build(this,n).setData(u,{...r,manual:!0})}setQueriesData(e,t,r){return V.batch(()=>c(this,D).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return c(this,D).get(t.queryHash)?.state}removeQueries(e){const t=c(this,D);V.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=c(this,D);return V.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=V.batch(()=>c(this,D).findAll(e).map(i=>i.cancel(r)));return Promise.all(n).then($).catch($)}invalidateQueries(e,t={}){return V.batch(()=>(c(this,D).findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=V.batch(()=>c(this,D).findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,r);return r.throwOnError||(a=a.catch($)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then($)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=c(this,D).build(this,t);return r.isStaleByTime(ot(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then($).catch($)}fetchInfiniteQuery(e){return e.behavior=St(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then($).catch($)}ensureInfiniteQueryData(e){return e.behavior=St(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return qe.isOnline()?c(this,re).resumePausedMutations():Promise.resolve()}getQueryCache(){return c(this,D)}getMutationCache(){return c(this,re)}getDefaultOptions(){return c(this,ne)}setDefaultOptions(e){j(this,ne,e)}setQueryDefaults(e,t){c(this,_e).set(Ce(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...c(this,_e).values()],r={};return t.forEach(n=>{De(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){c(this,Pe).set(Ce(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...c(this,Pe).values()],r={};return t.forEach(n=>{De(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...c(this,ne).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=pt(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===yt&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...c(this,ne).mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){c(this,D).clear(),c(this,re).clear()}},D=new WeakMap,re=new WeakMap,ne=new WeakMap,_e=new WeakMap,Pe=new WeakMap,ie=new WeakMap,Ee=new WeakMap,Ae=new WeakMap,$t),rr=o.createContext(void 0),nr=({client:e,children:t})=>(o.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(rr.Provider,{value:e,children:t})),ct={},Tt=Ns;ct.createRoot=Tt.createRoot,ct.hydrateRoot=Tt.hydrateRoot;var ir=typeof Element<"u",ar=typeof Map=="function",or=typeof Set=="function",lr=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function He(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,i;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!He(e[n],t[n]))return!1;return!0}var a;if(ar&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(a=e.entries();!(n=a.next()).done;)if(!t.has(n.value[0]))return!1;for(a=e.entries();!(n=a.next()).done;)if(!He(n.value[1],t.get(n.value[0])))return!1;return!0}if(or&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(a=e.entries();!(n=a.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(lr&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[n]))return!1;if(ir&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((i[n]==="_owner"||i[n]==="__v"||i[n]==="__o")&&e.$$typeof)&&!He(e[i[n]],t[i[n]]))return!1;return!0}return e!==e&&t!==t}var cr=function(t,r){try{return He(t,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const ur=mt(cr);var dr=function(e,t,r,n,i,a,u,l){if(!e){var h;if(t===void 0)h=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[r,n,i,a,u,l],p=0;h=new Error(t.replace(/%s/g,function(){return d[p++]})),h.name="Invariant Violation"}throw h.framesToPop=1,h}},hr=dr;const Nt=mt(hr);var fr=function(t,r,n,i){var a=n?n.call(i,t,r):void 0;if(a!==void 0)return!!a;if(t===r)return!0;if(typeof t!="object"||!t||typeof r!="object"||!r)return!1;var u=Object.keys(t),l=Object.keys(r);if(u.length!==l.length)return!1;for(var h=Object.prototype.hasOwnProperty.bind(r),d=0;d<u.length;d++){var p=u[d];if(!h(p))return!1;var x=t[p],g=r[p];if(a=n?n.call(i,x,g,p):void 0,a===!1||a===void 0&&x!==g)return!1}return!0};const mr=mt(fr);var ns=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(ns||{}),Ye={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},Ot=Object.values(ns),gt={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},pr=Object.entries(gt).reduce((e,[t,r])=>(e[r]=t,e),{}),K="data-rh",ge={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},xe=(e,t)=>{for(let r=e.length-1;r>=0;r-=1){const n=e[r];if(Object.prototype.hasOwnProperty.call(n,t))return n[t]}return null},yr=e=>{let t=xe(e,"title");const r=xe(e,ge.TITLE_TEMPLATE);if(Array.isArray(t)&&(t=t.join("")),r&&t)return r.replace(/%s/g,()=>t);const n=xe(e,ge.DEFAULT_TITLE);return t||n||void 0},gr=e=>xe(e,ge.ON_CHANGE_CLIENT_STATE)||(()=>{}),Xe=(e,t)=>t.filter(r=>typeof r[e]<"u").map(r=>r[e]).reduce((r,n)=>({...r,...n}),{}),xr=(e,t)=>t.filter(r=>typeof r.base<"u").map(r=>r.base).reverse().reduce((r,n)=>{if(!r.length){const i=Object.keys(n);for(let a=0;a<i.length;a+=1){const l=i[a].toLowerCase();if(e.indexOf(l)!==-1&&n[l])return r.concat(n)}}return r},[]),vr=e=>console&&typeof console.warn=="function"&&console.warn(e),Se=(e,t,r)=>{const n={};return r.filter(i=>Array.isArray(i[e])?!0:(typeof i[e]<"u"&&vr(`Helmet: ${e} should be of type "Array". Instead found type "${typeof i[e]}"`),!1)).map(i=>i[e]).reverse().reduce((i,a)=>{const u={};a.filter(h=>{let d;const p=Object.keys(h);for(let g=0;g<p.length;g+=1){const w=p[g],b=w.toLowerCase();t.indexOf(b)!==-1&&!(d==="rel"&&h[d].toLowerCase()==="canonical")&&!(b==="rel"&&h[b].toLowerCase()==="stylesheet")&&(d=b),t.indexOf(w)!==-1&&(w==="innerHTML"||w==="cssText"||w==="itemprop")&&(d=w)}if(!d||!h[d])return!1;const x=h[d].toLowerCase();return n[d]||(n[d]={}),u[d]||(u[d]={}),n[d][x]?!1:(u[d][x]=!0,!0)}).reverse().forEach(h=>i.push(h));const l=Object.keys(u);for(let h=0;h<l.length;h+=1){const d=l[h],p={...n[d],...u[d]};n[d]=p}return i},[]).reverse()},wr=(e,t)=>{if(Array.isArray(e)&&e.length){for(let r=0;r<e.length;r+=1)if(e[r][t])return!0}return!1},br=e=>({baseTag:xr(["href"],e),bodyAttributes:Xe("bodyAttributes",e),defer:xe(e,ge.DEFER),encode:xe(e,ge.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Xe("htmlAttributes",e),linkTags:Se("link",["rel","href"],e),metaTags:Se("meta",["name","charset","http-equiv","property","itemprop"],e),noscriptTags:Se("noscript",["innerHTML"],e),onChangeClientState:gr(e),scriptTags:Se("script",["src","innerHTML"],e),styleTags:Se("style",["cssText"],e),title:yr(e),titleAttributes:Xe("titleAttributes",e),prioritizeSeoTags:wr(e,ge.PRIORITIZE_SEO_TAGS)}),is=e=>Array.isArray(e)?e.join(""):e,jr=(e,t)=>{const r=Object.keys(e);for(let n=0;n<r.length;n+=1)if(t[r[n]]&&t[r[n]].includes(e[r[n]]))return!0;return!1},Ze=(e,t)=>Array.isArray(e)?e.reduce((r,n)=>(jr(n,t)?r.priority.push(n):r.default.push(n),r),{priority:[],default:[]}):{default:e,priority:[]},Ct=(e,t)=>({...e,[t]:void 0}),_r=["noscript","script","style"],ut=(e,t=!0)=>t===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),as=e=>Object.keys(e).reduce((t,r)=>{const n=typeof e[r]<"u"?`${r}="${e[r]}"`:`${r}`;return t?`${t} ${n}`:n},""),Pr=(e,t,r,n)=>{const i=as(r),a=is(t);return i?`<${e} ${K}="true" ${i}>${ut(a,n)}</${e}>`:`<${e} ${K}="true">${ut(a,n)}</${e}>`},Er=(e,t,r=!0)=>t.reduce((n,i)=>{const a=i,u=Object.keys(a).filter(d=>!(d==="innerHTML"||d==="cssText")).reduce((d,p)=>{const x=typeof a[p]>"u"?p:`${p}="${ut(a[p],r)}"`;return d?`${d} ${x}`:x},""),l=a.innerHTML||a.cssText||"",h=_r.indexOf(e)===-1;return`${n}<${e} ${K}="true" ${u}${h?"/>":`>${l}</${e}>`}`},""),os=(e,t={})=>Object.keys(e).reduce((r,n)=>{const i=gt[n];return r[i||n]=e[n],r},t),Ar=(e,t,r)=>{const n={key:t,[K]:!0},i=os(r,n);return[Z.createElement("title",i,t)]},Ue=(e,t)=>t.map((r,n)=>{const i={key:n,[K]:!0};return Object.keys(r).forEach(a=>{const l=gt[a]||a;if(l==="innerHTML"||l==="cssText"){const h=r.innerHTML||r.cssText;i.dangerouslySetInnerHTML={__html:h}}else i[l]=r[a]}),Z.createElement(e,i)}),U=(e,t,r=!0)=>{switch(e){case"title":return{toComponent:()=>Ar(e,t.title,t.titleAttributes),toString:()=>Pr(e,t.title,t.titleAttributes,r)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>os(t),toString:()=>as(t)};default:return{toComponent:()=>Ue(e,t),toString:()=>Er(e,t,r)}}},Sr=({metaTags:e,linkTags:t,scriptTags:r,encode:n})=>{const i=Ze(e,Ye.meta),a=Ze(t,Ye.link),u=Ze(r,Ye.script);return{priorityMethods:{toComponent:()=>[...Ue("meta",i.priority),...Ue("link",a.priority),...Ue("script",u.priority)],toString:()=>`${U("meta",i.priority,n)} ${U("link",a.priority,n)} ${U("script",u.priority,n)}`},metaTags:i.default,linkTags:a.default,scriptTags:u.default}},Ir=e=>{const{baseTag:t,bodyAttributes:r,encode:n=!0,htmlAttributes:i,noscriptTags:a,styleTags:u,title:l="",titleAttributes:h,prioritizeSeoTags:d}=e;let{linkTags:p,metaTags:x,scriptTags:g}=e,w={toComponent:()=>{},toString:()=>""};return d&&({priorityMethods:w,linkTags:p,metaTags:x,scriptTags:g}=Sr(e)),{priority:w,base:U("base",t,n),bodyAttributes:U("bodyAttributes",r,n),htmlAttributes:U("htmlAttributes",i,n),link:U("link",p,n),meta:U("meta",x,n),noscript:U("noscript",a,n),script:U("script",g,n),style:U("style",u,n),title:U("title",{title:l,titleAttributes:h},n)}},dt=Ir,ze=[],ls=!!(typeof window<"u"&&window.document&&window.document.createElement),ht=class{constructor(e,t){H(this,"instances",[]);H(this,"canUseDOM",ls);H(this,"context");H(this,"value",{setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?ze:this.instances,add:e=>{(this.canUseDOM?ze:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?ze:this.instances).indexOf(e);(this.canUseDOM?ze:this.instances).splice(t,1)}}});this.context=e,this.canUseDOM=t||!1,t||(e.helmet=dt({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Tr={},cs=Z.createContext(Tr),pe,xt=(pe=class extends o.Component{constructor(r){super(r);H(this,"helmetData");this.helmetData=new ht(this.props.context||{},pe.canUseDOM)}render(){return Z.createElement(cs.Provider,{value:this.helmetData.value},this.props.children)}},H(pe,"canUseDOM",ls),pe),ye=(e,t)=>{const r=document.head||document.querySelector("head"),n=r.querySelectorAll(`${e}[${K}]`),i=[].slice.call(n),a=[];let u;return t&&t.length&&t.forEach(l=>{const h=document.createElement(e);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d))if(d==="innerHTML")h.innerHTML=l.innerHTML;else if(d==="cssText")h.styleSheet?h.styleSheet.cssText=l.cssText:h.appendChild(document.createTextNode(l.cssText));else{const p=d,x=typeof l[p]>"u"?"":l[p];h.setAttribute(d,x)}h.setAttribute(K,"true"),i.some((d,p)=>(u=p,h.isEqualNode(d)))?i.splice(u,1):a.push(h)}),i.forEach(l=>l.parentNode?.removeChild(l)),a.forEach(l=>r.appendChild(l)),{oldTags:i,newTags:a}},ft=(e,t)=>{const r=document.getElementsByTagName(e)[0];if(!r)return;const n=r.getAttribute(K),i=n?n.split(","):[],a=[...i],u=Object.keys(t);for(const l of u){const h=t[l]||"";r.getAttribute(l)!==h&&r.setAttribute(l,h),i.indexOf(l)===-1&&i.push(l);const d=a.indexOf(l);d!==-1&&a.splice(d,1)}for(let l=a.length-1;l>=0;l-=1)r.removeAttribute(a[l]);i.length===a.length?r.removeAttribute(K):r.getAttribute(K)!==u.join(",")&&r.setAttribute(K,u.join(","))},Nr=(e,t)=>{typeof e<"u"&&document.title!==e&&(document.title=is(e)),ft("title",t)},Dt=(e,t)=>{const{baseTag:r,bodyAttributes:n,htmlAttributes:i,linkTags:a,metaTags:u,noscriptTags:l,onChangeClientState:h,scriptTags:d,styleTags:p,title:x,titleAttributes:g}=e;ft("body",n),ft("html",i),Nr(x,g);const w={baseTag:ye("base",r),linkTags:ye("link",a),metaTags:ye("meta",u),noscriptTags:ye("noscript",l),scriptTags:ye("script",d),styleTags:ye("style",p)},b={},E={};Object.keys(w).forEach(S=>{const{newTags:T,oldTags:O}=w[S];T.length&&(b[S]=T),O.length&&(E[S]=w[S].oldTags)}),t&&t(),h(e,b,E)},Ie=null,Or=e=>{Ie&&cancelAnimationFrame(Ie),e.defer?Ie=requestAnimationFrame(()=>{Dt(e,()=>{Ie=null})}):(Dt(e),Ie=null)},Cr=Or,kt=class extends o.Component{constructor(){super(...arguments);H(this,"rendered",!1)}shouldComponentUpdate(t){return!mr(t,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:t}=this.props.context;t.remove(this),this.emitChange()}emitChange(){const{helmetInstances:t,setHelmet:r}=this.props.context;let n=null;const i=br(t.get().map(a=>{const u={...a.props};return delete u.context,u}));xt.canUseDOM?Cr(i):dt&&(n=dt(i)),r(n)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:t}=this.props.context;t.add(this),this.emitChange()}render(){return this.init(),null}},st,Dr=(st=class extends o.Component{shouldComponentUpdate(e){return!ur(Ct(this.props,"helmetData"),Ct(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,r,n){return{...t,[e.type]:[...t[e.type]||[],{...r,...this.mapNestedChildrenToProps(e,n)}]}}mapObjectTypeChildren(e,t,r,n){switch(e.type){case"title":return{...t,[e.type]:n,titleAttributes:{...r}};case"body":return{...t,bodyAttributes:{...r}};case"html":return{...t,htmlAttributes:{...r}};default:return{...t,[e.type]:{...r}}}}mapArrayTypeChildrenToProps(e,t){let r={...t};return Object.keys(e).forEach(n=>{r={...r,[n]:e[n]}}),r}warnOnInvalidChildren(e,t){return Nt(Ot.some(r=>e.type===r),typeof e.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${Ot.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),Nt(!t||typeof t=="string"||Array.isArray(t)&&!t.some(r=>typeof r!="string"),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let r={};return Z.Children.forEach(e,n=>{if(!n||!n.props)return;const{children:i,...a}=n.props,u=Object.keys(a).reduce((h,d)=>(h[pr[d]||d]=a[d],h),{});let{type:l}=n;switch(typeof l=="symbol"?l=l.toString():this.warnOnInvalidChildren(n,i),l){case"Symbol(react.fragment)":t=this.mapChildrenToProps(i,t);break;case"link":case"meta":case"noscript":case"script":case"style":r=this.flattenArrayTypeChildren(n,r,u,i);break;default:t=this.mapObjectTypeChildren(n,t,u,i);break}}),this.mapArrayTypeChildrenToProps(r,t)}render(){const{children:e,...t}=this.props;let r={...t},{helmetData:n}=t;if(e&&(r=this.mapChildrenToProps(e,r)),n&&!(n instanceof ht)){const i=n;n=new ht(i.context,!0),delete r.helmetData}return n?Z.createElement(kt,{...r,context:n.value}):Z.createElement(cs.Consumer,null,i=>Z.createElement(kt,{...r,context:i}))}},H(st,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),st);const kr="https://onmcivwxtzqajcovptgf.supabase.co",Rr="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ubWNpdnd4dHpxYWpjb3ZwdGdmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxODk3OTUsImV4cCI6MjA2NDc2NTc5NX0.AqFCz3GQUVeGaG2988LCzsE4aJpeio3xScoxv5T0-OU",L=Ds(kr,Rr,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce",storage:typeof window<"u"?window.localStorage:void 0,storageKey:"sb-dogpark-auth-token",debug:!1},realtime:{params:{eventsPerSecond:5}},db:{schema:"public"},global:{headers:{"X-Client-Info":"dogpark-jp-web-netlify","X-Environment":"production"}}}),Oi=e=>{if(!e)return null;if(e.startsWith("http"))return e;const{data:t}=L.storage.from("vaccine-certificates").getPublicUrl(e);return t?.publicUrl||null},Ci=e=>{if(!e)return"不明なエラーが発生しました";if(typeof e=="string")return e;if(e&&typeof e=="object"&&"message"in e){const t=e;if(t.code==="PGRST116")return"データが見つかりません。Netlify の環境変数設定を確認してください。";if(t.code==="PGRST301")return"データベース接続エラー。Netlify Supabase Extension の設定を確認してください。";switch(t.message){case"Invalid API key":return"API キーが無効です。Netlify の環境変数 VITE_SUPABASE_ANON_KEY を確認してください。";case"Invalid URL":return"データベース URL が無効です。Netlify の環境変数 VITE_SUPABASE_URL を確認してください。";case"Network error":return"ネットワークエラーが発生しました。インターネット接続を確認してください。";case"Authentication required":return"認証が必要です。ログインしてください。";default:return t.message||"不明なエラーが発生しました"}}return"不明なエラーが発生しました"},us=o.createContext({user:null,session:null,loading:!0,logout:async()=>{await Promise.resolve()},isAuthenticated:!1,signInWithMagicLink:async()=>(await Promise.resolve(),{success:!1}),signInWithPassword:async()=>(await Promise.resolve(),{success:!1}),verify2FA:async()=>(await Promise.resolve(),{success:!1}),setIsTrustedDevice:()=>{},isAdmin:!1,userProfile:null}),Lr=({children:e})=>{const[t,r]=o.useState(null),[n,i]=o.useState(null),[a,u]=o.useState(!0),[l,h]=o.useState(!1),[d,p]=o.useState(!1),[x,g]=o.useState(null),w=async(_,y)=>{try{const{data:v,error:A}=await L.from("profiles").select("*").eq("id",_).single();if(A){if(A.code==="PGRST116"&&y){const R={id:_,name:y.split("@")[0],user_type:y==="capasjapan@gmail.com"?"admin":"user",created_at:new Date().toISOString()},{data:ae,error:wt}=await L.from("profiles").insert([R]).select().single();return wt?(console.error("Error creating profile:",wt),null):ae}return console.error("Error fetching user profile:",A.message),null}return v}catch(v){return console.error("Exception in fetchUserProfile:",v),null}},b=(_,y)=>{if(!_)return!1;const v=_.email==="capasjapan@gmail.com",A=y?.user_type==="admin";return v||A};o.useEffect(()=>{let _=!0;(async()=>{try{console.log("🔐 Auth initialization started...");const{data:{session:A},error:R}=await L.auth.getSession();if(R){console.warn("❌ Session retrieval error:",R.message),_&&(i(null),r(null),h(!1),g(null),p(!1),u(!1));return}A&&A.user&&_?(console.log("✅ Session found, user:",A.user.email),i(A),r(A.user),h(!0),w(A.user.id,A.user.email).then(ae=>{_&&(g(ae),p(b(A.user,ae)))})):(console.log("ℹ️ No active session found"),_&&(i(null),r(null),h(!1),g(null),p(!1)))}catch(A){console.error("❌ Auth initialization error:",A),_&&(i(null),r(null),h(!1),g(null),p(!1))}finally{_&&(u(!1),console.log("🔐 Auth initialization completed"))}})();const{data:{subscription:v}}=L.auth.onAuthStateChange(async(A,R)=>{console.log("🔄 Auth state changed:",A,R?.user?.email||"No user"),_&&(A==="SIGNED_IN"&&R?(console.log("✅ User signed in:",R.user.email),i(R),r(R.user),h(!0),w(R.user.id,R.user.email).then(ae=>{_&&(g(ae),p(b(R.user,ae)))})):A==="SIGNED_OUT"?(console.log("👋 User signed out"),_&&(i(null),r(null),h(!1),g(null),p(!1))):A==="TOKEN_REFRESHED"&&R&&(console.log("🔄 Token refreshed for:",R.user.email),_&&(i(R),r(R.user))))});return()=>{_=!1,v.unsubscribe()}},[]);const E=o.useCallback(async _=>{try{const{error:y}=await L.auth.signInWithOtp({email:_,options:{emailRedirectTo:`${window.location.origin}/dashboard`}});return y?(console.error("Magic Link error:",y),{success:!1,error:y.message}):{success:!0}}catch(y){return console.error("Magic Link exception:",y),{success:!1,error:String(y)}}},[]),S=o.useCallback(async(_,y)=>{try{const{data:v,error:A}=await L.auth.signInWithPassword({email:_,password:y});return A?(console.error("Password sign in error:",A),{success:!1,error:A.message}):{success:!0}}catch(v){return console.error("Password sign in exception:",v),{success:!1,error:String(v)}}},[]),T=o.useCallback(async _=>{try{if(!t)return{success:!1,error:"ユーザーが認証されていません"};const{data:{session:y}}=await L.auth.getSession();if(!y?.access_token)return{success:!1,error:"認証が必要です"};const v=await fetch("https://onmcivwxtzqajcovptgf.supabase.co/functions/v1/verify-2fa",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y.access_token}`},body:JSON.stringify({userId:t.id,code:_})});if(!v.ok)return{success:!1,error:(await v.json()).error||"認証に失敗しました"};const A=await v.json();return{success:A.success,...A.error&&{error:A.error}}}catch(y){return console.error("2FA verification exception:",y),{success:!1,error:String(y)}}},[t]),O=o.useCallback(_=>{try{localStorage.setItem("isTrustedDevice",JSON.stringify(_))}catch(y){console.error("Error setting trusted device:",y)}},[]),C=o.useCallback(async()=>{try{await L.auth.signOut(),i(null),r(null),h(!1),g(null),p(!1);try{localStorage.removeItem("isTrustedDevice"),localStorage.removeItem("pre_payment_auth_state")}catch(_){console.error("Error clearing localStorage:",_)}}catch(_){console.error("Logout error:",_)}},[]),k={user:t,session:n,loading:a,logout:C,isAuthenticated:l,signInWithMagicLink:E,signInWithPassword:S,verify2FA:T,setIsTrustedDevice:O,isAdmin:d,userProfile:x};return s.jsx(us.Provider,{value:k,children:e})},Ke=()=>{const e=o.useContext(us);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e};function Mr(){const{user:e}=Ke(),[t,r]=o.useState(null),[n,i]=o.useState(!0),[a,u]=o.useState(null),[l,h]=o.useState(!1);o.useEffect(()=>{e?d():(r(null),i(!1),h(!1))},[e]);const d=async()=>{try{i(!0),u(null);const{data:g,error:w}=await L.from("stripe_user_subscriptions").select("*").maybeSingle();if(w)throw w;g?(r(g),h(g.status==="paused")):(r(null),h(!1))}catch(g){console.error("Error fetching subscription:",g),u(g.message||"サブスクリプションの取得に失敗しました")}finally{i(!1)}},p=t?.status==="active"||t?.status==="trialing",x=g=>g?new Date(g*1e3).toLocaleDateString("ja-JP"):null;return{subscription:t,isActive:p,isPaused:l,loading:n,error:a,refresh:d,currentPeriodEnd:x(t?.current_period_end??null),currentPeriodStart:x(t?.current_period_start??null),paymentMethod:t?.payment_method_last4?`${t.payment_method_brand} **** ${t.payment_method_last4}`:null,willCancel:t?.cancel_at_period_end}}const Di=e=>{if(!e)return"不明なエラーが発生しました";if(typeof e=="string")return e;if(e&&typeof e=="object"&&"message"in e){const t=e;if(t.code==="PGRST116")return"データが見つかりません。Netlify の環境変数設定を確認してください。";if(t.code==="PGRST301")return"データベース接続エラー。Netlify Supabase Extension の設定を確認してください。";switch(t.message){case"Invalid API key":return"API キーが無効です。Netlify の環境変数 VITE_SUPABASE_ANON_KEY を確認してください。";case"Invalid URL":return"データベース URL が無効です。Netlify の環境変数 VITE_SUPABASE_URL を確認してください。";case"Network error":return"ネットワークエラーが発生しました。インターネット接続を確認してください。";case"Authentication required":return"認証が必要です。ログインしてください。";default:return t.message||"不明なエラーが発生しました"}}return"不明なエラーが発生しました"},et=async(e,t={})=>{const{retries:r=0,timeout:n=5e3}=t;for(let i=0;i<=r;i++)try{const a=new AbortController,u=setTimeout(()=>a.abort(),n),l=await e();return clearTimeout(u),{...l,isOffline:!1}}catch(a){if(console.warn(`Query attempt ${i+1} failed:`,a),i===r){const u=a instanceof Error&&(a.message.includes("Network")||a.message.includes("fetch")||a.message.includes("AbortError"));return{data:null,error:a,isOffline:u}}await new Promise(u=>setTimeout(u,Math.pow(2,i)*1e3))}return{data:null,error:new Error("Max retries exceeded"),isOffline:!1}},ki=async e=>{const t=await Promise.allSettled(Object.entries(e).map(async([n,i])=>({key:n,result:await i()}))),r={};return t.forEach((n,i)=>{if(n.status==="fulfilled"){const{key:a,result:u}=n.value;r[a]=u.data||null}else console.warn(`Query ${Object.keys(e)[i]} failed:`,n.reason),r[Object.keys(e)[i]]=null}),r},Te=(e,t,r)=>{new Date().toISOString();const i=`${{debug:"🔍",info:"ℹ️",warn:"⚠️",error:"❌"}[e]} ${t}`;switch(e){case"debug":break;case"info":console.log(i,r);break;case"warn":console.warn(i,r);break;case"error":console.error(i,r);break}},Fr=o.lazy(()=>m(()=>import("./PWADebugPanel-DytBq4f-.js"),__vite__mapDeps([0,1,2,3]))),zr=o.memo(function(){const{user:t,logout:r,isAdmin:n}=Ke(),i=Bt(),[a,u]=o.useState(""),[l,h]=o.useState(0),[d,p]=o.useState(0),{isActive:x}=Mr(),[g,w]=o.useState(!1),[b,E]=o.useState(!1),[S,T]=o.useState(!1),O=o.useCallback(()=>{const v=document.getElementById("pwa-install-button");v&&v.click()},[]);o.useEffect(()=>{E(window.matchMedia("(display-mode: standalone)").matches);const v=()=>{w(!0)},A=()=>{w(!1),E(!0)};return window.addEventListener("beforeinstallprompt",v),window.addEventListener("appinstalled",A),()=>{window.removeEventListener("beforeinstallprompt",v),window.removeEventListener("appinstalled",A)}},[]);const C=o.useCallback(async()=>{if(t)try{const v=await et(()=>L.from("profiles").select("name").eq("id",t.id).maybeSingle());if(v.error&&v.error.code!=="PGRST116"&&Te("error","Error fetching profile",{error:v.error,userId:t.id}),v.data?.name)u(v.data.name);else{const A=t.user_metadata?.name||t.email?.split("@")[0];A&&u(A)}}catch(v){Te("error","Exception in fetchUserName",{error:v,userId:t.id})}},[t]),k=o.useCallback(async()=>{if(t)try{const v=await et(()=>L.from("notifications").select("*",{count:"exact",head:!0}).eq("user_id",t.id).eq("read",!1));h(v.data||0)}catch(v){Te("error","Error fetching notifications",{error:v,userId:t.id})}},[t]),_=o.useCallback(async()=>{if(t)try{const v=await et(()=>L.from("cart_items").select("*",{count:"exact",head:!0}).eq("user_id",t.id));p(v.data||0)}catch(v){Te("error","Error fetching cart items",{error:v,userId:t.id})}},[t]);o.useEffect(()=>{t?(C(),k(),_()):(u(""),h(0),p(0))},[t,n,C,k,_]);const y=async()=>{try{await r(),i("/")}catch(v){Te("error","ログアウトエラー",{error:v})}};return s.jsxs(s.Fragment,{children:[s.jsx("nav",{className:"bg-white shadow-lg sticky top-0 z-50",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsxs(N,{to:"/",className:"flex items-center space-x-3 hover:opacity-80 transition-opacity cursor-pointer group","aria-label":"ドッグパークJP ホーム",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-green-400 rounded-full flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow",children:s.jsx(rt,{className:"h-7 w-7 text-white","aria-hidden":"true"})}),s.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-blue-400 rounded-full opacity-80",children:s.jsx(rt,{className:"h-2 w-2 text-white","aria-hidden":"true"})})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("span",{className:"text-xl font-bold text-gray-800 leading-tight",children:["ドッグパーク",s.jsx("span",{className:"text-blue-600",children:"JP"})]}),s.jsx("span",{className:"text-xs text-gray-500 leading-none",children:"愛犬との素敵な時間を"})]})]}),s.jsx("div",{className:"flex items-center space-x-4",children:t?s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"text-gray-700 hidden md:inline-block",children:["こんにちは、",a||"ユーザー","さん",x&&s.jsxs("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1",children:[s.jsx("path",{d:"m3 11 18-5v12L3 14v-3z"}),s.jsx("path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6"})]}),"サブスク会員"]})]}),s.jsx(N,{to:"/dashboard",className:"text-gray-600 hover:text-blue-600 transition-colors hidden md:inline-block",children:"マイページ"}),s.jsx(N,{to:"/parks",className:"text-gray-600 hover:text-blue-600 transition-colors hidden md:inline-block",children:"ドッグラン一覧"}),s.jsx(N,{to:"/shop",className:"text-gray-600 hover:text-green-600 transition-colors hidden md:inline-block",children:"ペットショップ"}),s.jsxs(N,{to:"/community",className:"relative text-gray-600 hover:text-blue-600 transition-colors","aria-label":`通知 ${l>0?`${l}件の未読通知があります`:""}`,children:[s.jsx(Wt,{className:"h-5 w-5","aria-hidden":"true"}),l>0&&s.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center","aria-hidden":"true",children:l>9?"9+":l})]}),s.jsxs(N,{to:"/cart",className:"relative text-gray-600 hover:text-green-600 transition-colors","aria-label":`カート ${d>0?`${d}点の商品があります`:""}`,children:[s.jsx(gs,{className:"h-5 w-5","aria-hidden":"true"}),d>0&&s.jsx("span",{className:"absolute -top-2 -right-2 bg-green-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center","aria-hidden":"true",children:d>9?"9+":d})]}),g&&!b&&s.jsxs("button",{onClick:O,className:"flex items-center space-x-1 text-blue-600 hover:text-blue-700 transition-colors bg-blue-50 hover:bg-blue-100 px-2 py-1 rounded-md","aria-label":"アプリをインストール",children:[s.jsx(nt,{className:"h-4 w-4","aria-hidden":"true"}),s.jsx("span",{className:"hidden lg:inline text-sm",children:"アプリ化"})]}),b&&s.jsxs("div",{className:"flex items-center space-x-1 text-green-600 bg-green-50 px-2 py-1 rounded-md",children:[s.jsx(nt,{className:"h-4 w-4","aria-hidden":"true"}),s.jsx("span",{className:"hidden lg:inline text-sm",children:"PWA"})]}),!1,n&&s.jsxs(N,{to:"/admin",className:"flex items-center space-x-1 text-red-600 hover:text-red-700 transition-colors","aria-label":"管理者ページ",children:[s.jsx(xs,{className:"h-4 w-4","aria-hidden":"true"}),s.jsx("span",{className:"hidden md:inline",children:"管理者"})]}),s.jsxs("button",{onClick:()=>void y(),className:"flex items-center space-x-1 text-gray-600 hover:text-red-600 transition-colors","aria-label":"ログアウト",children:[s.jsx(vs,{className:"h-4 w-4","aria-hidden":"true"}),s.jsx("span",{className:"hidden md:inline",children:"ログアウト"})]})]}):s.jsxs(s.Fragment,{children:[s.jsx(N,{to:"/login",className:"text-gray-600 hover:text-blue-600 transition-colors",children:"ログイン"}),s.jsx(N,{to:"/register",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"新規登録"})]})})]})})}),s.jsx(o.Suspense,{fallback:s.jsx("div",{children:"Loading debug panel..."}),children:s.jsx(Fr,{isOpen:S,onClose:()=>T(!1)})})]})});function Vr(){const e=new Date().getFullYear();return s.jsx("footer",{className:"bg-white text-gray-700 py-12 border-t border-gray-200",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[s.jsxs("div",{className:"col-span-1 md:col-span-1",children:[s.jsxs(N,{to:"/",className:"flex items-center space-x-2 mb-4",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-green-400 rounded-full flex items-center justify-center",children:s.jsx(rt,{className:"h-6 w-6 text-white"})}),s.jsx("span",{className:"text-xl font-bold",children:"ドッグパークJP"})]}),s.jsx("p",{className:"text-gray-400 mb-4",children:"愛犬とのお散歩をもっと楽しく。全国のドッグランを簡単に検索・予約できるサービスです。"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter",children:s.jsx("svg",{className:"w-6 h-6 text-gray-400 hover:text-white transition-colors",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})})}),s.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer","aria-label":"Instagram",children:s.jsx("svg",{className:"w-6 h-6 text-gray-400 hover:text-white transition-colors",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{fillRule:"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z",clipRule:"evenodd"})})}),s.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer","aria-label":"Facebook",children:s.jsx("svg",{className:"w-6 h-6 text-gray-400 hover:text-white transition-colors",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z",clipRule:"evenodd"})})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"クイックリンク"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(N,{to:"/",className:"text-gray-400 hover:text-white transition-colors",children:"ホーム"})}),s.jsx("li",{children:s.jsx(N,{to:"/parks",className:"text-gray-400 hover:text-white transition-colors",children:"ドッグラン一覧"})}),s.jsx("li",{children:s.jsx(N,{to:"/parks/rules",className:"text-gray-400 hover:text-white transition-colors",children:"利用ルール"})}),s.jsx("li",{children:s.jsx(N,{to:"/shop",className:"text-gray-400 hover:text-white transition-colors",children:"ペットショップ"})}),s.jsx("li",{children:s.jsx(N,{to:"/subscription",className:"text-gray-400 hover:text-white transition-colors",children:"サブスクリプション"})}),s.jsx("li",{children:s.jsx(N,{to:"/news",className:"text-gray-400 hover:text-white transition-colors",children:"新着情報"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ご利用者様向け"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(N,{to:"/register",className:"text-gray-400 hover:text-white transition-colors",children:"新規登録"})}),s.jsx("li",{children:s.jsx(N,{to:"/login",className:"text-gray-400 hover:text-white transition-colors",children:"ログイン"})}),s.jsx("li",{children:s.jsx(N,{to:"/register-dog",className:"text-gray-400 hover:text-white transition-colors",children:"ワンちゃん登録"})}),s.jsx("li",{children:s.jsx(N,{to:"/access-control",className:"text-gray-400 hover:text-white transition-colors",children:"入場管理"})}),s.jsx("li",{children:s.jsx(N,{to:"/community",className:"text-gray-400 hover:text-white transition-colors",children:"コミュニティ"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"お問い合わせ"}),s.jsxs("ul",{className:"space-y-3",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx(ws,{className:"w-5 h-5 text-gray-400 mr-2 mt-0.5"}),s.jsx("span",{className:"text-gray-400",children:"info@dogparkjp.com"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx(Qt,{className:"w-5 h-5 text-gray-400 mr-2 mt-0.5"}),s.jsxs("span",{className:"text-gray-400",children:["〒861-0563",s.jsx("br",{}),"熊本県山鹿市鹿央町千田１７１８－１３",s.jsx("br",{}),"株式会社ＣＡＰＡＳ"]})]})]})]})]}),s.jsx("hr",{className:"border-gray-700 my-8"}),s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[s.jsxs("p",{className:"text-gray-400 text-sm mb-4 md:mb-0",children:["© ",e," ドッグパークJP. All rights reserved."]}),s.jsxs("div",{className:"flex space-x-6",children:[s.jsx(N,{to:"/privacy",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"プライバシーポリシー"}),s.jsx(N,{to:"/terms",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"利用規約"}),s.jsx(N,{to:"/business-information",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"特定商取引法に基づく表記"}),s.jsx(N,{to:"/contact",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"お問い合わせ"})]})]})]})})}function Hr(){const e=Jt(),[t,r]=o.useState("/");o.useEffect(()=>{const a=e.pathname.split("/")[1];r(a?`/${a}`:"/")},[e]);const n=a=>a==="/"?t==="/":t.startsWith(a),i=[{path:"/",label:"ホーム",icon:bs},{path:"/parks",label:"ドッグラン",icon:Qt},{path:"/access-control",label:"入退場",icon:js},{path:"/community",label:"コミュニティ",icon:_s},{path:"/dashboard",label:"マイページ",icon:Ps}];return s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50 md:hidden",children:[s.jsx("div",{className:"flex justify-around items-center h-16",children:i.map(a=>{const u=a.icon,l=n(a.path);return s.jsxs(N,{to:a.path,className:`flex flex-col items-center justify-center w-full h-full ${l?"text-blue-600":"text-gray-500"}`,children:[s.jsx(u,{className:`w-6 h-6 ${l?"text-blue-600":"text-gray-500"}`}),s.jsx("span",{className:"text-xs mt-1",children:a.label})]},a.path)})}),s.jsx("div",{className:"h-safe-bottom bg-white"})]})}function Ur({title:e="ドッグパークJP",description:t="愛犬とのお散歩をもっと楽しく。全国のドッグランを簡単に検索・予約できるサービスです。",canonicalUrl:r,ogType:n="website",ogImage:i="https://dogparkjp.com/og-image.jpg"}){const a=e==="ドッグパークJP"?e:`${e} | ドッグパークJP`;return s.jsxs(Dr,{children:[s.jsx("title",{children:a}),s.jsx("meta",{name:"description",content:t}),r&&s.jsx("link",{rel:"canonical",href:r}),s.jsx("meta",{property:"og:type",content:n}),s.jsx("meta",{property:"og:title",content:a}),s.jsx("meta",{property:"og:description",content:t}),s.jsx("meta",{property:"og:image",content:i}),r&&s.jsx("meta",{property:"og:url",content:r}),s.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),s.jsx("meta",{name:"twitter:title",content:a}),s.jsx("meta",{name:"twitter:description",content:t}),s.jsx("meta",{name:"twitter:image",content:i}),s.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),s.jsx("meta",{httpEquiv:"Content-Language",content:"ja"}),s.jsx("meta",{name:"theme-color",content:"#3B82F6"})]})}const qr=async()=>{try{try{const t=await(await fetch("https://api.ipify.org?format=json")).json();if(t.ip)return{ip:t.ip}}catch(e){console.warn("Failed to get IP from ipify:",e)}try{const t=await(await fetch("https://ipapi.co/ip/")).text();if(t&&t.trim())return{ip:t.trim()}}catch(e){console.warn("Failed to get IP from ipapi.co:",e)}try{const t=await(await fetch("https://httpbin.org/ip")).json();if(t.origin)return{ip:t.origin}}catch(e){console.warn("Failed to get IP from httpbin.org:",e)}return window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?{ip:"127.0.0.1"}:{ip:"127.0.0.1",error:"Unable to detect IP address"}}catch(e){return console.error("Error detecting IP:",e),{ip:"127.0.0.1",error:"Error detecting IP address"}}};let tt=null,Ne=null;const $r=()=>tt?Promise.resolve({ip:tt}):Ne||(Ne=qr().then(e=>(e.error||(tt=e.ip),Ne=null,e)),Ne),ds=o.createContext({isMaintenanceActive:!1,maintenanceInfo:null,loading:!0,error:null,clientIP:null,isIPWhitelisted:!1,refreshMaintenanceStatus:async()=>{}}),Wr=({children:e})=>{const[t,r]=o.useState(!1),[n,i]=o.useState(null),[a,u]=o.useState(!0),[l,h]=o.useState(null),[d,p]=o.useState(null),[x,g]=o.useState(!1),w=o.useCallback(async()=>{try{u(!0),h(null);const S=await $r();p(S.ip);const{data:T,error:O}=await L.rpc("should_show_maintenance",{client_ip:S.ip});if(O){console.warn("メンテナンス状態チェックでエラー:",O),i(null),r(!1),g(!0),h(null);return}if(T&&T.length>0){const C=T[0];r(C.is_maintenance_active),g(C.is_ip_allowed),C.is_maintenance_active&&C.maintenance_info?i(C.maintenance_info):i(null)}else i(null),r(!1),g(!0)}catch(S){console.warn("メンテナンス状態の取得でエラー:",S),i(null),r(!1),g(!0),h(null)}finally{u(!1)}},[]),b=o.useCallback(async()=>{await w()},[w]);o.useEffect(()=>{let S=!0;const T=async()=>{S&&await w()},O=setTimeout(()=>{S&&a&&(console.warn("Maintenance check timeout: Force completing initialization"),u(!1),r(!1),g(!0),i(null),h(null))},3e4);T().catch(k=>{console.error("Initial maintenance fetch failed:",k),S&&(u(!1),r(!1),g(!0),i(null),h(null))});const C=setInterval(()=>{S&&T().catch(k=>{console.error("Periodic maintenance fetch failed:",k)})},5*60*1e3);return()=>{S=!1,clearTimeout(O),clearInterval(C)}},[]);const E={isMaintenanceActive:t,maintenanceInfo:n,loading:a,error:l,clientIP:d,isIPWhitelisted:x,refreshMaintenanceStatus:b};return s.jsx(ds.Provider,{value:E,children:e})},hs=()=>{const e=o.useContext(ds);if(!e)throw new Error("useMaintenance must be used within a MaintenanceProvider");return e},Ri={initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1],staggerChildren:.1}},exit:{opacity:0,y:-20,scale:.95,transition:{duration:.3,ease:[.4,0,.2,1]}}},Qr={initial:{scale:1},hover:{scale:1.05,transition:{type:"spring",stiffness:400,damping:10}},tap:{scale:.95,transition:{type:"spring",stiffness:400,damping:10}}},Li={initial:{scale:0,opacity:0,rotate:-180},animate:{scale:[0,1.2,1],opacity:[0,1,1],rotate:[180,0,0],transition:{duration:.8,ease:"easeOut",times:[0,.6,1]}}},Mi={initial:{scale:.8,opacity:0,y:50},animate:{scale:[.8,1.1,1],opacity:[0,1,1],y:[50,-10,0],transition:{duration:.7,ease:"easeOut",times:[0,.5,1]}}},Fi={initial:{opacity:0,x:100,scale:.9},animate:{opacity:1,x:0,scale:1,transition:{type:"spring",stiffness:200,damping:20}},exit:{opacity:0,x:100,scale:.9,transition:{duration:.3}}},zi={initial:{x:0},shake:{x:[-10,10,-10,10,0],transition:{duration:.6,ease:"easeInOut"}}},Vi={initial:{scale:0,opacity:0},animate:{scale:1,opacity:1,transition:{type:"spring",stiffness:260,damping:20}}},Hi={initial:{scale:0,opacity:0},animate:{scale:[0,1,0],opacity:[0,1,0],y:[0,-100,-200],x:[0,Math.random()*40-20,Math.random()*80-40],transition:{duration:2,ease:"easeOut"}}},Ui={initial:{opacity:0,y:60},animate:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}},qi={initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0,transition:{duration:.3,ease:"easeOut"}},exit:{opacity:0,scale:.9,y:-20,transition:{duration:.2}}},Kr={success:[100,50,100],warning:[200],error:[50,50,50,50,50],light:[25],medium:[50],heavy:[100],selection:[10],notification:[100,100,100],payment:[200,100,200,100,200],"pin-success":[100,50,100,50,200]};let Oe={};const Le=async()=>{if(Oe.Capacitor)return Oe;try{const[e,t]=await Promise.all([m(()=>import("./index-D39EfaCZ.js"),__vite__mapDeps([4,3,2,5])),m(()=>import("./index-BMs0DYbL.js"),[])]);Oe={Haptics:e.Haptics,ImpactStyle:e.ImpactStyle,Capacitor:t.Capacitor},console.log("✅ Capacitor Haptics loaded successfully")}catch{console.warn("⚠️ Capacitor Haptics not available, using Web API only"),Oe={}}return Oe},Ge=async()=>{try{const e=await Le();return e.Capacitor&&typeof e.Capacitor.isNativePlatform=="function"&&e.Capacitor.isNativePlatform()}catch{return!1}},Gr=async e=>{try{console.log(`🔄 Triggering haptic feedback: ${e}`);const t=await Le();if(await Ge()&&t.Haptics&&t.ImpactStyle){switch(console.log("📱 Using Capacitor Haptics"),e){case"success":case"payment":case"pin-success":await t.Haptics.impact({style:t.ImpactStyle.Medium}),await new Promise(n=>setTimeout(n,100)),await t.Haptics.impact({style:t.ImpactStyle.Light});break;case"error":await t.Haptics.impact({style:t.ImpactStyle.Heavy});break;case"warning":await t.Haptics.impact({style:t.ImpactStyle.Medium});break;case"light":case"selection":await t.Haptics.impact({style:t.ImpactStyle.Light});break;case"medium":case"notification":await t.Haptics.impact({style:t.ImpactStyle.Medium});break;case"heavy":await t.Haptics.impact({style:t.ImpactStyle.Heavy});break;default:await t.Haptics.impact({style:t.ImpactStyle.Light})}console.log("✅ Capacitor haptic feedback executed");return}if("vibrate"in navigator){console.log("🌐 Using Web Vibration API");const n=Kr[e];navigator.vibrate(n)?console.log(`✅ Web vibration executed: [${n.join(", ")}]ms`):console.warn("⚠️ Web vibration failed")}else console.warn("⚠️ Vibration not supported in this environment")}catch(t){console.error("❌ Haptic feedback error:",t)}},$i=async()=>{console.log("💳 Payment success haptic feedback");try{const e=await Le();await Ge()&&e.Haptics&&e.ImpactStyle?(await e.Haptics.impact({style:e.ImpactStyle.Light}),await new Promise(r=>setTimeout(r,100)),await e.Haptics.impact({style:e.ImpactStyle.Medium}),await new Promise(r=>setTimeout(r,100)),await e.Haptics.impact({style:e.ImpactStyle.Heavy}),console.log("✅ Payment success haptic (native) completed")):"vibrate"in navigator&&(navigator.vibrate([100,50,150,50,200]),console.log("✅ Payment success haptic (web) completed"))}catch(e){console.error("❌ Payment success haptic error:",e)}},Wi=async()=>{console.log("🔑 PIN generation haptic feedback");try{const e=await Le();await Ge()&&e.Haptics&&e.ImpactStyle?(await e.Haptics.impact({style:e.ImpactStyle.Medium}),await new Promise(r=>setTimeout(r,80)),await e.Haptics.impact({style:e.ImpactStyle.Light}),await new Promise(r=>setTimeout(r,80)),await e.Haptics.impact({style:e.ImpactStyle.Medium}),console.log("✅ PIN generation haptic (native) completed")):"vibrate"in navigator&&(navigator.vibrate([80,40,80,40,120]),console.log("✅ PIN generation haptic (web) completed"))}catch(e){console.error("❌ PIN generation haptic error:",e)}},Qi=async()=>{try{const e=await Le();await Ge()&&e.Haptics&&e.ImpactStyle?await e.Haptics.impact({style:e.ImpactStyle.Light}):"vibrate"in navigator&&navigator.vibrate([50])}catch(e){console.error("❌ Notification haptic feedback failed:",e)}},Br=({children:e,variant:t="primary",size:r="md",isLoading:n=!1,loadingText:i,isFullWidth:a=!1,leftIcon:u,rightIcon:l,className:h="",enableHaptics:d=!0,hapticType:p="light",onClick:x,disabled:g,...w})=>{const b=["inline-flex","items-center","justify-center","font-medium","rounded-lg","transition-all","duration-200","focus:outline-none","focus:ring-2","focus:ring-offset-2","disabled:opacity-50","disabled:cursor-not-allowed","select-none","transform","active:scale-95"],E={primary:["bg-blue-600","text-white","hover:bg-blue-700","focus:ring-blue-500","shadow-sm","hover:shadow-md"],secondary:["bg-gray-600","text-white","hover:bg-gray-700","focus:ring-gray-500","shadow-sm","hover:shadow-md"],danger:["bg-red-600","text-white","hover:bg-red-700","focus:ring-red-500","shadow-sm","hover:shadow-md"],outline:["bg-transparent","text-gray-700","border-2","border-gray-300","hover:bg-gray-50","hover:border-gray-400","focus:ring-gray-500"],ghost:["bg-transparent","text-gray-600","hover:bg-gray-100","hover:text-gray-900","focus:ring-gray-500"]},S={sm:["px-3","py-1.5","text-sm","gap-1.5"],md:["px-4","py-2","text-sm","gap-2"],lg:["px-6","py-3","text-base","gap-2"],xl:["px-8","py-4","text-lg","gap-3"]},T=a?["w-full"]:[],O=[...b,...E[t],...S[r],...T,h].join(" "),C=async y=>{if(d&&!g&&!n)try{await Gr(p)}catch(v){console.debug("Haptic feedback failed:",v)}x&&!g&&!n&&x(y)},k=s.jsxs(s.Fragment,{children:[s.jsx(Es,{className:"animate-spin",size:r==="sm"?14:r==="lg"?20:r==="xl"?24:16}),i||"Loading..."]}),_=s.jsxs(s.Fragment,{children:[u,e,l]});return s.jsx(oe.button,{className:O,onClick:C,disabled:g||n,variants:Qr,initial:"initial",whileHover:!g&&!n?"hover":"initial",whileTap:!g&&!n?"tap":"initial",...w,children:n?k:_})},fs=o.forwardRef(({children:e,className:t="",onClick:r,elevation:n="md",rounded:i="lg",border:a=!1,hoverEffect:u=!1,as:l="div",...h},d)=>{const p={none:"",sm:"shadow-sm",md:"shadow-md",lg:"shadow-lg"},x={none:"rounded-none",sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg",full:"rounded-full"},g=a?"border border-gray-200":"",w=u?"hover:shadow-lg transition-shadow duration-300":"",b=r?"cursor-pointer":"";return s.jsx(l,{ref:d,className:`bg-white ${p[n]} ${x[i]} ${g} ${w} ${b} ${t}`,onClick:r,...h,children:e})});fs.displayName="Card";const Jr=()=>{const{maintenanceInfo:e,refreshMaintenanceStatus:t}=hs(),r=n=>n?new Date(n).toLocaleString("ja-JP",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):null;return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:s.jsxs(fs,{className:"max-w-md w-full p-8 text-center",children:[s.jsx("div",{className:"flex justify-center mb-6",children:e?.is_emergency?s.jsx(Kt,{className:"w-16 h-16 text-red-500"}):s.jsx(As,{className:"w-16 h-16 text-blue-500"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:e?.title||"システムメンテナンス"}),s.jsx("p",{className:"text-gray-600 mb-6",children:e?.message||"より良いサービス提供のため、システムメンテナンスを実施しています。ご不便をおかけして申し訳ございません。"}),e?.start_time&&s.jsxs("div",{className:"flex items-center justify-center text-sm text-gray-500 mb-2",children:[s.jsx(jt,{className:"w-4 h-4 mr-2"}),s.jsxs("span",{children:["開始: ",r(e.start_time)]})]}),e?.end_time&&s.jsxs("div",{className:"flex items-center justify-center text-sm text-gray-500 mb-6",children:[s.jsx(jt,{className:"w-4 h-4 mr-2"}),s.jsxs("span",{children:["終了予定: ",r(e.end_time)]})]}),s.jsxs(Br,{onClick:()=>void t(),className:"w-full flex items-center justify-center",variant:"secondary",children:[s.jsx(Gt,{className:"w-4 h-4 mr-2"}),"状態を更新"]}),s.jsx("div",{className:"mt-6 text-xs text-gray-400",children:s.jsx("p",{children:"メンテナンス完了後、このページは自動的に更新されます。"})})]})})},Yr=({children:e})=>{const t=Jt(),{isMaintenanceActive:r,loading:n,isIPWhitelisted:i,clientIP:a}=hs(),{isAdmin:u,user:l}=Ke();return o.useEffect(()=>{window.scrollTo(0,0)},[t.pathname]),n?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(console.log("Layout - isMaintenanceActive:",r,"isAdmin:",u,"user:",l?.email,"clientIP:",a,"isIPWhitelisted:",i),!(!r||u||l?.email==="capasjapan@gmail.com"||i)?s.jsx(Jr,{}):s.jsx(xt,{children:s.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[s.jsx(Ur,{}),s.jsx(zr,{}),s.jsx("main",{className:"flex-1 container mx-auto px-4 py-8",children:e}),s.jsx(Vr,{}),s.jsx(Hr,{})]})}))};class Xr{constructor(){H(this,"notifications",[]);H(this,"listeners",new Set);H(this,"idCounter",0)}show(t){const r=`notification-${++this.idCounter}`,n={id:r,options:{type:"info",duration:4e3,position:"top-right",closable:!0,...t},createdAt:new Date};return this.notifications.push(n),this.notifyListeners(),n.options.duration&&n.options.duration>0&&setTimeout(()=>{this.remove(r)},n.options.duration),r}success(t,r){return this.show({message:t,type:"success",...r})}error(t,r){return this.show({message:t,type:"error",duration:6e3,...r})}warning(t,r){return this.show({message:t,type:"warning",duration:5e3,...r})}info(t,r){return this.show({message:t,type:"info",...r})}remove(t){this.notifications=this.notifications.filter(r=>r.id!==t),this.notifyListeners()}clear(){this.notifications=[],this.notifyListeners()}getNotifications(){return[...this.notifications]}subscribe(t){return this.listeners.add(t),()=>{this.listeners.delete(t)}}notifyListeners(){this.listeners.forEach(t=>{t([...this.notifications])})}}const le=new Xr,Ki={success:(e,t)=>le.success(e,t),error:(e,t)=>le.error(e,t),warning:(e,t)=>le.warning(e,t),info:(e,t)=>le.info(e,t),show:e=>le.show(e)},Zr=({notification:e,onClose:t})=>{const{options:r}=e,[n,i]=o.useState(!1),[a,u]=o.useState(!1);o.useEffect(()=>{setTimeout(()=>i(!0),10)},[]);const l=()=>{u(!0),setTimeout(()=>{t(e.id)},300)},h=()=>{switch(r.type){case"success":return s.jsx(Ve,{className:"w-5 h-5 text-green-500"});case"error":return s.jsx(Is,{className:"w-5 h-5 text-red-500"});case"warning":return s.jsx(Kt,{className:"w-5 h-5 text-yellow-500"});case"info":default:return s.jsx(Ss,{className:"w-5 h-5 text-blue-500"})}},d=()=>{switch(r.type){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"info":default:return"bg-blue-50 border-blue-200 text-blue-800"}},p=()=>{switch(r.position){case"top-left":return"top-4 left-4";case"top-center":return"top-4 left-1/2 transform -translate-x-1/2";case"bottom-right":return"bottom-4 right-4";case"bottom-left":return"bottom-4 left-4";case"bottom-center":return"bottom-4 left-1/2 transform -translate-x-1/2";case"top-right":default:return"top-4 right-4"}};return s.jsx("div",{className:`
        fixed z-50 max-w-sm w-full transition-all duration-300 ease-in-out
        ${p()}
        ${n&&!a?"opacity-100 translate-y-0":"opacity-0 -translate-y-2"}
        ${a?"scale-95":"scale-100"}
      `,children:s.jsx("div",{className:`
        p-4 rounded-lg border shadow-lg backdrop-blur-sm
        ${d()}
      `,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[h(),s.jsxs("div",{className:"flex-1 min-w-0",children:[r.title&&s.jsx("p",{className:"text-sm font-semibold mb-1",children:r.title}),s.jsx("p",{className:"text-sm leading-relaxed",children:r.message}),r.action&&s.jsx("button",{onClick:r.action.onClick,className:"mt-2 text-sm font-medium underline hover:no-underline focus:outline-none",children:r.action.label})]}),r.closable&&s.jsx("button",{onClick:l,className:"flex-shrink-0 p-1 rounded-full hover:bg-black/10 focus:outline-none focus:ring-2 focus:ring-black/20 transition-colors",children:s.jsx(it,{className:"w-4 h-4"})})]})})})},en=()=>{const[e,t]=o.useState([]);o.useEffect(()=>le.subscribe(t),[]);const r=n=>{le.remove(n)};return s.jsx("div",{className:"pointer-events-none",children:e.map(n=>s.jsx(Zr,{notification:n,onClose:r},n.id))})},tn=()=>{const[e,t]=o.useState({isInstalled:!1,isOnline:navigator.onLine,hasUpdate:!1,canInstall:!1,canNotify:!1}),[r,n]=o.useState(!1),[i,a]=o.useState(!1),[u,l]=o.useState(null),[h,d]=o.useState(null);o.useEffect(()=>(p(),x(),S(),()=>{g()}),[]);const p=()=>{t(y=>({...y,isInstalled:window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,isOnline:navigator.onLine,canNotify:"Notification"in window}))},x=()=>{window.addEventListener("online",w),window.addEventListener("offline",w),window.addEventListener("beforeinstallprompt",b),window.addEventListener("appinstalled",E)},g=()=>{window.removeEventListener("online",w),window.removeEventListener("offline",w),window.removeEventListener("beforeinstallprompt",b),window.removeEventListener("appinstalled",E)},w=()=>{t(y=>({...y,isOnline:navigator.onLine}))},b=y=>{y.preventDefault(),l(y),t(v=>({...v,canInstall:!0})),n(!0)},E=()=>{console.log("PWA がインストールされました"),t(y=>({...y,isInstalled:!0,canInstall:!1})),n(!1),l(null)},S=async()=>{if("serviceWorker"in navigator)try{const y=await navigator.serviceWorker.ready;y.addEventListener("updatefound",()=>{const v=y.installing;v&&v.addEventListener("statechange",()=>{v.state==="installed"&&navigator.serviceWorker.controller&&(t(A=>({...A,hasUpdate:!0})),d(y),a(!0))})}),setInterval(()=>{y.update()},6e4)}catch(y){console.error("Service Worker の監視でエラーが発生しました:",y)}},T=async()=>{if(u)try{await u.prompt();const{outcome:y}=await u.userChoice;console.log("インストール結果:",y),console.log(y==="accepted"?"ユーザーがPWAインストールを承認しました":"ユーザーがPWAインストールを拒否しました"),l(null),n(!1),t(v=>({...v,canInstall:!1}))}catch(y){console.error("PWAインストールでエラーが発生しました:",y)}},O=async()=>{if(h)try{h.waiting&&h.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload()}catch(y){console.error("PWA更新でエラーが発生しました:",y)}},C=async()=>{if(!("Notification"in window)){alert("このブラウザは通知をサポートしていません");return}await Notification.requestPermission()==="granted"&&(t(v=>({...v,canNotify:!0})),new Notification("ドッグパークJP",{body:"通知が有効になりました！",icon:"/icons/icon-192x192.png",badge:"/icons/icon-192x192.png"}))},k=()=>{n(!1),t(y=>({...y,canInstall:!1}))},_=()=>{a(!1),t(y=>({...y,hasUpdate:!1}))};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:e.isInstalled&&s.jsxs(oe.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"flex items-center space-x-2 px-3 py-2 bg-blue-500 text-white rounded-full shadow-lg",children:[s.jsx(Ts,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:"PWAインストール済み"})]})}),r&&s.jsx(oe.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs(oe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-xl p-6 max-w-md w-full shadow-xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"アプリをインストール"}),s.jsx("button",{onClick:k,className:"text-gray-400 hover:text-gray-600",children:s.jsx(it,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("p",{className:"text-gray-600 mb-4",children:"ドッグパークJPをホーム画面に追加して、 ネイティブアプリのように利用しませんか？"}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ve,{className:"w-4 h-4 text-green-500"}),s.jsx("span",{children:"高速な起動"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ve,{className:"w-4 h-4 text-green-500"}),s.jsx("span",{children:"オフライン機能"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ve,{className:"w-4 h-4 text-green-500"}),s.jsx("span",{children:"プッシュ通知"})]})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("button",{onClick:T,className:"flex-1 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors flex items-center justify-center space-x-2",children:[s.jsx(nt,{className:"w-4 h-4"}),s.jsx("span",{children:"インストール"})]}),s.jsx("button",{onClick:k,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"後で"})]})]})}),i&&s.jsx(oe.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs(oe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-xl p-6 max-w-md w-full shadow-xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"新しいバージョンが利用可能"}),s.jsx("button",{onClick:_,className:"text-gray-400 hover:text-gray-600",children:s.jsx(it,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"mb-6",children:s.jsx("p",{className:"text-gray-600",children:"ドッグパークJPの新しいバージョンが利用可能です。 更新しますか？"})}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("button",{onClick:O,className:"flex-1 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors flex items-center justify-center space-x-2",children:[s.jsx(Gt,{className:"w-4 h-4"}),s.jsx("span",{children:"今すぐ更新"})]}),s.jsx("button",{onClick:_,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"後で"})]})]})}),!e.canNotify&&e.isInstalled&&s.jsx(oe.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},className:"fixed bottom-20 left-4 right-4 bg-white rounded-lg shadow-lg border border-gray-200 p-4 z-40",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Wt,{className:"w-5 h-5 text-blue-500 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"通知を許可しますか？"}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"重要な情報をお知らせできます"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:C,className:"text-xs bg-blue-500 text-white px-3 py-1 rounded-md hover:bg-blue-600 transition-colors",children:"許可"}),s.jsx("button",{onClick:()=>t(y=>({...y,canNotify:!0})),className:"text-xs text-gray-600 hover:text-gray-800 transition-colors",children:"後で"})]})]})})]})},sn=o.lazy(()=>m(()=>import("./Home-ziciQR0E.js"),__vite__mapDeps([6,1,2,7,3])).then(e=>({default:e.Home}))),rn=o.lazy(()=>m(()=>import("./Login-CBEd-8d5.js"),__vite__mapDeps([8,1,2,9,7,3])).then(e=>({default:e.Login}))),nn=o.lazy(()=>m(()=>import("./Register-Dtnn-GvF.js"),__vite__mapDeps([10,1,2,9,11,3])).then(e=>({default:e.Register}))),an=o.lazy(()=>m(()=>import("./UserDashboard-CLFsVNGu.js"),__vite__mapDeps([12,1,2,13,9,14,15,16,17,3])).then(e=>({default:e.UserDashboard}))),on=o.lazy(()=>m(()=>import("./ProfileSettings-1Bo_79mk.js"),__vite__mapDeps([18,1,2,9,11,3])).then(e=>({default:e.ProfileSettings})));o.lazy(()=>m(()=>import("./Dashboard-DBIT3svN.js"),__vite__mapDeps([19,1,2,3])));const ln=o.lazy(()=>m(()=>import("./DogManagement-BJ67yHUL.js"),__vite__mapDeps([20,3,2,1,13,9,14,15,16])).then(e=>({default:e.DogManagement}))),cn=o.lazy(()=>m(()=>import("./DogRegistration-YFygCAb2.js"),__vite__mapDeps([21,1,2,9,14,15,17,7,3])).then(e=>({default:e.DogRegistration}))),Rt=o.lazy(()=>m(()=>import("./DogProfile-CISNAXLi.js"),__vite__mapDeps([22,1,2,3])).then(e=>({default:e.DogProfile}))),un=o.lazy(()=>m(()=>import("./LikedDogs-CLR5qs9n.js"),__vite__mapDeps([23,1,2,3])).then(e=>({default:e.LikedDogs}))),dn=o.lazy(()=>m(()=>import("./DogParkDetail-D7AErzaj.js"),__vite__mapDeps([24,1,2,9,14,3])).then(e=>({default:e.DogParkDetail}))),hn=o.lazy(()=>m(()=>import("./DogParkRules-DypzN_CR.js"),__vite__mapDeps([25,1,2,3])).then(e=>({default:e.DogParkRules}))),fn=o.lazy(()=>m(()=>import("./DogParkHistory-BPHvmKav.js"),__vite__mapDeps([26,1,2,9,3])).then(e=>({default:e.DogParkHistory}))),mn=o.lazy(()=>m(()=>import("./NewParkDetail-D35Me-Da.js"),__vite__mapDeps([27,1,2,3])).then(e=>({default:e.NewParkDetail}))),pn=o.lazy(()=>m(()=>import("./ParkReservation-DzgJ5JoT.js"),__vite__mapDeps([28,1,2,29,30,9,16,3])).then(e=>({default:e.ParkReservation}))),yn=o.lazy(()=>m(()=>import("./ParkRegistration-SO0mPOUh.js"),__vite__mapDeps([31,1,2,9,3])).then(e=>({default:e.ParkRegistration}))),gn=o.lazy(()=>m(()=>import("./ParkRegistrationAgreement-BqQK-WW6.js"),__vite__mapDeps([32,1,2,3])).then(e=>({default:e.ParkRegistrationAgreement}))),xn=o.lazy(()=>m(()=>import("./ParkRegistrationSecondStage-BtWUD5jQ.js"),__vite__mapDeps([33,1,2,9,3])).then(e=>({default:e.ParkRegistrationSecondStage}))),vn=o.lazy(()=>m(()=>import("./ParkManagement-BgYXYaZo.js"),__vite__mapDeps([34,1,2,16,3])).then(e=>({default:e.ParkManagement}))),wn=o.lazy(()=>m(()=>import("./PetShop-CJ4bbLL6.js"),__vite__mapDeps([35,1,2,9,29,30,3])).then(e=>({default:e.PetShop}))),bn=o.lazy(()=>m(()=>import("./ProductDetail-iU9n6XCs.js"),__vite__mapDeps([36,1,2,7,3])).then(e=>({default:e.ProductDetail}))),jn=o.lazy(()=>m(()=>import("./Cart-BlxEWzwC.js"),__vite__mapDeps([37,1,2,3])).then(e=>({default:e.Cart}))),_n=o.lazy(()=>m(()=>import("./Checkout-D8xzyt_K.js"),__vite__mapDeps([38,1,2,9,29,3])).then(e=>({default:e.Checkout}))),Pn=o.lazy(()=>m(()=>import("./OrderHistory-BA07o4iQ.js"),__vite__mapDeps([39,1,2,3])).then(e=>({default:e.OrderHistory}))),En=o.lazy(()=>m(()=>import("./Community-C9INYN6U.js"),__vite__mapDeps([40,1,2,3])).then(e=>({default:e.Community}))),An=o.lazy(()=>m(()=>import("./News-Kf05B7ot.js"),__vite__mapDeps([41,1,2,9,3])).then(e=>({default:e.News}))),Sn=o.lazy(()=>m(()=>import("./NewsDetail-DZ3IRuYj.js"),__vite__mapDeps([42,1,2,3])).then(e=>({default:e.NewsDetail}))),In=o.lazy(()=>m(()=>import("./DogInfo-BzL3SmM9.js"),__vite__mapDeps([43,1,2]))),Tn=o.lazy(()=>m(()=>import("./DogInfoBreeds-DHRB8FCl.js"),__vite__mapDeps([44,1,2]))),Nn=o.lazy(()=>m(()=>import("./DogInfoVaccine-yGrgn3ew.js"),__vite__mapDeps([45,1,2]))),On=o.lazy(()=>m(()=>import("./DogInfoFoods-14njHlwo.js"),__vite__mapDeps([46,1,2]))),Cn=o.lazy(()=>m(()=>import("./DogInfoSnack-6qDIf9mr.js"),__vite__mapDeps([47,1,2]))),Dn=o.lazy(()=>m(()=>import("./DogInfoParasite-CSrKNIbC.js"),__vite__mapDeps([48,1,2]))),kn=o.lazy(()=>m(()=>import("./DogInfoShow-CB2Sv1nj.js"),__vite__mapDeps([49,1,2]))),Rn=o.lazy(()=>m(()=>import("./PaymentSetup-BkCYQ9_Q.js"),__vite__mapDeps([50,1,2,9,3])).then(e=>({default:e.PaymentSetup}))),Ln=o.lazy(()=>m(()=>import("./PaymentMethodSettings-C9mbGkJt.js"),__vite__mapDeps([51,1,2,9,3])).then(e=>({default:e.PaymentMethodSettings}))),Mn=o.lazy(()=>m(()=>import("./PaymentConfirmation-lH_mlNeg.js"),__vite__mapDeps([52,1,2,3])).then(e=>({default:e.PaymentConfirmation}))),Fn=o.lazy(()=>m(()=>import("./Subscription-o8bN5Wmt.js"),__vite__mapDeps([53,1,2,29,30,7,3])).then(e=>({default:e.Subscription}))),zn=o.lazy(()=>m(()=>import("./OwnerDashboard-CFOiEMTR.js"),__vite__mapDeps([54,1,2,3])).then(e=>({default:e.OwnerDashboard}))),Vn=o.lazy(()=>m(()=>import("./OwnerPaymentSystem-B_AmmrKe.js"),__vite__mapDeps([55,1,2,3])).then(e=>({default:e.OwnerPaymentSystem}))),Hn=o.lazy(()=>m(()=>import("./AdminDashboard-Dseyk76T.js"),__vite__mapDeps([56,1,2,9,3])).then(e=>({default:e.AdminDashboard}))),Un=o.lazy(()=>m(()=>import("./AdminManagement-Ci9CGvGR.js"),__vite__mapDeps([57,1,2,58,3])).then(e=>({default:e.AdminManagement}))),qn=o.lazy(()=>m(()=>import("./AdminTasks-CS20FZHW.js"),__vite__mapDeps([59,1,2,3])).then(e=>({default:e.AdminTasks}))),$n=o.lazy(()=>m(()=>import("./AdminUserManagement-DCZf3DAE.js"),__vite__mapDeps([60,1,2,9,3])).then(e=>({default:e.AdminUserManagement}))),Wn=o.lazy(()=>m(()=>import("./AdminUserDetail-Dc9ZSrSZ.js"),__vite__mapDeps([61,1,2,3])).then(e=>({default:e.AdminUserDetail}))),Qn=o.lazy(()=>m(()=>import("./AdminParkManagement-BpUjD9uR.js"),__vite__mapDeps([62,1,2,9,14,58,3])).then(e=>({default:e.AdminParkManagement}))),Kn=o.lazy(()=>m(()=>import("./AdminReservationManagement-DSlTpiCu.js"),__vite__mapDeps([63,1,2,9,3])).then(e=>({default:e.AdminReservationManagement}))),Gn=o.lazy(()=>m(()=>import("./AdminShopManagement-gLbAHkGq.js"),__vite__mapDeps([64,1,2,9,14,65,3])).then(e=>({default:e.AdminShopManagement}))),Bn=o.lazy(()=>m(()=>import("./AdminSalesManagement-Wl1gGT9P.js"),__vite__mapDeps([66,1,2,9,3])).then(e=>({default:e.AdminSalesManagement}))),Jn=o.lazy(()=>m(()=>import("./AdminVaccineApproval-BkC_NuXJ.js"),__vite__mapDeps([67,1,2,3]))),Yn=o.lazy(()=>m(()=>import("./AdminFacilityApproval-CWnXrJvA.js"),__vite__mapDeps([68,1,2,3]))),Xn=o.lazy(()=>m(()=>import("./AdminRevenueReport-DxFM6yv1.js"),__vite__mapDeps([69,1,2,9,65,3])).then(e=>({default:e.AdminRevenueReport}))),Zn=o.lazy(()=>m(()=>import("./AdminNewsManagement-Br1ze0eh.js"),__vite__mapDeps([70,1,2,9,14,3])).then(e=>({default:e.AdminNewsManagement}))),ei=o.lazy(()=>m(()=>import("./TwoFactorSetup-By4YW618.js"),__vite__mapDeps([71,1,2,3]))),ti=o.lazy(()=>m(()=>import("./TwoFactorVerify-C45m_MsY.js"),__vite__mapDeps([72,1,2,3]))),si=o.lazy(()=>m(()=>import("./MagicLink-DjIj4St_.js"),__vite__mapDeps([73,1,2,3])).then(e=>({default:e.MagicLink}))),ri=o.lazy(()=>m(()=>import("./AccessControl-ee2wZLjz.js"),__vite__mapDeps([74,1,2,16,3])).then(e=>({default:e.AccessControl}))),ni=o.lazy(()=>m(()=>import("./FacilityRegistration-BDnvL5yq.js"),__vite__mapDeps([75,1,2,9,3]))),ii=o.lazy(()=>m(()=>import("./TermsOfService-CcIW_dkF.js"),__vite__mapDeps([76,1,2,3])).then(e=>({default:e.TermsOfService}))),ai=o.lazy(()=>m(()=>import("./PrivacyPolicy-fNr4ulyC.js"),__vite__mapDeps([77,1,2,3])).then(e=>({default:e.PrivacyPolicy}))),oi=o.lazy(()=>m(()=>import("./Contact-Ci1vdvgp.js"),__vite__mapDeps([78,1,2,9,3])).then(e=>({default:e.Contact}))),li=o.lazy(()=>m(()=>import("./BusinessInformation-D8vX3y7p.js"),__vite__mapDeps([79,1,2,3])).then(e=>({default:e.BusinessInformation}))),ci=o.lazy(()=>m(()=>import("./Deploy-CweYl02l.js"),__vite__mapDeps([80,1,2,81,3])).then(e=>({default:e.Deploy}))),ui=o.lazy(()=>m(()=>import("./DeploymentHistory-D0o52ISQ.js"),__vite__mapDeps([82,1,2,81,3])).then(e=>({default:e.DeploymentHistory}))),di=o.lazy(()=>m(()=>import("./NetlifySetupGuide-36j779_s.js"),__vite__mapDeps([83,1,2,3]))),hi=o.lazy(()=>m(()=>import("./PWASetupGuide-CiEcfE5D.js"),__vite__mapDeps([84,1,2,3]))),fi=o.lazy(()=>m(()=>import("./PWAImplementationGuide-2HdC3Nmv.js"),__vite__mapDeps([85,1,2,3]))),mi=o.lazy(()=>m(()=>import("./PWADocumentation-Bj-a0VwM.js"),__vite__mapDeps([86,1,2,3]))),pi=o.lazy(()=>m(()=>import("./PWATestingSuite-BJasLg0h.js"),__vite__mapDeps([87,1,2,3]))),yi=o.lazy(()=>m(()=>import("./PWALighthouseAudit-CRRf2nyN.js"),__vite__mapDeps([88,1,2,3]))),gi=o.lazy(()=>m(()=>import("./PWADeploymentGuide-CVM3TjEf.js"),__vite__mapDeps([89,1,2,3])));function ms(e){try{const t=window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch{return!1}}const $e={};function xi(e,t="localStorage"){try{return ms(t)?window[t].getItem(e):$e[e]||null}catch(r){return console.warn(`Error accessing ${t}:`,r),$e[e]||null}}function Gi(e,t,r="localStorage"){try{return ms(r)?(window[r].setItem(e,t),!0):($e[e]=t,!0)}catch(n){return console.warn(`Error writing to ${r}:`,n),$e[e]=t,!1}}function vi(){const[e,t]=o.useState(""),[r,n]=o.useState(""),[i,a]=o.useState(!1);o.useEffect(()=>{const l=xi("lastUsedEmail");l&&t(l)},[]);const u=async l=>{l.preventDefault(),a(!0),n("");const{error:h}=await L.auth.resetPasswordForEmail(e,{redirectTo:window.location.origin+"/reset-password"});n(h?"エラー: "+h.message:"パスワードリセット用のメールを送信しました。メールをご確認ください。"),a(!1)};return s.jsxs("div",{className:"max-w-md mx-auto mt-10 p-6 bg-white rounded shadow",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"パスワードリセットメール送信"}),r&&s.jsx("div",{className:"mb-4 text-blue-500",children:r}),s.jsxs("form",{onSubmit:u,children:[s.jsxs("label",{className:"block mb-2",children:["メールアドレス",s.jsx("input",{type:"email",className:"w-full border p-2 rounded mt-1",value:e,onChange:l=>t(l.target.value),required:!0})]}),s.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 rounded mt-4",disabled:i,children:i?"送信中...":"メールを送信"})]})]})}function Lt(){const e=window.location.hash.replace("#",""),t=new URLSearchParams(e);let r=t.get("access_token")||t.get("token"),n=t.get("type");if(!r||!n){const i=new URLSearchParams(window.location.search);r=r||i.get("access_token")||i.get("token"),n=n||i.get("type")}return{accessToken:r,type:n}}const wi=()=>{const e=Bt(),[t,r]=o.useState(""),[n,i]=o.useState(""),[a,u]=o.useState(!1),[{accessToken:l,type:h},d]=o.useState(Lt()),[p,x]=o.useState(!1);o.useEffect(()=>{d(Lt())},[]),o.useEffect(()=>{(async()=>{if(h==="recovery"&&l){const{error:b}=await L.auth.exchangeCodeForSession(l);b?(i("セッションの設定に失敗しました。再度パスワードリセットを行ってください。"),x(!1)):x(!0)}else i("セッションの設定に失敗しました。再度パスワードリセットを行ってください。"),x(!1)})()},[h,l]);const g=async w=>{w.preventDefault(),u(!0),i("");const{error:b}=await L.auth.updateUser({password:t});b?i("エラー: "+b.message):(i("パスワードが変更されました。ログイン画面に戻ります。"),setTimeout(()=>e("/login"),2e3)),u(!1)};return s.jsxs("div",{className:"max-w-md mx-auto mt-10 p-6 bg-white rounded shadow",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"パスワード再設定"}),n&&s.jsx("div",{className:"mb-4 text-red-500",children:n}),p&&s.jsxs("form",{onSubmit:g,children:[s.jsxs("label",{className:"block mb-2",children:["新しいパスワード",s.jsx("input",{type:"password",className:"w-full border p-2 rounded mt-1",value:t,onChange:w=>r(w.target.value),required:!0,minLength:6})]}),s.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 rounded mt-4",disabled:a,children:a?"送信中...":"パスワードを変更"})]})]})},vt=({message:e="ロード中..."})=>{const t=window.location.pathname.includes("/payment")||window.location.pathname.includes("/checkout")||window.location.pathname.includes("/subscription")||window.location.search.includes("success=true")||window.location.search.includes("canceled=true");return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 mb-2",children:e}),t&&s.jsx("p",{className:"text-sm text-gray-500",children:"決済後の処理を行っています..."})]})})},P=({children:e})=>{const{user:t,isAuthenticated:r,loading:n}=Ke();return n?s.jsx(vt,{}):t?r?s.jsx(s.Fragment,{children:e}):s.jsx(at,{to:"/login",state:{from:window.location.pathname},replace:!0}):s.jsx(at,{to:"/login",state:{from:window.location.pathname},replace:!0})},bi=()=>(o.useEffect(()=>{window.location.href=`/magic-link${window.location.hash}`},[]),s.jsx(vt,{}));function ji(){return o.useEffect(()=>{{const e=()=>console.log("🌐 Network: Online"),t=()=>console.warn("🔌 Network: Offline");return window.addEventListener("online",e),window.addEventListener("offline",t),(()=>{if("PerformanceObserver"in window){const n=new PerformanceObserver(i=>{i.getEntries().forEach(a=>{a.entryType==="measure"&&console.log(`📊 Performance: ${a.name} - ${a.duration.toFixed(2)}ms`)})});try{n.observe({entryTypes:["measure","navigation"]})}catch{}}})(),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}},[]),s.jsxs(s.Fragment,{children:[s.jsx(Yr,{children:s.jsx(o.Suspense,{fallback:s.jsx(vt,{message:"ページを読み込み中..."}),children:s.jsxs(Os,{children:[s.jsx(f,{path:"/",element:s.jsx(sn,{})}),s.jsx(f,{path:"/login",element:s.jsx(rn,{})}),s.jsx(f,{path:"/register",element:s.jsx(nn,{})}),s.jsx(f,{path:"/reset-password",element:s.jsx(wi,{})}),s.jsx(f,{path:"/forgot-password",element:s.jsx(vi,{})}),s.jsx(f,{path:"/parks/:parkId",element:s.jsx(dn,{})}),s.jsx(f,{path:"/parks/rules",element:s.jsx(hn,{})}),s.jsx(f,{path:"/shop",element:s.jsx(wn,{})}),s.jsx(f,{path:"/shop/product/:productId",element:s.jsx(bn,{})}),s.jsx(f,{path:"/privacy",element:s.jsx(ai,{})}),s.jsx(f,{path:"/terms",element:s.jsx(ii,{})}),s.jsx(f,{path:"/contact",element:s.jsx(oi,{})}),s.jsx(f,{path:"/magic-link",element:s.jsx(si,{})}),s.jsx(f,{path:"/payment-confirmation",element:s.jsx(Mn,{})}),s.jsx(f,{path:"/business-information",element:s.jsx(li,{})}),s.jsx(f,{path:"/news",element:s.jsx(An,{})}),s.jsx(f,{path:"/news/:newsId",element:s.jsx(Sn,{})}),s.jsx(f,{path:"/news/park/:parkId",element:s.jsx(mn,{})}),s.jsx(f,{path:"/dog/:id",element:s.jsx(Rt,{})}),s.jsx(f,{path:"/dog-profile/:dogId",element:s.jsx(Rt,{})}),s.jsx(f,{path:"/dog-info",element:s.jsx(In,{})}),s.jsx(f,{path:"/dog-info/foods",element:s.jsx(On,{})}),s.jsx(f,{path:"/dog-info/vaccine",element:s.jsx(Nn,{})}),s.jsx(f,{path:"/dog-info/breeds",element:s.jsx(Tn,{})}),s.jsx(f,{path:"/dog-info/parasite",element:s.jsx(Dn,{})}),s.jsx(f,{path:"/dog-info/snack",element:s.jsx(Cn,{})}),s.jsx(f,{path:"/dog-info/show",element:s.jsx(kn,{})}),s.jsx(f,{path:"/netlify-setup-guide",element:s.jsx(di,{})}),s.jsx(f,{path:"/pwa-setup-guide",element:s.jsx(hi,{})}),s.jsx(f,{path:"/pwa-implementation-guide",element:s.jsx(fi,{})}),s.jsx(f,{path:"/pwa-documentation",element:s.jsx(mi,{})}),s.jsx(f,{path:"/pwa-testing-suite",element:s.jsx(pi,{})}),s.jsx(f,{path:"/pwa-lighthouse-audit",element:s.jsx(yi,{})}),s.jsx(f,{path:"/pwa-deployment-guide",element:s.jsx(gi,{})}),s.jsx(f,{path:"/auth/callback",element:s.jsx(bi,{})}),s.jsx(f,{path:"/dashboard",element:s.jsx(P,{children:s.jsx(an,{})})}),s.jsx(f,{path:"/profile-settings",element:s.jsx(P,{children:s.jsx(on,{})})}),s.jsx(f,{path:"/liked-dogs",element:s.jsx(P,{children:s.jsx(un,{})})}),s.jsx(f,{path:"/register-dog",element:s.jsx(P,{children:s.jsx(cn,{})})}),s.jsx(f,{path:"/dog-management",element:s.jsx(P,{children:s.jsx(ln,{})})}),s.jsx(f,{path:"/parks/:parkId/reserve",element:s.jsx(P,{children:s.jsx(pn,{})})}),s.jsx(f,{path:"/parks/:parkId/manage",element:s.jsx(P,{children:s.jsx(vn,{})})}),s.jsx(f,{path:"/parks/:parkId/second-stage",element:s.jsx(P,{children:s.jsx(xn,{})})}),s.jsx(f,{path:"/park-registration-agreement",element:s.jsx(P,{children:s.jsx(gn,{})})}),s.jsx(f,{path:"/register-park",element:s.jsx(P,{children:s.jsx(yn,{})})}),s.jsx(f,{path:"/dogpark-history",element:s.jsx(P,{children:s.jsx(fn,{})})}),s.jsx(f,{path:"/community",element:s.jsx(P,{children:s.jsx(En,{})})}),s.jsx(f,{path:"/cart",element:s.jsx(P,{children:s.jsx(jn,{})})}),s.jsx(f,{path:"/checkout",element:s.jsx(P,{children:s.jsx(_n,{})})}),s.jsx(f,{path:"/orders",element:s.jsx(P,{children:s.jsx(Pn,{})})}),s.jsx(f,{path:"/payment-setup",element:s.jsx(P,{children:s.jsx(Rn,{})})}),s.jsx(f,{path:"/payment-method-settings",element:s.jsx(P,{children:s.jsx(Ln,{})})}),s.jsx(f,{path:"/subscription",element:s.jsx(P,{children:s.jsx(Fn,{})})}),s.jsx(f,{path:"/owner-dashboard",element:s.jsx(P,{children:s.jsx(zn,{})})}),s.jsx(f,{path:"/owner-payment-system",element:s.jsx(P,{children:s.jsx(Vn,{})})}),s.jsx(f,{path:"/admin",element:s.jsx(P,{children:s.jsx(Hn,{})})}),s.jsx(f,{path:"/admin/users",element:s.jsx(P,{children:s.jsx($n,{})})}),s.jsx(f,{path:"/admin/users/:userId",element:s.jsx(P,{children:s.jsx(Wn,{})})}),s.jsx(f,{path:"/admin/parks",element:s.jsx(P,{children:s.jsx(Qn,{})})}),s.jsx(f,{path:"/admin/reservations",element:s.jsx(P,{children:s.jsx(Kn,{})})}),s.jsx(f,{path:"/admin/sales",element:s.jsx(P,{children:s.jsx(Bn,{})})}),s.jsx(f,{path:"/admin/management",element:s.jsx(P,{children:s.jsx(Un,{})})}),s.jsx(f,{path:"/admin/tasks",element:s.jsx(P,{children:s.jsx(qn,{})})}),s.jsx(f,{path:"/admin/shop",element:s.jsx(P,{children:s.jsx(Gn,{})})}),s.jsx(f,{path:"/admin/revenue",element:s.jsx(P,{children:s.jsx(Xn,{})})}),s.jsx(f,{path:"/admin/news",element:s.jsx(P,{children:s.jsx(Zn,{})})}),s.jsx(f,{path:"/admin/vaccine-approval",element:s.jsx(P,{children:s.jsx(Jn,{})})}),s.jsx(f,{path:"/admin/facility-approval",element:s.jsx(P,{children:s.jsx(Yn,{})})}),s.jsx(f,{path:"/facility-registration",element:s.jsx(P,{children:s.jsx(ni,{})})}),s.jsx(f,{path:"/two-factor-setup",element:s.jsx(P,{children:s.jsx(ei,{})})}),s.jsx(f,{path:"/two-factor-verify",element:s.jsx(P,{children:s.jsx(ti,{})})}),s.jsx(f,{path:"/access-control",element:s.jsx(P,{children:s.jsx(ri,{})})}),s.jsx(f,{path:"/deploy",element:s.jsx(P,{children:s.jsx(ci,{})})}),s.jsx(f,{path:"/deployment-history",element:s.jsx(P,{children:s.jsx(ui,{})})}),s.jsx(f,{path:"*",element:s.jsx(at,{to:"/",replace:!0})})]})})}),s.jsx(tn,{}),s.jsx(en,{})]})}const _i=new sr({defaultOptions:{queries:{staleTime:1e3*60*5,gcTime:1e3*60*30,retry:(e,t)=>t?.status===401||t?.status===403?!1:e<3,retryDelay:e=>Math.min(1e3*2**e,3e4),refetchOnWindowFocus:!1,refetchOnReconnect:!0,refetchOnMount:!0},mutations:{retry:1,retryDelay:1e3}}});"serviceWorker"in navigator&&window.addEventListener("load",async()=>{try{const e=await navigator.serviceWorker.register("/sw.js",{scope:"/"});console.log("🎉 Service Worker registered successfully:",e.scope),e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{t.state==="installed"&&navigator.serviceWorker.controller&&(console.log("🆕 New version available"),Pi())})})}catch(e){console.error("❌ Service Worker registration failed:",e)}});window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),console.log("💾 PWA installable"),window.dispatchEvent(new Event("pwa-installable"))});window.addEventListener("appinstalled",()=>{console.log("🎉 PWA installed successfully")});window.addEventListener("error",e=>{console.error("❌ Global error:",e.error)});window.addEventListener("unhandledrejection",e=>{console.error("❌ Unhandled promise rejection:",e.reason)});function Pi(){const e=document.createElement("div");e.innerHTML=`
    <div style="
      position: fixed;
      top: 20px;
      right: 20px;
      background: #3b82f6;
      color: white;
      padding: 16px 24px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      z-index: 10000;
      font-family: system-ui, -apple-system, sans-serif;
      font-size: 14px;
      max-width: 320px;
    ">
      <div style="font-weight: 600; margin-bottom: 8px;">新バージョン利用可能</div>
      <div style="margin-bottom: 12px;">アプリの新しいバージョンが利用可能です。</div>
      <button onclick="window.location.reload()" style="
        background: rgba(255,255,255,0.2);
        border: none;
        color: white;
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 12px;
        margin-right: 8px;
      ">更新</button>
      <button onclick="this.parentElement.parentElement.remove()" style="
        background: none;
        border: none;
        color: rgba(255,255,255,0.8);
        cursor: pointer;
        font-size: 12px;
      ">後で</button>
    </div>
  `,document.body.appendChild(e),setTimeout(()=>{document.body.contains(e)&&document.body.removeChild(e)},1e4)}const Ei=ct.createRoot(document.getElementById("root")),Ai=s.jsx(Z.StrictMode,{children:s.jsx(nr,{client:_i,children:s.jsxs(xt,{children:[s.jsx(Cs,{children:s.jsx(Wr,{children:s.jsx(Lr,{children:s.jsx(ji,{})})})}),!1]})})});Ei.render(Ai);export{Br as B,fs as C,Dr as H,Ur as S,Gi as a,Mr as b,et as c,Qr as d,Vi as e,Ui as f,zi as g,Ci as h,Wi as i,ki as j,Ri as k,Te as l,qi as m,Ki as n,Hi as o,Mi as p,Li as q,Fi as r,L as s,Qi as t,Ke as u,$i as v,hs as w,Oi as x,Di as y,xi as z};
