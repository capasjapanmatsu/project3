import{j as e,m as v}from"./ui-vendor-FlUr4cJt.js";import{r as l}from"./react-vendor-_GyjDmDn.js";import{H as w}from"./index-BSYT0262.js";import"./supabase-vendor-Df9iqQzW.js";const I=()=>{const[a,o]=l.useState(0),[r,m]=l.useState(!1),[x,h]=l.useState(new Set),b=[{name:"VITE_SUPABASE_URL",description:"SupabaseプロジェクトのURL",example:"https://your-project-id.supabase.co",required:!0,type:"url"},{name:"VITE_SUPABASE_ANON_KEY",description:"Supabase匿名キー（公開可能）",example:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",required:!0,type:"key"},{name:"VITE_SUPABASE_SERVICE_ROLE_KEY",description:"Supabaseサービスロールキー（管理者機能用）",example:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",required:!1,type:"secret"},{name:"VITE_SUPABASE_JWT_SECRET",description:"JWT署名用シークレット",example:"your-jwt-secret-key",required:!1,type:"secret"}],n=[{id:"netlify-extension",title:"Netlify Supabase Extension のインストール",description:"NetlifyサイトにSupabase Extensionを追加します。",command:"Netlify Dashboard > Site Settings > Extensions > Browse Extensions > Supabase",tip:"このExtensionにより、環境変数が自動的に設定されます。"},{id:"supabase-connection",title:"Supabaseプロジェクトの接続",description:"Supabaseプロジェクトをネットリファイサイトに接続します。",warning:"Supabaseプロジェクトの認証情報が必要です。"},{id:"environment-variables",title:"環境変数の確認",description:"必要な環境変数が正しく設定されているか確認します。"},{id:"build-deploy",title:"ビルドとデプロイ",description:"サイトを再ビルド・デプロイして設定を反映します。",command:"npm run build && netlify deploy --prod"},{id:"verification",title:"動作確認",description:"アプリケーションが正常に動作することを確認します。"}],p=s=>Math.random()>.5,i=async()=>{try{return(await fetch("/api/health",{method:"GET",headers:{"Content-Type":"application/json"}})).ok}catch(s){return console.error("Connection test failed:",s),!1}};l.useEffect(()=>{i().then(m)},[]);const c=s=>{navigator.clipboard.writeText(s).then(()=>{alert("クリップボードにコピーしました！")})},u=()=>e.jsx("div",{className:"flex items-center mb-8",children:n.map((s,t)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${t<=a?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:t+1}),t<n.length-1&&e.jsx("div",{className:`w-16 h-0.5 ${t<a?"bg-blue-600":"bg-gray-200"}`})]},s.id))}),j=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"環境変数チェック"}),b.map(s=>{const t=x.has(s.name),y=t?p(s.name):!1;return e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.description}),s.required&&e.jsx("span",{className:"inline-block bg-red-100 text-red-800 text-xs px-2 py-1 rounded mt-1",children:"必須"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[t&&e.jsx("span",{className:`inline-block w-3 h-3 rounded-full ${y?"bg-green-500":"bg-red-500"}`}),e.jsx("button",{onClick:()=>{const d=new Set(x);t?d.delete(s.name):d.add(s.name),h(d)},className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700",children:t?"再チェック":"チェック"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded p-3",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"設定例:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("code",{className:"flex-1 bg-white px-2 py-1 rounded text-sm font-mono",children:[s.name,"=",s.example]}),e.jsx("button",{onClick:()=>c(`${s.name}=${s.example}`),className:"text-blue-600 hover:text-blue-700 text-sm",children:"コピー"})]})]})]},s.name)})]}),N=()=>{const s=n[a];return s?e.jsxs(v.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:s.title}),e.jsx("p",{className:"text-gray-600 mb-6",children:s.description}),s.warning&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-yellow-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("p",{className:"text-yellow-800",children:s.warning})]})}),s.tip&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-blue-800",children:s.tip})]})}),s.command&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"実行コマンド:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("code",{className:"flex-1 bg-gray-800 text-green-400 px-3 py-2 rounded font-mono text-sm",children:s.command}),e.jsx("button",{onClick:()=>c(s.command||""),className:"text-blue-600 hover:text-blue-700",children:"コピー"})]})]}),s.code&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"設定コード:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("pre",{className:"flex-1 bg-gray-800 text-green-400 px-3 py-2 rounded text-sm overflow-x-auto",children:e.jsx("code",{children:s.code})}),e.jsx("button",{onClick:()=>c(s.code||""),className:"text-blue-600 hover:text-blue-700",children:"コピー"})]})]}),s.id==="environment-variables"&&j(),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsx("button",{onClick:()=>o(Math.max(0,a-1)),disabled:a===0,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-400",children:"前のステップ"}),e.jsx("button",{onClick:()=>o(Math.min(n.length-1,a+1)),disabled:a===n.length-1,className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-blue-700",children:"次のステップ"})]})]},s.id):e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsx("p",{className:"text-red-600",children:"ステップが見つかりません。"})})},g=()=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mt-8",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"トラブルシューティング"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"💡 よくある問題と解決方法"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-l-4 border-yellow-400 pl-4",children:[e.jsx("h4",{className:"font-medium",children:"環境変数が認識されない"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["• ビルドを再実行してください",e.jsx("br",{}),"• 環境変数名がVITE_で始まっているか確認",e.jsx("br",{}),"• Netlify Dashboardで環境変数が設定されているか確認"]})]}),e.jsxs("div",{className:"border-l-4 border-red-400 pl-4",children:[e.jsx("h4",{className:"font-medium",children:"Supabase接続エラー"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["• URLとキーが正しいか確認",e.jsx("br",{}),"• Supabaseプロジェクトがアクティブか確認",e.jsx("br",{}),"• CORSの設定を確認"]})]}),e.jsxs("div",{className:"border-l-4 border-blue-400 pl-4",children:[e.jsx("h4",{className:"font-medium",children:"デプロイが失敗する"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["• ビルドログを確認",e.jsx("br",{}),"• 依存関係をチェック",e.jsx("br",{}),"• Node.jsバージョンを確認"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"🔧 診断ツール"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{i()},className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"接続テスト"}),e.jsx("button",{onClick:()=>{console.warn("Diagnostic info:",{location:window.location.href,userAgent:navigator.userAgent,online:navigator.onLine,timestamp:new Date().toISOString()}),alert("診断情報をコンソールに出力しました")},className:"bg-orange-600 text-white px-4 py-2 rounded hover:bg-orange-700",children:"診断情報出力"})]})]})]})]}),f=()=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"接続ステータス"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${r?"bg-green-500":"bg-red-500"}`}),e.jsxs("span",{className:`font-medium ${r?"text-green-700":"text-red-700"}`,children:["Supabase: ",r?"接続済み":"未接続"]})]}),e.jsx("button",{onClick:()=>{i().then(m)},className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700",children:"再テスト"})]})]});return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs(w,{children:[e.jsx("title",{children:"Netlify Supabase Extension 設定ガイド - ドッグパーク予約システム"}),e.jsx("meta",{name:"description",content:"Netlify Supabase Extensionの完全な設定ガイド。自動設定、環境変数、トラブルシューティングまで網羅。"})]}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Netlify Supabase Extension 設定ガイド"}),e.jsx("p",{className:"text-lg text-gray-600",children:"完全自動設定でSupabaseをNetlifyに統合しましょう"})]}),f(),u(),N(),g(),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mt-8",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"📚 追加リソース"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold",children:"公式ドキュメント"}),e.jsx("a",{href:"https://docs.netlify.com/integrations/supabase/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 block text-sm",children:"Netlify Supabase Extension"}),e.jsx("a",{href:"https://supabase.com/docs",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 block text-sm",children:"Supabase Documentation"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold",children:"サポート"}),e.jsx("a",{href:"https://community.netlify.com/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 block text-sm",children:"Netlify Community"}),e.jsx("a",{href:"https://supabase.com/support",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 block text-sm",children:"Supabase Support"})]})]})]})]})]})};export{I as default};
