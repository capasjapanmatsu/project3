/*! Build: 2025-07-17T07:59:15.523Z
Version: 0.0.0 */
import{r as s,u as e,j as t,aY as a}from"./vendor-react.D8SVeCGP.js";import{s as r}from"./utils.C9ZsMnW6.js";import{B as l}from"./components-admin.GT3qRZg5.js";import"./vendor-misc.qnLj5toF.js";import"./pages-dog.BrfoFXaJ.js";import"./vendor-supabase.RBPF72ft.js";import"./hooks.CTtJlocA.js";import"./vendor-stripe.B5MJ2ewd.js";function o(){const[o,i]=s.useState(null),[n,m]=s.useState(null),[c,d]=s.useState(null),[u,p]=s.useState(!1),j=e();return s.useEffect((()=>{(async()=>{var s;p(!0),d(null);try{const{data:e,error:t}=await r.auth.mfa.enroll({factorType:"totp",issuer:"DogParkJP",friendlyName:"My Device"});if(t)throw t;i((null==(s=null==e?void 0:e.totp)?void 0:s.qr_code)||null),m((null==e?void 0:e.id)||null)}catch(e){d(e.message||"2FAセットアップに失敗しました")}finally{p(!1)}})()}),[]),t.jsxs("div",{className:"max-w-md mx-auto p-8",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"2ファクタ認証セットアップ"}),u&&t.jsx("p",{children:"読み込み中..."}),c&&t.jsx("p",{className:"text-red-600 mb-4",children:c}),o&&t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"mb-2",children:"認証アプリでQRコードをスキャンしてください。"}),t.jsx("div",{className:"flex justify-center mb-4",children:t.jsx(a,{value:o,size:180})}),t.jsx(l,{onClick:()=>{n&&j(`/two-factor-verify?factorId=${n}`)},children:"次へ（認証コード入力）"})]})]})}export{o as default};
