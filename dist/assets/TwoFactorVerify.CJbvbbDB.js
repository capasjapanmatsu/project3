/*! Build: 2025-07-17T07:59:15.523Z
Version: 0.0.0 */
import{r as a,u as e,aF as t,aZ as s,j as r}from"./vendor-react.D8SVeCGP.js";import{s as o}from"./utils.C9ZsMnW6.js";import{B as l}from"./components-admin.GT3qRZg5.js";import"./vendor-misc.qnLj5toF.js";import"./pages-dog.BrfoFXaJ.js";import"./vendor-supabase.RBPF72ft.js";import"./hooks.CTtJlocA.js";import"./vendor-stripe.B5MJ2ewd.js";function n(){const[n,c]=a.useState(""),[i,m]=a.useState(null),[d,u]=a.useState(!1),[h,f]=a.useState(null),[p,x]=a.useState(!1),j=e(),g=t(),b=new URLSearchParams(g.search).get("factorId");return s.useEffect((()=>{(async()=>{if(b){u(!0),m(null);try{const{data:a,error:e}=await o.auth.mfa.challenge({factorId:b});if(e)throw e;f(a.id),x(!0)}catch(a){m(a.message||"チャレンジ作成に失敗しました")}finally{u(!1)}}})()}),[b]),r.jsxs("div",{className:"max-w-md mx-auto p-8",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"2ファクタ認証コード入力"}),r.jsx("p",{className:"mb-2",children:"認証アプリで生成された6桁のコードを入力してください。"}),r.jsx("input",{type:"text",value:n,onChange:a=>c(a.target.value),maxLength:6,className:"border px-2 py-1 mb-4 w-full text-center text-lg tracking-widest",placeholder:"123456",autoFocus:!0,disabled:!p}),i&&r.jsx("p",{className:"text-red-600 mb-4",children:i}),r.jsx(l,{onClick:async()=>{if(h&&b){u(!0),m(null);try{const{error:a}=await o.auth.mfa.verify({factorId:b,challengeId:h,code:n});if(a)throw a;j("/dashboard")}catch(a){m(a.message||"認証に失敗しました")}finally{u(!1)}}},disabled:d||6!==n.length||!p,children:"認証する"})]})}export{n as default};
