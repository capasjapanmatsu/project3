import{j as e,J as c,A as _,p as o,i as h,b as D,C as E,a7 as L}from"./ui-vendor-w2MLOks7.js";import{h as P,u as C,r,L as l}from"./react-vendor-_GyjDmDn.js";import{s as j,C as p,B as x}from"./index-pj4YkVsE.js";import"./supabase-vendor-Df9iqQzW.js";function q(){const{parkId:i}=P(),f=C(),[a,u]=r.useState(null),[n,N]=r.useState(null),[g,m]=r.useState(!0),[d,w]=r.useState("");r.useEffect(()=>{i&&b()},[i]);const b=async()=>{try{m(!0);const{data:s,error:t}=await j.from("new_park_openings").select("*").eq("id",i).single();if(t)throw t;if(u(s),s.park_id){const{data:k,error:y}=await j.from("dog_parks").select("*").eq("id",s.park_id).single();y||N(k)}}catch(s){console.error("Error fetching park opening detail:",s),w("新規オープン情報の取得に失敗しました。")}finally{m(!1)}},v=s=>new Date(s).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"});return g?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):d||!a?e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(l,{to:"/news",className:"flex items-center text-blue-600 hover:text-blue-800",children:[e.jsx(c,{className:"w-4 h-4 mr-2"}),"新着情報一覧に戻る"]})}),e.jsxs(p,{className:"p-6 text-center",children:[e.jsx(_,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-4",children:d||"新規オープン情報が見つかりませんでした"}),e.jsx(x,{onClick:()=>f("/news"),children:"新着情報一覧に戻る"})]})]}):e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(l,{to:"/news",className:"flex items-center text-blue-600 hover:text-blue-800",children:[e.jsx(c,{className:"w-4 h-4 mr-2"}),"新着情報一覧に戻る"]})}),e.jsxs(p,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsxs("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium flex items-center",children:[e.jsx(o,{className:"w-4 h-4 mr-1"}),"新規オープン"]}),e.jsxs("div",{className:"flex items-center text-gray-500 text-sm ml-auto",children:[e.jsx(h,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:v(a.created_at)})]})]}),e.jsxs("h1",{className:"text-2xl font-bold mb-6",children:[a.name,"がオープンしました"]}),e.jsx("div",{className:"mb-6",children:e.jsx("img",{src:a.image_url,alt:a.name,className:"w-full h-auto rounded-lg object-cover",onError:s=>{s.currentTarget.src="https://images.pexels.com/photos/1108099/pexels-photo-1108099.jpeg"}})}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(D,{className:"w-5 h-5 text-gray-500 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"住所"}),e.jsx("p",{className:"text-gray-700",children:a.address})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(h,{className:"w-5 h-5 text-gray-500 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"オープン日"}),e.jsx("p",{className:"text-gray-700",children:a.opening_date})]})]}),n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(E,{className:"w-5 h-5 text-gray-500 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"営業時間"}),e.jsx("p",{className:"text-gray-700",children:"24時間営業"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(o,{className:"w-5 h-5 text-gray-500 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"施設情報"}),e.jsx("p",{className:"text-gray-700",children:n.description}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:Object.entries({parking:"駐車場",shower:"シャワー設備",restroom:"トイレ",agility:"アジリティ設備",rest_area:"休憩スペース",water_station:"給水設備"}).map(([s,t])=>n.facilities[s]&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),e.jsx("span",{children:t})]},s))})]})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-8",children:[e.jsx(l,{to:"/news",children:e.jsxs(x,{variant:"secondary",children:[e.jsx(c,{className:"w-4 h-4 mr-2"}),"新着情報一覧に戻る"]})}),a.park_id&&e.jsx(l,{to:`/parks/${a.park_id}`,children:e.jsxs(x,{children:["施設詳細を見る",e.jsx(L,{className:"w-4 h-4 ml-2"})]})})]})]})]})}export{q as NewParkDetail};
