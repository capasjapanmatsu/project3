var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(s,a,t)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,c=(e,s)=>{for(var a in s||(s={}))l.call(s,a)&&i(e,a,s[a]);if(t)for(var a of t(s))r.call(s,a)&&i(e,a,s[a]);return e},n=(e,t)=>s(e,a(t)),d=(e,s,a)=>new Promise((t,l)=>{var r=e=>{try{c(a.next(e))}catch(s){l(s)}},i=e=>{try{c(a.throw(e))}catch(s){l(s)}},c=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,i);c((a=a.apply(e,s)).next())});import{u as x,j as o,m,C as h,f as u,p,c as j,d as b,B as g,e as N,g as f,t as y,s as v,i as w}from"./index.CQlxbczY.js";import{r as _}from"./vendor.CKEClKZl.js";import{c as k,u as S,L as C}from"./router.B_7Atevv.js";import{K as I,g as P,al as T,C as E,R as D,A as O,G as $,i as q,z,n as A,b as H,r as L,w as M,v as R,e as Q,F as U,ag as B,U as F,ak as J,X as Y,am as G,p as K}from"./ui.C72fRZ1L.js";import{A as W}from"./index.DUBxXSX5.js";import"./supabase.X3H3st79.js";function Z({lockId:e,parkName:s="ドッグパーク",purpose:a="entry",className:t="",onSuccess:l,onError:r,reservationId:i}){const{user:c}=x(),[n,k]=_.useState(null),[S,C]=_.useState(null),[z,A]=_.useState(null),[H,L]=_.useState(!1),[M,R]=_.useState(null),[Q,U]=_.useState(!1),[B,F]=_.useState(!1),[J,Y]=_.useState(!1),[G,K]=_.useState(""),[Z,V]=_.useState(!1),X=e=>d(this,null,function*(){try{const{data:s,error:a}=yield v.from("reservations").select("\n          *,\n          dog_park:dog_parks(*),\n          dog:dogs(*)\n        ").eq("id",e).single();return a?null:s}catch(s){return null}});_.useEffect(()=>{if(n&&S){const e=setInterval(()=>{const s=new Date,a=S.getTime()-s.getTime();if(a<=0)A("期限切れ"),k(null),C(null),clearInterval(e);else{const e=Math.floor(a/6e4),s=Math.floor(a%6e4/1e3);A(`${e}:${s.toString().padStart(2,"0")}`)}},1e3);return()=>clearInterval(e)}},[n,S]);const ee=()=>d(this,null,function*(){if(c){L(!0),R(null);try{const{data:{session:s}}=yield v.auth.getSession();if(!(null==s?void 0:s.access_token))throw new Error("認証が必要です");let t=5,r=null;if(i){const e=yield X(i);if(e&&"whole_facility"===e.reservation_type&&(r=(e=>{var s,a;try{const t=new Date(e.date),l=e.start_time.split(":").map(Number),r=null!=(s=l[0])?s:0,i=null!=(a=l[1])?a:0;return t.setHours(r,i,0,0),new Date(t.getTime()+60*e.duration*60*1e3)}catch(t){return null}})(e),r)){const e=new Date,s=r.getTime()-e.getTime();t=Math.max(1,Math.ceil(s/6e4))}}const c=yield fetch("/functions/v1/generate-pin",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.access_token}`},body:JSON.stringify({lock_id:e,purpose:a,expiry_minutes:t,reservation_id:i||void 0})});if(!c.ok){const e=yield c.json();throw new Error(e.error||"PINコードの生成に失敗しました")}const{pin:n,expires_at:d}=yield c.json();k(n),C(new Date(d)),V(!0),F(!0),yield w(),l&&l(n),setTimeout(()=>{F(!1),V(!1)},3e3)}catch(s){const e=s instanceof Error?s.message:"PINコードの生成に失敗しました";if(e.startsWith("PAYMENT_REQUIRED:")){const s=e.replace("PAYMENT_REQUIRED:","").trim();K(s),Y(!0),R(null)}else R(e),Y(!1);r&&r(e)}finally{L(!1)}}});return o.jsx(m.div,{className:t,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:o.jsx(h,{className:"p-4",children:o.jsxs("div",{className:"text-center",children:[o.jsxs(m.h3,{className:"text-lg font-semibold mb-4 flex items-center justify-center",variants:u,initial:"initial",animate:"animate",children:[o.jsx(m.div,{animate:Z?{rotate:[0,15,-15,0]}:{},transition:{duration:.6,repeat:2},children:o.jsx(I,{className:"w-5 h-5 text-blue-600 mr-2"})}),s,"の","entry"===a?"入口":"出口"]}),o.jsx(W,{mode:"wait",children:n?o.jsxs(m.div,{className:"space-y-4",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},children:[o.jsxs(m.div,{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-lg border-2 border-blue-200 mx-auto",variants:p,initial:"initial",animate:Z?"animate":"initial",children:[o.jsx("p",{className:"text-sm text-blue-800 mb-1",children:"PINコード:"}),o.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[o.jsx(m.p,{className:"text-3xl font-bold tracking-widest text-blue-700",initial:{scale:1},animate:Z?{scale:[1,1.1,1]}:{},transition:{duration:.6},children:n}),o.jsx(m.button,{onClick:()=>d(this,null,function*(){if(n)try{yield navigator.clipboard.writeText(n),U(!0),yield y(),setTimeout(()=>U(!1),2e3)}catch(e){}}),className:"p-1 text-blue-600 hover:text-blue-800 transition-colors",title:"コピー",variants:j,whileHover:"hover",whileTap:"tap",children:o.jsx(W,{mode:"wait",children:Q?o.jsx(m.div,{variants:b,initial:"initial",animate:"animate",exit:{scale:0,opacity:0},children:o.jsx(P,{className:"w-5 h-5 text-green-600"})},"copied"):o.jsx(m.div,{variants:b,initial:"initial",animate:"animate",exit:{scale:0,opacity:0},children:o.jsx(T,{className:"w-5 h-5"})},"copy")})})]})]}),o.jsx(m.div,{className:"bg-yellow-50 p-2 rounded-lg",variants:u,children:o.jsxs("div",{className:"flex items-center justify-center space-x-2 text-yellow-800",children:[o.jsx(m.div,{animate:{rotate:[0,360]},transition:{duration:2,repeat:1/0,ease:"linear"},children:o.jsx(E,{className:"w-4 h-4"})}),o.jsxs("span",{className:"font-medium",children:["有効期限: ",z]})]})}),o.jsx("div",{className:"flex justify-center space-x-3",children:o.jsx(m.div,{variants:j,whileHover:"hover",whileTap:"tap",children:o.jsxs(g,{onClick:()=>{ee()},variant:"secondary",size:"sm",isLoading:H,children:[o.jsx(D,{className:"w-4 h-4 mr-1"}),"再生成"]})})}),o.jsxs(m.p,{className:"text-xs text-gray-500",variants:u,children:["entry"===a?"入場":"退場","時にスマートロックのキーパッドに上記のPINコードを入力してください"]})]},"pin-display"):o.jsxs(m.div,{className:"space-y-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[o.jsxs(m.p,{className:"text-gray-600 mb-4",variants:u,children:["entry"===a?"入場":"退場","用のPINコードを生成します。",o.jsx("br",{}),"生成されたPINコードは5分間有効です。"]}),o.jsxs(W,{children:[M&&o.jsxs(m.div,{className:"bg-red-50 p-3 rounded-lg flex items-center justify-center text-red-600",variants:N,initial:"initial",animate:"shake",exit:{opacity:0,y:-10},children:[o.jsx(O,{className:"w-4 h-4 mr-1"}),o.jsx("span",{children:M})]}),J&&o.jsxs(m.div,{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",variants:f,initial:"initial",animate:"animate",exit:"exit",children:[o.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[o.jsx($,{className:"w-6 h-6 text-blue-600 mt-1 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"決済が必要です"}),o.jsx("p",{className:"text-sm text-blue-800 mb-4",children:G})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(m.div,{variants:j,whileHover:"hover",whileTap:"tap",children:o.jsxs(g,{onClick:()=>window.location.href="/subscription",className:"w-full bg-purple-600 hover:bg-purple-700",children:[o.jsx($,{className:"w-4 h-4 mr-2"}),"サブスクリプションに加入（¥3,800/月）"]})}),o.jsx(m.div,{variants:j,whileHover:"hover",whileTap:"tap",children:o.jsxs(g,{onClick:()=>window.location.href="/parks",variant:"secondary",className:"w-full",children:[o.jsx(q,{className:"w-4 h-4 mr-2"}),"1日券を購入（¥800）"]})})]}),o.jsxs("p",{className:"text-xs text-blue-700 mt-3",children:["• サブスクリプション：全国のドッグランが使い放題",o.jsx("br",{}),"• 1日券：選択したドッグランで24時間利用可能"]})]}),B&&o.jsxs(m.div,{className:"bg-green-50 p-3 rounded-lg flex items-center justify-center text-green-600",variants:b,initial:"initial",animate:"animate",exit:{opacity:0,scale:.8},children:[o.jsx(P,{className:"w-4 h-4 mr-1"}),o.jsx("span",{children:"🎉 PINコードを生成しました"})]})]}),o.jsx(m.div,{variants:j,whileHover:"hover",whileTap:"tap",children:o.jsxs(g,{onClick:()=>{ee()},isLoading:H,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:[o.jsx(I,{className:"w-4 h-4 mr-2"}),"🚀 ","entry"===a?"入場":"退場","用PINを生成"]})})]},"pin-generate")})]})})})}const V=e=>{if(!e)return null;return new Date(e).toISOString()};function X(){const{parkId:e}=k(),{user:s}=x(),a=S(),[t,l]=_.useState(null),[r,i]=_.useState(!0),[m,u]=_.useState(""),[p,j]=_.useState(""),[b,N]=_.useState("overview"),[f,y]=_.useState([]),[w,T]=_.useState(null),[D,$]=_.useState("entry"),[W,X]=_.useState([]),[ee,se]=_.useState(!1),[ae,te]=_.useState({title:"",description:"",start_date:"",end_date:"",is_emergency:!1,notify_users:!0}),[le,re]=_.useState(!1),[ie,ce]=_.useState(!1),[ne,de]=_.useState(!1),[xe,oe]=_.useState(!1),[me,he]=_.useState({max_capacity:0,facilities:{parking:!1,shower:!1,restroom:!1,agility:!1,rest_area:!1,water_station:!1},large_dog_area:!1,small_dog_area:!1,private_booths:!1,private_booth_count:0,facility_details:"",description:""});_.useEffect(()=>{s&&e?ue():a("/owner-dashboard")},[s,e,a]);const ue=()=>d(this,null,function*(){try{i(!0);const{data:t,error:r}=yield v.from("dog_parks").select("*").eq("id",e).eq("owner_id",null==s?void 0:s.id).single();if(r)throw r;if(!t)return void a("/owner-dashboard");l(t),he({max_capacity:t.max_capacity||0,facilities:t.facilities||{parking:!1,shower:!1,restroom:!1,agility:!1,rest_area:!1,water_station:!1},large_dog_area:t.large_dog_area||!1,small_dog_area:t.small_dog_area||!1,private_booths:t.private_booths||!1,private_booth_count:t.private_booth_count||0,facility_details:t.facility_details||"",description:t.description||""});const{data:c,error:n}=yield v.from("smart_locks").select("*").eq("park_id",e);if(n)throw n;y(c||[]),c&&c.length>0&&T(c[0]),yield pe()}catch(t){u("データの取得に失敗しました。")}finally{i(!1)}}),pe=()=>d(this,null,function*(){try{const{data:s,error:a}=yield v.from("park_maintenance").select("*").eq("park_id",e).order("start_date",{ascending:!1});if(a)throw a;X(s||[])}catch(s){}}),je=e=>d(this,null,function*(){if(window.confirm("このメンテナンススケジュールを削除しますか？"))try{const{error:s}=yield v.from("park_maintenance").delete().eq("id",e);if(s)throw s;j("メンテナンススケジュールを削除しました。"),yield pe()}catch(s){u("メンテナンススケジュールの削除に失敗しました。")}}),be=e=>e?new Date(e).toLocaleString("ja-JP",{year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Asia/Tokyo"}):"未設定";return r?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t?o.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center space-x-4 mb-6",children:o.jsxs(C,{to:"/owner-dashboard",className:"flex items-center text-blue-600 hover:text-blue-800",children:[o.jsx(z,{className:"w-4 h-4 mr-2"}),"ダッシュボードに戻る"]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[o.jsx(A,{className:"w-8 h-8 text-blue-600 mr-3"}),t.name]}),o.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[o.jsx(H,{className:"w-4 h-4 text-gray-500"}),o.jsx("p",{className:"text-gray-600",children:t.address})]})]}),o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx("div",{children:"approved"===t.status&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"text-sm font-medium text-gray-600",children:"公開状況:"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("button",{onClick:()=>d(this,null,function*(){if(t){oe(!0),u(""),j("");try{const e=!t.is_public,{error:s}=yield v.from("dog_parks").update({is_public:e}).eq("id",t.id);if(s)throw s;l(s=>s?n(c({},s),{is_public:e}):null),j(e?"ドッグランを公開状態にしました。一般リストに表示されます。":"ドッグランを非公開状態にしました。一般リストに表示されません。")}catch(e){u("公開状態の変更に失敗しました。")}finally{oe(!1)}}}),disabled:xe,className:`\n                      relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\n                      ${t.is_public?"bg-blue-600":"bg-gray-200"}\n                      ${xe?"opacity-50 cursor-not-allowed":"cursor-pointer"}\n                    `,title:t.is_public?"公開中（クリックで非公開）":"非公開（クリックで公開）",children:[o.jsx("span",{className:"sr-only",children:"公開状態を切り替える"}),o.jsx("span",{className:`\n                        inline-block h-4 w-4 transform rounded-full bg-white transition-transform\n                        ${t.is_public?"translate-x-6":"translate-x-1"}\n                      `})]}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:t.is_public?"公開中":"非公開"})]})]})}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx(C,{to:`/parks/${t.id}`,children:o.jsxs(g,{variant:"secondary",className:"min-w-[100px]",children:[o.jsx(L,{className:"w-4 h-4 mr-2"}),"公開ページ"]})}),o.jsxs(g,{onClick:()=>ce(!0),className:"min-w-[100px]",children:[o.jsx(M,{className:"w-4 h-4 mr-2"}),"設定編集"]})]})]})]}),m&&o.jsxs("div",{className:"bg-red-100 border border-red-300 text-red-800 rounded-lg p-4 flex items-start",children:[o.jsx(O,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),o.jsx("p",{children:m})]}),p&&o.jsxs("div",{className:"bg-green-100 border border-green-300 text-green-800 rounded-lg p-4 flex items-start",children:[o.jsx(P,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0"}),o.jsx("p",{children:p})]}),o.jsxs("div",{className:"flex space-x-4 border-b",children:[o.jsxs("button",{className:"px-4 py-2 font-medium "+("overview"===b?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>N("overview"),children:[o.jsx(A,{className:"w-4 h-4 inline mr-2"}),"概要"]}),o.jsxs("button",{className:"px-4 py-2 font-medium "+("stats"===b?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>N("stats"),children:[o.jsx(R,{className:"w-4 h-4 inline mr-2"}),"統計・収益"]}),o.jsxs("button",{className:"px-4 py-2 font-medium "+("pins"===b?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>N("pins"),children:[o.jsx(I,{className:"w-4 h-4 inline mr-2"}),"PINコード管理"]}),o.jsxs("button",{className:"px-4 py-2 font-medium "+("settings"===b?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>N("settings"),children:[o.jsx(Q,{className:"w-4 h-4 inline mr-2"}),"設定"]})]}),"overview"===b&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs(h,{className:"p-6",children:[o.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[o.jsx(U,{className:"w-6 h-6 text-blue-600 mr-2"}),"基本情報"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-3",children:"施設情報"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"住所:"})," ",t.address]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"ステータス:"})," ","approved"===t.status?"運営中":"審査中"]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"料金:"})," ¥",t.price,"/日"]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"最大収容人数:"})," ",t.max_capacity,"人"]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"現在の利用者数:"})," ",t.current_occupancy,"人"]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"評価:"})," ★",t.average_rating.toFixed(1)," (",t.review_count,"件)"]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-3",children:"設備情報"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries({parking:"駐車場",shower:"シャワー設備",restroom:"トイレ",agility:"アジリティ設備",rest_area:"休憩スペース",water_station:"給水設備"}).map(([e,s])=>o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-4 h-4 rounded "+(t.facilities[e]?"bg-green-500":"bg-gray-300")}),o.jsx("span",{className:"text-sm",children:s})]},e))}),o.jsxs("div",{className:"mt-4 space-y-2",children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"大型犬エリア:"})," ",t.large_dog_area?"あり":"なし"]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"小型犬エリア:"})," ",t.small_dog_area?"あり":"なし"]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"プライベートブース:"})," ",t.private_booths?`${t.private_booth_count}室`:"なし"]})]})]})]})]}),o.jsxs(h,{className:"p-6",children:[o.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[o.jsx(q,{className:"w-6 h-6 text-blue-600 mr-2"}),"今日の統計"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[o.jsx(q,{className:"w-5 h-5 text-blue-600"}),o.jsx("h4",{className:"font-medium text-blue-900",children:"今日の予約"})]}),o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"5件"}),o.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"前日比 +2件"})]}),o.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[o.jsx(B,{className:"w-5 h-5 text-green-600"}),o.jsx("h4",{className:"font-medium text-green-900",children:"今日の収益"})]}),o.jsx("p",{className:"text-2xl font-bold text-green-600",children:"¥4,000"}),o.jsx("p",{className:"text-xs text-green-700 mt-1",children:"前日比 +¥1,600"})]}),o.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[o.jsx(F,{className:"w-5 h-5 text-purple-600"}),o.jsx("h4",{className:"font-medium text-purple-900",children:"利用者数"})]}),o.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[t.current_occupancy,"人"]}),o.jsxs("p",{className:"text-xs text-purple-700 mt-1",children:["最大: ",t.max_capacity,"人"]})]})]})]}),o.jsxs(h,{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[o.jsx(J,{className:"w-6 h-6 text-blue-600 mr-2"}),"施設画像"]}),o.jsx(C,{to:`/parks/${t.id}/second-stage`,children:o.jsxs(g,{size:"sm",children:[o.jsx(M,{className:"w-4 h-4 mr-2"}),"画像を管理"]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.image_url?o.jsx("div",{className:"h-48 rounded-lg overflow-hidden",children:o.jsx("img",{src:t.image_url,alt:`${t.name} - メイン画像`,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://via.placeholder.com/400x300?text=No+Image"}})}):o.jsx("div",{className:"h-48 bg-gray-100 rounded-lg flex items-center justify-center",children:o.jsx("p",{className:"text-gray-500",children:"メイン画像なし"})}),t.cover_image_url?o.jsx("div",{className:"h-48 rounded-lg overflow-hidden",children:o.jsx("img",{src:t.cover_image_url,alt:`${t.name} - カバー画像`,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://via.placeholder.com/400x300?text=No+Image"}})}):o.jsx("div",{className:"h-48 bg-gray-100 rounded-lg flex items-center justify-center",children:o.jsx("p",{className:"text-gray-500",children:"カバー画像なし"})}),o.jsx("div",{className:"h-48 bg-gray-100 rounded-lg flex items-center justify-center",children:o.jsxs(C,{to:`/parks/${t.id}/second-stage`,className:"text-blue-600 hover:text-blue-800 flex flex-col items-center",children:[o.jsx(J,{className:"w-8 h-8 mb-2"}),o.jsx("p",{children:"その他の画像を管理"})]})})]})]})]}),"stats"===b&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs(h,{className:"p-6",children:[o.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[o.jsx(R,{className:"w-6 h-6 text-blue-600 mr-2"}),"利用統計"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[o.jsx(q,{className:"w-5 h-5 text-blue-600"}),o.jsx("h4",{className:"font-medium text-blue-900",children:"今月の予約"})]}),o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"32件"}),o.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"前月比 +12%"})]}),o.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[o.jsx(B,{className:"w-5 h-5 text-green-600"}),o.jsx("h4",{className:"font-medium text-green-900",children:"今月の収益"})]}),o.jsx("p",{className:"text-2xl font-bold text-green-600",children:"¥25,600"}),o.jsx("p",{className:"text-xs text-green-700 mt-1",children:"前月比 +8%"})]}),o.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[o.jsx(F,{className:"w-5 h-5 text-purple-600"}),o.jsx("h4",{className:"font-medium text-purple-900",children:"利用者数"})]}),o.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"128人"}),o.jsx("p",{className:"text-xs text-purple-700 mt-1",children:"前月比 +15%"})]})]}),o.jsx("div",{className:"h-64 bg-gray-100 rounded-lg flex items-center justify-center",children:o.jsx("p",{className:"text-gray-500",children:"利用統計グラフ（実装予定）"})})]}),o.jsxs(h,{className:"p-6",children:[o.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[o.jsx(B,{className:"w-6 h-6 text-blue-600 mr-2"}),"収益情報"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[o.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:"収益配分"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-blue-800 mb-1",children:"オーナー取り分（80%）"}),o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"¥20,480"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-blue-800 mb-1",children:"プラットフォーム手数料（20%）"}),o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"¥5,120"})]})]})]}),o.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[o.jsx("h3",{className:"font-semibold text-green-900 mb-3",children:"収益内訳"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-green-800 mb-1",children:"通常利用"}),o.jsx("p",{className:"text-xl font-bold text-green-600",children:"¥12,800"}),o.jsx("p",{className:"text-xs text-green-700",children:"16件"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-green-800 mb-1",children:"施設貸し切り"}),o.jsx("p",{className:"text-xl font-bold text-green-600",children:"¥8,800"}),o.jsx("p",{className:"text-xs text-green-700",children:"2件"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-green-800 mb-1",children:"プライベートブース"}),o.jsx("p",{className:"text-xl font-bold text-green-600",children:"¥4,000"}),o.jsx("p",{className:"text-xs text-green-700",children:"2件"})]})]})]}),o.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[o.jsx("h3",{className:"font-semibold text-purple-900 mb-3",children:"振込情報"}),o.jsx("p",{className:"text-sm text-purple-800 mb-2",children:"振込は毎月15日に前月分を一括で行います。振込手数料は当社負担です。"}),o.jsx(C,{to:"/owner-payment-system",children:o.jsxs(g,{size:"sm",className:"bg-purple-600 hover:bg-purple-700",children:[o.jsx(B,{className:"w-4 h-4 mr-2"}),"振込情報を確認"]})})]})]})]})]}),"pins"===b&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs(h,{className:"p-6",children:[o.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[o.jsx(I,{className:"w-6 h-6 text-blue-600 mr-2"}),"オーナー用PINコード発行"]}),o.jsx("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(P,{className:"w-5 h-5 text-blue-600 mt-1 flex-shrink-0"}),o.jsxs("div",{className:"text-sm text-blue-800",children:[o.jsx("p",{className:"font-medium mb-1",children:"オーナー特権"}),o.jsx("p",{children:"オーナーは決済不要でPINコードを発行できます。施設の管理やメンテナンスに使用してください。"}),o.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[o.jsx("li",{children:"PINコードは5分間有効です"}),o.jsx("li",{children:"入場・退場それぞれでPINコードが必要です"}),o.jsx("li",{children:"スタッフと共有することもできます"}),o.jsx("li",{children:"管理用途なので決済は不要です"})]})]})]})}),o.jsxs("div",{className:"flex justify-center space-x-4 mb-4",children:[o.jsxs("button",{className:"px-6 py-3 rounded-lg flex items-center space-x-2 "+("entry"===D?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),onClick:()=>$("entry"),children:[o.jsx(z,{className:"w-5 h-5"}),o.jsx("span",{children:"入場"})]}),o.jsxs("button",{className:"px-6 py-3 rounded-lg flex items-center space-x-2 "+("exit"===D?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),onClick:()=>$("exit"),children:[o.jsx(z,{className:"w-5 h-5 rotate-180"}),o.jsx("span",{children:"退場"})]})]}),f.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"スマートロックを選択"}),o.jsx("select",{value:(null==w?void 0:w.id)||"",onChange:e=>{const s=f.find(s=>s.id===e.target.value);T(s||null)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:f.map(e=>o.jsx("option",{value:e.id,children:e.lock_name},e.id))})]}),w?o.jsx("div",{className:"mt-6",children:o.jsx(Z,{lockId:w.lock_id,parkName:t.name,purpose:D,onSuccess:e=>{j(`PINコードを生成しました: ${e}`),setTimeout(()=>{j("")},3e3)},onError:e=>{u(e),setTimeout(()=>{u("")},5e3)}})}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(I,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"スマートロックが設定されていません"}),o.jsx(g,{onClick:()=>N("settings"),children:"スマートロックを設定する"})]})]}),o.jsx(h,{className:"p-6 bg-blue-50 border-blue-200",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(I,{className:"w-6 h-6 text-blue-600 mt-1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"PINコードについて"}),o.jsxs("div",{className:"text-sm text-blue-800 space-y-2",children:[o.jsx("p",{children:"• 利用者はPINコードを使用して入退場します"}),o.jsx("p",{children:"• PINコードは5分間有効で、利用者が支払い後に発行されます"}),o.jsx("p",{children:"• オーナーは決済不要でPINコードを発行できます"}),o.jsx("p",{children:"• 施設貸し切りの場合、利用者は友達にPINコードを共有できます"})]})]})]})})]}),"settings"===b&&o.jsxs("div",{className:"space-y-6",children:[ie&&o.jsxs(h,{className:"p-6 bg-blue-50 border-blue-200",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h3",{className:"text-xl font-semibold text-blue-900",children:"施設情報の編集"}),o.jsx("button",{onClick:()=>ce(!1),className:"text-blue-600 hover:text-blue-800",children:o.jsx(Y,{className:"w-5 h-5"})})]}),o.jsxs("form",{onSubmit:e=>d(this,null,function*(){if(e.preventDefault(),t&&s){de(!0);try{if(me.max_capacity<1)throw new Error("収容人数は1人以上で入力してください。");if(me.private_booths&&me.private_booth_count<1)throw new Error("プライベートブースがある場合は、部屋数を1以上で入力してください。");const{error:e}=yield v.from("dog_parks").update({max_capacity:me.max_capacity,facilities:me.facilities,large_dog_area:me.large_dog_area,small_dog_area:me.small_dog_area,private_booths:me.private_booths,private_booth_count:me.private_booths?me.private_booth_count:0,facility_details:me.facility_details,description:me.description,updated_at:(new Date).toISOString()}).eq("id",t.id);if(e)throw e;j("施設情報を更新しました。"),ce(!1),yield ue(),setTimeout(()=>{j("")},3e3)}catch(a){u(a instanceof Error?a.message:"施設情報の更新に失敗しました。"),setTimeout(()=>{u("")},5e3)}finally{de(!1)}}}),className:"space-y-6",children:[o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"変更不可項目"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"住所:"})," ",t.address]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"料金:"})," ¥",t.price,"/日（全国統一料金）"]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最大収容人数 *"}),o.jsx("input",{type:"number",min:"1",max:"100",value:me.max_capacity,onChange:e=>he(s=>n(c({},s),{max_capacity:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"説明文"}),o.jsx("textarea",{value:me.description,onChange:e=>he(s=>n(c({},s),{description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"施設の特徴や利用案内など"})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"エリア設定"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("label",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",checked:me.large_dog_area,onChange:e=>he(s=>n(c({},s),{large_dog_area:e.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:"大型犬エリア"})]}),o.jsxs("label",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",checked:me.small_dog_area,onChange:e=>he(s=>n(c({},s),{small_dog_area:e.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:"小型犬エリア"})]})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"プライベートブース"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("label",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",checked:me.private_booths,onChange:e=>he(s=>n(c({},s),{private_booths:e.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:"プライベートブースあり"})]}),me.private_booths&&o.jsxs("div",{className:"ml-6",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"部屋数"}),o.jsx("input",{type:"number",min:"1",max:"10",value:me.private_booth_count,onChange:e=>he(s=>n(c({},s),{private_booth_count:parseInt(e.target.value)||0})),className:"w-24 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"設備情報"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries({parking:"駐車場",shower:"シャワー設備",restroom:"トイレ",agility:"アジリティ設備",rest_area:"休憩スペース",water_station:"給水設備"}).map(([e,s])=>o.jsxs("label",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",checked:me.facilities[e],onChange:s=>he(a=>n(c({},a),{facilities:n(c({},a.facilities),{[e]:s.target.checked})})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:s})]},e))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"設備詳細説明"}),o.jsx("textarea",{value:me.facility_details,onChange:e=>he(s=>n(c({},s),{facility_details:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"設備の詳細説明や利用案内など"})]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx(g,{type:"button",variant:"secondary",onClick:()=>ce(!1),children:"キャンセル"}),o.jsx(g,{type:"submit",isLoading:ne,className:"bg-blue-600 hover:bg-blue-700",children:"更新"})]})]})]}),o.jsxs(h,{className:"p-6",children:[o.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[o.jsx(Q,{className:"w-6 h-6 text-blue-600 mr-2"}),"施設設定"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[o.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:"基本設定"}),o.jsx("p",{className:"text-sm text-blue-800 mb-3",children:"施設の基本情報や設備情報を編集できます。住所と料金は変更できません。"}),o.jsxs(g,{size:"sm",onClick:()=>ce(!0),children:[o.jsx(M,{className:"w-4 h-4 mr-2"}),"基本情報を編集"]})]}),o.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[o.jsx("h3",{className:"font-semibold text-green-900 mb-3",children:"料金設定"}),o.jsx("p",{className:"text-sm text-green-800 mb-3",children:"料金体系は全国統一です。変更はできません。"}),o.jsxs("ul",{className:"text-sm text-green-800 space-y-1",children:[o.jsx("li",{children:"• 通常利用: ¥800/日（固定）"}),o.jsx("li",{children:"• 施設貸し切り: ¥4,400/時間（固定）"}),o.jsx("li",{children:"• プライベートブース: サブスク使い放題・1日券でも利用可能（追加料金なし）"})]})]}),o.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[o.jsx("h3",{className:"font-semibold text-purple-900 mb-3",children:"スマートロック設定"}),o.jsx("p",{className:"text-sm text-purple-800 mb-3",children:"スマートロックの設定を管理します。"}),o.jsxs(g,{size:"sm",className:"bg-purple-600 hover:bg-purple-700",children:[o.jsx(I,{className:"w-4 h-4 mr-2"}),"スマートロックを管理"]})]}),o.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[o.jsx("h3",{className:"font-semibold text-orange-900 mb-3",children:"営業時間設定"}),o.jsx("p",{className:"text-sm text-orange-800 mb-3",children:"営業時間は24時間です。変更はできません。"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(E,{className:"w-5 h-5 text-orange-600"}),o.jsx("span",{className:"font-medium",children:"24時間営業"})]})]})]})]}),o.jsxs(h,{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[o.jsx(G,{className:"w-6 h-6 text-blue-600 mr-2"}),"メンテナンス管理"]}),o.jsxs(g,{onClick:()=>se(!0),className:"bg-blue-600 hover:bg-blue-700",children:[o.jsx(K,{className:"w-4 h-4 mr-2"}),"メンテナンス予定を追加"]})]}),ee&&o.jsxs(h,{className:"p-4 mb-6 bg-blue-50 border-blue-200",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"新しいメンテナンス予定"}),o.jsx("button",{onClick:()=>se(!1),className:"text-blue-600 hover:text-blue-800",children:o.jsx(Y,{className:"w-5 h-5"})})]}),o.jsxs("form",{onSubmit:a=>d(this,null,function*(){if(a.preventDefault(),s&&e){re(!0);try{if(!ae.title||!ae.start_date||!ae.end_date)throw new Error("必須項目を入力してください。");const a=new Date(ae.start_date);if(new Date(ae.end_date)<=a)throw new Error("終了日時は開始日時より後に設定してください。");if(a<new Date)throw new Error("開始日時は現在時刻より後に設定してください。");const{error:t}=yield v.from("park_maintenance").insert({park_id:e,title:ae.title,description:ae.description,start_date:V(ae.start_date),end_date:V(ae.end_date),is_emergency:ae.is_emergency,notify_users:ae.notify_users,created_by:s.id});if(t)throw t;j("メンテナンススケジュールを作成しました。"),se(!1),te({title:"",description:"",start_date:"",end_date:"",is_emergency:!1,notify_users:!0}),yield pe()}catch(t){u(t instanceof Error?t.message:"メンテナンススケジュールの作成に失敗しました。")}finally{re(!1)}}}),className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"メンテナンス内容 *"}),o.jsx("input",{type:"text",value:ae.title,onChange:e=>te(s=>n(c({},s),{title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"例：設備点検・清掃作業",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"開始日時 * (日本時間)"}),o.jsx("input",{type:"datetime-local",value:ae.start_date,onChange:e=>te(s=>n(c({},s),{start_date:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"日本時間で入力してください"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"終了日時 * (日本時間)"}),o.jsx("input",{type:"datetime-local",value:ae.end_date,onChange:e=>te(s=>n(c({},s),{end_date:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"日本時間で入力してください"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"詳細説明"}),o.jsx("textarea",{value:ae.description,onChange:e=>te(s=>n(c({},s),{description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"メンテナンス内容の詳細説明（任意）"})]}),o.jsxs("div",{className:"flex items-center space-x-6",children:[o.jsxs("label",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",checked:ae.is_emergency,onChange:e=>te(s=>n(c({},s),{is_emergency:e.target.checked})),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:"緊急メンテナンス"})]}),o.jsxs("label",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",checked:ae.notify_users,onChange:e=>te(s=>n(c({},s),{notify_users:e.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:"ユーザーに通知"})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx(g,{type:"button",variant:"secondary",onClick:()=>se(!1),children:"キャンセル"}),o.jsx(g,{type:"submit",isLoading:le,className:"bg-blue-600 hover:bg-blue-700",children:"作成"})]})]})]}),o.jsx("div",{className:"space-y-4",children:0===W.length?o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(G,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),o.jsx("p",{className:"text-lg font-medium mb-2",children:"メンテナンス予定がありません"}),o.jsx("p",{className:"text-sm",children:"施設のメンテナンス予定を追加してください"})]}):W.map(e=>{const s=(e=>{const s=new Date,a=new Date(e.start_date),t=new Date(e.end_date);return"cancelled"===e.status?{status:"cancelled",label:"キャンセル済み",color:"bg-gray-500"}:"completed"===e.status?{status:"completed",label:"完了",color:"bg-gray-500"}:s>=a&&s<t?{status:"active",label:"メンテナンス中",color:"bg-red-500"}:s<a?{status:"scheduled",label:"予定",color:"bg-yellow-500"}:{status:"completed",label:"完了",color:"bg-gray-500"}})(e);return o.jsx(h,{className:"p-4",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[o.jsx("h3",{className:"font-semibold text-lg",children:e.title}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium text-white ${s.color}`,children:s.label}),e.is_emergency&&o.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"緊急"})]}),e.description&&o.jsx("p",{className:"text-gray-600 mb-3",children:e.description}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"開始:"})," ",be(e.start_date)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"終了:"})," ",be(e.end_date)]})]})]}),o.jsx("div",{className:"flex items-center space-x-2",children:"scheduled"===e.status&&o.jsx(g,{size:"sm",variant:"secondary",onClick:()=>je(e.id),className:"text-red-600 hover:text-red-800",children:o.jsx(Y,{className:"w-4 h-4"})})})]})},e.id)})}),o.jsx("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(O,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),o.jsxs("div",{className:"text-sm text-yellow-800",children:[o.jsx("p",{className:"font-medium mb-1",children:"メンテナンス機能について"}),o.jsxs("ul",{className:"space-y-1",children:[o.jsx("li",{children:"• メンテナンス中は新規予約を受け付けません"}),o.jsx("li",{children:"• 既存の予約がある場合は事前に利用者に連絡してください"}),o.jsx("li",{children:"• 緊急メンテナンスの場合は即座に施設が利用停止になります"}),o.jsx("li",{children:"• ユーザー通知を有効にすると、利用者にメール通知が送信されます"})]})]})]})})]}),o.jsx(h,{className:"p-6 bg-gray-50",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(U,{className:"w-6 h-6 text-gray-600 mt-1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"運営サポート"}),o.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[o.jsx("p",{children:"• 設定に関するご質問は運営事務局までお問い合わせください"}),o.jsx("p",{children:"• QRコードシステムの設置・設定サポートを提供しています"}),o.jsx("p",{children:"• 運営開始後も継続的なサポートを行います"}),o.jsx("p",{children:"• 📧 サポート窓口: info@dogparkjp.com"})]})]})]})})]})]}):o.jsxs("div",{className:"max-w-4xl mx-auto text-center py-12",children:[o.jsx(O,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),o.jsx("h2",{className:"text-2xl font-bold mb-2",children:"ドッグランが見つかりません"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"指定されたドッグランが見つからないか、アクセス権限がありません。"}),o.jsx(C,{to:"/owner-dashboard",children:o.jsx(g,{children:"ダッシュボードに戻る"})})]})}export{X as ParkManagement};
