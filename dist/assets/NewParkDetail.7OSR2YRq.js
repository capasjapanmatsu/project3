import{s as e,j as s,C as a,B as t}from"./index.D9xag4tn.js";import{a as r,u as l,r as i,L as c}from"./router.BWT_vQps.js";import{A as n,p as x,a7 as m,c as d,b as o,d as h,E as j}from"./ui.BPlS2KKq.js";import"./vendor.D1SiiUJb.js";import"./supabase.CZ8ekJUM.js";function p(){const{parkId:p}=r(),u=l(),[N,f]=i.useState(null),[g,v]=i.useState(null),[y,b]=i.useState(!0),[w,k]=i.useState("");i.useEffect((()=>{p&&_()}),[p]);const _=()=>{return s=null,a=null,t=function*(){try{b(!0);const{data:s,error:a}=yield e.from("new_park_openings").select("*").eq("id",p).single();if(a)throw a;if(f(s),s.park_id){const{data:a,error:t}=yield e.from("dog_parks").select("*").eq("id",s.park_id).single();t||v(a)}}catch(s){k("新規オープン情報の取得に失敗しました。")}finally{b(!1)}},new Promise(((e,r)=>{var l=e=>{try{c(t.next(e))}catch(s){r(s)}},i=e=>{try{c(t.throw(e))}catch(s){r(s)}},c=s=>s.done?e(s.value):Promise.resolve(s.value).then(l,i);c((t=t.apply(s,a)).next())}));var s,a,t};return y?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):w||!N?s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsx("div",{className:"mb-6",children:s.jsxs(c,{to:"/news",className:"flex items-center text-blue-600 hover:text-blue-800",children:[s.jsx(n,{className:"w-4 h-4 mr-2"}),"新着情報一覧に戻る"]})}),s.jsxs(a,{className:"p-6 text-center",children:[s.jsx(x,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-4",children:w||"新規オープン情報が見つかりませんでした"}),s.jsx(t,{onClick:()=>u("/news"),children:"新着情報一覧に戻る"})]})]}):s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsx("div",{className:"mb-6",children:s.jsxs(c,{to:"/news",className:"flex items-center text-blue-600 hover:text-blue-800",children:[s.jsx(n,{className:"w-4 h-4 mr-2"}),"新着情報一覧に戻る"]})}),s.jsxs(a,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsxs("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium flex items-center",children:[s.jsx(m,{className:"w-4 h-4 mr-1"}),"新規オープン"]}),s.jsxs("div",{className:"flex items-center text-gray-500 text-sm ml-auto",children:[s.jsx(d,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:(S=N.created_at,new Date(S).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}))})]})]}),s.jsxs("h1",{className:"text-2xl font-bold mb-6",children:[N.name,"がオープンしました"]}),s.jsx("div",{className:"mb-6",children:s.jsx("img",{src:N.image_url,alt:N.name,className:"w-full h-auto rounded-lg object-cover",onError:e=>{e.currentTarget.src="https://images.pexels.com/photos/1108099/pexels-photo-1108099.jpeg"}})}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(o,{className:"w-5 h-5 text-gray-500 mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"住所"}),s.jsx("p",{className:"text-gray-700",children:N.address})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(d,{className:"w-5 h-5 text-gray-500 mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"オープン日"}),s.jsx("p",{className:"text-gray-700",children:N.opening_date})]})]}),g&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(h,{className:"w-5 h-5 text-gray-500 mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"営業時間"}),s.jsx("p",{className:"text-gray-700",children:"24時間営業"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(m,{className:"w-5 h-5 text-gray-500 mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"施設情報"}),s.jsx("p",{className:"text-gray-700",children:g.description}),s.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:Object.entries({parking:"駐車場",shower:"シャワー設備",restroom:"トイレ",agility:"アジリティ設備",rest_area:"休憩スペース",water_station:"給水設備"}).map((([e,a])=>g.facilities[e]&&s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),s.jsx("span",{children:a})]},e)))})]})]})]})]}),s.jsxs("div",{className:"flex justify-between items-center mt-8",children:[s.jsx(c,{to:"/news",children:s.jsxs(t,{variant:"secondary",children:[s.jsx(n,{className:"w-4 h-4 mr-2"}),"新着情報一覧に戻る"]})}),N.park_id&&s.jsx(c,{to:`/parks/${N.park_id}`,children:s.jsxs(t,{children:["施設詳細を見る",s.jsx(j,{className:"w-4 h-4 ml-2"})]})})]})]})]});var S}export{p as NewParkDetail};
