import{j as e,B as s}from"./index-T-nty6Ge.js";import{I as a}from"./Input-B9o2mE6T.js";import{S as t}from"./Select-vQESp9mw.js";import{d as r}from"./dogBreeds-6lxY8Uni.js";import{g as l,V as n}from"./VaccineBadge-8kOlr-l0.js";import{P as c,z as i,I as d,X as o,a as m,G as x,F as g,J as h}from"./ui-srxHNTHo.js";function b({dog:a,onEdit:t}){const r=l(a),d=j(a.gender);return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden",children:a.image_url?e.jsx("img",{src:a.image_url,alt:a.name,className:"w-full h-full object-cover"}):e.jsx(c,{className:"w-6 h-6 text-gray-500"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold",children:[a.name,d]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[a.breed," • ",a.gender]}),e.jsx("div",{className:"flex items-center space-x-2 mt-1",children:e.jsx(n,{status:r,size:"sm"})})]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(s,{size:"sm",variant:"secondary",onClick:()=>t(a),children:e.jsx(i,{className:"w-4 h-4"})})})]})}function j(e){return"オス"===e?"くん":"ちゃん"}function u({dog:c,isUpdating:i,error:b,success:u,dogFormData:N,dogImagePreview:p,onClose:v,onSubmit:f,onDelete:y,onFormChange:w,onImageSelect:C,onImageRemove:k,rabiesVaccineFile:F,comboVaccineFile:I,rabiesExpiryDate:G,comboExpiryDate:D,onRabiesVaccineSelect:B,onComboVaccineSelect:P,onRabiesExpiryDateChange:S,onComboExpiryDateChange:E}){if(!c)return null;const V=j(c.gender),z=l(c);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold",children:[c.name,V,"の情報編集"]}),e.jsxs("div",{className:"flex space-x-2",children:[y&&e.jsx("button",{type:"button",onClick:()=>{window.confirm(`${c.name}${V}を削除しますか？\n\nこの操作は元に戻せません。`)&&y(c)},className:"text-red-500 hover:text-red-700 p-1 rounded-lg hover:bg-red-50 transition-colors",title:"このワンちゃんを削除",children:e.jsx(d,{className:"w-5 h-5"})}),e.jsx("button",{onClick:v,className:"text-gray-500 hover:text-gray-700 p-1 rounded-lg hover:bg-gray-100 transition-colors",title:"編集を閉じる",children:e.jsx(o,{className:"w-5 h-5"})})]})]}),b&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:b}),u&&e.jsxs("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-lg flex items-center",children:[e.jsx(m,{className:"w-5 h-5 mr-2"}),u]}),e.jsx("form",{onSubmit:f,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"基本情報"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ワンちゃんの写真"}),p?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:p,alt:"ワンちゃんのプレビュー",className:"w-full h-48 object-cover rounded-lg border-2 border-gray-300"}),e.jsx("button",{type:"button",onClick:k,className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:e.jsx(d,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:C,className:"hidden",id:"dog-image-edit"}),e.jsxs("label",{htmlFor:"dog-image-edit",className:"cursor-pointer flex flex-col items-center",children:[e.jsx(x,{className:"w-12 h-12 text-gray-400 mb-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"クリックして画像を選択"}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG, GIF (最大10MB)"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(a,{label:"名前",value:N.name,onChange:e=>w({...N,name:e.target.value}),required:!0}),e.jsx(t,{label:"犬種",options:r.map((e=>({value:e,label:e}))),value:N.breed,onChange:e=>w({...N,breed:e.target.value}),required:!0}),e.jsx(t,{label:"性別",options:[{value:"",label:"性別を選択してください"},{value:"オス",label:"オス"},{value:"メス",label:"メス"}],value:N.gender,onChange:e=>w({...N,gender:e.target.value}),required:!0}),e.jsx(a,{label:"生年月日",type:"date",value:N.birthDate,onChange:e=>w({...N,birthDate:e.target.value}),required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(m,{className:"w-5 h-5 mr-2"}),"ワクチン証明書"]}),e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"現在のステータス:"}),e.jsx(n,{status:z,size:"md"})]}),"pending"===z&&e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"新しい証明書をアップロードすると、再度承認待ち状態になります。"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"狂犬病ワクチン証明書"}),F?e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-800",children:F.name}),e.jsx("button",{type:"button",onClick:()=>{const e=document.getElementById("rabies-vaccine-edit");e&&(e.value="");B({target:{files:[]}})},className:"text-red-600 hover:text-red-800",children:e.jsx(d,{className:"w-4 h-4"})})]})}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-gray-400 transition-colors",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:B,className:"hidden",id:"rabies-vaccine-edit"}),e.jsxs("label",{htmlFor:"rabies-vaccine-edit",className:"cursor-pointer flex flex-col items-center",children:[e.jsx(h,{className:"w-8 h-8 text-gray-400 mb-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"証明書をアップロード"}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG, GIF (最大10MB)"})]})]}),e.jsx(a,{label:"有効期限",type:"date",value:G,onChange:e=>S(e.target.value),className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"混合ワクチン証明書"}),I?e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-800",children:I.name}),e.jsx("button",{type:"button",onClick:()=>{const e=document.getElementById("combo-vaccine-edit");e&&(e.value="");P({target:{files:[]}})},className:"text-red-600 hover:text-red-800",children:e.jsx(d,{className:"w-4 h-4"})})]})}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-gray-400 transition-colors",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:P,className:"hidden",id:"combo-vaccine-edit"}),e.jsxs("label",{htmlFor:"combo-vaccine-edit",className:"cursor-pointer flex flex-col items-center",children:[e.jsx(h,{className:"w-8 h-8 text-gray-400 mb-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"証明書をアップロード"}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG, GIF (最大10MB)"})]})]}),e.jsx(a,{label:"有効期限",type:"date",value:D,onChange:e=>E(e.target.value),className:"mt-2"})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"注意:"})," 新しいワクチン証明書をアップロードすると、管理者による再承認が必要になります。 承認されるまでドッグランのご利用はできません。"]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[e.jsx(s,{type:"button",variant:"secondary",onClick:v,children:"キャンセル"}),e.jsxs(s,{type:"submit",isLoading:i,children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),"保存"]})]})]})})]})})})}export{b as D,u as a,j as g};
