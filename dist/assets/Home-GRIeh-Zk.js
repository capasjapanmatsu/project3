import{j as e,B as C,C as T,u as Z,s as q}from"./index-BB1ywuBb.js";import{r as n,L as p,R as O}from"./react-vendor-Co5xHYdE.js";import{l as H,a as se,m as te,n as ae,o as ne,T as re,b as ie,U as oe,p as le,q as ce,P as F,W,r as de,R as P,B as U,s as $,t as me,u as xe,F as J,v as he,w as ue,x as ge}from"./ui-vendor-B2-VOB5s.js";import{l as h}from"./logger-C8dD4C56.js";import"./supabase-vendor-FDBaXLCh.js";const fe={xs:0,sm:640,md:768,lg:1024,xl:1280,"2xl":1536};function X(s){const t=n.useMemo(()=>({...fe,...s}),[s]),[r,u]=n.useState({width:typeof window<"u"?window.innerWidth:1024,height:typeof window<"u"?window.innerHeight:768}),[g,m]=n.useState("md");n.useEffect(()=>{const c=()=>{const x=window.innerWidth;u({width:x,height:window.innerHeight}),x>=t["2xl"]?m("2xl"):x>=t.xl?m("xl"):x>=t.lg?m("lg"):x>=t.md?m("md"):x>=t.sm?m("sm"):m("xs")};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]);const j=c=>r.width>=t[c],f=c=>r.width<t[c],b=(c,x)=>r.width>=t[c]&&r.width<t[x],k=f("md"),w=b("md","lg"),S=j("lg"),l="ontouchstart"in window||navigator.maxTouchPoints>0,D=typeof window<"u"?window.matchMedia("(prefers-reduced-motion: reduce)").matches:!1,R=typeof window<"u"?window.matchMedia("(prefers-color-scheme: dark)").matches:!1;return{windowSize:r,currentBreakpoint:g,breakpoints:t,isAbove:j,isBelow:f,isBetween:b,isMobile:k,isTablet:w,isDesktop:S,isTouchDevice:l,prefersReducedMotion:D,prefersDarkMode:R}}const N=n.forwardRef(({children:s,animation:t="fadeIn",duration:r="normal",easing:u="ease-out",delay:g=0,repeat:m=!1,triggerOnce:j=!0,threshold:f=.1,as:b="div",respectReducedMotion:k=!0,fallbackAnimation:w="fadeIn",className:S="",...l},D)=>{const{prefersReducedMotion:R}=X(),c=k&&R,x=c?w:t,I={fast:"duration-200",normal:"duration-500",slow:"duration-1000"},E={linear:"ease-linear",ease:"ease","ease-in":"ease-in","ease-out":"ease-out","ease-in-out":"ease-in-out"},A={fadeIn:c?"opacity-100 transition-opacity":"opacity-0 animate-fade-in",slideUp:c?"transform-none transition-transform":"transform translate-y-4 animate-slide-up",slideDown:c?"transform-none transition-transform":"transform -translate-y-4 animate-slide-down",slideLeft:c?"transform-none transition-transform":"transform translate-x-4 animate-slide-left",slideRight:c?"transform-none transition-transform":"transform -translate-x-4 animate-slide-right",scale:c?"transform-none transition-transform":"transform scale-95 animate-scale-in",bounce:c?"transform-none":"animate-bounce",pulse:c?"opacity-100":"animate-pulse",spin:c?"transform-none":"animate-spin"},L=m===!0?"animation-iteration-count-infinite":typeof m=="number"?`animation-iteration-count-${m}`:"",M=g>0?{animationDelay:`${g}ms`}:{},y=`${[A[x],I[r],E[u],L,"transition-all"].filter(Boolean).join(" ")} ${S}`.trim(),v=b;return e.jsx(v,{ref:D,className:y,style:{...M,...l.style},"aria-hidden":c?void 0:"false",...l,children:s})});N.displayName="AnimatedElement";const G=n.forwardRef((s,t)=>e.jsx(N,{ref:t,animation:"fadeIn",...s}));G.displayName="FadeIn";const K=n.forwardRef((s,t)=>e.jsx(N,{ref:t,animation:"slideUp",...s}));K.displayName="SlideUp";const pe=n.forwardRef((s,t)=>e.jsx(N,{ref:t,animation:"scale",...s}));pe.displayName="ScaleIn";const je=[{title:"ãƒ¯ãƒ³ã¡ã‚ƒã‚“ãŒé£Ÿã¹ã¦ã¯ã„ã‘ãªã„é£Ÿã¹ç‰©",icon:e.jsx(H,{className:"w-8 h-8 text-red-500"}),image:"https://images.pexels.com/photos/1108099/pexels-photo-1108099.jpeg?auto=compress&w=300",path:"/dog-info/foods",description:"æ„›çŠ¬ã®å¥åº·ã®ãŸã‚ã«é¿ã‘ã‚‹ã¹ãé£Ÿæã«ã¤ã„ã¦"},{title:"ç‹‚çŠ¬ç—…äºˆé˜²ã‚„æ··åˆãƒ¯ã‚¯ãƒãƒ³ã®é‡è¦æ€§",icon:e.jsx(se,{className:"w-8 h-8 text-blue-500"}),image:"https://images.pexels.com/photos/1404819/pexels-photo-1404819.jpeg?auto=compress&w=300",path:"/dog-info/vaccine",description:"å¿…è¦ãªãƒ¯ã‚¯ãƒãƒ³æ¥ç¨®ã§æ„›çŠ¬ã‚’ç—…æ°—ã‹ã‚‰å®ˆã‚ã†"},{title:"çŠ¬ç¨®ã”ã¨ã«ã‹ã‹ã‚Šã‚„ã™ã„ä¸»ãªç—…æ°—",icon:e.jsx(te,{className:"w-8 h-8 text-green-500"}),image:"https://images.pexels.com/photos/1108098/pexels-photo-1108098.jpeg?auto=compress&w=300",path:"/dog-info/breeds",description:"çŠ¬ç¨®ç‰¹æœ‰ã®å¥åº·ãƒªã‚¹ã‚¯ã¨äºˆé˜²æ³•ã«ã¤ã„ã¦"},{title:"ãƒ•ã‚£ãƒ©ãƒªã‚¢ãƒ»ãƒ€ãƒ‹ãƒ»ãƒãƒŸãªã©å¯„ç”Ÿè™«ã®å±é™ºæ€§",icon:e.jsx(ae,{className:"w-8 h-8 text-orange-500"}),image:"https://images.pexels.com/photos/458799/pexels-photo-458799.jpeg?auto=compress&w=300",path:"/dog-info/parasite",description:"å¯„ç”Ÿè™«ã‹ã‚‰æ„›çŠ¬ã‚’å®ˆã‚‹ãŸã‚ã®äºˆé˜²å¯¾ç­–"},{title:"ãƒ¯ãƒ³ã¡ã‚ƒã‚“ç”¨ãŠã‚„ã¤ã‚„ãŠã‚‚ã¡ã‚ƒã®é‡è¦æ€§",icon:e.jsx(ne,{className:"w-8 h-8 text-purple-500"}),image:"https://images.pexels.com/photos/1108097/pexels-photo-1108097.jpeg?auto=compress&w=300",path:"/dog-info/snack",description:"å¥åº·çš„ãªãŠã‚„ã¤ã¨é©åˆ‡ãªãŠã‚‚ã¡ã‚ƒã®é¸ã³æ–¹"},{title:"ãƒ‰ãƒƒã‚°ã‚·ãƒ§ãƒ¼ã«ã¤ã„ã¦",icon:e.jsx(re,{className:"w-8 h-8 text-yellow-500"}),image:"https://images.pexels.com/photos/458804/pexels-photo-458804.jpeg?auto=compress&w=300",path:"/dog-info/show",description:"ãƒ‰ãƒƒã‚°ã‚·ãƒ§ãƒ¼ã®ä¸–ç•Œã¨å‚åŠ ã®ãŸã‚ã®æº–å‚™"}],be=()=>e.jsxs("section",{className:"bg-yellow-50 p-6 rounded-lg",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center justify-center",children:[e.jsx(H,{className:"w-6 h-6 text-red-500 mr-2"}),"ãƒ¯ãƒ³ã¡ã‚ƒã‚“ã«ã¤ã„ã¦ã®æƒ…å ±ç™ºä¿¡"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"æ„›çŠ¬ã®å¥åº·ã¨å®‰å…¨ã®ãŸã‚ã®é‡è¦ãªæƒ…å ±ã‚’ãŠå±Šã‘ã—ã¾ã™"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:je.map((s,t)=>e.jsx(p,{to:s.path,className:"block group hover:transform hover:scale-105 transition-transform",children:e.jsx("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-lg transition-shadow p-4 h-full",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"mb-3 group-hover:scale-110 transition-transform",children:s.icon}),e.jsx("img",{src:s.image,alt:s.title,className:"w-20 h-20 object-cover rounded-full mb-3 border-4 border-yellow-100 group-hover:border-yellow-400 transition-colors"}),e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2 group-hover:text-yellow-700 transition-colors",children:s.title}),e.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:s.description})]})})},s.title))}),e.jsx("div",{className:"text-center mt-6",children:e.jsx(p,{to:"/dog-info",className:"inline-block bg-yellow-600 text-white px-6 py-2 rounded-lg hover:bg-yellow-700 transition-colors font-medium",children:"ã™ã¹ã¦ã®æƒ…å ±ã‚’è¦‹ã‚‹"})})]}),we=({isLoggedIn:s})=>{const t=[{icon:e.jsx(ie,{className:"h-12 w-12 text-blue-600 mx-auto mb-4 group-hover:scale-110 transition-transform"}),title:"ç°¡å˜æ¤œç´¢",description:"ãŠè¿‘ãã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’ç°¡å˜ã«è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™",linkTo:"/parks",color:"text-blue-600"},{icon:e.jsx(oe,{className:"h-12 w-12 text-purple-600 mx-auto mb-4 group-hover:scale-110 transition-transform"}),title:"ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£",description:"æ„›çŠ¬å®¶åŒå£«ã§äº¤æµã‚’æ·±ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™",linkTo:s?"/community":"/login",color:"text-purple-600"},{icon:e.jsx(le,{className:"h-12 w-12 text-orange-600 mx-auto mb-4 group-hover:scale-110 transition-transform"}),title:"äºˆç´„ç®¡ç†",description:"æ–½è¨­ã®äºˆç´„ã‚’ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§ç°¡å˜ã«ç®¡ç†",linkTo:s?"/dashboard":"/login",color:"text-orange-600"},{icon:e.jsx(ce,{className:"h-12 w-12 text-green-600 mx-auto mb-4 group-hover:scale-110 transition-transform"}),title:"ãƒšãƒƒãƒˆã‚·ãƒ§ãƒƒãƒ—",description:"ãƒšãƒƒãƒˆç”¨å“ã‚’ãƒ¯ãƒ³ã‚¿ãƒƒãƒã§ç°¡å˜æ³¨æ–‡",linkTo:"/shop",color:"text-green-600"}];return e.jsx("section",{className:"grid md:grid-cols-4 gap-8 mt-12",children:t.map((r,u)=>e.jsxs(p,{to:r.linkTo,className:"text-center p-6 hover:bg-gray-50 rounded-lg transition-colors cursor-pointer group",children:[r.icon,e.jsx("h3",{className:"text-xl font-semibold mb-2",children:r.title}),e.jsx("p",{className:"text-gray-600",children:r.description})]},u))})},Ne=({isLoggedIn:s})=>s?e.jsxs("section",{className:"text-center py-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"ãŠã‹ãˆã‚Šãªã•ã„ï¼"}),e.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"ä»Šæ—¥ã‚‚æ„›çŠ¬ã¨ç´ æ•µãªæ™‚é–“ã‚’ãŠéã”ã—ãã ã•ã„"}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx(p,{to:"/parks",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’æ¢ã™"}),e.jsx(p,{to:"/dashboard",className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors font-medium",children:"ãƒã‚¤ãƒšãƒ¼ã‚¸"})]})]}):e.jsxs("section",{className:"text-center py-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"æ„›çŠ¬ã¨ã®ãŠæ•£æ­©ã‚’ã€ã‚‚ã£ã¨æ¥½ã—ã"}),e.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"è¿‘ãã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚’è¦‹ã¤ã‘ã¦ã€æ–°ã—ã„å‡ºä¼šã„ã‚’è¦‹ã¤ã‘ã¾ã—ã‚‡ã†"}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx(p,{to:"/register",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"ç„¡æ–™ã§å§‹ã‚ã‚‹"}),e.jsx(p,{to:"/magic-link",className:"bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors font-medium",children:"Magic Linkã§ç°¡å˜ãƒ­ã‚°ã‚¤ãƒ³"})]})]}),Q=O.memo(({recentDogs:s,isOffline:t,isLoading:r=!1})=>{console.log("MarqueeDogsSection - recentDogs:",s),console.log("MarqueeDogsSection - isOffline:",t),console.log("MarqueeDogsSection - isLoading:",r),console.log("MarqueeDogsSection - recentDogs.length:",s.length);const u=n.useMemo(()=>[...s,...s],[s]),g=n.useMemo(()=>Array.isArray(s)&&s.length>0,[s]);return e.jsxs("section",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(F,{className:"w-6 h-6 text-blue-600 mr-2"}),"æœ€è¿‘ä»²é–“å…¥ã‚Šã—ã¾ã—ãŸï¼"]}),e.jsx("div",{className:"absolute -top-10 -left-16",children:e.jsx("div",{className:"bg-yellow-100 rounded-full px-4 py-2 text-yellow-800 font-bold transform -rotate-12",children:"New"})})]})}),e.jsx("div",{className:"overflow-hidden w-full relative",style:{height:140},children:r?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"text-gray-600",children:"æ–°ã—ã„ä»²é–“ã‚’æ¢ã—ã¦ã„ã¾ã™..."})]})}):g?e.jsx("div",{className:"flex items-center whitespace-nowrap",style:{width:"max-content",animation:"marquee 45s linear infinite",willChange:"transform",transform:"translateZ(0)"},children:u.map((m,j)=>e.jsx(V,{dog:m},`${m.id}-${j}`))}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 text-center",children:e.jsxs("div",{children:[e.jsx(F,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium",children:t?"ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ä¸­ã§ã™":"æ–°ã—ã„ä»²é–“ã‚’å‹Ÿé›†ä¸­ï¼"}),e.jsx("p",{className:"text-sm mt-1",children:t?"æ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„":"ãƒ¯ãƒ³ã¡ã‚ƒã‚“ã®ç™»éŒ²ã‚’ãŠå¾…ã¡ã—ã¦ã„ã¾ã™"}),!t&&e.jsx("p",{className:"text-xs mt-2 text-gray-400",children:"ç™»éŒ²ã•ã‚ŒãŸãƒ¯ãƒ³ã¡ã‚ƒã‚“ãŒã„ã¾ã›ã‚“"}),e.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["Debug: dogs=",s?.length||0,", offline=",t?"true":"false",", loading=",r?"true":"false"]})]})})}),e.jsx("style",{children:`
          @keyframes marquee {
            0% {
              transform: translateX(0) translateZ(0);
            }
            100% {
              transform: translateX(-50%) translateZ(0);
            }
          }
          
          /* GPUã‚¢ã‚¯ã‚»ãƒ©ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã®æœ€é©åŒ– */
          .marquee-container {
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            -moz-backface-visibility: hidden;
            -ms-backface-visibility: hidden;
            -webkit-transform: translateZ(0);
            -moz-transform: translateZ(0);
            -ms-transform: translateZ(0);
            transform: translateZ(0);
          }
        `})]})}),V=O.memo(({dog:s})=>{const[t,r]=n.useState(!1),[u,g]=n.useState(!1),m=()=>{r(!0)},j=()=>{g(!0),r(!0)},f=n.useMemo(()=>s.image_url?s.image_url.includes("supabase")?`${s.image_url}?width=80&height=80&quality=80`:s.image_url:null,[s.image_url]);return n.useEffect(()=>{if(f){const b=new Image;b.src=f}},[f]),e.jsxs("div",{className:"inline-block mx-4 text-center",style:{width:100,flexShrink:0},children:[e.jsxs("div",{className:"relative w-20 h-20 mx-auto mb-2 bg-gray-200 rounded-full overflow-hidden",children:[!t&&!u&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:e.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})}),f&&!u?e.jsx("img",{src:f,alt:s.name,className:`w-full h-full object-cover transition-opacity duration-200 ${t?"opacity-100":"opacity-0"}`,onLoad:m,onError:j,loading:"eager",decoding:"sync",width:80,height:80}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-2xl",children:"ğŸ•"})]}),e.jsx("div",{className:"text-xs text-gray-600 truncate font-medium",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:s.breed})]})});Q.displayName="MarqueeDogsSection";V.displayName="DogCard";const ye=({isOffline:s,networkError:t,onRetryConnection:r})=>t?e.jsx("div",{className:`border rounded-lg p-4 mb-6 ${s?"bg-orange-50 border-orange-200":"bg-red-50 border-red-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[s?e.jsx(W,{className:"w-6 h-6 text-orange-600"}):e.jsx(de,{className:"w-6 h-6 text-red-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-medium ${s?"text-orange-800":"text-red-800"}`,children:s?"ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰":"æ¥ç¶šã‚¨ãƒ©ãƒ¼"}),e.jsx("p",{className:`text-sm whitespace-pre-line ${s?"text-orange-700":"text-red-700"}`,children:t})]})]}),e.jsxs(C,{onClick:r,size:"sm",className:`${s?"bg-orange-600 hover:bg-orange-700":"bg-red-600 hover:bg-red-700"} text-white`,children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"å†æ¥ç¶š"]})]})}):null,ve=({news:s,isOffline:t,isLoading:r,onRetryConnection:u})=>{const g=l=>{switch(l){case"news":return e.jsx(J,{className:"w-4 h-4"});case"announcement":return e.jsx(xe,{className:"w-4 h-4"});case"sale":return e.jsx(me,{className:"w-4 h-4"});default:return e.jsx(U,{className:"w-4 h-4"})}},m=l=>({news:"bg-blue-100 text-blue-800",announcement:"bg-red-100 text-red-800",sale:"bg-green-100 text-green-800"})[l]||"bg-gray-100 text-gray-800",j=l=>({news:"ãŠçŸ¥ã‚‰ã›",announcement:"é‡è¦ãªãŠçŸ¥ã‚‰ã›",sale:"ã‚»ãƒ¼ãƒ«æƒ…å ±"})[l]||l,f=l=>new Date(l).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}),b=({message:l})=>e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(W,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:l}),e.jsxs(C,{onClick:u,size:"sm",variant:"secondary",className:"mt-2",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"å†æ¥ç¶š"]})]})}),k=()=>e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),e.jsx("p",{children:"æ–°ç€æƒ…å ±ã‚’èª­ã¿è¾¼ã¿ä¸­..."})]})}),w=()=>e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(U,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"ç¾åœ¨ã€è¡¨ç¤ºã§ãã‚‹æ–°ç€æƒ…å ±ã¯ã‚ã‚Šã¾ã›ã‚“"}),e.jsxs(C,{onClick:u,size:"sm",variant:"secondary",className:"mt-2",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"å†èª­ã¿è¾¼ã¿"]})]})}),S=()=>t?e.jsx(b,{message:"ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ï¼šæ–°ç€æƒ…å ±ã‚’èª­ã¿è¾¼ã‚ã¾ã›ã‚“"}):r?e.jsx(k,{}):s.length===0?e.jsx(w,{}):s.slice(0,2).map(l=>e.jsx(p,{to:`/news/${l.id}`,children:e.jsx(T,{className:"p-3 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium flex items-center ${m(l.category)}`,children:[g(l.category),e.jsx("span",{className:"ml-1",children:j(l.category)})]}),l.is_important&&e.jsx("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium",children:"é‡è¦"})]}),e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:l.title}),l.content&&e.jsx("p",{className:"text-sm text-gray-600 line-clamp-1 mb-1",children:l.content}),e.jsx("p",{className:"text-xs text-gray-500",children:f(l.created_at)})]}),e.jsx($,{className:"w-4 h-4 text-gray-400 ml-4"})]})})},l.id));return e.jsxs("section",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(U,{className:"w-5 h-5 text-blue-600 mr-2"}),"æ–°ç€æƒ…å ±"]}),e.jsxs(p,{to:"/news",className:"text-blue-600 hover:text-blue-800 flex items-center text-sm",children:["ã™ã¹ã¦è¦‹ã‚‹",e.jsx($,{className:"w-4 h-4 ml-1"})]})]}),e.jsx("div",{className:"space-y-3",children:S()}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx(p,{to:"/news",children:e.jsxs(C,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",children:["ã™ã¹ã¦ã®æ–°ç€æƒ…å ±ã‚’è¦‹ã‚‹",e.jsx($,{className:"w-4 h-4 ml-2"})]})})})]})},ke=()=>{const{user:s}=Z(),t=()=>s?"/park-registration-agreement":"/register",r=()=>s?"ã‚ªãƒ¼ãƒŠãƒ¼å¥‘ç´„ã«é€²ã‚€":"ã‚ªãƒ¼ãƒŠãƒ¼ç™»éŒ²";return e.jsx("section",{className:"relative overflow-hidden",children:e.jsxs("div",{className:"bg-gradient-to-r from-green-600 via-blue-600 to-purple-600 text-white p-8 rounded-xl shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-full",children:e.jsx(he,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold mb-2 flex items-center",children:[e.jsx(ue,{className:"w-6 h-6 mr-2"}),"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã‚ªãƒ¼ãƒŠãƒ¼å‹Ÿé›†ä¸­ï¼"]}),e.jsx("p",{className:"text-lg opacity-90",children:"ã‚ãªãŸã®åœŸåœ°ã‚’ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã¨ã—ã¦æ´»ç”¨ã—ã¾ã›ã‚“ã‹ï¼Ÿåç›ŠåŒ–ã®ãƒãƒ£ãƒ³ã‚¹ã§ã™"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(p,{to:t(),children:e.jsxs(C,{className:"bg-white hover:bg-gray-100 text-purple-700 font-bold px-6 py-3 text-lg shadow-md",children:[e.jsx(ge,{className:"w-5 h-5 mr-2"}),r()]})}),e.jsx("p",{className:"text-sm opacity-80 mt-2",children:"åˆæœŸè²»ç”¨ç„¡æ–™ãƒ»ã‚µãƒãƒ¼ãƒˆå……å®Ÿ"})]})]}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full -ml-12 -mb-12"})]})})},De=()=>e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"bg-blue-50 p-6 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-4",children:"ã”åˆ©ç”¨å‰ã«å¿…ãšãŠèª­ã¿ãã ã•ã„"}),e.jsx("p",{className:"text-blue-800 mb-4",children:"å®‰å…¨ã§æ¥½ã—ã„ãƒ‰ãƒƒã‚°ãƒ©ãƒ³åˆ©ç”¨ã®ãŸã‚ã€åˆ©ç”¨ãƒ«ãƒ¼ãƒ«ã‚’ã”ç¢ºèªãã ã•ã„"}),e.jsx(p,{to:"/parks/rules",children:e.jsxs(C,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³åˆ©ç”¨ãƒ«ãƒ¼ãƒ«ã‚’ç¢ºèª"]})})]})}),e.jsxs("section",{className:"bg-blue-50 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-center text-blue-900 mb-6",children:"æ–™é‡‘ä½“ç³»"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"å˜ç™ºåˆ©ç”¨"}),e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"Â¥800"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"1å›ã®åˆ©ç”¨æ–™é‡‘"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"â€¢ æœ€å¤§3æ™‚é–“ã¾ã§"}),e.jsx("li",{children:"â€¢ æ„›çŠ¬3é ­ã¾ã§"}),e.jsx("li",{children:"â€¢ å…¨å›½ã®ææºæ–½è¨­ã§åˆ©ç”¨å¯èƒ½"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-blue-600 text-white p-6 rounded-lg shadow-lg transform scale-105",children:[e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³"}),e.jsxs("div",{className:"text-3xl font-bold mb-2",children:["Â¥3,800",e.jsx("span",{className:"text-lg",children:"/æœˆ"})]}),e.jsx("p",{className:"mb-4 opacity-90",children:"ä½¿ã„æ”¾é¡Œãƒ—ãƒ©ãƒ³"}),e.jsxs("ul",{className:"text-sm space-y-1 opacity-90",children:[e.jsx("li",{children:"â€¢ å…¨å›½ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ä½¿ã„æ”¾é¡Œ"}),e.jsx("li",{children:"â€¢ ãƒšãƒƒãƒˆã‚·ãƒ§ãƒƒãƒ—10%OFF"}),e.jsx("li",{children:"â€¢ å„ªå…ˆäºˆç´„æ¨©"}),e.jsx("li",{children:"â€¢ å°‚ç”¨ã‚µãƒãƒ¼ãƒˆ"})]}),e.jsx("div",{className:"mt-4",children:e.jsx("span",{className:"bg-white text-purple-600 px-3 py-1 rounded-full text-xs font-medium",children:"ãŠã™ã™ã‚"})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"æ–½è¨­è²¸ã—åˆ‡ã‚Š"}),e.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:"Â¥4,400"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"1æ™‚é–“ã®è²¸ã—åˆ‡ã‚Šæ–™é‡‘"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"â€¢ å®Œå…¨ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆç©ºé–“"}),e.jsx("li",{children:"â€¢ æ„›çŠ¬åˆ¶é™ãªã—"}),e.jsx("li",{children:"â€¢ ã‚¤ãƒ™ãƒ³ãƒˆãƒ»ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼ã«æœ€é©"})]})]})]}),e.jsx("div",{className:"text-center mt-8",children:e.jsx(p,{to:"/register",children:e.jsx(C,{className:"bg-blue-600 hover:bg-blue-700 text-lg px-8 py-3",children:"ä»Šã™ãå§‹ã‚ã‚‹"})})})]})]});function Ae(){const{user:s}=Z(),[t,r]=n.useState([]),[u,g]=n.useState([]),[m,j]=n.useState(!1),[f,b]=n.useState(null),[k,w]=n.useState(!0),[S,l]=n.useState(!0),{isMobile:D,prefersReducedMotion:R}=X();n.useEffect(()=>{const a="/images/hero-dogs.jpg",i=document.createElement("link");i.rel="preload",i.href=a,i.as="image",i.setAttribute("fetchpriority","high"),document.head.appendChild(i);const o=document.createElement("link");return o.rel="preload",o.href="/fonts/inter-var.woff2",o.as="font",o.type="font/woff2",o.crossOrigin="anonymous",document.head.appendChild(o),()=>{document.head.removeChild(i),document.head.removeChild(o)}},[]),n.useEffect(()=>{const a=()=>{j(!1),b(null)},i=()=>{j(!0),b(`ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šãŒåˆ‡æ–­ã•ã‚Œã¾ã—ãŸã€‚
ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰ã§è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚`)};return window.addEventListener("online",a),window.addEventListener("offline",i),navigator.onLine||i(),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",i)}},[]);const c=10*60*1e3,x=n.useMemo(()=>new Map,[]),I=n.useCallback(a=>{const i=x.get(a);return i&&Date.now()-i.timestamp<c?i.data:(i&&x.delete(a),null)},[x,c]),E=n.useCallback((a,i)=>{x.set(a,{data:i,timestamp:Date.now()});try{localStorage.setItem(`dogpark_cache_${a}`,JSON.stringify({data:i,timestamp:Date.now()}))}catch(o){console.warn("Failed to save cache to localStorage:",o)}},[x]);n.useEffect(()=>{try{const a=localStorage.getItem("dogpark_cache_recentDogs");if(a){const o=JSON.parse(a);if(Date.now()-o.timestamp<c&&Array.isArray(o.data)){const d=o.data,_={data:d,timestamp:o.timestamp};x.set("recentDogs",_),r(d),w(!1)}}const i=localStorage.getItem("dogpark_cache_news");if(i){const o=JSON.parse(i);if(Date.now()-o.timestamp<c&&Array.isArray(o.data)){const d=o.data,_={data:d,timestamp:o.timestamp};x.set("news",_),g(d),l(!1)}}}catch(a){h.warn("Failed to restore cache from localStorage:",a)}},[x,c]);const A=n.useCallback(async()=>{try{h.info("ğŸ• æœ€è¿‘ä»²é–“å…¥ã‚Šã—ãŸãƒ¯ãƒ³ã¡ã‚ƒã‚“ã‚’å–å¾—ä¸­...");const a=I("recentDogs");if(a&&Array.isArray(a))return h.info("âœ… ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰æœ€è¿‘ä»²é–“å…¥ã‚Šã—ãŸãƒ¯ãƒ³ã¡ã‚ƒã‚“ã‚’å–å¾—:",a.length,"åŒ¹"),r(a),w(!1),a;w(!0),b(null),h.info("ğŸ” ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ç›´æ¥å–å¾—...");const{data:i,error:o}=await q.from("dogs").select("id, owner_id, name, breed, birth_date, gender, image_url, created_at").order("created_at",{ascending:!1}).limit(8);if(o)return h.warn("âŒ Database error:",o),r([]),w(!1),[];h.info("âœ… æœ€è¿‘ä»²é–“å…¥ã‚Šã—ãŸãƒ¯ãƒ³ã¡ã‚ƒã‚“å–å¾—æˆåŠŸ:",i?.length||0,"åŒ¹");const d=i||[];return r(d),E("recentDogs",d),w(!1),d}catch(a){return h.warn("âŒ Error fetching recent dogs:",a),r([]),w(!1),[]}},[I,E]),L=n.useCallback(async()=>{try{h.info("ğŸ“° æ–°ç€æƒ…å ±ã‚’å–å¾—ä¸­...");const a=I("news");if(a&&Array.isArray(a))return h.info("âœ… ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰æ–°ç€æƒ…å ±ã‚’å–å¾—:",a.length,"ä»¶"),g(a),a;l(!0);const{data:i,error:o}=await q.from("news_announcements").select("*").order("created_at",{ascending:!1}).limit(5);if(o)return h.error("âŒ æ–°ç€æƒ…å ±å–å¾—ã‚¨ãƒ©ãƒ¼:",o),g([]),[];h.info("âœ… æ–°ç€æƒ…å ±å–å¾—æˆåŠŸ:",i?.length||0,"ä»¶");const d=i||[];return g(d),E("news",d),d}catch(a){return h.error("âŒ æ–°ç€æƒ…å ±å–å¾—ä¾‹å¤–:",a),g([]),[]}finally{l(!1),h.info("ğŸ“° æ–°ç€æƒ…å ±å–å¾—å‡¦ç†å®Œäº†")}},[I,E]),M=n.useCallback(async()=>{h.info("ğŸš€ é«˜é€Ÿãƒ‡ãƒ¼ã‚¿å–å¾—ã‚’é–‹å§‹...");const a=Date.now();try{const i=new Promise((Se,ee)=>{setTimeout(()=>ee(new Error("Timeout")),8e3)}),o=Promise.all([A(),L()]),[d,_]=await Promise.race([o,i]),Y=Date.now();return h.info(`âœ… é«˜é€Ÿãƒ‡ãƒ¼ã‚¿å–å¾—å®Œäº†: ${Y-a}ms`),{dogs:d,news:_}}catch(i){h.error("âŒ ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼:",i);const o={dogs:[],news:[]};try{const d=await A();o.dogs=d}catch(d){h.warn("çŠ¬ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—:",d)}try{const d=await L();o.news=d}catch(d){h.warn("ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—:",d)}return o}},[A,L]);n.useEffect(()=>{t.length===0&&u.length===0&&M()},[M,t.length,u.length]);const B=n.useCallback(async()=>{x.clear(),await M()},[M,x]),y=D?"fast":"normal",v=R?0:25,z=n.useMemo(()=>!!s,[s]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-gray-50",role:"main",children:[e.jsx(G,{duration:"fast",children:e.jsx(ye,{isOffline:m,networkError:f,onRetryConnection:()=>void B()})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("section",{id:"hero-section","aria-label":"ãƒ¡ã‚¤ãƒ³ãƒ’ãƒ¼ãƒ­ãƒ¼",className:"focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-lg",tabIndex:-1,children:e.jsx(K,{duration:y,delay:v*0,children:e.jsx(Ne,{isLoggedIn:z})})}),e.jsx("section",{"aria-label":"æœ€è¿‘ç™»éŒ²ã•ã‚ŒãŸæ„›çŠ¬ãŸã¡",className:"focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-lg",tabIndex:-1,children:e.jsx(N,{animation:"slideUp",duration:y,delay:v*2,respectReducedMotion:!0,fallbackAnimation:"fadeIn",children:e.jsx(Q,{recentDogs:t,isOffline:m,isLoading:k})})}),e.jsxs("main",{id:"main-content",className:"space-y-12 py-8",children:[e.jsx("section",{id:"news-section","aria-labelledby":"news-heading",className:"focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-lg",tabIndex:-1,children:e.jsxs(N,{animation:"slideUp",duration:y,delay:v*1,respectReducedMotion:!0,fallbackAnimation:"fadeIn",children:[e.jsx("h2",{id:"news-heading",className:"sr-only",children:"æ–°ç€æƒ…å ±"}),e.jsx(ve,{isOffline:m,onRetryConnection:()=>void B(),news:u,isLoading:S})]})}),e.jsx("section",{id:"features-section","aria-labelledby":"features-heading",className:"focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-lg",tabIndex:-1,children:e.jsxs(N,{animation:"slideUp",duration:y,delay:v*2,respectReducedMotion:!0,fallbackAnimation:"fadeIn",children:[e.jsx("h2",{id:"features-heading",className:"sr-only",children:"ã‚¢ãƒ—ãƒªã®ä¸»ãªæ©Ÿèƒ½"}),e.jsx(we,{isLoggedIn:z})]})}),e.jsx(N,{animation:"slideUp",duration:y,delay:v*3,respectReducedMotion:!0,fallbackAnimation:"fadeIn",children:e.jsx(ke,{})}),e.jsx("section",{id:"usage-rules","aria-labelledby":"usage-heading",className:"focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-lg",tabIndex:-1,children:e.jsxs(N,{animation:"slideUp",duration:y,delay:v*4,respectReducedMotion:!0,fallbackAnimation:"fadeIn",children:[e.jsx("h2",{id:"usage-heading",className:"sr-only",children:"åˆ©ç”¨æ–¹æ³•ã¨æ–™é‡‘ã«ã¤ã„ã¦"}),e.jsx(De,{})]})}),e.jsx("section",{id:"dog-info-section","aria-labelledby":"dog-info-heading",className:"focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-lg",tabIndex:-1,children:e.jsxs(N,{animation:"slideUp",duration:y,delay:v*5,respectReducedMotion:!0,fallbackAnimation:"fadeIn",children:[e.jsx("h2",{id:"dog-info-heading",className:"sr-only",children:"ãƒ¯ãƒ³ã¡ã‚ƒã‚“ã«ã¤ã„ã¦ã®æƒ…å ±ç™ºä¿¡"}),e.jsx(be,{})]})})]})]})]}),e.jsxs("div",{"aria-live":"polite","aria-atomic":"true",className:"sr-only",id:"status-region",children:[m&&"ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰ã§ã™ã€‚",f&&"ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã„ã¾ã™ã€‚",k&&"ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™ã€‚"]}),e.jsx("div",{"aria-live":"assertive","aria-atomic":"true",className:"sr-only",id:"announcement-region"})]})}export{Ae as Home};
