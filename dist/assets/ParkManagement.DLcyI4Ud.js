var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,c=(s,t,l)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[t]=l,i=(e,s)=>{for(var t in s||(s={}))a.call(s,t)&&c(e,t,s[t]);if(l)for(var t of l(s))r.call(s,t)&&c(e,t,s[t]);return e},n=(e,l)=>s(e,t(l)),d=(e,s,t)=>new Promise(((l,a)=>{var r=e=>{try{i(t.next(e))}catch(s){a(s)}},c=e=>{try{i(t.throw(e))}catch(s){a(s)}},i=e=>e.done?l(e.value):Promise.resolve(e.value).then(r,c);i((t=t.apply(e,s)).next())}));import{u as x,j as m,C as o,B as h,s as u}from"./index.D9xag4tn.js";import{r as j,a as p,u as g,L as b}from"./router.BWT_vQps.js";import{O as N,a as f,l as y,d as v,R as w,p as _,e as k,c as S,A as C,a7 as I,b as P,o as E,v as D,a2 as T,j as O,F as q,ag as $,aa as z,aE as L,x as M,aG as R,t as A}from"./ui.BPlS2KKq.js";import{V as B,g as Q}from"./VaccineBadge.DLhIwHr_.js";import"./vendor.D1SiiUJb.js";import"./supabase.CZ8ekJUM.js";function F({lockId:e,parkName:s="ãƒ‰ãƒƒã‚°ãƒ‘ãƒ¼ã‚¯",purpose:t="entry",className:l="",onSuccess:a,onError:r,reservationId:c}){const{user:i}=x(),[n,p]=j.useState(null),[g,b]=j.useState(null),[C,I]=j.useState(null),[P,E]=j.useState(!1),[D,T]=j.useState(null),[O,q]=j.useState(!1),[$,z]=j.useState(!1),[L,M]=j.useState(!1),[R,A]=j.useState("");j.useEffect((()=>{if(n&&g){const e=setInterval((()=>{const s=new Date,t=g.getTime()-s.getTime();if(t<=0)I("æœŸé™åˆ‡ã‚Œ"),p(null),b(null),clearInterval(e);else{const e=Math.floor(t/6e4),s=Math.floor(t%6e4/1e3);I(`${e}:${s.toString().padStart(2,"0")}`)}}),1e3);return()=>clearInterval(e)}}),[n,g]);const B=()=>d(null,null,(function*(){if(i){E(!0),T(null);try{const{data:{session:l}}=yield u.auth.getSession();if(!(null==l?void 0:l.access_token))throw new Error("èªè¨¼ãŒå¿…è¦ã§ã™");let r=5,i=null;if(c){const e=yield(s=c,d(null,null,(function*(){try{const{data:e,error:t}=yield u.from("reservations").select("\n          *,\n          dog_park:dog_parks(*),\n          dog:dogs(*)\n        ").eq("id",s).single();return t?null:e}catch(e){return null}})));if(e&&"whole_facility"===e.reservation_type&&(i=(e=>{var s,t;try{const l=new Date(e.date),a=e.start_time.split(":").map(Number),r=null!=(s=a[0])?s:0,c=null!=(t=a[1])?t:0;return l.setHours(r,c,0,0),new Date(l.getTime()+60*e.duration*60*1e3)}catch(l){return null}})(e),i)){const e=new Date,s=i.getTime()-e.getTime();r=Math.max(1,Math.ceil(s/6e4))}}const n=yield fetch("/functions/v1/generate-pin",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l.access_token}`},body:JSON.stringify({lock_id:e,purpose:t,expiry_minutes:r,reservation_id:c||void 0})});if(!n.ok){const e=yield n.json();throw new Error(e.error||"PINã‚³ãƒ¼ãƒ‰ã®ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ")}const{pin:x,expires_at:m}=yield n.json();p(x),b(new Date(m)),z(!0),a&&a(x),setTimeout((()=>{z(!1)}),3e3)}catch(l){const e=l instanceof Error?l.message:"PINã‚³ãƒ¼ãƒ‰ã®ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ";if(e.startsWith("PAYMENT_REQUIRED:")){const s=e.replace("PAYMENT_REQUIRED:","").trim();A(s),M(!0),T(null)}else T(e),M(!1);r&&r(e)}finally{E(!1)}var s}}));return m.jsx(o,{className:`p-4 ${l}`,children:m.jsxs("div",{className:"text-center",children:[m.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center justify-center",children:[m.jsx(N,{className:"w-5 h-5 text-blue-600 mr-2"}),s,"ã®","entry"===t?"å…¥å£":"å‡ºå£"]}),n?m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border-2 border-blue-200 mx-auto",children:[m.jsx("p",{className:"text-sm text-blue-800 mb-1",children:"PINã‚³ãƒ¼ãƒ‰:"}),m.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[m.jsx("p",{className:"text-3xl font-bold tracking-widest text-blue-700",children:n}),m.jsx("button",{onClick:()=>{n&&navigator.clipboard.writeText(n).then((()=>{q(!0),setTimeout((()=>q(!1)),2e3)})).catch((()=>{}))},className:"p-1 text-blue-600 hover:text-blue-800 transition-colors",title:"ã‚³ãƒ”ãƒ¼",children:O?m.jsx(f,{className:"w-5 h-5"}):m.jsx(y,{className:"w-5 h-5"})})]})]}),m.jsx("div",{className:"bg-yellow-50 p-2 rounded-lg",children:m.jsxs("div",{className:"flex items-center justify-center space-x-2 text-yellow-800",children:[m.jsx(v,{className:"w-4 h-4"}),m.jsxs("span",{className:"font-medium",children:["æœ‰åŠ¹æœŸé™: ",C]})]})}),m.jsx("div",{className:"flex justify-center space-x-3",children:m.jsxs(h,{onClick:()=>{B()},variant:"secondary",size:"sm",isLoading:P,children:[m.jsx(w,{className:"w-4 h-4 mr-1"}),"å†ç”Ÿæˆ"]})}),m.jsxs("p",{className:"text-xs text-gray-500",children:["entry"===t?"å…¥å ´":"é€€å ´","æ™‚ã«ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã®ã‚­ãƒ¼ãƒ‘ãƒƒãƒ‰ã«ä¸Šè¨˜ã®PINã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"]})]}):m.jsxs("div",{className:"space-y-4",children:[m.jsxs("p",{className:"text-gray-600 mb-4",children:["entry"===t?"å…¥å ´":"é€€å ´","ç”¨ã®PINã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¾ã™ã€‚",m.jsx("br",{}),"ç”Ÿæˆã•ã‚ŒãŸPINã‚³ãƒ¼ãƒ‰ã¯5åˆ†é–“æœ‰åŠ¹ã§ã™ã€‚"]}),D&&m.jsxs("div",{className:"bg-red-50 p-3 rounded-lg flex items-center justify-center text-red-600",children:[m.jsx(_,{className:"w-4 h-4 mr-1"}),m.jsx("span",{children:D})]}),L&&m.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[m.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[m.jsx(k,{className:"w-6 h-6 text-blue-600 mt-1 flex-shrink-0"}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"æ±ºæ¸ˆãŒå¿…è¦ã§ã™"}),m.jsx("p",{className:"text-sm text-blue-800 mb-4",children:R})]})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs(h,{onClick:()=>window.location.href="/subscription",className:"w-full bg-purple-600 hover:bg-purple-700",children:[m.jsx(k,{className:"w-4 h-4 mr-2"}),"ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã«åŠ å…¥ï¼ˆÂ¥3,800/æœˆï¼‰"]}),m.jsxs(h,{onClick:()=>window.location.href="/parks",variant:"secondary",className:"w-full",children:[m.jsx(S,{className:"w-4 h-4 mr-2"}),"1æ—¥åˆ¸ã‚’è³¼å…¥ï¼ˆÂ¥800ï¼‰"]})]}),m.jsxs("p",{className:"text-xs text-blue-700 mt-3",children:["â€¢ ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ï¼šå…¨å›½ã®ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒä½¿ã„æ”¾é¡Œ",m.jsx("br",{}),"â€¢ 1æ—¥åˆ¸ï¼šé¸æŠã—ãŸãƒ‰ãƒƒã‚°ãƒ©ãƒ³ã§24æ™‚é–“åˆ©ç”¨å¯èƒ½"]})]}),$&&m.jsxs("div",{className:"bg-green-50 p-3 rounded-lg flex items-center justify-center text-green-600",children:[m.jsx(f,{className:"w-4 h-4 mr-1"}),m.jsx("span",{children:"PINã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¾ã—ãŸ"})]}),m.jsxs(h,{onClick:()=>{B()},isLoading:P,className:"w-full",children:[m.jsx(N,{className:"w-4 h-4 mr-2"}),"entry"===t?"å…¥å ´":"é€€å ´","ç”¨PINã‚’ç”Ÿæˆ"]})]})]})})}const J=e=>{if(!e)return null;return new Date(e).toISOString()};function U(){const{parkId:e}=p(),{user:s}=x(),t=g(),[l,a]=j.useState(null),[r,c]=j.useState(!0),[y,w]=j.useState(""),[k,U]=j.useState(""),[V,Y]=j.useState("overview"),[G,H]=j.useState([]),[W,Z]=j.useState(null),[K,X]=j.useState("entry"),[ee,se]=j.useState([]),[te,le]=j.useState([]),[ae,re]=j.useState([]),[ce,ie]=j.useState(!1),[ne,de]=j.useState({title:"",description:"",start_date:"",end_date:"",is_emergency:!1,notify_users:!0}),[xe,me]=j.useState(!1),[oe,he]=j.useState(!1),[ue,je]=j.useState(!1),[pe,ge]=j.useState({max_capacity:0,facilities:{parking:!1,shower:!1,restroom:!1,agility:!1,rest_area:!1,water_station:!1},large_dog_area:!1,small_dog_area:!1,private_booths:!1,private_booth_count:0,facility_details:"",description:""});j.useEffect((()=>{s&&e?be():t("/owner-dashboard")}),[s,e,t]),j.useEffect((()=>{d(null,null,(function*(){if(s)try{const{data:e,error:t}=yield u.from("dogs").select("\n            *,\n            vaccine_certifications (\n              id,\n              status,\n              rabies_expiry_date,\n              combo_expiry_date,\n              approved_at\n            )\n          ").eq("owner_id",s.id);if(t)throw t;const l=(e||[]).filter((e=>"approved"===Q(e)));se(l)}catch(e){}}))}),[s]);const be=()=>d(null,null,(function*(){try{c(!0);const{data:l,error:r}=yield u.from("dog_parks").select("*").eq("id",e).eq("owner_id",null==s?void 0:s.id).single();if(r)throw r;if(!l)return void t("/owner-dashboard");a(l),ge({max_capacity:l.max_capacity||0,facilities:l.facilities||{parking:!1,shower:!1,restroom:!1,agility:!1,rest_area:!1,water_station:!1},large_dog_area:l.large_dog_area||!1,small_dog_area:l.small_dog_area||!1,private_booths:l.private_booths||!1,private_booth_count:l.private_booth_count||0,facility_details:l.facility_details||"",description:l.description||""});const{data:i,error:n}=yield u.from("smart_locks").select("*").eq("park_id",e);if(n)throw n;H(i||[]),i&&i.length>0&&Z(i[0]);const{data:d,error:x}=yield u.from("dogs").select("\n          *,\n          vaccine_certifications!inner(*)\n        ").eq("owner_id",null==s?void 0:s.id).eq("vaccine_certifications.status","approved");if(x)throw x;se(d||[]),yield Ne()}catch(l){w("ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}finally{c(!1)}})),Ne=()=>d(null,null,(function*(){try{const{data:s,error:t}=yield u.from("park_maintenance").select("*").eq("park_id",e).order("start_date",{ascending:!1});if(t)throw t;re(s||[])}catch(s){}})),fe=e=>"ã‚ªã‚¹"===e?"ãã‚“":"ã¡ã‚ƒã‚“",ye=e=>e?new Date(e).toLocaleString("ja-JP",{year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Asia/Tokyo"}):"æœªè¨­å®š";return r?m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):l?m.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[m.jsx("div",{className:"flex items-center space-x-4 mb-6",children:m.jsxs(b,{to:"/owner-dashboard",className:"flex items-center text-blue-600 hover:text-blue-800",children:[m.jsx(C,{className:"w-4 h-4 mr-2"}),"ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚‹"]})}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-2 flex items-center",children:[m.jsx(I,{className:"w-8 h-8 text-blue-600 mr-3"}),l.name,"ã®ç®¡ç†"]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(P,{className:"w-4 h-4 text-gray-500"}),m.jsx("p",{className:"text-gray-600",children:l.address})]})]}),m.jsxs("div",{className:"flex space-x-3",children:[m.jsx(b,{to:`/parks/${l.id}`,children:m.jsxs(h,{variant:"secondary",children:[m.jsx(E,{className:"w-4 h-4 mr-2"}),"å…¬é–‹ãƒšãƒ¼ã‚¸ã‚’è¦‹ã‚‹"]})}),m.jsxs(h,{onClick:()=>he(!0),children:[m.jsx(D,{className:"w-4 h-4 mr-2"}),"è¨­å®šã‚’ç·¨é›†"]})]})]}),y&&m.jsxs("div",{className:"bg-red-100 border border-red-300 text-red-800 rounded-lg p-4 flex items-start",children:[m.jsx(_,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),m.jsx("p",{children:y})]}),k&&m.jsxs("div",{className:"bg-green-100 border border-green-300 text-green-800 rounded-lg p-4 flex items-start",children:[m.jsx(f,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0"}),m.jsx("p",{children:k})]}),m.jsxs("div",{className:"flex space-x-4 border-b",children:[m.jsxs("button",{className:"px-4 py-2 font-medium "+("overview"===V?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>Y("overview"),children:[m.jsx(I,{className:"w-4 h-4 inline mr-2"}),"æ¦‚è¦"]}),m.jsxs("button",{className:"px-4 py-2 font-medium "+("stats"===V?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>Y("stats"),children:[m.jsx(T,{className:"w-4 h-4 inline mr-2"}),"çµ±è¨ˆãƒ»åç›Š"]}),m.jsxs("button",{className:"px-4 py-2 font-medium "+("pins"===V?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>Y("pins"),children:[m.jsx(N,{className:"w-4 h-4 inline mr-2"}),"PINã‚³ãƒ¼ãƒ‰ç®¡ç†"]}),m.jsxs("button",{className:"px-4 py-2 font-medium "+("settings"===V?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>Y("settings"),children:[m.jsx(O,{className:"w-4 h-4 inline mr-2"}),"è¨­å®š"]})]}),"overview"===V&&m.jsxs("div",{className:"space-y-6",children:[m.jsxs(o,{className:"p-6",children:[m.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[m.jsx(q,{className:"w-6 h-6 text-blue-600 mr-2"}),"åŸºæœ¬æƒ…å ±"]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold mb-3",children:"æ–½è¨­æƒ…å ±"}),m.jsxs("div",{className:"space-y-2 text-sm",children:[m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"ä½æ‰€:"})," ",l.address]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:"})," ","approved"===l.status?"é‹å–¶ä¸­":"å¯©æŸ»ä¸­"]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"æ–™é‡‘:"})," Â¥",l.price,"/æ—¥"]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"æœ€å¤§åå®¹äººæ•°:"})," ",l.max_capacity,"äºº"]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"ç¾åœ¨ã®åˆ©ç”¨è€…æ•°:"})," ",l.current_occupancy,"äºº"]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"è©•ä¾¡:"})," â˜…",l.average_rating.toFixed(1)," (",l.review_count,"ä»¶)"]})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold mb-3",children:"è¨­å‚™æƒ…å ±"}),m.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries({parking:"é§è»Šå ´",shower:"ã‚·ãƒ£ãƒ¯ãƒ¼è¨­å‚™",restroom:"ãƒˆã‚¤ãƒ¬",agility:"ã‚¢ã‚¸ãƒªãƒ†ã‚£è¨­å‚™",rest_area:"ä¼‘æ†©ã‚¹ãƒšãƒ¼ã‚¹",water_station:"çµ¦æ°´è¨­å‚™"}).map((([e,s])=>m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("div",{className:"w-4 h-4 rounded "+(l.facilities[e]?"bg-green-500":"bg-gray-300")}),m.jsx("span",{className:"text-sm",children:s})]},e)))}),m.jsxs("div",{className:"mt-4 space-y-2",children:[m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"å¤§å‹çŠ¬ã‚¨ãƒªã‚¢:"})," ",l.large_dog_area?"ã‚ã‚Š":"ãªã—"]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"å°å‹çŠ¬ã‚¨ãƒªã‚¢:"})," ",l.small_dog_area?"ã‚ã‚Š":"ãªã—"]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ¼ã‚¹:"})," ",l.private_booths?`${l.private_booth_count}å®¤`:"ãªã—"]})]})]})]})]}),m.jsxs(o,{className:"p-6",children:[m.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[m.jsx(S,{className:"w-6 h-6 text-blue-600 mr-2"}),"ä»Šæ—¥ã®çµ±è¨ˆ"]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[m.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[m.jsx(S,{className:"w-5 h-5 text-blue-600"}),m.jsx("h4",{className:"font-medium text-blue-900",children:"ä»Šæ—¥ã®äºˆç´„"})]}),m.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"5ä»¶"}),m.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"å‰æ—¥æ¯” +2ä»¶"})]}),m.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[m.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[m.jsx($,{className:"w-5 h-5 text-green-600"}),m.jsx("h4",{className:"font-medium text-green-900",children:"ä»Šæ—¥ã®åç›Š"})]}),m.jsx("p",{className:"text-2xl font-bold text-green-600",children:"Â¥4,000"}),m.jsx("p",{className:"text-xs text-green-700 mt-1",children:"å‰æ—¥æ¯” +Â¥1,600"})]}),m.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[m.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[m.jsx(z,{className:"w-5 h-5 text-purple-600"}),m.jsx("h4",{className:"font-medium text-purple-900",children:"åˆ©ç”¨è€…æ•°"})]}),m.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[l.current_occupancy,"äºº"]}),m.jsxs("p",{className:"text-xs text-purple-700 mt-1",children:["æœ€å¤§: ",l.max_capacity,"äºº"]})]})]})]}),m.jsxs(o,{className:"p-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[m.jsx(L,{className:"w-6 h-6 text-blue-600 mr-2"}),"æ–½è¨­ç”»åƒ"]}),m.jsx(b,{to:`/parks/${l.id}/second-stage`,children:m.jsxs(h,{size:"sm",children:[m.jsx(D,{className:"w-4 h-4 mr-2"}),"ç”»åƒã‚’ç®¡ç†"]})})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.image_url?m.jsx("div",{className:"h-48 rounded-lg overflow-hidden",children:m.jsx("img",{src:l.image_url,alt:`${l.name} - ãƒ¡ã‚¤ãƒ³ç”»åƒ`,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://via.placeholder.com/400x300?text=No+Image"}})}):m.jsx("div",{className:"h-48 bg-gray-100 rounded-lg flex items-center justify-center",children:m.jsx("p",{className:"text-gray-500",children:"ãƒ¡ã‚¤ãƒ³ç”»åƒãªã—"})}),l.cover_image_url?m.jsx("div",{className:"h-48 rounded-lg overflow-hidden",children:m.jsx("img",{src:l.cover_image_url,alt:`${l.name} - ã‚«ãƒãƒ¼ç”»åƒ`,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://via.placeholder.com/400x300?text=No+Image"}})}):m.jsx("div",{className:"h-48 bg-gray-100 rounded-lg flex items-center justify-center",children:m.jsx("p",{className:"text-gray-500",children:"ã‚«ãƒãƒ¼ç”»åƒãªã—"})}),m.jsx("div",{className:"h-48 bg-gray-100 rounded-lg flex items-center justify-center",children:m.jsxs(b,{to:`/parks/${l.id}/second-stage`,className:"text-blue-600 hover:text-blue-800 flex flex-col items-center",children:[m.jsx(L,{className:"w-8 h-8 mb-2"}),m.jsx("p",{children:"ãã®ä»–ã®ç”»åƒã‚’ç®¡ç†"})]})})]})]})]}),"stats"===V&&m.jsxs("div",{className:"space-y-6",children:[m.jsxs(o,{className:"p-6",children:[m.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[m.jsx(T,{className:"w-6 h-6 text-blue-600 mr-2"}),"åˆ©ç”¨çµ±è¨ˆ"]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[m.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[m.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[m.jsx(S,{className:"w-5 h-5 text-blue-600"}),m.jsx("h4",{className:"font-medium text-blue-900",children:"ä»Šæœˆã®äºˆç´„"})]}),m.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"32ä»¶"}),m.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"å‰æœˆæ¯” +12%"})]}),m.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[m.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[m.jsx($,{className:"w-5 h-5 text-green-600"}),m.jsx("h4",{className:"font-medium text-green-900",children:"ä»Šæœˆã®åç›Š"})]}),m.jsx("p",{className:"text-2xl font-bold text-green-600",children:"Â¥25,600"}),m.jsx("p",{className:"text-xs text-green-700 mt-1",children:"å‰æœˆæ¯” +8%"})]}),m.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[m.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[m.jsx(z,{className:"w-5 h-5 text-purple-600"}),m.jsx("h4",{className:"font-medium text-purple-900",children:"åˆ©ç”¨è€…æ•°"})]}),m.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"128äºº"}),m.jsx("p",{className:"text-xs text-purple-700 mt-1",children:"å‰æœˆæ¯” +15%"})]})]}),m.jsx("div",{className:"h-64 bg-gray-100 rounded-lg flex items-center justify-center",children:m.jsx("p",{className:"text-gray-500",children:"åˆ©ç”¨çµ±è¨ˆã‚°ãƒ©ãƒ•ï¼ˆå®Ÿè£…äºˆå®šï¼‰"})})]}),m.jsxs(o,{className:"p-6",children:[m.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[m.jsx($,{className:"w-6 h-6 text-blue-600 mr-2"}),"åç›Šæƒ…å ±"]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:"åç›Šé…åˆ†"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-blue-800 mb-1",children:"ã‚ªãƒ¼ãƒŠãƒ¼å–ã‚Šåˆ†ï¼ˆ80%ï¼‰"}),m.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"Â¥20,480"})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-blue-800 mb-1",children:"ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æ‰‹æ•°æ–™ï¼ˆ20%ï¼‰"}),m.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"Â¥5,120"})]})]})]}),m.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"font-semibold text-green-900 mb-3",children:"åç›Šå†…è¨³"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-green-800 mb-1",children:"é€šå¸¸åˆ©ç”¨"}),m.jsx("p",{className:"text-xl font-bold text-green-600",children:"Â¥12,800"}),m.jsx("p",{className:"text-xs text-green-700",children:"16ä»¶"})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-green-800 mb-1",children:"æ–½è¨­è²¸ã—åˆ‡ã‚Š"}),m.jsx("p",{className:"text-xl font-bold text-green-600",children:"Â¥8,800"}),m.jsx("p",{className:"text-xs text-green-700",children:"2ä»¶"})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-green-800 mb-1",children:"ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ¼ã‚¹"}),m.jsx("p",{className:"text-xl font-bold text-green-600",children:"Â¥4,000"}),m.jsx("p",{className:"text-xs text-green-700",children:"2ä»¶"})]})]})]}),m.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"font-semibold text-purple-900 mb-3",children:"æŒ¯è¾¼æƒ…å ±"}),m.jsx("p",{className:"text-sm text-purple-800 mb-2",children:"æŒ¯è¾¼ã¯æ¯æœˆ15æ—¥ã«å‰æœˆåˆ†ã‚’ä¸€æ‹¬ã§è¡Œã„ã¾ã™ã€‚æŒ¯è¾¼æ‰‹æ•°æ–™ã¯å½“ç¤¾è² æ‹…ã§ã™ã€‚"}),m.jsx(b,{to:"/owner-payment-system",children:m.jsxs(h,{size:"sm",className:"bg-purple-600 hover:bg-purple-700",children:[m.jsx($,{className:"w-4 h-4 mr-2"}),"æŒ¯è¾¼æƒ…å ±ã‚’ç¢ºèª"]})})]})]})]})]}),"pins"===V&&m.jsxs("div",{className:"space-y-6",children:[m.jsxs(o,{className:"p-6",children:[m.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[m.jsx(N,{className:"w-6 h-6 text-blue-600 mr-2"}),"ã‚ªãƒ¼ãƒŠãƒ¼ç”¨PINã‚³ãƒ¼ãƒ‰ç™ºè¡Œ"]}),m.jsx("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:m.jsxs("div",{className:"flex items-start space-x-3",children:[m.jsx(f,{className:"w-5 h-5 text-blue-600 mt-1 flex-shrink-0"}),m.jsxs("div",{className:"text-sm text-blue-800",children:[m.jsx("p",{className:"font-medium mb-1",children:"ã‚ªãƒ¼ãƒŠãƒ¼ç‰¹æ¨©"}),m.jsx("p",{children:"ã‚ªãƒ¼ãƒŠãƒ¼ã¯æ±ºæ¸ˆä¸è¦ã§PINã‚³ãƒ¼ãƒ‰ã‚’ç™ºè¡Œã§ãã¾ã™ã€‚æ–½è¨­ã®ç®¡ç†ã‚„ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã«ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚"}),m.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[m.jsx("li",{children:"PINã‚³ãƒ¼ãƒ‰ã¯5åˆ†é–“æœ‰åŠ¹ã§ã™"}),m.jsx("li",{children:"å…¥å ´ãƒ»é€€å ´ãã‚Œãã‚Œã§PINã‚³ãƒ¼ãƒ‰ãŒå¿…è¦ã§ã™"}),m.jsx("li",{children:"ã‚¹ã‚¿ãƒƒãƒ•ã¨å…±æœ‰ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™"}),m.jsx("li",{children:"å…¥å ´ã™ã‚‹çŠ¬ã‚’é¸æŠã—ã¦ãã ã•ã„"})]})]})]})}),m.jsxs("div",{className:"flex justify-center space-x-4 mb-4",children:[m.jsxs("button",{className:"px-6 py-3 rounded-lg flex items-center space-x-2 "+("entry"===K?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),onClick:()=>X("entry"),children:[m.jsx(C,{className:"w-5 h-5"}),m.jsx("span",{children:"å…¥å ´"})]}),m.jsxs("button",{className:"px-6 py-3 rounded-lg flex items-center space-x-2 "+("exit"===K?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),onClick:()=>X("exit"),children:[m.jsx(C,{className:"w-5 h-5 rotate-180"}),m.jsx("span",{children:"é€€å ´"})]})]}),G.length>0&&m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã‚’é¸æŠ"}),m.jsx("select",{value:(null==W?void 0:W.id)||"",onChange:e=>{const s=G.find((s=>s.id===e.target.value));Z(s||null)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:G.map((e=>m.jsx("option",{value:e.id,children:e.lock_name},e.id)))})]}),m.jsxs("div",{className:"mb-6",children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["å…¥å ´ã™ã‚‹ãƒ¯ãƒ³ã¡ã‚ƒã‚“ã‚’é¸æŠï¼ˆæœ€å¤§",3,"é ­ï¼‰"]}),0===ee.length?m.jsx("div",{className:"p-4 bg-yellow-50 rounded-lg",children:m.jsxs("p",{className:"text-yellow-800",children:["ãƒ¯ã‚¯ãƒãƒ³æ¥ç¨®è¨¼æ˜æ›¸ãŒæ‰¿èªã•ã‚ŒãŸãƒ¯ãƒ³ã¡ã‚ƒã‚“ãŒã„ã¾ã›ã‚“ã€‚",m.jsx(b,{to:"/register-dog",className:"text-blue-600 hover:underline ml-1",children:"ãƒ¯ãƒ³ã¡ã‚ƒã‚“ã‚’ç™»éŒ²ã™ã‚‹"})]})}):m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ee.map((e=>{const s=te.includes(e.id),t=!s&&te.length>=3;return m.jsxs("div",{className:"p-4 border-2 rounded-lg cursor-pointer transition-colors relative "+(s?"border-green-500 bg-green-50":t?"border-gray-200 bg-gray-50 opacity-50 cursor-not-allowed":"border-gray-200 hover:border-gray-300"),onClick:()=>{return!t&&(s=e.id,void le((e=>e.includes(s)?e.filter((e=>e!==s)):e.length>=3?(w("æœ€å¤§3é ­ã¾ã§é¸æŠå¯èƒ½ã§ã™ã€‚"),e):(w(""),[...e,s]))));var s},children:[s&&m.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center",children:m.jsx(f,{className:"w-4 h-4"})}),m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden",children:e.image_url?m.jsx("img",{src:e.image_url,alt:e.name,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-6 h-6 text-gray-500",children:"ğŸ¾"})}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[m.jsxs("h3",{className:"font-semibold",children:[e.name,fe(e.gender)]}),m.jsx(B,{status:Q(e),size:"sm"})]}),m.jsxs("p",{className:"text-sm text-gray-600",children:[e.breed," â€¢ ",e.gender]})]})]})]},e.id)}))}),te.length>0&&m.jsxs("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:[m.jsx("h4",{className:"font-medium text-green-900 mb-1",children:"é¸æŠä¸­ã®ãƒ¯ãƒ³ã¡ã‚ƒã‚“"}),m.jsx("p",{className:"text-sm text-green-800",children:te.map((e=>{const s=ee.find((s=>s.id===e));return s?`${s.name}${fe(s.gender)}`:""})).filter((e=>e)).join("ã€")}),m.jsxs("p",{className:"text-xs text-green-700 mt-1",children:[te.length,"é ­ãŒåŒæ™‚å…¥å ´ã§ãã¾ã™"]})]})]}),W?m.jsx("div",{className:"mt-6",children:te.length>0?m.jsx(F,{lockId:W.lock_id,parkName:l.name,purpose:K,onSuccess:e=>{U(`PINã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¾ã—ãŸ: ${e}`),setTimeout((()=>{U("")}),3e3)},onError:e=>{w(e),setTimeout((()=>{w("")}),5e3)}}):m.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg text-center",children:[m.jsx(_,{className:"w-6 h-6 text-yellow-600 mx-auto mb-2"}),m.jsx("p",{className:"text-yellow-800 font-medium",children:"ãƒ¯ãƒ³ã¡ã‚ƒã‚“ã‚’1é ­ä»¥ä¸Šé¸æŠã—ã¦ãã ã•ã„"}),m.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"PINã‚³ãƒ¼ãƒ‰ã‚’ç™ºè¡Œã™ã‚‹ã«ã¯ã€å…¥å ´ã™ã‚‹ãƒ¯ãƒ³ã¡ã‚ƒã‚“ã‚’é¸æŠã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™"})]})}):m.jsxs("div",{className:"text-center py-8",children:[m.jsx(N,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),m.jsx("p",{className:"text-gray-600 mb-4",children:"ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“"}),m.jsx(h,{onClick:()=>Y("settings"),children:"ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã‚’è¨­å®šã™ã‚‹"})]})]}),m.jsx(o,{className:"p-6 bg-blue-50 border-blue-200",children:m.jsxs("div",{className:"flex items-start space-x-3",children:[m.jsx(N,{className:"w-6 h-6 text-blue-600 mt-1"}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"PINã‚³ãƒ¼ãƒ‰ã«ã¤ã„ã¦"}),m.jsxs("div",{className:"text-sm text-blue-800 space-y-2",children:[m.jsx("p",{children:"â€¢ åˆ©ç”¨è€…ã¯PINã‚³ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¦å…¥é€€å ´ã—ã¾ã™"}),m.jsx("p",{children:"â€¢ PINã‚³ãƒ¼ãƒ‰ã¯5åˆ†é–“æœ‰åŠ¹ã§ã€åˆ©ç”¨è€…ãŒæ”¯æ‰•ã„å¾Œã«ç™ºè¡Œã•ã‚Œã¾ã™"}),m.jsx("p",{children:"â€¢ ã‚ªãƒ¼ãƒŠãƒ¼ã¯æ±ºæ¸ˆä¸è¦ã§PINã‚³ãƒ¼ãƒ‰ã‚’ç™ºè¡Œã§ãã¾ã™"}),m.jsx("p",{children:"â€¢ æ–½è¨­è²¸ã—åˆ‡ã‚Šã®å ´åˆã€åˆ©ç”¨è€…ã¯å‹é”ã«PINã‚³ãƒ¼ãƒ‰ã‚’å…±æœ‰ã§ãã¾ã™"})]})]})]})})]}),"settings"===V&&m.jsxs("div",{className:"space-y-6",children:[oe&&m.jsxs(o,{className:"p-6 bg-blue-50 border-blue-200",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h3",{className:"text-xl font-semibold text-blue-900",children:"æ–½è¨­æƒ…å ±ã®ç·¨é›†"}),m.jsx("button",{onClick:()=>he(!1),className:"text-blue-600 hover:text-blue-800",children:m.jsx(M,{className:"w-5 h-5"})})]}),m.jsxs("form",{onSubmit:e=>d(null,null,(function*(){if(e.preventDefault(),l&&s){je(!0);try{if(pe.max_capacity<1)throw new Error("åå®¹äººæ•°ã¯1äººä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");if(pe.private_booths&&pe.private_booth_count<1)throw new Error("ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ¼ã‚¹ãŒã‚ã‚‹å ´åˆã¯ã€éƒ¨å±‹æ•°ã‚’1ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");const{error:e}=yield u.from("dog_parks").update({max_capacity:pe.max_capacity,facilities:pe.facilities,large_dog_area:pe.large_dog_area,small_dog_area:pe.small_dog_area,private_booths:pe.private_booths,private_booth_count:pe.private_booths?pe.private_booth_count:0,facility_details:pe.facility_details,description:pe.description,updated_at:(new Date).toISOString()}).eq("id",l.id);if(e)throw e;U("æ–½è¨­æƒ…å ±ã‚’æ›´æ–°ã—ã¾ã—ãŸã€‚"),he(!1),yield be(),setTimeout((()=>{U("")}),3e3)}catch(t){w(t instanceof Error?t.message:"æ–½è¨­æƒ…å ±ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸã€‚"),setTimeout((()=>{w("")}),5e3)}finally{je(!1)}}})),className:"space-y-6",children:[m.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[m.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"å¤‰æ›´ä¸å¯é …ç›®"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"ä½æ‰€:"})," ",l.address]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"æ–™é‡‘:"})," Â¥",l.price,"/æ—¥ï¼ˆå…¨å›½çµ±ä¸€æ–™é‡‘ï¼‰"]})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"æœ€å¤§åå®¹äººæ•° *"}),m.jsx("input",{type:"number",min:"1",max:"100",value:pe.max_capacity,onChange:e=>ge((s=>n(i({},s),{max_capacity:parseInt(e.target.value)||0}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"èª¬æ˜æ–‡"}),m.jsx("textarea",{value:pe.description,onChange:e=>ge((s=>n(i({},s),{description:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"æ–½è¨­ã®ç‰¹å¾´ã‚„åˆ©ç”¨æ¡ˆå†…ãªã©"})]})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"ã‚¨ãƒªã‚¢è¨­å®š"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("label",{className:"flex items-center space-x-2",children:[m.jsx("input",{type:"checkbox",checked:pe.large_dog_area,onChange:e=>ge((s=>n(i({},s),{large_dog_area:e.target.checked}))),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),m.jsx("span",{className:"text-sm text-gray-700",children:"å¤§å‹çŠ¬ã‚¨ãƒªã‚¢"})]}),m.jsxs("label",{className:"flex items-center space-x-2",children:[m.jsx("input",{type:"checkbox",checked:pe.small_dog_area,onChange:e=>ge((s=>n(i({},s),{small_dog_area:e.target.checked}))),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),m.jsx("span",{className:"text-sm text-gray-700",children:"å°å‹çŠ¬ã‚¨ãƒªã‚¢"})]})]})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ¼ã‚¹"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("label",{className:"flex items-center space-x-2",children:[m.jsx("input",{type:"checkbox",checked:pe.private_booths,onChange:e=>ge((s=>n(i({},s),{private_booths:e.target.checked}))),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),m.jsx("span",{className:"text-sm text-gray-700",children:"ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ¼ã‚¹ã‚ã‚Š"})]}),pe.private_booths&&m.jsxs("div",{className:"ml-6",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"éƒ¨å±‹æ•°"}),m.jsx("input",{type:"number",min:"1",max:"10",value:pe.private_booth_count,onChange:e=>ge((s=>n(i({},s),{private_booth_count:parseInt(e.target.value)||0}))),className:"w-24 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"è¨­å‚™æƒ…å ±"}),m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries({parking:"é§è»Šå ´",shower:"ã‚·ãƒ£ãƒ¯ãƒ¼è¨­å‚™",restroom:"ãƒˆã‚¤ãƒ¬",agility:"ã‚¢ã‚¸ãƒªãƒ†ã‚£è¨­å‚™",rest_area:"ä¼‘æ†©ã‚¹ãƒšãƒ¼ã‚¹",water_station:"çµ¦æ°´è¨­å‚™"}).map((([e,s])=>m.jsxs("label",{className:"flex items-center space-x-2",children:[m.jsx("input",{type:"checkbox",checked:pe.facilities[e],onChange:s=>ge((t=>n(i({},t),{facilities:n(i({},t.facilities),{[e]:s.target.checked})}))),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),m.jsx("span",{className:"text-sm text-gray-700",children:s})]},e)))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"è¨­å‚™è©³ç´°èª¬æ˜"}),m.jsx("textarea",{value:pe.facility_details,onChange:e=>ge((s=>n(i({},s),{facility_details:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"è¨­å‚™ã®è©³ç´°èª¬æ˜ã‚„åˆ©ç”¨æ¡ˆå†…ãªã©"})]}),m.jsxs("div",{className:"flex justify-end space-x-3",children:[m.jsx(h,{type:"button",variant:"secondary",onClick:()=>he(!1),children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"}),m.jsx(h,{type:"submit",isLoading:ue,className:"bg-blue-600 hover:bg-blue-700",children:"æ›´æ–°"})]})]})]}),m.jsxs(o,{className:"p-6",children:[m.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[m.jsx(O,{className:"w-6 h-6 text-blue-600 mr-2"}),"æ–½è¨­è¨­å®š"]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:"åŸºæœ¬è¨­å®š"}),m.jsx("p",{className:"text-sm text-blue-800 mb-3",children:"æ–½è¨­ã®åŸºæœ¬æƒ…å ±ã‚„è¨­å‚™æƒ…å ±ã‚’ç·¨é›†ã§ãã¾ã™ã€‚ä½æ‰€ã¨æ–™é‡‘ã¯å¤‰æ›´ã§ãã¾ã›ã‚“ã€‚"}),m.jsxs(h,{size:"sm",onClick:()=>he(!0),children:[m.jsx(D,{className:"w-4 h-4 mr-2"}),"åŸºæœ¬æƒ…å ±ã‚’ç·¨é›†"]})]}),m.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"font-semibold text-green-900 mb-3",children:"æ–™é‡‘è¨­å®š"}),m.jsx("p",{className:"text-sm text-green-800 mb-3",children:"æ–™é‡‘ä½“ç³»ã¯å…¨å›½çµ±ä¸€ã§ã™ã€‚å¤‰æ›´ã¯ã§ãã¾ã›ã‚“ã€‚"}),m.jsxs("ul",{className:"text-sm text-green-800 space-y-1",children:[m.jsx("li",{children:"â€¢ é€šå¸¸åˆ©ç”¨: Â¥800/æ—¥ï¼ˆå›ºå®šï¼‰"}),m.jsx("li",{children:"â€¢ æ–½è¨­è²¸ã—åˆ‡ã‚Š: Â¥4,400/æ™‚é–“ï¼ˆå›ºå®šï¼‰"}),m.jsx("li",{children:"â€¢ ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ¼ã‚¹: ã‚µãƒ–ã‚¹ã‚¯ä½¿ã„æ”¾é¡Œãƒ»1æ—¥åˆ¸ã§ã‚‚åˆ©ç”¨å¯èƒ½ï¼ˆè¿½åŠ æ–™é‡‘ãªã—ï¼‰"})]})]}),m.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"font-semibold text-purple-900 mb-3",children:"ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯è¨­å®š"}),m.jsx("p",{className:"text-sm text-purple-800 mb-3",children:"ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã®è¨­å®šã‚’ç®¡ç†ã—ã¾ã™ã€‚"}),m.jsxs(h,{size:"sm",className:"bg-purple-600 hover:bg-purple-700",children:[m.jsx(N,{className:"w-4 h-4 mr-2"}),"ã‚¹ãƒãƒ¼ãƒˆãƒ­ãƒƒã‚¯ã‚’ç®¡ç†"]})]}),m.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"font-semibold text-orange-900 mb-3",children:"å–¶æ¥­æ™‚é–“è¨­å®š"}),m.jsx("p",{className:"text-sm text-orange-800 mb-3",children:"å–¶æ¥­æ™‚é–“ã¯24æ™‚é–“ã§ã™ã€‚å¤‰æ›´ã¯ã§ãã¾ã›ã‚“ã€‚"}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(v,{className:"w-5 h-5 text-orange-600"}),m.jsx("span",{className:"font-medium",children:"24æ™‚é–“å–¶æ¥­"})]})]})]})]}),m.jsxs(o,{className:"p-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[m.jsx(R,{className:"w-6 h-6 text-blue-600 mr-2"}),"ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ç®¡ç†"]}),m.jsxs(h,{onClick:()=>ie(!0),className:"bg-blue-600 hover:bg-blue-700",children:[m.jsx(A,{className:"w-4 h-4 mr-2"}),"ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹äºˆå®šã‚’è¿½åŠ "]})]}),ce&&m.jsxs(o,{className:"p-4 mb-6 bg-blue-50 border-blue-200",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"æ–°ã—ã„ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹äºˆå®š"}),m.jsx("button",{onClick:()=>ie(!1),className:"text-blue-600 hover:text-blue-800",children:m.jsx(M,{className:"w-5 h-5"})})]}),m.jsxs("form",{onSubmit:t=>d(null,null,(function*(){if(t.preventDefault(),s&&e){me(!0);try{if(!ne.title||!ne.start_date||!ne.end_date)throw new Error("å¿…é ˆé …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");const t=new Date(ne.start_date);if(new Date(ne.end_date)<=t)throw new Error("çµ‚äº†æ—¥æ™‚ã¯é–‹å§‹æ—¥æ™‚ã‚ˆã‚Šå¾Œã«è¨­å®šã—ã¦ãã ã•ã„ã€‚");if(t<new Date)throw new Error("é–‹å§‹æ—¥æ™‚ã¯ç¾åœ¨æ™‚åˆ»ã‚ˆã‚Šå¾Œã«è¨­å®šã—ã¦ãã ã•ã„ã€‚");const{error:l}=yield u.from("park_maintenance").insert({park_id:e,title:ne.title,description:ne.description,start_date:J(ne.start_date),end_date:J(ne.end_date),is_emergency:ne.is_emergency,notify_users:ne.notify_users,created_by:s.id});if(l)throw l;U("ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œæˆã—ã¾ã—ãŸã€‚"),ie(!1),de({title:"",description:"",start_date:"",end_date:"",is_emergency:!1,notify_users:!0}),yield Ne()}catch(l){w(l instanceof Error?l.message:"ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}finally{me(!1)}}})),className:"space-y-4",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹å†…å®¹ *"}),m.jsx("input",{type:"text",value:ne.title,onChange:e=>de((s=>n(i({},s),{title:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"ä¾‹ï¼šè¨­å‚™ç‚¹æ¤œãƒ»æ¸…æƒä½œæ¥­",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"é–‹å§‹æ—¥æ™‚ * (æ—¥æœ¬æ™‚é–“)"}),m.jsx("input",{type:"datetime-local",value:ne.start_date,onChange:e=>de((s=>n(i({},s),{start_date:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"æ—¥æœ¬æ™‚é–“ã§å…¥åŠ›ã—ã¦ãã ã•ã„"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"çµ‚äº†æ—¥æ™‚ * (æ—¥æœ¬æ™‚é–“)"}),m.jsx("input",{type:"datetime-local",value:ne.end_date,onChange:e=>de((s=>n(i({},s),{end_date:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"æ—¥æœ¬æ™‚é–“ã§å…¥åŠ›ã—ã¦ãã ã•ã„"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"è©³ç´°èª¬æ˜"}),m.jsx("textarea",{value:ne.description,onChange:e=>de((s=>n(i({},s),{description:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹å†…å®¹ã®è©³ç´°èª¬æ˜ï¼ˆä»»æ„ï¼‰"})]}),m.jsxs("div",{className:"flex items-center space-x-6",children:[m.jsxs("label",{className:"flex items-center space-x-2",children:[m.jsx("input",{type:"checkbox",checked:ne.is_emergency,onChange:e=>de((s=>n(i({},s),{is_emergency:e.target.checked}))),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),m.jsx("span",{className:"text-sm text-gray-700",children:"ç·Šæ€¥ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹"})]}),m.jsxs("label",{className:"flex items-center space-x-2",children:[m.jsx("input",{type:"checkbox",checked:ne.notify_users,onChange:e=>de((s=>n(i({},s),{notify_users:e.target.checked}))),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),m.jsx("span",{className:"text-sm text-gray-700",children:"ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é€šçŸ¥"})]})]}),m.jsxs("div",{className:"flex justify-end space-x-3",children:[m.jsx(h,{type:"button",variant:"secondary",onClick:()=>ie(!1),children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"}),m.jsx(h,{type:"submit",isLoading:xe,className:"bg-blue-600 hover:bg-blue-700",children:"ä½œæˆ"})]})]})]}),m.jsx("div",{className:"space-y-4",children:0===ae.length?m.jsxs("div",{className:"text-center py-8 text-gray-500",children:[m.jsx(R,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),m.jsx("p",{className:"text-lg font-medium mb-2",children:"ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹äºˆå®šãŒã‚ã‚Šã¾ã›ã‚“"}),m.jsx("p",{className:"text-sm",children:"æ–½è¨­ã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹äºˆå®šã‚’è¿½åŠ ã—ã¦ãã ã•ã„"})]}):ae.map((e=>{const s=(e=>{const s=new Date,t=new Date(e.start_date),l=new Date(e.end_date);return"cancelled"===e.status?{status:"cancelled",label:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ¸ˆã¿",color:"bg-gray-500"}:"completed"===e.status?{status:"completed",label:"å®Œäº†",color:"bg-gray-500"}:s>=t&&s<l?{status:"active",label:"ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­",color:"bg-red-500"}:s<t?{status:"scheduled",label:"äºˆå®š",color:"bg-yellow-500"}:{status:"completed",label:"å®Œäº†",color:"bg-gray-500"}})(e);return m.jsx(o,{className:"p-4",children:m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[m.jsx("h3",{className:"font-semibold text-lg",children:e.title}),m.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium text-white ${s.color}`,children:s.label}),e.is_emergency&&m.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"ç·Šæ€¥"})]}),e.description&&m.jsx("p",{className:"text-gray-600 mb-3",children:e.description}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"é–‹å§‹:"})," ",ye(e.start_date)]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"çµ‚äº†:"})," ",ye(e.end_date)]})]})]}),m.jsx("div",{className:"flex items-center space-x-2",children:"scheduled"===e.status&&m.jsx(h,{size:"sm",variant:"secondary",onClick:()=>{return s=e.id,d(null,null,(function*(){if(window.confirm("ã“ã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ"))try{const{error:e}=yield u.from("park_maintenance").delete().eq("id",s);if(e)throw e;U("ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚"),yield Ne()}catch(e){w("ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}}));var s},className:"text-red-600 hover:text-red-800",children:m.jsx(M,{className:"w-4 h-4"})})})]})},e.id)}))}),m.jsx("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg",children:m.jsxs("div",{className:"flex items-start space-x-3",children:[m.jsx(_,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),m.jsxs("div",{className:"text-sm text-yellow-800",children:[m.jsx("p",{className:"font-medium mb-1",children:"ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ©Ÿèƒ½ã«ã¤ã„ã¦"}),m.jsxs("ul",{className:"space-y-1",children:[m.jsx("li",{children:"â€¢ ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­ã¯æ–°è¦äºˆç´„ã‚’å—ã‘ä»˜ã‘ã¾ã›ã‚“"}),m.jsx("li",{children:"â€¢ æ—¢å­˜ã®äºˆç´„ãŒã‚ã‚‹å ´åˆã¯äº‹å‰ã«åˆ©ç”¨è€…ã«é€£çµ¡ã—ã¦ãã ã•ã„"}),m.jsx("li",{children:"â€¢ ç·Šæ€¥ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã®å ´åˆã¯å³åº§ã«æ–½è¨­ãŒåˆ©ç”¨åœæ­¢ã«ãªã‚Šã¾ã™"}),m.jsx("li",{children:"â€¢ ãƒ¦ãƒ¼ã‚¶ãƒ¼é€šçŸ¥ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã¨ã€åˆ©ç”¨è€…ã«ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ãŒé€ä¿¡ã•ã‚Œã¾ã™"})]})]})]})})]}),m.jsx(o,{className:"p-6 bg-gray-50",children:m.jsxs("div",{className:"flex items-start space-x-3",children:[m.jsx(q,{className:"w-6 h-6 text-gray-600 mt-1"}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"é‹å–¶ã‚µãƒãƒ¼ãƒˆ"}),m.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[m.jsx("p",{children:"â€¢ è¨­å®šã«é–¢ã™ã‚‹ã”è³ªå•ã¯é‹å–¶äº‹å‹™å±€ã¾ã§ãŠå•ã„åˆã‚ã›ãã ã•ã„"}),m.jsx("p",{children:"â€¢ QRã‚³ãƒ¼ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã®è¨­ç½®ãƒ»è¨­å®šã‚µãƒãƒ¼ãƒˆã‚’æä¾›ã—ã¦ã„ã¾ã™"}),m.jsx("p",{children:"â€¢ é‹å–¶é–‹å§‹å¾Œã‚‚ç¶™ç¶šçš„ãªã‚µãƒãƒ¼ãƒˆã‚’è¡Œã„ã¾ã™"}),m.jsx("p",{children:"â€¢ ğŸ“§ ã‚µãƒãƒ¼ãƒˆçª“å£: info@dogparkjp.com"})]})]})]})})]})]}):m.jsxs("div",{className:"max-w-4xl mx-auto text-center py-12",children:[m.jsx(_,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),m.jsx("h2",{className:"text-2xl font-bold mb-2",children:"ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"}),m.jsx("p",{className:"text-gray-600 mb-6",children:"æŒ‡å®šã•ã‚ŒãŸãƒ‰ãƒƒã‚°ãƒ©ãƒ³ãŒè¦‹ã¤ã‹ã‚‰ãªã„ã‹ã€ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚"}),m.jsx(b,{to:"/owner-dashboard",children:m.jsx(h,{children:"ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚‹"})})]})}export{U as ParkManagement};
