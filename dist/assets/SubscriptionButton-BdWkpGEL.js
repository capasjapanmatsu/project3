import{j as s,B as r}from"./index-rzoKNnex.js";import{r as e,L as i}from"./vendor-Cwmn0chA.js";import{u as a}from"./useStripe-BkPyvvcl.js";import{p as t}from"./stripe-config-03sBkt-B.js";import{C as o}from"./ui-CMSAjam7.js";function c({hasSubscription:c=!1,className:n="",variant:m="primary",size:d="md"}){const{createCheckoutSession:l,loading:p,error:u}=a(),[h,x]=e.useState(!1);return c?s.jsx(i,{to:"/subscription",children:s.jsxs(r,{variant:m,size:d,className:`flex items-center ${n}`,children:[s.jsx(o,{className:("sm"===d?"w-3 h-3":"w-4 h-4")+" mr-1"}),"サブスク管理"]})}):s.jsxs("div",{children:[s.jsxs(r,{onClick:async()=>{x(!1);const s=t.find((s=>"subscription"===s.mode));if(s)try{await l({priceId:s.priceId,mode:"subscription",successUrl:`${window.location.origin}/dashboard?success=true`,cancelUrl:`${window.location.origin}/dashboard?canceled=true`})}catch{x(!0)}},isLoading:p,variant:"primary",size:d,className:`flex items-center bg-purple-600 hover:bg-purple-700 text-white ${n}`,children:[s.jsx(o,{className:("sm"===d?"w-3 h-3":"w-4 h-4")+" mr-1"}),"サブスクに加入"]}),h&&u&&s.jsx("div",{className:"text-xs text-red-600 mt-1",children:u})]})}export{c as S};
