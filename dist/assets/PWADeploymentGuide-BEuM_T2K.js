import{j as e,C as a,B as S}from"./index-fyCrE4_U.js";import{r as o}from"./react-vendor-Co5xHYdE.js";import{R,a6 as g,b2 as A,w as W,b0 as P,Q as q,f as D,h as x,A as T,i as E}from"./ui-vendor-C9ptRAmi.js";import"./supabase-vendor-FDBaXLCh.js";const _=()=>{const[r,l]=o.useState([]),[y,f]=o.useState([]),[n,b]=o.useState("pre-deployment"),[c,u]=o.useState(!1),m=[{id:"manifest-validation",category:"pre-deployment",title:"マニフェストファイルの検証",description:"manifest.jsonが正しく設定され、すべての必須フィールドが含まれているか確認",status:"pending",priority:"high",autoCheck:!0,checkFunction:async()=>{try{const t=await fetch("/manifest.json");if(!t.ok)return!1;const s=await t.json();return!!(s.name&&s.short_name&&s.start_url&&s.icons)}catch{return!1}},actionRequired:"manifest.jsonの必須フィールドを確認してください",resources:[{title:"Web App Manifest MDN",url:"https://developer.mozilla.org/en-US/docs/Web/Manifest"}]},{id:"service-worker-validation",category:"pre-deployment",title:"Service Workerの検証",description:"Service Workerが正しく実装され、キャッシュ戦略が適切に設定されているか確認",status:"pending",priority:"high",autoCheck:!0,checkFunction:async()=>{if(!("serviceWorker"in navigator))return!1;try{return!!await navigator.serviceWorker.getRegistration()}catch{return!1}},actionRequired:"Service Workerの実装を確認してください",resources:[{title:"Service Worker API MDN",url:"https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API"}]},{id:"build-optimization",category:"pre-deployment",title:"ビルド最適化",description:"本番ビルドが成功し、アセットが適切に最適化されているか確認",status:"pending",priority:"high",autoCheck:!1,actionRequired:"npm run buildまたはnpm run build:pwaを実行して確認",resources:[{title:"Vite Production Build",url:"https://vitejs.dev/guide/build.html"}]},{id:"responsive-design",category:"pre-deployment",title:"レスポンシブデザイン",description:"複数のデバイスサイズで適切に表示されるか確認",status:"pending",priority:"medium",autoCheck:!0,checkFunction:async()=>!!document.querySelector('meta[name="viewport"]'),actionRequired:"レスポンシブデザインの確認とテスト",resources:[{title:"Responsive Design MDN",url:"https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Responsive_Design"}]},{id:"accessibility-check",category:"pre-deployment",title:"アクセシビリティ確認",description:"WCAG 2.1ガイドラインに準拠しているか確認",status:"pending",priority:"medium",autoCheck:!0,checkFunction:async()=>{const t=document.querySelectorAll("img");return Array.from(t).filter(i=>i.alt).length===t.length},actionRequired:"アクセシビリティ監査の実行",resources:[{title:"WCAG 2.1 Guidelines",url:"https://www.w3.org/WAI/WCAG21/quickref/"},{title:"axe DevTools",url:"https://www.deque.com/axe/devtools/"}]},{id:"https-setup",category:"deployment",title:"HTTPS設定",description:"本番環境でHTTPS接続が正しく設定されているか確認",status:"pending",priority:"high",autoCheck:!0,checkFunction:async()=>location.protocol==="https:"||location.hostname==="localhost",actionRequired:"本番環境でHTTPS証明書を設定",resources:[{title:"Let's Encrypt",url:"https://letsencrypt.org/"},{title:"Netlify HTTPS",url:"https://docs.netlify.com/domains-https/https-ssl/"}]},{id:"domain-setup",category:"deployment",title:"ドメイン設定",description:"カスタムドメインが正しく設定され、DNSが適切に構成されているか確認",status:"pending",priority:"medium",autoCheck:!1,actionRequired:"DNSレコードの確認とドメイン設定",resources:[{title:"Netlify Domains",url:"https://docs.netlify.com/domains-https/custom-domains/"}]},{id:"cdn-setup",category:"deployment",title:"CDN設定",description:"Content Delivery Networkが適切に設定され、静的アセットが高速配信されているか確認",status:"pending",priority:"medium",autoCheck:!1,actionRequired:"CDN設定の確認と最適化",resources:[{title:"Cloudflare",url:"https://www.cloudflare.com/"},{title:"Netlify CDN",url:"https://docs.netlify.com/domains-https/cdn/"}]},{id:"environment-variables",category:"deployment",title:"環境変数設定",description:"本番環境で必要な環境変数がすべて正しく設定されているか確認",status:"pending",priority:"high",autoCheck:!1,actionRequired:"本番環境の環境変数を確認",resources:[{title:"Netlify Environment Variables",url:"https://docs.netlify.com/configure-builds/environment-variables/"}]},{id:"pwa-installability",category:"post-deployment",title:"PWAインストール可能性",description:"ブラウザでPWAとして認識され、インストールプロンプトが表示されるか確認",status:"pending",priority:"high",autoCheck:!0,checkFunction:async()=>new Promise(t=>{const s=setTimeout(()=>t(!1),3e3);window.addEventListener("beforeinstallprompt",()=>{clearTimeout(s),t(!0)})}),actionRequired:"PWAインストール機能のテスト",resources:[{title:"PWA Install Criteria",url:"https://web.dev/install-criteria/"}]},{id:"offline-functionality",category:"post-deployment",title:"オフライン機能",description:"ネットワーク接続がない状態でも基本機能が動作するか確認",status:"pending",priority:"high",autoCheck:!0,checkFunction:async()=>"caches"in window?(await caches.keys()).length>0:!1,actionRequired:"オフライン機能のテスト",resources:[{title:"Offline Cookbook",url:"https://web.dev/offline-cookbook/"}]},{id:"performance-test",category:"post-deployment",title:"パフォーマンステスト",description:"Lighthouse監査でPWAスコア90以上を達成しているか確認",status:"pending",priority:"medium",autoCheck:!1,actionRequired:"Lighthouse監査の実行",resources:[{title:"Lighthouse",url:"https://developers.google.com/web/tools/lighthouse"},{title:"PageSpeed Insights",url:"https://pagespeed.web.dev/"}]},{id:"cross-browser-test",category:"post-deployment",title:"クロスブラウザテスト",description:"主要ブラウザ（Chrome、Firefox、Safari、Edge）で正常に動作するか確認",status:"pending",priority:"medium",autoCheck:!1,actionRequired:"複数ブラウザでの動作確認",resources:[{title:"BrowserStack",url:"https://www.browserstack.com/"},{title:"Can I Use",url:"https://caniuse.com/"}]},{id:"analytics-setup",category:"monitoring",title:"アナリティクス設定",description:"ユーザー行動とパフォーマンスを追跡するアナリティクスが設定されているか確認",status:"pending",priority:"medium",autoCheck:!1,actionRequired:"Google Analytics等の設定",resources:[{title:"Google Analytics",url:"https://analytics.google.com/"},{title:"Netlify Analytics",url:"https://docs.netlify.com/monitor-sites/analytics/"}]},{id:"error-monitoring",category:"monitoring",title:"エラー監視",description:"JavaScriptエラーやクラッシュを監視するシステムが設定されているか確認",status:"pending",priority:"medium",autoCheck:!1,actionRequired:"エラー監視サービスの設定",resources:[{title:"Sentry",url:"https://sentry.io/"},{title:"LogRocket",url:"https://logrocket.com/"}]},{id:"uptime-monitoring",category:"monitoring",title:"アップタイム監視",description:"サイトの可用性を監視し、ダウンタイムを検知するシステムが設定されているか確認",status:"pending",priority:"low",autoCheck:!1,actionRequired:"アップタイム監視の設定",resources:[{title:"UptimeRobot",url:"https://uptimerobot.com/"},{title:"Pingdom",url:"https://www.pingdom.com/"}]},{id:"performance-monitoring",category:"monitoring",title:"パフォーマンス監視",description:"継続的にパフォーマンスを監視し、劣化を検知するシステムが設定されているか確認",status:"pending",priority:"medium",autoCheck:!1,actionRequired:"パフォーマンス監視の設定",resources:[{title:"Web Vitals",url:"https://web.dev/vitals/"},{title:"Chrome UX Report",url:"https://developers.google.com/web/tools/chrome-user-experience-report"}]}],j=[{name:"Development",url:"http://localhost:5173",status:"inactive"},{name:"Preview/Staging",url:"",status:"inactive"},{name:"Production",url:"",status:"inactive"}],p=async()=>{u(!0);const t=[...m];for(const s of t)if(s.autoCheck&&s.checkFunction)try{const i=await s.checkFunction();s.status=i?"completed":"failed"}catch(i){console.error(`Check failed for ${s.id}:`,i),s.status="failed"}l(t),u(!1)},w=t=>{l(s=>s.map(i=>i.id===t?{...i,status:i.status==="completed"?"pending":"completed"}:i))},N=t=>{switch(t){case"completed":return e.jsx(E,{className:"h-5 w-5 text-green-500"});case"failed":return e.jsx(x,{className:"h-5 w-5 text-red-500"});case"pending":return e.jsx(T,{className:"h-5 w-5 text-yellow-500"});case"not-applicable":return e.jsx(x,{className:"h-5 w-5 text-gray-400"})}},k=t=>{switch(t){case"high":return"border-red-200 bg-red-50";case"medium":return"border-yellow-200 bg-yellow-50";case"low":return"border-green-200 bg-green-50"}},d={"pre-deployment":{name:"デプロイ前チェック",icon:e.jsx(D,{className:"h-4 w-4"})},deployment:{name:"デプロイ",icon:e.jsx(q,{className:"h-4 w-4"})},"post-deployment":{name:"デプロイ後確認",icon:e.jsx(P,{className:"h-4 w-4"})},monitoring:{name:"監視・運用",icon:e.jsx(W,{className:"h-4 w-4"})}},v=()=>r.filter(t=>t.category===n),C=()=>{if(r.length===0)return 0;const t=r.filter(s=>s.status==="completed").length;return Math.round(t/r.length*100)};o.useEffect(()=>{l(m),f(j),p()},[]);const h=C();return e.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"PWA デプロイメントガイド"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Progressive Web Appの本番環境デプロイから運用まで、包括的なチェックリストとガイド"}),e.jsxs(a,{className:"p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"デプロイメント進捗状況"}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 mb-4",children:e.jsx("div",{className:"bg-blue-500 h-4 rounded-full transition-all duration-300",style:{width:`${h}%`}})}),e.jsxs("p",{className:"text-lg font-medium",children:[h,"% 完了 (",r.filter(t=>t.status==="completed").length,"/",r.length,")"]})]}),e.jsx("div",{className:"flex justify-center gap-4 mb-6",children:e.jsxs(S,{onClick:p,disabled:c,className:"flex items-center gap-2",children:[e.jsx(R,{className:`h-4 w-4 ${c?"animate-spin":""}`}),c?"自動チェック実行中...":"自動チェック実行"]})})]}),e.jsxs(a,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"デプロイメント環境"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:y.map(t=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium",children:t.name}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${t.status==="active"?"bg-green-100 text-green-800":t.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:t.status==="active"?"アクティブ":t.status==="pending"?"保留中":"非アクティブ"})]}),t.url&&e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm flex items-center gap-1",children:[t.url,e.jsx(g,{className:"h-3 w-3"})]}),t.issues&&t.issues.length>0&&e.jsx("div",{className:"mt-2",children:e.jsxs("p",{className:"text-red-600 text-xs",children:["問題: ",t.issues.join(", ")]})})]},t.name))})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"flex bg-gray-100 rounded-lg p-1 overflow-x-auto",children:Object.entries(d).map(([t,s])=>e.jsxs("button",{onClick:()=>b(t),className:`flex items-center gap-2 px-4 py-2 rounded-md transition-colors whitespace-nowrap ${n===t?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[s.icon,e.jsx("span",{className:"hidden sm:inline",children:s.name})]},t))})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-xl font-semibold flex items-center gap-2",children:[d[n].icon,d[n].name]}),v().map(t=>e.jsx(a,{className:`p-6 border-2 ${k(t.priority)}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("button",{onClick:()=>w(t.id),className:"mt-1",disabled:t.autoCheck,children:N(t.status)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.autoCheck&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"自動チェック"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${t.priority==="high"?"bg-red-100 text-red-800":t.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:t.priority==="high"?"高":t.priority==="medium"?"中":"低"})]})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-3",children:t.description}),t.actionRequired&&e.jsx("div",{className:"bg-white bg-opacity-70 border border-gray-200 rounded-md p-3 mb-3",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"必要なアクション:"})," ",t.actionRequired]})}),t.resources&&t.resources.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:t.resources.map((s,i)=>e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-800 underline flex items-center gap-1",children:[s.title,e.jsx(g,{className:"h-3 w-3"})]},i))})]})]})},t.id))]}),e.jsxs(a,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5"}),"次のステップ"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"デプロイメント完了後"}),e.jsxs("ul",{className:"space-y-1 text-gray-600",children:[e.jsx("li",{children:"• 定期的なLighthouse監査の実行"}),e.jsx("li",{children:"• パフォーマンス指標の監視"}),e.jsx("li",{children:"• ユーザーフィードバックの収集"}),e.jsx("li",{children:"• セキュリティ更新の適用"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"継続的改善"}),e.jsxs("ul",{className:"space-y-1 text-gray-600",children:[e.jsx("li",{children:"• 新機能の段階的ロールアウト"}),e.jsx("li",{children:"• A/Bテストの実施"}),e.jsx("li",{children:"• キャッシュ戦略の最適化"}),e.jsx("li",{children:"• PWA機能の拡張"})]})]})]})]})]})};export{_ as default};
