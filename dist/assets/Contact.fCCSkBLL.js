var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,m=(s,a,t)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,i=(e,s)=>{for(var a in s||(s={}))r.call(s,a)&&m(e,a,s[a]);if(t)for(var a of t(s))l.call(s,a)&&m(e,a,s[a]);return e},c=(e,t)=>s(e,a(t));import{j as n,C as d,B as x,s as o}from"./index.D9xag4tn.js";import{r as h,L as j}from"./router.BWT_vQps.js";import{I as u}from"./Input.tFQgyGuP.js";import{A as b,a as p,a9 as g,p as N,U as f,M as v,av as w,b as y}from"./ui.BPlS2KKq.js";import"./vendor.D1SiiUJb.js";import"./supabase.CZ8ekJUM.js";function O(){const[e,s]=h.useState({name:"",email:"",subject:"",message:""}),[a,t]=h.useState(!1),[r,l]=h.useState(""),[m,O]=h.useState(!1);return n.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[n.jsx("div",{className:"mb-8",children:n.jsxs(j,{to:"/",className:"inline-flex items-center text-blue-600 hover:text-blue-800",children:[n.jsx(b,{className:"w-4 h-4 mr-2"}),"ホームに戻る"]})}),n.jsxs("div",{className:"text-center mb-12",children:[n.jsx("h1",{className:"text-3xl font-bold mb-4",children:"お問い合わせ"}),n.jsx("p",{className:"text-gray-600",children:"ご質問やご意見がございましたら、お気軽にお問い合わせください。"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(d,{className:"p-6",children:m?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(p,{className:"w-8 h-8 text-green-600"})}),n.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"お問い合わせありがとうございます"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"メッセージを受け付けました。担当者が確認次第、ご連絡いたします。"}),n.jsx(x,{onClick:()=>O(!1),children:"新しいお問い合わせ"})]}):n.jsxs("form",{onSubmit:a=>{return r=null,m=null,i=function*(){a.preventDefault(),t(!0),l("");try{if(!e.name.trim())throw new Error("お名前を入力してください");if(!e.email.trim())throw new Error("メールアドレスを入力してください");if(!e.subject.trim())throw new Error("件名を入力してください");if(!e.message.trim())throw new Error("メッセージを入力してください");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email))throw new Error("有効なメールアドレスを入力してください");const{error:a}=yield o.from("contact_messages").insert([{name:e.name,email:e.email,subject:e.subject,message:e.message,status:"new"}]);if(a)throw a;const{error:t}=yield o.from("admin_notifications").insert([{type:"user_report",title:"お問い合わせがありました",message:`${e.name}さんからのお問い合わせ: ${e.subject}`,data:{email:e.email}}]);O(!0),s({name:"",email:"",subject:"",message:""})}catch(r){l(r.message||"送信に失敗しました")}finally{t(!1)}},new Promise(((e,s)=>{var t=e=>{try{c(i.next(e))}catch(a){s(a)}},l=e=>{try{c(i.throw(e))}catch(a){s(a)}},c=s=>s.done?e(s.value):Promise.resolve(s.value).then(t,l);c((i=i.apply(r,m)).next())}));var r,m,i},children:[n.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[n.jsx(g,{className:"w-6 h-6 text-blue-600 mr-2"}),"お問い合わせフォーム"]}),r&&n.jsxs("div",{className:"mb-6 p-4 bg-red-50 rounded-lg flex items-start",children:[n.jsx(N,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),n.jsx("p",{className:"text-red-800",children:r})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(u,{label:"お名前 *",value:e.name,onChange:a=>s(c(i({},e),{name:a.target.value})),required:!0,icon:n.jsx(f,{className:"w-4 h-4 text-gray-500"})}),n.jsx(u,{label:"メールアドレス *",type:"email",value:e.email,onChange:a=>s(c(i({},e),{email:a.target.value})),required:!0,icon:n.jsx(v,{className:"w-4 h-4 text-gray-500"})}),n.jsx(u,{label:"件名 *",value:e.subject,onChange:a=>s(c(i({},e),{subject:a.target.value})),required:!0}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"メッセージ *"}),n.jsx("textarea",{value:e.message,onChange:a=>s(c(i({},e),{message:a.target.value})),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsx("div",{className:"mt-6",children:n.jsxs(x,{type:"submit",isLoading:a,className:"w-full",children:[n.jsx(w,{className:"w-4 h-4 mr-2"}),"送信する"]})})]})]})})}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs(d,{className:"p-6",children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[n.jsx(v,{className:"w-5 h-5 text-blue-600 mr-2"}),"お問い合わせ先"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(v,{className:"w-5 h-5 text-gray-500 mt-1"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"メール"}),n.jsx("p",{className:"text-gray-600",children:"info@dogparkjp.com"})]})]}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(y,{className:"w-5 h-5 text-gray-500 mt-1"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"住所"}),n.jsxs("p",{className:"text-gray-600",children:["〒861-0563",n.jsx("br",{}),"熊本県山鹿市鹿央町千田１７１８－１３",n.jsx("br",{}),"株式会社ＣＡＰＡＳ"]})]})]})]})]}),n.jsxs(d,{className:"p-6 bg-blue-50 border-blue-200",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-900",children:"よくあるお問い合わせ"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm",children:[n.jsx("p",{className:"font-medium text-blue-900",children:"Q: サブスクリプションの解約方法は？"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"A: マイページの「サブスクリプション管理」から解約手続きができます。"})]}),n.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm",children:[n.jsx("p",{className:"font-medium text-blue-900",children:"Q: ワクチン証明書の承認にはどれくらい時間がかかりますか？"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"A: 通常3営業日以内に審査を完了します。"})]}),n.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm",children:[n.jsx("p",{className:"font-medium text-blue-900",children:"Q: 予約のキャンセルはいつまでできますか？"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"A: 予約時間の24時間前までキャンセル可能です。"})]}),n.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm",children:[n.jsx("p",{className:"font-medium text-blue-900",children:"Q: ドッグランオーナーになるには？"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"A: マイページから「ドッグラン登録」を選択し、審査を受けてください。"})]})]})]})]})]})]})}export{O as Contact};
