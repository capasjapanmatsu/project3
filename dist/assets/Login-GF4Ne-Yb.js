import{u as e,c as s,j as a,B as t,d as l}from"./index-Dp3tQatg.js";import{r}from"./vendor-Cwmn0chA.js";import{C as m}from"./Card-CPEZwr97.js";import{I as i}from"./Input-BBpqNzSy.js";import{M as c,l as x,A as n}from"./ui-BHmKMuva.js";import"./supabase-Dzr8oIt2.js";function d(){const{signInWithMagicLink:d}=e(),[h,o]=r.useState(!1),[j,u]=r.useState(""),[b,p]=r.useState("");r.useEffect((()=>{const e=s("lastUsedEmail");e&&p(e)}),[]);return a.jsxs("div",{className:"max-w-md mx-auto",children:[a.jsx("h1",{className:"text-2xl font-bold text-center mb-8",children:"ログイン"}),a.jsx(m,{children:a.jsxs("form",{onSubmit:async e=>{e.preventDefault(),o(!0),u("");try{l("lastUsedEmail",b);const{error:e}=await d(b);if(e)throw new Error(e);alert("ログインリンクを送信しました。メールをご確認ください。")}catch(s){u(s.message||"ログインリンクの送信に失敗しました。メールアドレスを確認してください。")}finally{o(!1)}},className:"p-6",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx(c,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Magic Linkでログイン"}),a.jsx("p",{className:"text-gray-600",children:"メールアドレスを入力するだけで、ドッグパークJPにログインできます。"})]}),j&&a.jsxs("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg flex items-start",children:[a.jsx(x,{className:"w-5 h-5 mr-2 flex-shrink-0 mt-0.5"}),a.jsx("p",{children:j})]}),a.jsx(i,{label:"メールアドレス",type:"email",value:b,onChange:e=>p(e.target.value),required:!0,icon:a.jsx(c,{className:"w-4 h-4 text-gray-500"}),placeholder:"example@email.com"}),a.jsxs(t,{type:"submit",isLoading:h,className:"w-full mt-4 bg-blue-600 hover:bg-blue-700",children:[a.jsx(c,{className:"w-4 h-4 mr-2"}),"ログインリンクを送信",a.jsx(n,{className:"w-4 h-4 ml-2"})]}),a.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(c,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Magic Linkとは？"}),a.jsx("p",{children:"パスワードを覚える必要がなく、メールに送信されたリンクをクリックするだけで安全にログインできる便利な認証方法です。"}),a.jsxs("ul",{className:"mt-2 space-y-1",children:[a.jsx("li",{children:"• パスワードを忘れる心配なし"}),a.jsx("li",{children:"• より安全なログイン体験"}),a.jsx("li",{children:"• ワンクリックでログイン完了"})]})]})]})}),a.jsx("div",{className:"mt-4 text-center",children:a.jsxs("p",{className:"text-sm text-gray-600",children:["アカウントをお持ちでない方は"," ",a.jsx("a",{href:"/register",className:"text-blue-600 hover:text-blue-700 font-medium",children:"こちらから新規登録"})]})})]})})]})}export{d as Login};
