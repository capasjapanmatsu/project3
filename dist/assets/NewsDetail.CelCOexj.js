import{s as e,j as s,C as a,B as t}from"./index.oOj2R_C7.js";import{d as l,u as r,r as n,L as c}from"./router.icJHpBzt.js";import{Y as m,A as i,q as x,aU as o,n as d,e as u,F as h,l as j,m as b}from"./ui.UnEvinBv.js";import"./vendor.D1SiiUJb.js";import"./supabase.CZ8ekJUM.js";function p(){const{newsId:p}=l(),N=r(),[f,w]=n.useState(null),[g,v]=n.useState(!0),[y,_]=n.useState("");n.useEffect((()=>{p&&k()}),[p]);const k=()=>{return s=null,a=null,t=function*(){try{v(!0);const{data:s,error:a}=yield e.from("news_announcements").select("*").eq("id",p).single();if(a)throw a;w(s)}catch(s){_("新着情報の取得に失敗しました。")}finally{v(!1)}},new Promise(((e,l)=>{var r=e=>{try{c(t.next(e))}catch(s){l(s)}},n=e=>{try{c(t.throw(e))}catch(s){l(s)}},c=s=>s.done?e(s.value):Promise.resolve(s.value).then(r,n);c((t=t.apply(s,a)).next())}));var s,a,t};return g?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):y||!f?s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsx("div",{className:"mb-6",children:s.jsxs(c,{to:"/news",className:"flex items-center text-blue-600 hover:text-blue-800",children:[s.jsx(m,{className:"w-4 h-4 mr-2"}),"新着情報一覧に戻る"]})}),s.jsxs(a,{className:"p-6 text-center",children:[s.jsx(i,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-4",children:y||"お知らせが見つかりませんでした"}),s.jsx(t,{onClick:()=>N("/news"),children:"新着情報一覧に戻る"})]})]}):s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsx("div",{className:"mb-6",children:s.jsxs(c,{to:"/news",className:"flex items-center text-blue-600 hover:text-blue-800",children:[s.jsx(m,{className:"w-4 h-4 mr-2"}),"新着情報一覧に戻る"]})}),s.jsxs(a,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-1 ${P=f.category,{news:"bg-blue-100 text-blue-800",announcement:"bg-red-100 text-red-800",sale:"bg-green-100 text-green-800"}[P]||"bg-gray-100 text-gray-800"}`,children:[(e=>{switch(e){case"news":default:return s.jsx(h,{className:"w-4 h-4"});case"announcement":return s.jsx(b,{className:"w-4 h-4"});case"sale":return s.jsx(j,{className:"w-4 h-4"})}})(f.category),s.jsx("span",{className:"ml-1",children:(e=>({news:"お知らせ",announcement:"重要なお知らせ",sale:"セール情報"}[e]||e))(f.category)})]}),f.is_important&&s.jsx("span",{className:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium",children:"重要"}),s.jsxs("div",{className:"flex items-center text-gray-500 text-sm ml-auto",children:[s.jsx(x,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:(S=f.created_at,new Date(S).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}))})]})]}),s.jsx("h1",{className:"text-2xl font-bold mb-6",children:f.title}),f.image_url&&s.jsx("div",{className:"mb-6",children:s.jsx("img",{src:f.image_url,alt:f.title,className:"w-full h-auto rounded-lg object-cover",onError:e=>{e.currentTarget.src="https://images.pexels.com/photos/1108099/pexels-photo-1108099.jpeg"}})}),s.jsx("div",{className:"prose max-w-none mb-6",children:f.content.split("\n").map(((e,a)=>s.jsx("p",{className:"mb-4",children:e},a)))}),f.link_url&&s.jsx("div",{className:"mt-6",children:s.jsxs("a",{href:f.link_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-blue-600 hover:text-blue-800",children:["詳細を見る",s.jsx(o,{className:"w-4 h-4 ml-1"})]})}),f.park_id&&s.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[s.jsxs("h3",{className:"font-semibold text-blue-900 mb-2 flex items-center",children:[s.jsx(d,{className:"w-5 h-5 text-blue-600 mr-2"}),"関連施設"]}),s.jsxs(c,{to:`/parks/${f.park_id}`,className:"inline-flex items-center text-blue-600 hover:text-blue-800 mt-2",children:[s.jsx(u,{className:"w-4 h-4 mr-1"}),"施設詳細を見る"]})]})]})]});var S,P}export{p as NewsDetail};
